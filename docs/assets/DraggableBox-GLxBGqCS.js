import{C as Ae,E as c,I as lt,O as de,P as ie,R as C,S as oe,_ as it,c as O,ct as Z,d as A,f,h as ot,k as at,l as k,lt as ae,o as q,st as _,u as Le,w as Be}from"./codemirror-B25QCqWr.js";import{h as se,p as st}from"./vendor-vue-C93_ecI2.js";import{t as rt}from"./index-BvtxZ7eM.js";import{t as ut}from"./echarts-xBohgwka.js";var ct=["data-el-id","data-box-id"],dt={key:0,class:"absolute -inset-1 bg-gradient-to-r from-cyan-400/20 to-blue-500/20 rounded-lg blur-sm -z-10"},ft={class:"relative z-10 w-full h-full"},mt={key:0,class:"relative w-full h-full"},ht={key:1,class:"relative w-full h-full"},yt={key:0},gt={key:3,class:"w-full h-full relative overflow-hidden group"},vt={key:0,class:"absolute inset-0 z-0 pointer-events-none"},bt=["src"],wt={key:1,class:"absolute inset-0 flex items-center justify-center z-10"},xt={class:"relative w-full h-full flex items-center justify-center"},pt=["src"],St={key:0,class:"absolute inset-0 pointer-events-none flex items-center justify-center"},Mt=["src"],kt=["src"],zt=["src"],Ct=["src"],Nt=["width","height"],Lt=["id","d"],Bt=["href","startOffset","text-anchor"],jt=["id"],Ft=["id"],It={key:0,class:"w-full h-full flex items-center justify-center text-xs text-gray-400 pointer-events-none"},Ot=["width","height"],$t=["x1","y1","x2","y2","stroke","stroke-width","stroke-dasharray"],At={key:1,class:"absolute inset-0 rounded-lg",style:{background:"linear-gradient(45deg, transparent 30%, rgba(6, 182, 212, 0.1) 50%, transparent 70%)","background-size":"200% 200%",animation:"tech-border 2s linear infinite"}},Dt={key:2,class:"absolute -top-2 -right-2 w-4 h-4 bg-cyan-400 rounded-full cursor-move opacity-80 hover:opacity-100",style:{border:"0.5px solid #111827"}},Tt=it({name:"DraggableBox",__name:"DraggableBox",props:{element:{},selected:{type:Boolean},config:{},zoom:{},dbMap:{},metricsMap:{},preview:{type:Boolean},selectedId:{},parentOffset:{},parentSize:{},parentIsFlex:{type:Boolean}},emits:["update:position","update:size","select","show-guidelines","hide-guidelines","report-metrics","drag-end"],setup(l,{emit:De}){const e=l,x=De;function Te(t){var u,g,v,b;if(e.element.type!=="group")return!1;const n=e.element.width||0,s=e.element.height||0,i=t.width||0,o=t.height||0,a=Number((g=(u=t.left)!=null?u:t.x)!=null?g:0),r=Number((b=(v=t.top)!=null?v:t.y)!=null?b:0);return t.type==="image"&&n>0&&s>0&&i===n&&o===s&&a===0&&r===0}const V=C(null),xe=C(null);let L=null;const fe=C(!1),me=C(!1),re=C(0),ue=C(0),ee=C(0),te=C(0),pe=C({x:0,y:0}),B=C(null),j=C(null),P=C(null),ne=C(0),le=C(0),J=C(null);let W=null;function je(t){var n;return!t||!t.colors||t.colors.length<2?null:`linear-gradient(${(n=t.angle)!=null?n:0}deg, ${t.colors.join(", ")})`}function Se(){var t,n,s;if(e.element.type==="text"&&e.element.autoSize!==!1&&V.value){const i=V.value.getBoundingClientRect(),o=(t=e.zoom)!=null?t:1;return{w:Math.max(1,i.width/o),h:Math.max(1,i.height/o)}}return{w:(n=e.element.width)!=null?n:1,h:(s=e.element.height)!=null?s:1}}function Xe(t){e.preview||(t.preventDefault(),x("select",e.element.id),(e.element.position||(e.parentIsFlex?"static":"absolute"))!=="static"&&(fe.value=!0,me.value=!1,re.value=t.clientX,ue.value=t.clientY,ee.value=e.element.left,te.value=e.element.top,pe.value={x:0,y:0},window.addEventListener("mousemove",Me,{passive:!1}),window.addEventListener("mouseup",he)))}function Re(t){e.preview||(t.stopPropagation(),Xe(t))}function Ye(t){e.preview||t.stopPropagation()}function Me(t){var G,U;if(P.value||!fe.value)return;if(!me.value){if(Math.abs(t.clientX-re.value)<3&&Math.abs(t.clientY-ue.value)<3)return;me.value=!0}t.preventDefault();const n=(t.clientX-re.value)/((G=e.zoom)!=null?G:1),s=(t.clientY-ue.value)/((U=e.zoom)!=null?U:1);pe.value={x:n,y:s};let i=ee.value+n,o=te.value+s;const a=Se(),r=!!e.parentSize,u=5,g=e.config.width,v=e.config.height;if(!r){Math.abs(i)<u&&(i=0),Math.abs(o)<u&&(o=0),Math.abs(i+a.w-g)<u&&(i=g-a.w),Math.abs(o+a.h-v)<u&&(o=v-a.h);const h=g/2,w=v/2,D=i+a.w/2,T=o+a.h/2;Math.abs(D-h)<u&&(i=h-a.w/2),Math.abs(T-w)<u&&(o=w-a.h/2)}const b=e.metricsMap?Object.values(e.metricsMap).filter(h=>h.id!==e.element.id):[],p=1.5,S=4;if(B.value){const h=i+a.w/2;let w=0;B.value.type==="left"?w=Math.abs(i-B.value.base):B.value.type==="right"?w=Math.abs(i+a.w-B.value.base):w=Math.abs(h-B.value.base),w<=S?B.value.type==="left"?i=B.value.base:B.value.type==="right"?i=B.value.base-a.w:i=B.value.base-a.w/2:B.value=null}if(j.value){const h=o+a.h/2;let w=0;j.value.type==="top"?w=Math.abs(o-j.value.base):j.value.type==="bottom"?w=Math.abs(o+a.h-j.value.base):w=Math.abs(h-j.value.base),w<=S?j.value.type==="top"?o=j.value.base:j.value.type==="bottom"?o=j.value.base-a.h:o=j.value.base-a.h/2:j.value=null}let y=null;for(const h of b){const w=Math.abs(i-h.left),D=Math.abs(i+a.w-h.right),T=Math.abs(i+a.w/2-h.centerX),E=[{type:"left",base:h.left,dist:w},{type:"right",base:h.right,dist:D},{type:"centerX",base:h.centerX,dist:T}];for(const X of E)(!y||X.dist<y.dist)&&(y=X)}y&&y.dist<=p&&(y.type==="left"?i=y.base:y.type==="right"?i=y.base-a.w:i=y.base-a.w/2,B.value={type:y.type,base:y.base});let m=null;for(const h of b){const w=Math.abs(o-h.top),D=Math.abs(o+a.h-h.bottom),T=Math.abs(o+a.h/2-h.centerY),E=[{type:"top",base:h.top,dist:w},{type:"bottom",base:h.bottom,dist:D},{type:"centerY",base:h.centerY,dist:T}];for(const X of E)(!m||X.dist<m.dist)&&(m=X)}m&&m.dist<=p&&(m.type==="top"?o=m.base:m.type==="bottom"?o=m.base-a.h:o=m.base-a.h/2,j.value={type:m.type,base:m.base}),r||(i=Math.max(0,Math.min(i,e.config.width-a.w)),o=Math.max(0,Math.min(o,e.config.height-a.h)));const M=r&&e.parentOffset?e.parentOffset.left:0,N=r&&e.parentOffset?e.parentOffset.top:0,F=i+M,I=o+N,R=i+a.w+M,Y=o+a.h+N,K=i+a.w/2+M,Q=o+a.h/2+N;x("show-guidelines",{left:F,top:I,right:R,bottom:Y,centerX:K,centerY:Q}),W&&cancelAnimationFrame(W),J.value={id:e.element.id,left:Math.round(i),top:Math.round(o)},W=requestAnimationFrame(()=>{J.value&&(x("update:position",J.value),J.value=null)})}function he(){var t;if(fe.value&&me.value){J.value&&(x("update:position",J.value),J.value=null);const n=(t=V.value)==null?void 0:t.getBoundingClientRect();n&&x("drag-end",{id:e.element.id,globalLeft:n.left,globalTop:n.top})}fe.value=!1,P.value=null,pe.value={x:0,y:0},B.value=null,j.value=null,x("hide-guidelines"),W&&(cancelAnimationFrame(W),W=null),window.removeEventListener("mousemove",Me),window.removeEventListener("mouseup",he),window.removeEventListener("mousemove",ze)}Ae(()=>{W&&(cancelAnimationFrame(W),W=null),window.removeEventListener("mousemove",Me),window.removeEventListener("mouseup",he),window.removeEventListener("mousemove",ze),L&&(L.dispose(),L=null)});const ye=O(()=>e.element.type==="text"?e.element.autoSize!==!1:e.element.type==="image"?e.element.autoSize===!0:!1);function We(t){switch(t){case"left":return"flex-start";case"center":return"center";case"right":return"flex-end";case"justify":return"flex-start";default:return"flex-start"}}const Ee=O(()=>{var s,i,o,a,r,u,g,v,b,p,S,y,m;const t={color:((s=e.element.style)==null?void 0:s.color)||e.config.globalColor,fontFamily:((i=e.element.style)==null?void 0:i.fontFamily)||e.config.globalFontFamily,fontSize:`${(a=(o=e.element.style)==null?void 0:o.fontSize)!=null?a:e.config.globalFontSize}px`};((r=e.element.style)==null?void 0:r.letterSpacing)!==void 0&&e.element.style.letterSpacing!==null&&(t.letterSpacing=`${e.element.style.letterSpacing}px`),((u=e.element.style)==null?void 0:u.lineHeight)!==void 0&&(t.lineHeight=String(e.element.style.lineHeight)),(g=e.element.style)!=null&&g.fontStyle&&(t.fontStyle=e.element.style.fontStyle),(v=e.element.style)!=null&&v.fontWeight&&(t.fontWeight=e.element.style.fontWeight),(b=e.element.style)!=null&&b.textAlign&&(t.textAlign=e.element.style.textAlign),(p=e.element.style)!=null&&p.textDecoration&&(t.textDecoration=e.element.style.textDecoration),((S=e.element.style)==null?void 0:S.textOrientation)==="vertical"&&(t.writingMode="vertical-rl",t.textOrientation="upright"),(y=e.element.style)!=null&&y.textIndent&&(t.textIndent=String(e.element.style.textIndent));const n=je((m=e.element.style)==null?void 0:m.textGradient);return n&&(t.background=n,t.color="transparent",t["-webkit-background-clip"]="text",t["background-clip"]="text",t["-webkit-text-fill-color"]="transparent"),t}),Pe=O(()=>{var n;const t=(n=e.element.style)==null?void 0:n.display;return t==="flex"||t==="inline-flex"}),He=O(()=>{var u,g,v,b,p,S,y,m,M,N,F,I;const t=e.element.position||(e.parentIsFlex?"static":"absolute"),n={position:t,cursor:e.preview?((u=e.element.eventBinding)==null?void 0:u.enabled)&&((g=e.element.eventBinding)==null?void 0:g.cursor)||"default":t==="static"?"default":"move",outline:e.preview?"none":e.selected?"0.5px solid #42b883":"0.5px solid #999",zIndex:`${(v=e.element.zIndex)!=null?v:1}`,boxSizing:"border-box"};t==="absolute"?(n.left=`${e.element.left}px`,n.top=`${e.element.top}px`):t==="relative"&&(e.element.left&&(n.left=`${e.element.left}px`),e.element.top&&(n.top=`${e.element.top}px`));const s=je((b=e.element.style)==null?void 0:b.backgroundGradient);s?n.background=s:n.background=((p=e.element.style)==null?void 0:p.backgroundColor)||"transparent",ye.value?n.display="inline-block":(n.width=`${(S=e.element.width)!=null?S:1}px`,n.height=`${(y=e.element.height)!=null?y:1}px`,n.display="block"),((m=e.element.style)==null?void 0:m.opacity)!==void 0&&(n.opacity=String(e.element.style.opacity));const i="1px dashed rgba(148,163,184,0.6)",o=(M=e.element.style)==null?void 0:M.border;o&&o!==i?n.border=o:e.element.type==="container"&&!e.preview?n.border=i:e.preview&&(n.border="none"),(N=e.element.style)!=null&&N.borderRadius&&(n.borderRadius=e.element.style.borderRadius),(F=e.element.style)!=null&&F.boxShadow&&(n.boxShadow=String(e.element.style.boxShadow));const a=(I=e.element.style)==null?void 0:I.skewAngle,r=typeof a=="number"?a:Number(a);return!Number.isNaN(r)&&r!==0&&(n.transform=`skewX(${r}deg)`),n}),Ge=O(()=>e.preview?["select-none","border-none","outline-none"]:["cursor-move select-none transition-shadow duration-100","border-transparent hover:border-cyan-400/50","hover:shadow-lg hover:shadow-cyan-400/20","group",{"border-cyan-400 shadow-lg shadow-cyan-400/30 ring-2 ring-cyan-400/20":e.selected}]),Ue=O(()=>{var n;const t={...Ee.value,pointerEvents:e.preview?"auto":"none"};return ye.value?(t.display="flex",t.alignItems="center",t.justifyContent=We((n=e.element.style)==null?void 0:n.textAlign)):(t.display="block",t.whiteSpace="pre-wrap",t.wordBreak="break-word",t.overflow="hidden"),t}),qe=O(()=>{var n,s,i,o,a,r;const t={};return(n=e.element.style)!=null&&n.fontFamily&&(t.fontFamily=String(e.element.style.fontFamily)),((s=e.element.style)==null?void 0:s.fontSize)!==void 0&&(t.fontSize=`${e.element.style.fontSize}px`),(i=e.element.style)!=null&&i.color&&(t.fill=String(e.element.style.color)),((o=e.element.style)==null?void 0:o.letterSpacing)!==void 0&&(t.letterSpacing=`${e.element.style.letterSpacing}px`),(a=e.element.style)!=null&&a.fontWeight&&(t.fontWeight=String(e.element.style.fontWeight)),(r=e.element.style)!=null&&r.fontStyle&&(t.fontStyle=String(e.element.style.fontStyle)),t}),Ve=O(()=>{var M,N,F,I,R,Y;const t=Math.max(1,Number((M=e.element.width)!=null?M:1)),n=Math.max(1,Number((N=e.element.height)!=null?N:1)),s=t/2,i=n/2,o=((F=e.element.style)==null?void 0:F.arcText)||{},a=Math.max(1,Number((I=o.radius)!=null?I:Math.min(t,n)/2-4)),r=Number((R=o.startAngle)!=null?R:0),u=Math.max(0,Number((Y=o.sweepAngle)!=null?Y:180)),g=o.clockwise!==!1,v=r*Math.PI/180,b=(r+u)*Math.PI/180,p=s+a*Math.cos(v),S=i+a*Math.sin(v),y=s+a*Math.cos(b),m=i+a*Math.sin(b);return`M ${p} ${S} A ${a} ${a} 0 ${u>180?1:0} ${g?1:0} ${y} ${m}`}),Je=O(()=>{var n;const t=((n=e.element.style)==null?void 0:n.textAlign)||"center";return t==="left"?"0%":t==="right"?"100%":"50%"}),Ke=O(()=>{var n;const t=((n=e.element.style)==null?void 0:n.textAlign)||"center";return t==="left"?"start":t==="right"?"end":"middle"});function ke(){var b,p,S;const t=(b=e.zoom)!=null?b:1,n=V.value?V.value.getBoundingClientRect():null,s=n?Math.max(1,n.width/t):(p=e.element.width)!=null?p:1,i=n?Math.max(1,n.height/t):(S=e.element.height)!=null?S:1,o=e.element.left,a=e.element.top,r=o+s,u=a+i,g=o+s/2,v=a+i/2;x("report-metrics",{id:e.element.id,left:o,top:a,width:s,height:i,right:r,bottom:u,centerX:g,centerY:v})}Be(()=>{oe(()=>ke())}),ie(()=>[e.element.left,e.element.top,e.element.width,e.element.height],()=>{oe(()=>ke())});function Fe(t,n){if(!t||!n)return;const s=n.replace(/\[(\d+)\]/g,".$1").split(".").filter(Boolean);let i=t;for(const o of s){if(i==null)return;i=i[Number.isInteger(Number(o))?Number(o):o]}return i}const ge=O(()=>{var r,u;if(e.element.type!=="text"){const g=e.element.text;return g==null?"":String(g)}const t=e.element.dynamic,n=(r=e.element.text)!=null?r:"";if(!t||!t.enabled)return String(n);const s=t.objectName||"",i=t.propertyPath||"";if(!s||!i)return String(n);const o=(u=e.dbMap)==null?void 0:u[s];if(!o)return String(n);const a=Fe(o,i);if(a==null)return String(n);if(typeof a=="string")return a;if(typeof a=="number"||typeof a=="boolean")return String(a);try{return JSON.stringify(a)}catch{return String(n)}});function Qe(t){var n;if(t.dynamic&&t.dynamicObj&&t.dynamicPath){const s=Fe((n=e.dbMap)==null?void 0:n[t.dynamicObj],t.dynamicPath);return s!=null?String(s):t.text||""}return t.text||""}function Ze(t){const n={};return t.style&&(t.style.color&&(n.color=t.style.color),t.style.fontSize&&(n.fontSize=`${t.style.fontSize}px`),t.style.fontWeight&&(n.fontWeight=String(t.style.fontWeight)),t.style.fontFamily&&(n.fontFamily=t.style.fontFamily),t.style.textDecoration&&(n.textDecoration=t.style.textDecoration)),n}const Ie=O(()=>{var R,Y,K,Q,G,U,h,w,D,T,E,X,d;const t=String(ge.value||""),n=(R=e.element.style)==null?void 0:R.textWave,s=!!((Y=e.element.style)!=null&&Y.skewFlowEnabled),i=(K=e.element.style)==null?void 0:K.skewAngle,o=typeof i=="number"?i:Number(i);if((!n||!n.enabled)&&(!s||Number.isNaN(o)||o===0))return null;const a=((Q=e.element.style)==null?void 0:Q.textOrientation)||"horizontal",r=Number((U=(G=e.element.style)==null?void 0:G.fontSize)!=null?U:e.config.globalFontSize),u=Number((w=(h=e.element.style)==null?void 0:h.letterSpacing)!=null?w:0),g=Number((T=(D=e.element.style)==null?void 0:D.lineHeight)!=null?T:Math.round(r*1.2)),v=Math.tan(o*Math.PI/180),b=Math.max(1,Math.round(r*.6+u)),p=Math.max(1,Math.round(g)),S=Number((E=n==null?void 0:n.amplitude)!=null?E:8),y=Number((X=n==null?void 0:n.frequency)!=null?X:.5),m=Number((d=n==null?void 0:n.phase)!=null?d:0),M=[];let N=0,F=0,I=0;for(const z of t){if(z===`
`){M.push({type:"br"}),F=0,I++;continue}let $=0,Ce=0;if(s&&!Number.isNaN(o)&&o!==0)if(a==="horizontal"){const Ne=F*b;Ce+=Math.round(v*Ne)}else{const Ne=I*p;$+=Math.round(v*Ne)}n&&n.enabled&&(Ce+=Math.round(S*Math.sin(N*y+m))),M.push({type:"char",ch:z,style:{display:"inline-block",transform:`translate(${$}px, ${Ce}px)`}}),N++,F++}return M});ie(ge,()=>{oe(()=>ke())});function ve(t,n){var s,i;ye.value||(P.value=t,re.value=n.clientX,ue.value=n.clientY,ee.value=e.element.left,te.value=e.element.top,ne.value=(s=e.element.width)!=null?s:Se().w,le.value=(i=e.element.height)!=null?i:Se().h,window.addEventListener("mousemove",ze),window.addEventListener("mouseup",he))}function ze(t){var m,M;if(!P.value)return;const n=(t.clientX-re.value)/((m=e.zoom)!=null?m:1),s=(t.clientY-ue.value)/((M=e.zoom)!=null?M:1);let i=ne.value,o=le.value,a=ee.value,r=te.value;const u=10;P.value==="se"?(i=Math.max(u,ne.value+n),o=Math.max(u,le.value+s)):P.value==="ne"?(i=Math.max(u,ne.value+n),o=Math.max(u,le.value-s),r=te.value+s):P.value==="sw"?(i=Math.max(u,ne.value-n),o=Math.max(u,le.value+s),a=ee.value+n):P.value==="nw"&&(i=Math.max(u,ne.value-n),o=Math.max(u,le.value-s),a=ee.value+n,r=te.value+s),i=Math.min(i,e.config.width-a),o=Math.min(o,e.config.height-r);const g=a,v=r,b=a+i,p=r+o,S=a+i/2,y=r+o/2;x("show-guidelines",{left:g,top:v,right:b,bottom:p,centerX:S,centerY:y}),x("update:size",{id:e.element.id,width:Math.round(i),height:Math.round(o),left:Math.round(a),top:Math.round(r)})}oe(()=>{var t;(t=V.value)==null||t.getBoundingClientRect()});function Oe(){if(e.element.type!=="chart"||!xe.value)return;L||(L=ut(xe.value));const t=e.element.chartOption||_e(e.element.chartType||"line");L.setOption(t,!0)}function _e(t){return t==="pie"?{backgroundColor:"transparent",tooltip:{trigger:"item"},legend:{top:"5%",left:"center",textStyle:{color:"#fff"}},series:[{name:"分类占比",type:"pie",radius:["40%","70%"],avoidLabelOverlap:!1,itemStyle:{borderRadius:8,borderColor:"#111",borderWidth:2},label:{show:!0,color:"#fff"},labelLine:{show:!0},data:[{value:1048,name:"A"},{value:735,name:"B"},{value:580,name:"C"},{value:484,name:"D"},{value:300,name:"E"}]}]}:t==="mix"?{backgroundColor:"transparent",color:["#00bcd4","#ff9800"],tooltip:{trigger:"axis"},legend:{textStyle:{color:"#fff"}},xAxis:{type:"category",data:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],axisLine:{lineStyle:{color:"#888"}},axisLabel:{color:"#ccc"}},yAxis:{type:"value",axisLine:{lineStyle:{color:"#888"}},axisLabel:{color:"#ccc"}},series:[{name:"销量",type:"bar",data:[120,200,150,80,70,110,130],itemStyle:{borderRadius:[4,4,0,0]}},{name:"均价",type:"line",smooth:!0,data:[30,40,45,50,49,60,70],lineStyle:{width:2}}]}:t==="bar"?{backgroundColor:"transparent",color:["#42b883"],tooltip:{trigger:"axis"},xAxis:{type:"category",data:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],axisLine:{lineStyle:{color:"#888"}},axisLabel:{color:"#ccc"}},yAxis:{type:"value",axisLine:{lineStyle:{color:"#888"}},axisLabel:{color:"#ccc"}},series:[{type:"bar",data:[120,200,150,80,70,110,130],itemStyle:{borderRadius:[4,4,0,0]}}]}:{backgroundColor:"transparent",color:["#42b883"],tooltip:{trigger:"axis"},xAxis:{type:"category",data:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],axisLine:{lineStyle:{color:"#888"}},axisLabel:{color:"#ccc"}},yAxis:{type:"value",axisLine:{lineStyle:{color:"#888"}},axisLabel:{color:"#ccc"}},series:[{type:"line",smooth:!0,data:[150,230,224,218,135,147,260],lineStyle:{width:2}}]}}Be(()=>{Oe()}),ie(()=>e.element.type,()=>{e.element.type==="chart"?oe(Oe):L&&(L.dispose(),L=null)}),ie(()=>e.element.chartOption,t=>{L&&e.element.type==="chart"&&t&&L.setOption(t,!0)},{deep:!0}),ie(()=>[e.element.width,e.element.height,e.element.left,e.element.top],()=>{L&&oe(()=>L&&L.resize())});const H=C(0);let be=null;function we(){var t,n;if(ce(),e.element.type==="carousel"&&((t=e.element.carouselConfig)!=null&&t.autoplay)&&((n=e.element.slides)!=null&&n.length)){const s=Math.max(1e3,e.element.carouselConfig.interval||3e3);be=setInterval(()=>{e.element.slides&&(H.value=(H.value+1)%e.element.slides.length)},s)}}function ce(){be&&(clearInterval(be),be=null)}function et(){var t,n;(t=e.element.slides)!=null&&t.length&&(ce(),H.value=(H.value-1+e.element.slides.length)%e.element.slides.length,(n=e.element.carouselConfig)!=null&&n.autoplay&&we())}function tt(){var t,n;(t=e.element.slides)!=null&&t.length&&(ce(),H.value=(H.value+1)%e.element.slides.length,(n=e.element.carouselConfig)!=null&&n.autoplay&&we())}const nt=O(()=>{var n;if(e.element.type!=="carousel"||!((n=e.element.carouselConfig)!=null&&n.textStyle))return{};const t=e.element.carouselConfig.textStyle;return{color:t.color,fontSize:(t.fontSize||14)+"px",fontWeight:t.fontWeight,fontFamily:t.fontFamily}});ie(()=>{var t,n;return[e.element.type,(t=e.element.carouselConfig)==null?void 0:t.autoplay,(n=e.element.carouselConfig)==null?void 0:n.interval,e.element.slides]},()=>{e.element.type==="carousel"?we():ce()},{deep:!0}),Be(()=>{e.element.type==="carousel"&&we()}),Ae(()=>{ce()});function $e(t){const n=!!e.parentSize,s=n&&e.parentOffset?e.parentOffset.left:0,i=n&&e.parentOffset?e.parentOffset.top:0;x("show-guidelines",{left:t.left+s,top:t.top+i,right:t.right+s,bottom:t.bottom+i,centerX:t.centerX+s,centerY:t.centerY+i})}return(t,n)=>{var i,o,a,r,u,g,v,b,p,S,y,m,M,N,F,I,R,Y,K,Q,G,U,h,w,D,T,E,X;const s=at("DraggableBox",!0);return lt((c(),f("div",{class:_(Ge.value),style:Z(He.value),onMousedown:Re,onClick:Ye,ref_key:"elRef",ref:V,"data-el-id":e.element.id,"data-box-id":e.element.id},[l.selected?(c(),f("div",dt)):A("",!0),k("div",ft,[l.element.type==="group"&&l.preview?(c(),f("div",mt,[(c(!0),f(q,null,de(l.element.children||[],d=>(c(),Le(s,{key:d.id,element:d,selected:!1,config:l.config,zoom:l.zoom,dbMap:l.dbMap,preview:!0},null,8,["element","config","zoom","dbMap"]))),128))])):l.element.type==="group"&&l.element.editable?(c(),f("div",ht,[(c(!0),f(q,null,de(l.element.children||[],d=>(c(),Le(s,{key:d.id,element:d,selected:l.selectedId===d.id,"selected-id":l.selectedId,config:l.config,zoom:l.zoom,dbMap:l.dbMap,"metrics-map":void 0,preview:Te(d),"parent-offset":{left:l.element.left,top:l.element.top},"parent-size":{width:l.element.width||1,height:l.element.height||1},"parent-is-flex":Pe.value,onSelect:n[0]||(n[0]=z=>x("select",z)),"onUpdate:position":n[1]||(n[1]=z=>x("update:position",z)),"onUpdate:size":n[2]||(n[2]=z=>x("update:size",z)),onShowGuidelines:$e,onHideGuidelines:n[3]||(n[3]=()=>x("hide-guidelines")),onReportMetrics:n[4]||(n[4]=z=>x("report-metrics",z))},null,8,["element","selected","selected-id","config","zoom","dbMap","preview","parent-offset","parent-size","parent-is-flex"]))),128))])):A("",!0),l.element.type==="text"?(c(),f("div",{key:2,class:_(["w-full h-full",l.element.className].filter(Boolean).join(" ")),style:Z(Ue.value)},[Ie.value?(c(!0),f(q,{key:0},de(Ie.value,(d,z)=>(c(),f(q,{key:z},[d.type==="br"?(c(),f("br",yt)):(c(),f("span",{key:1,style:Z(d.style)},ae(d.ch),5))],64))),128)):l.element.segments&&l.element.segments.length?(c(!0),f(q,{key:1},de(l.element.segments,(d,z)=>(c(),f("span",{key:d.id||z,style:Z(Ze(d))},ae(Qe(d)),5))),128)):(c(),f(q,{key:2},[ot(ae(ge.value),1)],64))],6)):l.element.type==="carousel"?(c(),f("div",gt,[(i=l.element.carouselConfig)!=null&&i.frameNormal?(c(),f("div",vt,[k("img",{src:l.element.carouselConfig.frameNormal,class:"w-full h-full object-fill",alt:""},null,8,bt)])):A("",!0),l.element.slides&&l.element.slides.length?(c(),f("div",wt,[k("div",xt,[k("img",{src:(o=l.element.slides[H.value])==null?void 0:o.src,class:"max-w-[80%] max-h-[80%] object-contain transition-opacity duration-500",alt:""},null,8,pt),(a=l.element.carouselConfig)!=null&&a.frameHighlight?(c(),f("div",St,[k("img",{src:l.element.carouselConfig.frameHighlight,class:"w-full h-full object-fill",alt:""},null,8,Mt)])):A("",!0)])])):A("",!0),(r=l.element.carouselConfig)!=null&&r.arrowLeft?(c(),f("div",{key:2,class:"absolute inset-y-0 left-0 flex items-center pl-2 z-20 cursor-pointer hover:scale-110 transition-transform",onClick:se(et,["stop"])},[k("img",{src:l.element.carouselConfig.arrowLeft,class:"w-8 h-8 object-contain"},null,8,kt)])):A("",!0),(u=l.element.carouselConfig)!=null&&u.arrowRight?(c(),f("div",{key:3,class:"absolute inset-y-0 right-0 flex items-center pr-2 z-20 cursor-pointer hover:scale-110 transition-transform",onClick:se(tt,["stop"])},[k("img",{src:l.element.carouselConfig.arrowRight,class:"w-8 h-8 object-contain"},null,8,zt)])):A("",!0),k("div",{class:"absolute bottom-4 w-full text-center z-20 pointer-events-none",style:Z(nt.value)},ae(((v=(g=l.element.slides)==null?void 0:g[H.value])==null?void 0:v.text)||""),5)])):l.element.type==="image"?(c(),f("img",{key:4,src:l.element.highlightEnabled&&l.element.highlightSrc?l.element.highlightSrc:l.element.src,class:_(["w-full h-full",((b=l.element.style)==null?void 0:b.objectFit)==="contain"?"object-contain":((p=l.element.style)==null?void 0:p.objectFit)==="fill"?"object-fill":((S=l.element.style)==null?void 0:S.objectFit)==="scale-down"?"object-scale-down":((y=l.element.style)==null?void 0:y.objectFit)==="none"?"object-none":"object-cover",l.element.className].filter(Boolean).join(" ")),alt:"Image element"},null,10,Ct)):l.element.type==="arc-text"?(c(),f("svg",{key:5,class:_(["w-full h-full",l.element.className].filter(Boolean).join(" ")),style:{display:"block"},width:l.element.width||1,height:l.element.height||1,xmlns:"http://www.w3.org/2000/svg"},[k("defs",null,[k("path",{id:`arc-${l.element.id}`,d:Ve.value,fill:"none"},null,8,Lt)]),k("text",{style:Z(qe.value)},[k("textPath",{href:`#arc-${l.element.id}`,startOffset:Je.value,"text-anchor":Ke.value},ae(ge.value),9,Bt)],4)],10,Nt)):l.element.type==="chart"?(c(),f("div",{key:6,class:_(["w-full h-full bg-gray-800/50 rounded",l.element.className].filter(Boolean).join(" ")),id:l.element.elementId||void 0},[k("div",{ref_key:"chartRef",ref:xe,class:"w-full h-full"},null,512)],10,jt)):l.element.type==="container"?(c(),f("div",{key:7,class:_(["w-full h-full relative",l.element.className].filter(Boolean).join(" ")),id:l.element.elementId||void 0,style:Z({display:((m=l.element.style)==null?void 0:m.display)||"block",flexDirection:(M=l.element.style)==null?void 0:M.flexDirection,justifyContent:(N=l.element.style)==null?void 0:N.justifyContent,alignItems:(F=l.element.style)==null?void 0:F.alignItems,gap:(I=l.element.style)!=null&&I.gap?`${l.element.style.gap}px`:void 0})},[(c(!0),f(q,null,de(l.element.children||[],d=>{var z;return c(),Le(s,{key:d.id,element:d,selected:l.selectedId===d.id,"selected-id":l.selectedId,config:l.config,zoom:l.zoom,dbMap:l.dbMap,"metrics-map":void 0,preview:l.preview,"parent-offset":{left:l.element.left,top:l.element.top},"parent-size":{width:l.element.width||1,height:l.element.height||1},"parent-is-flex":(((z=l.element.style)==null?void 0:z.display)||"block")==="flex",onSelect:n[5]||(n[5]=$=>x("select",$)),"onUpdate:position":n[6]||(n[6]=$=>x("update:position",$)),"onUpdate:size":n[7]||(n[7]=$=>x("update:size",$)),onShowGuidelines:$e,onHideGuidelines:n[8]||(n[8]=()=>x("hide-guidelines")),onReportMetrics:n[9]||(n[9]=$=>x("report-metrics",$)),onDragEnd:n[10]||(n[10]=$=>x("drag-end",$))},null,8,["element","selected","selected-id","config","zoom","dbMap","preview","parent-offset","parent-size","parent-is-flex"])}),128)),!l.preview&&(l.element.text||"").trim()&&(!l.element.children||l.element.children.length===0)?(c(),f("div",It,ae(l.element.text),1)):A("",!0)],14,Ft)):l.element.type==="line"?(c(),f("svg",{key:8,class:_(["w-full h-full",l.element.className].filter(Boolean).join(" ")),style:{display:"block"},width:l.element.width||1,height:l.element.height||1,xmlns:"http://www.w3.org/2000/svg"},[k("line",{x1:(((R=l.element.style)==null?void 0:R.lineOrientation)||"horizontal")==="vertical"?(l.element.width||1)/2:0,y1:(((Y=l.element.style)==null?void 0:Y.lineOrientation)||"horizontal")==="vertical"?0:(l.element.height||1)/2,x2:(((K=l.element.style)==null?void 0:K.lineOrientation)||"horizontal")==="vertical"?(l.element.width||1)/2:l.element.width||1,y2:(((Q=l.element.style)==null?void 0:Q.lineOrientation)||"horizontal")==="vertical"?l.element.height||1:(l.element.height||1)/2,stroke:((G=l.element.style)==null?void 0:G.lineColor)||"#42b883","stroke-width":(h=(U=l.element.style)==null?void 0:U.lineThickness)!=null?h:2,"stroke-dasharray":((w=l.element.style)==null?void 0:w.lineStyle)==="dashed"?`${(T=(D=l.element.style)==null?void 0:D.lineDashLength)!=null?T:6} ${(X=(E=l.element.style)==null?void 0:E.lineDashGap)!=null?X:4}`:void 0,"stroke-linecap":"round"},null,8,$t)],10,Ot)):A("",!0)]),l.selected?(c(),f("div",At)):A("",!0),l.selected?(c(),f("div",Dt)):A("",!0),l.selected&&(!ye.value||l.element.type==="chart")?(c(),f(q,{key:3},[k("div",{class:"absolute w-2 h-2 bg-emerald-500 rounded -left-1 -top-1 cursor-nwse-resize z-20",onMousedown:n[11]||(n[11]=se(d=>ve("nw",d),["stop"]))},null,32),k("div",{class:"absolute w-2 h-2 bg-emerald-500 rounded -right-1 -top-1 cursor-nesw-resize z-20",onMousedown:n[12]||(n[12]=se(d=>ve("ne",d),["stop"]))},null,32),k("div",{class:"absolute w-2 h-2 bg-emerald-500 rounded -left-1 -bottom-1 cursor-nesw-resize z-20",onMousedown:n[13]||(n[13]=se(d=>ve("sw",d),["stop"]))},null,32),k("div",{class:"absolute w-2 h-2 bg-emerald-500 rounded -right-1 -bottom-1 cursor-nwse-resize z-20",onMousedown:n[14]||(n[14]=se(d=>ve("se",d),["stop"]))},null,32)],64)):A("",!0)],46,ct)),[[st,e.element.hidden!==!0]])}}}),Et=rt(Tt,[["__scopeId","data-v-8921a39d"]]);export{Et as t};
