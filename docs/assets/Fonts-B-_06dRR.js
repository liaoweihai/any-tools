import{E as i,O as N,R as O,_,ct as h,f as d,h as E,l as t,lt as u,m as y,o as I,st as W,u as U,w as q}from"./codemirror-B25QCqWr.js";import"./componentStorage-DB4dbTb9.js";import{t as H}from"./useProjectResources-T0rK66Sv.js";var R={class:"p-6 space-y-6 bg-gray-900 text-gray-100 min-h-full"},D={class:"relative group"},G={class:"relative bg-gray-800/50 backdrop-blur-sm border border-emerald-500/20 rounded-lg p-6 hover:border-emerald-400/40 transition-all duration-300"},K={class:"block cursor-pointer"},P={class:"relative"},J={class:"relative bg-gray-800/50 backdrop-blur-sm border border-purple-500/20 rounded-lg overflow-hidden"},Q={class:"p-4 border-b border-gray-700/50"},X={class:"font-bold text-lg bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent flex items-center"},Y={key:0,class:"p-8 text-center"},Z={key:1,class:"divide-y divide-gray-700/50"},ee={class:"flex items-center justify-between"},te={class:"flex-1"},re={class:"flex items-center space-x-3"},ae={class:"w-10 h-10 bg-gradient-to-br from-cyan-500 to-blue-500 rounded-lg flex items-center justify-center text-white font-bold text-sm"},oe={class:"font-semibold text-gray-100 group-hover:text-cyan-400 transition-colors duration-200"},se={class:"text-xs text-gray-500 flex items-center space-x-2"},ne=["onClick"],le={class:"mt-3 p-3 bg-gray-900/50 rounded-lg border border-gray-700/30"},ie=_({__name:"FontLibraryManager",props:{projectId:{}},emits:["library:update"],setup(c,{emit:m}){const g=c,{fonts:p,refreshFonts:b,saveFonts:w,deleteFont:k}=H(String(g.projectId||"")),n=O([]),v=document.createElement("style");v.setAttribute("data-font-lib",""),document.head.appendChild(v);const F=m;function B(o,e){const r=o.trim();let a=r,s=2;for(;e.has(a.toLowerCase());)a=`${r}-${s}`,s++;return e.add(a.toLowerCase()),a}function M(o){const e=[],r=[];for(const a of o){const s=a.bufferBase64.startsWith("data:")?a.bufferBase64:`data:${a.mime};base64,${a.bufferBase64}`,l=a.name;r.push(l),e.push(`@font-face { font-family: '${l}'; src: url('${s}'); font-weight: normal; font-style: normal; }`)}v.textContent=e.join(`
`),F("library:update",r)}async function f(){await b(),n.value=p.value,M(n.value)}async function C(o){const e=o.target,r=e.files;if(!r||r.length===0)return;await b();const a=new Set(p.value.map(s=>String(s.name).toLowerCase()));for(const s of Array.from(r)){const l=await s.arrayBuffer(),S=s.name.replace(/\.(ttf|otf|woff2?|TTF|OTF|WOFF2?)$/,""),T=B(S,a),A=L(l),x=s.type||"application/octet-stream",V=`data:${x};base64,${A}`;await w([{name:T,mime:x,bufferBase64:V}])}await f(),e.value=""}async function j(o){await k(o),await f()}function $(o){if(o===0)return"0 Bytes";const e=1024,r=["Bytes","KB","MB","GB"],a=Math.floor(Math.log(o)/Math.log(e));return parseFloat((o/Math.pow(e,a)).toFixed(2))+" "+r[a]}q(()=>{f()});function L(o){const e=new Uint8Array(o);let r="";const a=32768;for(let s=0;s<e.length;s+=a){const l=e.subarray(s,s+a);r+=String.fromCharCode.apply(null,Array.from(l))}return btoa(r)}function z(o){try{let e=o;const r=/^data:(.*?);base64,(.*)$/.exec(o);r&&r[2]&&(e=r[2]);const a=(e.match(/=+$/)||[""])[0].length;return Math.max(0,e.length*3/4-a)}catch{return 0}}return(o,e)=>(i(),d("div",R,[e[8]||(e[8]=y('<div class="relative"><div class="absolute inset-0 bg-gradient-to-r from-cyan-500/10 to-blue-500/10 rounded-lg blur-xl"></div><div class="relative bg-gray-800/50 backdrop-blur-sm border border-cyan-500/20 rounded-lg p-4"><h2 class="font-bold text-xl bg-gradient-to-r from-cyan-400 to-blue-400 bg-clip-text text-transparent flex items-center"><svg class="w-6 h-6 mr-3 text-cyan-400" fill="currentColor" viewBox="0 0 20 20"><path d="M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"></path></svg> 字体库管理 </h2><p class="text-sm text-gray-400 mt-2 leading-relaxed"> 上传字体文件（ttf/otf/woff/woff2），将保存到本地并可在构建器中搜索选择。 <span class="text-cyan-400">默认已可搜索系统常用字体，无需手动设置。</span></p></div></div>',1)),t("div",D,[e[2]||(e[2]=t("div",{class:"absolute inset-0 bg-gradient-to-r from-emerald-500/10 to-cyan-500/10 rounded-lg blur-xl group-hover:blur-2xl transition-all duration-300"},null,-1)),t("div",G,[t("label",K,[e[0]||(e[0]=y('<div class="flex items-center justify-center space-x-3 mb-4"><svg class="w-8 h-8 text-emerald-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path></svg><span class="text-lg font-semibold text-emerald-400">上传字体文件</span></div><div class="text-center text-gray-400 text-sm mb-4"> 支持 TTF、OTF、WOFF、WOFF2 格式，可多选上传 </div>',2)),t("input",{type:"file",accept:".ttf,.otf,.woff,.woff2",multiple:"",onChange:C,class:"hidden"},null,32),e[1]||(e[1]=t("div",{class:"border-2 border-dashed border-emerald-500/30 rounded-lg p-8 text-center hover:border-emerald-400/50 transition-colors duration-300"},[t("div",{class:"text-emerald-400 font-medium"},"点击选择文件或拖拽到此处")],-1))])])]),t("div",P,[e[7]||(e[7]=t("div",{class:"absolute inset-0 bg-gradient-to-r from-purple-500/10 to-pink-500/10 rounded-lg blur-xl"},null,-1)),t("div",J,[t("div",Q,[t("h3",X,[e[3]||(e[3]=t("svg",{class:"w-5 h-5 mr-2 text-purple-400",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),E(" 已导入字体 ("+u(n.value.length)+") ",1)])]),n.value.length===0?(i(),d("div",Y,[...e[4]||(e[4]=[t("svg",{class:"w-16 h-16 mx-auto text-gray-600 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})],-1),t("div",{class:"text-gray-500 text-lg font-medium mb-2"},"暂无导入字体",-1),t("div",{class:"text-gray-600 text-sm"},"上传字体文件开始使用",-1)])])):(i(),d("div",Z,[(i(!0),d(I,null,N(n.value,(r,a)=>(i(),d("div",{key:r.id,class:W(["p-4 hover:bg-gray-700/30 transition-all duration-200 group",{"animate-pulse":a===n.value.length-1}])},[t("div",ee,[t("div",te,[t("div",re,[t("div",ae,u(r.name.charAt(0).toUpperCase()),1),t("div",null,[t("div",oe,u(r.name),1),t("div",se,[t("span",null,u(r.mime),1),e[5]||(e[5]=t("span",{class:"w-1 h-1 bg-gray-500 rounded-full"},null,-1)),t("span",null,u($(z(r.bufferBase64))),1)])])])]),t("button",{onClick:s=>j(r.id),class:"px-4 py-2 bg-red-500/20 hover:bg-red-500/30 border border-red-500/30 hover:border-red-400/50 rounded-lg text-red-400 hover:text-red-300 transition-all duration-200 flex items-center space-x-2 group/btn"},[...e[6]||(e[6]=[t("svg",{class:"w-4 h-4 group-hover/btn:scale-110 transition-transform duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),t("span",{class:"text-sm font-medium"},"删除",-1)])],8,ne)]),t("div",le,[t("div",{class:"text-gray-300 text-lg",style:h({fontFamily:r.name})}," The quick brown fox jumps over the lazy dog ",4),t("div",{class:"text-gray-400 text-sm mt-1",style:h({fontFamily:r.name})}," 快速的棕色狐狸跳过懒狗 1234567890 ",4)])],2))),128))]))])])]))}}),de=ie,ue=_({__name:"index",props:{projectId:{}},setup(c){const m=c;return(g,p)=>(i(),U(de,{"project-id":m.projectId},null,8,["project-id"]))}}),ve=ue;export{ve as default};
