import{i as gl}from"./rolldown-runtime-CKFmjIRy.js";import{C as nr,E as j,H as ml,I as ye,L as ol,O as Rt,P as mt,R as we,S as Qn,_ as St,b as Et,c as Te,ct as ot,d as Z,f as z,g as ct,h as yn,i as $l,l as n,lt as Ze,m as Yn,n as kl,o as Ft,r as El,st as Ve,t as Sl,u as Zn,w as tr}from"./codemirror-B25QCqWr.js";import{d as sl,f as Ee,h as yl,m as Jn,n as Ml,o as Cl,p as Nl,r as Il,s as Fl,u as Kn}from"./vendor-vue-C93_ecI2.js";import{t as rr}from"./index-CoQSULRC.js";import{t as qe}from"./componentStorage-DB4dbTb9.js";import"./echarts-xBohgwka.js";import{t as Al}from"./DraggableBox-v_Wtusqs.js";function qn(x){return x.replace(/[&<>"']/g,o=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"})[o]||o)}function jl(x){var p,w;const o=x.style||{},e=[];if(e.push("position:absolute"),e.push(`left:${Math.round(x.left||0)}px`),e.push(`top:${Math.round(x.top||0)}px`),x.autoSize||(x.width&&e.push(`width:${Math.round(x.width)}px`),x.height&&e.push(`height:${Math.round(x.height)}px`)),o.opacity!==void 0&&e.push(`opacity:${o.opacity}`),o.border&&!(x.type==="container"&&o.border==="1px dashed rgba(148,163,184,0.6)")&&e.push(`border:${o.border}`),o.borderRadius&&e.push(`border-radius:${o.borderRadius}`),o.backgroundColor&&e.push(`background-color:${o.backgroundColor}`),o.boxShadow&&e.push(`box-shadow:${o.boxShadow}`),o.backgroundGradient&&((p=o.backgroundGradient.colors)!=null&&p.length)){const A=o.backgroundGradient.angle||0,J=o.backgroundGradient.colors[0]||"#000000",ae=o.backgroundGradient.colors[1]||"#000000";e.push(`background-image:linear-gradient(${A}deg, ${J}, ${ae})`),e.push("background-size:cover"),e.push("background-repeat:no-repeat")}if(x.type==="text"){o.fontFamily&&e.push(`font-family:${o.fontFamily}`),o.fontSize!==void 0&&e.push(`font-size:${o.fontSize}px`),o.color&&e.push(`color:${o.color}`),o.fontWeight&&e.push(`font-weight:${o.fontWeight}`),o.letterSpacing!==void 0&&o.letterSpacing!==null&&e.push(`letter-spacing:${o.letterSpacing}px`),o.lineHeight!==void 0&&e.push(`line-height:${o.lineHeight}`),o.fontStyle&&e.push(`font-style:${o.fontStyle}`),o.textAlign&&e.push(`text-align:${o.textAlign}`),o.textDecoration&&e.push(`text-decoration:${o.textDecoration}`);const A=o.textOrientation;if(A==="vertical"?(e.push("writing-mode:vertical-rl"),e.push("text-orientation:upright")):A==="horizontal"&&e.push("writing-mode:horizontal-tb"),o.textGradient&&((w=o.textGradient.colors)!=null&&w.length)){const J=o.textGradient.angle||0,ae=o.textGradient.colors[0]||"#000000",ke=o.textGradient.colors[1]||"#000000";e.push(`background-image:linear-gradient(${J}deg, ${ae}, ${ke})`),e.push("-webkit-background-clip:text"),e.push("background-clip:text"),e.push("color:transparent")}}return x.type==="image"&&o.objectFit&&e.push(`object-fit:${o.objectFit}`),e.join(";")}function bl(x){return String(x).split(";").map(o=>o.trim()).filter(Boolean).map(o=>o.includes("!important")?o:`${o} !important`).join("; ")}function zl(x){return String(x).replace(/\{([^}]*)\}/g,(o,e)=>`{ ${bl(e)} }`)}function Ol(x){const o=[],e=p=>{p.forEach(w=>{if((w.type==="group"||w.type==="container")&&Array.isArray(w.children))e(w.children);else{const A=(w.className||"").trim(),J=w.customClassCss?String(w.customClassCss).trim():"";if(!A||!J)return;/\{[^}]*\}/.test(J)?o.push(zl(J)):o.push(`.${A} { ${bl(J)} }`)}})};return e(x),o.join(`
`)}function al(x,o,e,p,w){const A=x.replace(/[^A-Za-z0-9_]/g,"_");let J=0;const ae=[],ke=[],C=o.backgroundUrl||"",ge=o.backgroundColor||"transparent",P=o.globalFontFamily||"",Q=o.globalFontSize||14,de=o.globalColor||"#000000",Y=e.some(v=>v.type==="chart");function k(v){const X=String(v||"").trim();if(!X)return"";let oe=X.replace(/[^A-Za-z0-9_]/g,"_");return/[A-Za-z_]/.test(oe[0]||"")||(oe="_"+oe),oe}function d(v){if(!v.hidden)return"";const X=k(v.hiddenLabel);return X?` ${p&&p.hideDirective==="show"?"v-show":"v-if"}="${X}"`:""}function U(v,X){var Pe,We,Xe,Ye,st,xt,vt,ht,At,je,ve,pt,ft,yt,Mt;const oe=jl(v),b=v.zIndex||1,t=v.className&&v.className.trim()?` class="${v.className.trim()}"`:"",le=v.eventBinding,ee=le&&le.enabled&&le.handlerName?` @click="${String(le.handlerName)}($event)"`:"";if(v.type==="group"&&Array.isArray(v.children)){const He=v.children.map((Ce,Ne)=>U(Ce,Ne)).join(`
        `);return`<div${t}${d(v)} style="${oe};z-index:${b}">
        ${He}
      </div>`}if(v.type==="text"){const He=(()=>{var at;const ze=((at=v.style)==null?void 0:at.textAlign)||"left";return ze==="center"?"text-flex-center":ze==="right"?"text-flex-right":"text-flex-left"})(),Ce=[(Pe=v.className)==null?void 0:Pe.trim(),He].filter(Boolean).join(" "),Ne=Ce?` class="${Ce}"`:"",Ae=v.style||{},dt=v.elementId&&v.elementId.trim()?v.elementId.trim():`text_${X}`,nt=!!(Ae.textWave&&Ae.textWave.enabled),gt=!!Ae.skewFlowEnabled;if(nt||gt){const ze=v.dynamic&&v.dynamic.enabled&&v.dynamic.objectName&&v.dynamic.propertyPath?{type:"dynamic",obj:v.dynamic.objectName,path:v.dynamic.propertyPath}:{type:"static",text:v.text||""};ae.push(`'${dt.replace(/'/g,"\\'")}' : ${JSON.stringify(ze)}`);const at={textWaveEnabled:nt,amplitude:(Xe=(We=Ae.textWave)==null?void 0:We.amplitude)!=null?Xe:0,frequency:(st=(Ye=Ae.textWave)==null?void 0:Ye.frequency)!=null?st:0,phase:(vt=(xt=Ae.textWave)==null?void 0:xt.phase)!=null?vt:0,skewFlowEnabled:gt,skewAngle:(ht=Ae.skewAngle)!=null?ht:0,textOrientation:Ae.textOrientation||"horizontal",fontSize:(At=Ae.fontSize)!=null?At:Q,letterSpacing:(je=Ae.letterSpacing)!=null?je:0};return ke.push(`'${dt.replace(/'/g,"\\'")}' : ${JSON.stringify(at)}`),`<div${Ne}${d(v)}${ee} style="${oe};z-index:${b}">
        <span v-for="(p,pi) in getTextPieces('${dt.replace(/'/g,"\\'")}')" :key="pi" :style="p.style">{{ p.char }}</span>
      </div>`}if(v.dynamic&&v.dynamic.enabled&&v.dynamic.objectName&&v.dynamic.propertyPath){const ze=`${v.dynamic.objectName}.${v.dynamic.propertyPath}`;return`<div${Ne}${d(v)}${ee} style="${oe};z-index:${b}">{{ ${ze} }}</div>`}else{const ze=qn(v.text||"");return`<div${Ne}${d(v)}${ee} style="${oe};z-index:${b}">${ze}</div>`}}if(v.type==="image"){if(p!=null&&p.imageFileMap&&p.imageFileMap[v.id]){const Ne=p.imageFileMap[v.id],Ae=v.elementId&&v.elementId.trim()?` id="${v.elementId.trim()}"`:"";return`<img${t}${Ae}${d(v)}${ee} src="./imgs/${Ne}" style="${oe};z-index:${b}" alt="" />`}if(p!=null&&p.imageFileNames&&p.imageFileNames[J]){const Ne=p.imageFileNames[J++],Ae=v.elementId&&v.elementId.trim()?` id="${v.elementId.trim()}"`:"";return`<img${t}${Ae}${d(v)}${ee} src="./imgs/${Ne}" style="${oe};z-index:${b}" alt="" />`}const He=v.elementId&&v.elementId.trim()?v.elementId.trim():`img_${X}`,Ce=v.elementId&&v.elementId.trim()?` id="${v.elementId.trim()}"`:"";return`<img${t}${Ce}${d(v)}${ee} :src="images['${He}']" style="${oe};z-index:${b}" alt="" />`}if(v.type==="chart"){const He=qn(v.text||"chart"),Ce=v.elementId&&v.elementId.trim()?v.elementId.trim():`chart_${X}`;return`<div${t}${d(v)}${ee} id="${Ce}" style="${oe};z-index:${b}">${He}</div>`}if(v.type==="container"){const He=v.elementId&&v.elementId.trim()?` id="${v.elementId.trim()}"`:"",Ce=v.comment?`<!-- ${v.comment.replace(/-->/g,"")} -->
      `:"";if(Array.isArray(v.children)){const Ae=v.children.map((dt,nt)=>U(dt,nt)).join(`
        `);return`${Ce}<div${t}${d(v)}${ee}${He} style="${oe};z-index:${b}">
        ${Ae}
      </div>`}const Ne=qn(v.text||"");return`${Ce}<div${t}${d(v)}${ee}${He} style="${oe};z-index:${b}">${Ne}</div>`}if(v.type==="line"){const He=v.style||{},Ce=He.lineColor||"#ffffff",Ne=(ve=He.lineThickness)!=null?ve:2,Ae=He.lineOrientation||"horizontal",dt=He.lineStyle==="dashed",nt=(pt=He.lineDashLength)!=null?pt:6,gt=(ft=He.lineDashGap)!=null?ft:4,ze=Math.max(1,Math.round((yt=v.width)!=null?yt:Ae==="horizontal"?200:2)),at=Math.max(1,Math.round((Mt=v.height)!=null?Mt:Ae==="horizontal"?2:200)),jt=Math.round(at/2),zt=Math.round(ze/2),wt=dt?` stroke-dasharray="${nt} ${gt}"`:"";return Ae==="horizontal"?`<svg${t}${d(v)}${ee} viewBox="0 0 ${ze} ${at}" preserveAspectRatio="none" style="${oe};z-index:${b}"><line x1="0" y1="${jt}" x2="${ze}" y2="${jt}" stroke="${Ce}" stroke-width="${Ne}"${wt} fill="none" /></svg>`:`<svg${t}${d(v)}${ee} viewBox="0 0 ${ze} ${at}" preserveAspectRatio="none" style="${oe};z-index:${b}"><line x1="${zt}" y1="0" x2="${zt}" y2="${at}" stroke="${Ce}" stroke-width="${Ne}"${wt} fill="none" /></svg>`}const tt=qn(v.text||"element");return`<div${t}${d(v)}${ee} style="${oe};z-index:${b}">${tt}</div>`}const H=e.map((v,X)=>U(v,X)).join(`
      `),te=Ol(e);function T(v,X){v.forEach(oe=>{(oe.type==="group"||oe.type==="container")&&Array.isArray(oe.children)?(X(oe),T(oe.children,X)):X(oe)})}const q=new Set;T(e,v=>{v.type==="text"&&v.dynamic&&v.dynamic.enabled&&v.dynamic.objectName&&q.add(String(v.dynamic.objectName))});const $e=Array.from(q),_=!w||$e.length===0?"":$e.map(v=>{try{const X=w[v],oe=JSON.stringify(X!=null?X:{});return`      ${v}: ${oe},`}catch{return`      ${v}: {},`}}).join(`
`),D=(()=>{const v=[];let X=0;return T(e,oe=>{if(oe.type==="chart"){const b=oe.elementId&&oe.elementId.trim()?oe.elementId.trim():`chart_${X}`;X++;const t=oe.chartOption||{};try{v.push(`'${b.replace(/'/g,"\\'")}' : ${JSON.stringify(t)}`)}catch{v.push(`'${b.replace(/'/g,"\\'")}' : {}`)}}}),`{ ${v.join(", ")} }`})(),R=(()=>{const v=new Set;return T(e,X=>{const oe=String(X.hiddenLabel||"").trim(),b=k(oe),t=!!X.hidden;b&&t&&v.add(b)}),Array.from(v).map(X=>`      ${X}: false,`).join(`
`)})(),Oe=(()=>{const v=new Map;function X(b){b.forEach(t=>{const le=t.eventBinding;le&&le.enabled&&le.handlerName&&v.set(String(le.handlerName),String(le.code||"")),Array.isArray(t.children)&&X(t.children)})}X(e);const oe=Array.from(v.entries());return oe.length?oe.map(([b,t])=>`${b}(e) {
${t}
}`).join(`,
`):""})();return`
<template>
  <div class="container" :style="containerStyle">
    ${H}
  </div>
</template>

<script>
${Y?`import * as echarts from 'echarts';
`:""}
export default {
  name: '${A}',
  data() {
    return {
      config: {
        width: ${Math.round(o.width)},
        height: ${Math.round(o.height)},
        backgroundColor: '${ge.replace(/'/g,"\\'")}',
        globalFontFamily: '${P.replace(/'/g,"\\'")}',
        globalFontSize: ${Math.round(Q)},
        globalColor: '${de}',
      },
      backgroundUrl: ${p!=null&&p.backgroundFileName?`(() => { try { return require('./imgs/${p.backgroundFileName.replace(/'/g,"\\'")}'); } catch(e) { return './imgs/${p.backgroundFileName.replace(/'/g,"\\'")}'; } })()`:`'${C.replace(/'/g,"\\'")}'`},
      ${p!=null&&p.imageFileNames?`// 使用本地资源路径，动态映射不再需要
      images: {},`:`// 图片 src 动态映射，初始写入 base64（若存在），blob 留空待替换
      images: {},`}
      // 图表配置导出，键为元素ID或序号
      chartOptions: ${D},
      ${_?`// 数据库对象（按页面引用注入到 data）
${_}`:""}
      ${ae.length?`// 文本数据源映射（支持静态/动态）
      textSources: { ${ae.join(", ")} },`:""}
      ${ke.length?`// 文本效果参数映射（波形与倾斜跟随）
      textEffects: { ${ke.join(", ")} },`:""}
      ${R}
    };
  },
  computed: {
    containerStyle() {
      const base = {
        position: 'relative',
        width: this.config.width + 'px',
        height: this.config.height + 'px',
        fontFamily: this.config.globalFontFamily,
        fontSize: this.config.globalFontSize + 'px',
        color: this.config.globalColor,
        backgroundColor: this.config.backgroundColor || 'transparent',
      };
      if (this.backgroundUrl) {
        return Object.assign({}, base, {
          backgroundImage: 'url(' + this.backgroundUrl + ')',
          backgroundSize: 'cover',
          backgroundRepeat: 'no-repeat',
        });
      }
      return base;
    }
  },
  methods: {
    getByPath(obj, path) {
      try {
        const segs = String(path).split('.');
        return segs.reduce((acc, k) => (acc ? acc[k] : undefined), obj);
      } catch(e) {
        return undefined;
      }
    },
    getTextValue(id) {
      const srcMap = this.textSources || {};
      const src = srcMap[id];
      if (!src) return '';
      if (src.type === 'static') return String(src.text || '');
      const root = this[src.obj] || {};
      const v = this.getByPath(root, src.path);
      return v != null ? String(v) : '';
    },
    getTextPieces(id) {
      const text = this.getTextValue(id);
      const effMap = this.textEffects || {};
      const eff = effMap[id] || {};
      const orientation = eff.textOrientation || 'horizontal';
      const fontSize = Number(eff.fontSize || (this.config && this.config.globalFontSize) || 14);
      const letterSpacing = Number(eff.letterSpacing || 0);
      const step = fontSize * 0.6 + letterSpacing;

      const amp = eff.textWaveEnabled ? Number(eff.amplitude || 0) : 0;
      const freq = eff.textWaveEnabled ? Number(eff.frequency || 0) : 0;
      const phase = eff.textWaveEnabled ? Number(eff.phase || 0) : 0;

      const skewAngle = eff.skewFlowEnabled ? Number(eff.skewAngle || 0) : 0;
      const tan = Math.tan(skewAngle * Math.PI / 180);

      const pieces = [];
      for (let i = 0; i < text.length; i++) {
        const ch = text[i];
        const wave = amp ? amp * Math.sin(i * freq + phase) : 0;
        let dx = 0, dy = 0;
        if (orientation === 'horizontal') {
          dy += wave;
          dy += tan * step * i;
        } else {
          dx += wave;
          dx += tan * step * i;
        }
        const style = 'display:inline-block;white-space:pre;transform: translate(' + Math.round(dx) + 'px, ' + Math.round(dy) + 'px);';
        pieces.push({ char: ch, style });
      }
      return pieces;
    }${Oe?`,
${Oe}`:""}
  },
  mounted() {
    // 使用 npm 依赖的 echarts 初始化图表实例
    Object.keys(this.chartOptions || {}).forEach((id) => {
      const el = document.getElementById(id);
      if (el) {
        const inst = echarts.init(el);
        inst.setOption(this.chartOptions[id], true);
      }
    });
  }
};
<\/script>

${p!=null&&p.fontFaces&&p.fontFaces.length>0?`
<style>
${p.fontFaces.map(v=>`@font-face { font-family: '${v.family.replace(/'/g,"\\'")}'; src: url('./fonts/${v.file}'); font-weight: normal; font-style: normal; }`).join(`
`)}
</style>
`:""}
<style scoped>
.container { box-sizing: border-box; }
/* 文本对齐公共样式，减少重复的内联 CSS */
.text-flex-left { display:flex; align-items:center; justify-content:flex-start; }
.text-flex-center { display:flex; align-items:center; justify-content:center; }
.text-flex-right { display:flex; align-items:center; justify-content:flex-end; }
${te}
</style>
`}function er(x){return x.replace(/[&<>"']/g,o=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"})[o]||o)}function Bl(x){var w,A;const o=x.style||{},e=[];if(e.push("position:absolute"),e.push(`left:${Math.round(x.left||0)}px`),e.push(`top:${Math.round(x.top||0)}px`),x.autoSize||(x.width&&e.push(`width:${Math.round(x.width)}px`),x.height&&e.push(`height:${Math.round(x.height)}px`)),o.opacity!==void 0&&e.push(`opacity:${o.opacity}`),o.border&&!(x.type==="container"&&o.border==="1px dashed rgba(148,163,184,0.6)")&&e.push(`border:${o.border}`),o.borderRadius&&e.push(`border-radius:${o.borderRadius}`),o.backgroundColor&&e.push(`background-color:${o.backgroundColor}`),o.boxShadow&&e.push(`box-shadow:${o.boxShadow}`),o.backgroundGradient&&((w=o.backgroundGradient.colors)!=null&&w.length)){const J=o.backgroundGradient.angle||0,ae=o.backgroundGradient.colors[0]||"#000000",ke=o.backgroundGradient.colors[1]||"#000000";e.push(`background-image:linear-gradient(${J}deg, ${ae}, ${ke})`),e.push("background-size:cover"),e.push("background-repeat:no-repeat")}if(x.type==="text"&&(o.fontFamily&&e.push(`font-family:${o.fontFamily}`),o.fontSize!==void 0&&e.push(`font-size:${o.fontSize}px`),o.color&&e.push(`color:${o.color}`),o.fontWeight&&e.push(`font-weight:${o.fontWeight}`),o.letterSpacing!==void 0&&o.letterSpacing!==null&&e.push(`letter-spacing:${o.letterSpacing}px`),o.lineHeight!==void 0&&e.push(`line-height:${o.lineHeight}`),o.fontStyle&&e.push(`font-style:${o.fontStyle}`),o.textAlign&&e.push(`text-align:${o.textAlign}`),o.textDecoration&&e.push(`text-decoration:${o.textDecoration}`),o.textOrientation==="vertical"&&(e.push("writing-mode:vertical-rl"),e.push("text-orientation:upright")),o.textGradient&&((A=o.textGradient.colors)!=null&&A.length))){const J=o.textGradient.angle||0,ae=o.textGradient.colors[0]||"#000000",ke=o.textGradient.colors[1]||"#000000";e.push(`background-image:linear-gradient(${J}deg, ${ae}, ${ke})`),e.push("-webkit-background-clip:text"),e.push("background-clip:text"),e.push("color:transparent")}x.type==="image"&&o.objectFit&&e.push(`object-fit:${o.objectFit}`);const p=x.eventBinding;return p&&p.enabled&&p.cursor&&e.push(`cursor:${p.cursor}`),e.join(";")}function xl(x){return String(x).split(";").map(o=>o.trim()).filter(Boolean).map(o=>o.includes("!important")?o:`${o} !important`).join("; ")}function Dl(x){return String(x).replace(/\{([^}]*)\}/g,(o,e)=>`{ ${xl(e)} }`)}function Gl(x){const o=[],e=p=>{p.forEach(w=>{if((w.type==="group"||w.type==="container")&&Array.isArray(w.children))e(w.children);else{const A=(w.className||"").trim(),J=w.customClassCss?String(w.customClassCss).trim():"";if(!A||!J)return;/\{[^}]*\}/.test(J)?o.push(Dl(J)):o.push(`.${A} { ${xl(J)} }`)}})};return e(x),o.join(`
`)}function vl(x){const o=String(x||"").trim();if(!o)return"";let e=o.replace(/[^A-Za-z0-9_]/g,"_");return/[A-Za-z_]/.test(e[0]||"")||(e="_"+e),e}function Ll(x,o){if(!x.hidden)return"";const e=vl(x.hiddenLabel);return e?` ${o!=null&&o.useShow?"v-show":"v-if"}="${e}"`:""}function il(x,o,e,p){let w=0;const A=e.some(d=>d.type==="chart");function J(d,U){var R,Oe,v,X,oe;const H=Bl(d),te=d.zIndex||1,T=d.className&&d.className.trim()?` class="${d.className.trim()}"`:"",q=Ll(d,{useShow:(p==null?void 0:p.hideDirective)==="show"}),$e=d.eventBinding,_=$e&&$e.enabled&&$e.handlerName?` @click="${String($e.handlerName)}($event)"`:"",D=d.elementId&&d.elementId.trim()?` id="${d.elementId.trim()}"`:"";if((d.type==="group"||d.type==="container")&&Array.isArray(d.children)){const b=d.children.map((t,le)=>J(t,le)).join(`
        `);return`<div${T}${q}${_}${D} style="${H};z-index:${te}">
        ${b}
      </div>`}if(d.type==="text"){const b=er(d.text||"");return`<div${T}${q}${_} style="${H};z-index:${te}">${b}</div>`}if(d.type==="image"){if(p!=null&&p.imageFileMap&&p.imageFileMap[d.id]){const b=p.imageFileMap[d.id],t=d.elementId&&d.elementId.trim()?` id="${d.elementId.trim()}"`:"";return`<img${T}${t}${q}${_} :src="assetUrl('./imgs/${b}')" style="${H};z-index:${te}" alt="" />`}if(p!=null&&p.imageFileNames&&p.imageFileNames[w]){const b=p.imageFileNames[w++],t=d.elementId&&d.elementId.trim()?` id="${d.elementId.trim()}"`:"";return`<img${T}${t}${q}${_} :src="assetUrl('./imgs/${b}')" style="${H};z-index:${te}" alt="" />`}return`<div${T}${q}${_} style="${H};z-index:${te}"></div>`}if(d.type==="line"){const b=d.style||{},t=b.lineColor||"#ffffff",le=(R=b.lineThickness)!=null?R:2,ee=b.lineOrientation||"horizontal",tt=b.lineStyle==="dashed",Pe=(Oe=b.lineDashLength)!=null?Oe:6,We=(v=b.lineDashGap)!=null?v:4,Xe=Math.max(1,Math.round((X=d.width)!=null?X:ee==="horizontal"?200:2)),Ye=Math.max(1,Math.round((oe=d.height)!=null?oe:ee==="horizontal"?2:200)),st=Math.round(Ye/2),xt=Math.round(Xe/2),vt=tt?` stroke-dasharray="${Pe} ${We}"`:"";return ee==="horizontal"?`<svg${T}${q}${_} viewBox="0 0 ${Xe} ${Ye}" preserveAspectRatio="none" style="${H};z-index:${te}"><line x1="0" y1="${st}" x2="${Xe}" y2="${st}" stroke="${t}" stroke-width="${le}"${vt} fill="none" /></svg>`:`<svg${T}${q}${_} viewBox="0 0 ${Xe} ${Ye}" preserveAspectRatio="none" style="${H};z-index:${te}"><line x1="${xt}" y1="0" x2="${xt}" y2="${Ye}" stroke="${t}" stroke-width="${le}"${vt} fill="none" /></svg>`}if(d.type==="chart"){const b=d.elementId&&d.elementId.trim()?d.elementId.trim():`chart_${U}`,t=er(d.text||"chart");return`<div${T}${q}${_} id="${b}" style="${H};z-index:${te}">${t}</div>`}return`<div${T}${q}${_} style="${H};z-index:${te}">${er(d.text||"")}</div>`}const ae=e.map((d,U)=>J(d,U)).join(`
      `),ke=Gl(e),C=o.backgroundUrl||"",ge=o.backgroundColor||"transparent",P=o.globalFontFamily||"",Q=o.globalFontSize||14,de=o.globalColor||"#000000",Y=(()=>{const d=[];let U=0;return e.forEach(H=>{if(H.type==="chart"){const te=H.elementId&&H.elementId.trim()?H.elementId.trim():`chart_${U}`;U++;const T=H.chartOption||{};try{d.push(`'${te.replace(/'/g,"\\'")}' : ${JSON.stringify(T)}`)}catch{d.push(`'${te.replace(/'/g,"\\'")}' : {}`)}}}),`{ ${d.join(", ")} }`})(),k=(()=>{const d=new Set;return e.forEach(U=>{const H=String(U.hiddenLabel||"").trim(),te=vl(H),T=!!U.hidden;te&&T&&d.add(te)}),Array.from(d).map(U=>`const ${U} = ref(false)`).join(`
`)})();return`
<template>
  <div class="container" :style="containerStyle">
    ${ae}
  </div>
</template>

<script setup lang="ts">
import { onMounted, ref, computed } from 'vue'
${A?`import * as echarts from 'echarts'
`:""}
function assetUrl(p: string): string { try { return new URL(p, import.meta.url).href } catch { return p } }
const config = {
  width: ${Math.round(o.width)},
  height: ${Math.round(o.height)},
  backgroundColor: '${ge.replace(/'/g,"\\'")}',
  globalFontFamily: '${P.replace(/'/g,"\\'")}',
  globalFontSize: ${Math.round(Q)},
  globalColor: '${de}',
}
const backgroundUrl: string = ${p!=null&&p.backgroundFileName?`assetUrl('./imgs/${String(p.backgroundFileName).replace(/'/g,"\\'")}')`:`'${C.replace(/'/g,"\\'")}'`}
const images: Record<string, string> = {}
${A?`const chartOptions: Record<string, any> = ${Y}`:""}
${k?`${k}
`:""}
const containerStyle = computed(() => {
  const base: Record<string, string> = {
    position: 'relative',
    width: config.width + 'px',
    height: config.height + 'px',
    fontFamily: config.globalFontFamily,
    fontSize: config.globalFontSize + 'px',
    color: config.globalColor,
    backgroundColor: (config.backgroundColor || 'transparent') as string,
  }
  if (backgroundUrl) {
    return Object.assign({}, base, {
      backgroundImage: 'url(' + backgroundUrl + ')',
      backgroundSize: 'cover',
      backgroundRepeat: 'no-repeat',
    }) as Record<string, string>
  }
  return base
})
// 事件处理函数
${(()=>{const d=new Map,U=H=>{H.forEach(te=>{const T=te.eventBinding;T&&T.enabled&&T.handlerName&&d.set(String(T.handlerName),String(T.code||"")),Array.isArray(te.children)&&U(te.children)})};return U(e),Array.from(d.entries()).map(([H,te])=>`function ${H}(e: MouseEvent){
${te}
}`).join(`
`)})()}
${A?`onMounted(() => {
  Object.keys(chartOptions || {}).forEach((id) => {
    const el = document.getElementById(id)
    if (el && (echarts as any)) { const inst = (echarts as any).init(el); inst.setOption((chartOptions as any)[id], true) }
  })
})`:""}
<\/script>

<style scoped>
.container { box-sizing: border-box; }
.text-flex-left { display:flex; align-items:center; justify-content:flex-start; }
.text-flex-center { display:flex; align-items:center; justify-content:center; }
.text-flex-right { display:flex; align-items:center; justify-content:flex-end; }
${ke}
</style>
`}function mn(x){return String(x).replace(/[&<>"']/g,o=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"})[o]||o)}function Ul(x){const o=x.style||{},e=[];if(e.push("position:absolute"),e.push(`left:${Math.round(x.left||x.x||0)}px`),e.push(`top:${Math.round(x.top||x.y||0)}px`),x.autoSize||(x.width&&e.push(`width:${Math.round(x.width)}px`),x.height&&e.push(`height:${Math.round(x.height)}px`)),o.opacity!==void 0&&e.push(`opacity:${o.opacity}`),o.border&&!(x.type==="container"&&o.border==="1px dashed rgba(148,163,184,0.6)")&&e.push(`border:${o.border}`),o.borderRadius&&e.push(`border-radius:${o.borderRadius}`),o.backgroundColor&&e.push(`background-color:${o.backgroundColor}`),o.boxShadow&&e.push(`box-shadow:${o.boxShadow}`),o.backgroundGradient&&o.backgroundGradient.colors&&o.backgroundGradient.colors.length){const w=o.backgroundGradient.angle||0,A=o.backgroundGradient.colors[0]||"#000000",J=o.backgroundGradient.colors[1]||"#000000";e.push(`background-image:linear-gradient(${w}deg, ${A}, ${J})`),e.push("background-size:cover"),e.push("background-repeat:no-repeat")}if(x.type==="text"&&(o.fontFamily&&e.push(`font-family:${o.fontFamily}`),o.fontSize!==void 0&&e.push(`font-size:${o.fontSize}px`),o.color&&e.push(`color:${o.color}`),o.fontWeight&&e.push(`font-weight:${o.fontWeight}`),o.letterSpacing!==void 0&&o.letterSpacing!==null&&e.push(`letter-spacing:${o.letterSpacing}px`),o.lineHeight!==void 0&&e.push(`line-height:${o.lineHeight}`),o.fontStyle&&e.push(`font-style:${o.fontStyle}`),o.textAlign&&e.push(`text-align:${o.textAlign}`),o.textDecoration&&e.push(`text-decoration:${o.textDecoration}`),o.textOrientation==="vertical"&&(e.push("writing-mode:vertical-rl"),e.push("text-orientation:upright")),o.textGradient&&o.textGradient.colors&&o.textGradient.colors.length)){const w=o.textGradient.angle||0,A=o.textGradient.colors[0]||"#000000",J=o.textGradient.colors[1]||"#000000";e.push(`background-image:linear-gradient(${w}deg, ${A}, ${J})`),e.push("-webkit-background-clip:text"),e.push("background-clip:text"),e.push("color:transparent")}x.type==="image"&&o.objectFit&&e.push(`object-fit:${o.objectFit}`);const p=x.eventBinding;return p&&p.enabled&&p.cursor&&e.push(`cursor:${p.cursor}`),x.hidden&&e.push("display:none"),e.join(";")}function hl(x){return String(x).split(";").map(o=>o.trim()).filter(Boolean).map(o=>o.includes("!important")?o:`${o} !important`).join("; ")}function Rl(x){return String(x).replace(/\{([^}]*)\}/g,(o,e)=>`{ ${hl(e)} }`)}function Tl(x){const o=[],e=p=>{p.forEach(w=>{if((w.type==="group"||w.type==="container")&&Array.isArray(w.children))e(w.children);else{const A=(w.className||"").trim(),J=w.customClassCss?String(w.customClassCss).trim():"";if(!A||!J)return;/\{[^}]*\}/.test(J)?o.push(Rl(J)):o.push(`.${A} { ${hl(J)} }`)}})};return e(x),o.join(`
`)}function dl(x,o,e,p){function w(d){for(const U of d)if((U.type==="group"||U.type==="container")&&Array.isArray(U.children)){if(w(U.children))return!0}else if(U.type==="chart")return!0;return!1}const A=w(e),J=o.backgroundUrl||"",ae=p!=null&&p.backgroundFileName?`background-image:url('./imgs/${p.backgroundFileName}');background-size:cover;background-repeat:no-repeat;`:J?`background-image:url('${J}');background-size:cover;background-repeat:no-repeat;`:"";let ke=0;const C={};(function(U){let H=0;const te=T=>{T.forEach(q=>{if((q.type==="group"||q.type==="container")&&Array.isArray(q.children))te(q.children);else if(q.type==="chart"){const $e=q.elementId&&String(q.elementId).trim()?String(q.elementId).trim():`chart_${H++}`;C[q.id]=$e}})};te(U)})(e);function ge(d){var _,D,R,Oe,v;const U=Ul(d),H=d.zIndex||1,te=d.className&&d.className.trim()?` class="${d.className.trim()}"`:"",T=d.eventBinding,q=T&&T.enabled&&T.handlerName?` onclick="${String(T.handlerName)}(event)"`:"",$e=d.elementId&&d.elementId.trim()?` id="${d.elementId.trim()}"`:"";if((d.type==="group"||d.type==="container")&&Array.isArray(d.children)&&d.children.length>0){const X=d.children.map(oe=>ge(oe)).join(`
        `);return`<div${te}${q}${$e} style="${U};z-index:${H}">
        ${X}
      </div>`}if(d.type==="text"){const X=(d.style||{}).textAlign||"left",oe=X==="center"?"text-flex-center":X==="right"?"text-flex-right":"text-flex-left",b=[(d.className||"").trim(),oe].filter(Boolean).join(" ");return`<div${b?` class="${b}"`:""}${q} style="${U};z-index:${H}">${mn(d.text||"")}</div>`}if(d.type==="image"){if(p!=null&&p.imageFileMap&&p.imageFileMap[d.id]){const X=p.imageFileMap[d.id];return`<img${te}${q} src="./imgs/${X}" style="${U};z-index:${H}" alt="" />`}if(p!=null&&p.imageFileNames&&p.imageFileNames[ke]){const X=p.imageFileNames[ke++];return`<img${te}${q} src="./imgs/${X}" style="${U};z-index:${H}" alt="" />`}return`<div${te}${q} style="${U};z-index:${H}"></div>`}if(d.type==="line"){const X=d.style||{},oe=X.lineColor||"#ffffff",b=(_=X.lineThickness)!=null?_:2,t=X.lineOrientation||"horizontal",le=X.lineStyle==="dashed",ee=(D=X.lineDashLength)!=null?D:6,tt=(R=X.lineDashGap)!=null?R:4,Pe=Math.max(1,Math.round((Oe=d.width)!=null?Oe:t==="horizontal"?200:2)),We=Math.max(1,Math.round((v=d.height)!=null?v:t==="horizontal"?2:200)),Xe=Math.round(We/2),Ye=Math.round(Pe/2),st=le?` stroke-dasharray="${ee} ${tt}"`:"";return t==="horizontal"?`<svg${te}${q} viewBox="0 0 ${Pe} ${We}" preserveAspectRatio="none" style="${U};z-index:${H}"><line x1="0" y1="${Xe}" x2="${Pe}" y2="${Xe}" stroke="${oe}" stroke-width="${b}"${st} fill="none" /></svg>`:`<svg${te}${q} viewBox="0 0 ${Pe} ${We}" preserveAspectRatio="none" style="${U};z-index:${H}"><line x1="${Ye}" y1="0" x2="${Ye}" y2="${We}" stroke="${oe}" stroke-width="${b}"${st} fill="none" /></svg>`}if(d.type==="chart"){const X=C[d.id]||String(d.elementId||"");return`<div${te}${q} id="${X}" style="${U};z-index:${H}">${mn(d.text||"chart")}</div>`}return d.type==="container"?`<div${te}${q} style="${U};z-index:${H}">${mn(d.text||"")}</div>`:`<div${te}${q} style="${U};z-index:${H}">${mn(d.text||"")}</div>`}const P=e.map(d=>ge(d)).join(`
      `),Q=Tl(e),de=p!=null&&p.fontFaces&&p.fontFaces.length>0?p.fontFaces.map(d=>`@font-face { font-family: '${String(d.family).replace(/'/g,"\\'")}'; src: url('./fonts/${String(d.file)}'); font-weight: normal; font-style: normal; }`).join(`
`):"";function Y(d,U){d.forEach(H=>{if((H.type==="group"||H.type==="container")&&Array.isArray(H.children))Y(H.children,U);else if(H.type==="chart"){const te=C[H.id]||String(H.elementId||"");try{U.push(`chartOptions['${te.replace(/'/g,"\\'")}'] = ${JSON.stringify(H.chartOption||{})};`)}catch{U.push(`chartOptions['${te.replace(/'/g,"\\'")}'] = {};`)}}})}const k=A?`
    (function(){
      var chartOptions = {};
      ${(()=>{const d=[];return Y(e,d),d.join(`
      `)})()}
      Object.keys(chartOptions).forEach(function(id){
        var el = document.getElementById(id);
        if (el && window.echarts) { var inst = window.echarts.init(el); inst.setOption(chartOptions[id], true); }
      });
    })();
  `:"";return`<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<title>${mn(x)}</title>
<style>
.container { position:relative; width:${Math.round(o.width)}px; height:${Math.round(o.height)}px; font-family:${String(o.globalFontFamily||"").replace(/'/g,"\\'")}; font-size:${Math.round(o.globalFontSize)}px; color:${String(o.globalColor)}; background-color:${String(o.backgroundColor||"transparent")}; ${ae} }
.text-flex-left { display:flex; align-items:center; justify-content:flex-start; }
.text-flex-center { display:flex; align-items:center; justify-content:center; }
.text-flex-right { display:flex; align-items:center; justify-content:flex-end; }
${de}
${Q}
</style>
${A?'<script src="https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"><\/script>':""}
</head>
<body>
<div class="container">
  ${P}
</div>
<script>
${(()=>{const d=new Map,U=H=>{H.forEach(te=>{const T=te.eventBinding;T&&T.enabled&&T.handlerName&&d.set(String(T.handlerName),String(T.code||"")),Array.isArray(te.children)&&U(te.children)})};return U(e),Array.from(d.entries()).map(([H,te])=>`function ${H}(event){
${te}
}`).join(`
`)})()}
${k}
<\/script>
</body>
</html>`}function Xn(x){return x.replace(/[&<>"']/g,o=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"})[o]||o)}function ul(x){var p,w;const o=x.style||{},e=[];if(e.push("position:absolute"),e.push(`left:${Math.round(x.left||0)}px`),e.push(`top:${Math.round(x.top||0)}px`),x.autoSize||(x.width&&e.push(`width:${Math.round(x.width)}px`),x.height&&e.push(`height:${Math.round(x.height)}px`)),o.opacity!==void 0&&e.push(`opacity:${o.opacity}`),o.border&&!(x.type==="container"&&o.border==="1px dashed rgba(148,163,184,0.6)")&&e.push(`border:${o.border}`),o.borderRadius&&e.push(`border-radius:${o.borderRadius}`),o.backgroundColor&&e.push(`background-color:${o.backgroundColor}`),o.boxShadow&&e.push(`box-shadow:${o.boxShadow}`),o.backgroundGradient&&((p=o.backgroundGradient.colors)!=null&&p.length)){const A=o.backgroundGradient.angle||0,J=o.backgroundGradient.colors[0]||"#000000",ae=o.backgroundGradient.colors[1]||"#000000";e.push(`background-image:linear-gradient(${A}deg, ${J}, ${ae})`),e.push("background-size:cover"),e.push("background-repeat:no-repeat")}if(x.type==="text"&&(o.fontFamily&&e.push(`font-family:${o.fontFamily}`),o.fontSize!==void 0&&e.push(`font-size:${o.fontSize}px`),o.color&&e.push(`color:${o.color}`),o.fontWeight&&e.push(`font-weight:${o.fontWeight}`),o.letterSpacing!==void 0&&o.letterSpacing!==null&&e.push(`letter-spacing:${o.letterSpacing}px`),o.lineHeight!==void 0&&e.push(`line-height:${o.lineHeight}`),o.fontStyle&&e.push(`font-style:${o.fontStyle}`),o.textAlign&&e.push(`text-align:${o.textAlign}`),o.textDecoration&&e.push(`text-decoration:${o.textDecoration}`),o.textOrientation==="vertical"&&(e.push("writing-mode:vertical-rl"),e.push("text-orientation:upright")),o.textGradient&&((w=o.textGradient.colors)!=null&&w.length))){const A=o.textGradient.angle||0,J=o.textGradient.colors[0]||"#000000",ae=o.textGradient.colors[1]||"#000000";e.push(`background-image:linear-gradient(${A}deg, ${J}, ${ae})`),e.push("-webkit-background-clip:text"),e.push("background-clip:text"),e.push("color:transparent")}return x.type==="image"&&o.objectFit&&e.push(`object-fit:${o.objectFit}`),x.hidden&&e.push("display:none"),e.join(";")}function wl(x){return String(x).split(";").map(o=>o.trim()).filter(Boolean).map(o=>o.includes("!important")?o:`${o} !important`).join("; ")}function Vl(x){return String(x).replace(/\{([^}]*)\}/g,(o,e)=>`{ ${wl(e)} }`)}function Pl(x){const o=[],e=p=>{p.forEach(w=>{if((w.type==="group"||w.type==="container")&&Array.isArray(w.children))e(w.children);else{const A=(w.className||"").trim(),J=w.customClassCss?String(w.customClassCss).trim():"";if(!A||!J)return;/\{[^}]*\}/.test(J)?o.push(Vl(J)):o.push(`.${A} { ${wl(J)} }`)}})};return e(x),o.join(`
`)}function cl(x,o,e,p){const w=e.some(P=>P.type==="chart");let A=0;const J=e.map((P,Q)=>{var d,U,H,te,T;const de=ul(P),Y=P.zIndex||1,k=P.className&&P.className.trim()?` class="${P.className.trim()}"`:"";if((P.type==="group"||P.type==="container")&&Array.isArray(P.children)){const q=P.children.map(_=>{const D=ul(_),R=_.zIndex||1,Oe=_.className&&_.className.trim()?` class="${_.className.trim()}"`:"",v=_.elementId&&_.elementId.trim()?` id="${_.elementId.trim()}"`:"";if(_.type==="image"){if(p!=null&&p.imageFileMap&&p.imageFileMap[_.id]){const X=p.imageFileMap[_.id];return`<img${Oe}${v} src="/imgs/${X}" style="${D};z-index:${R}" alt="" />`}if(p!=null&&p.imageFileNames&&p.imageFileNames[A]){const X=p.imageFileNames[A++];return`<img${Oe}${v} src="/imgs/${X}" style="${D};z-index:${R}" alt="" />`}}return`<div${Oe}${v} style="${D};z-index:${R}">${Xn(_.text||"")}</div>`}).join(`
        `),$e=P.elementId&&P.elementId.trim()?` id="${P.elementId.trim()}"`:"";return`<div${k}${$e} style="${de};z-index:${Y}">${q}</div>`}if(P.type==="text")return`<div${k} style="${de};z-index:${Y}">${Xn(P.text||"")}</div>`;if(P.type==="image"){if(p!=null&&p.imageFileMap&&p.imageFileMap[P.id]){const q=p.imageFileMap[P.id];return`<img${k} src="/imgs/${q}" style="${de};z-index:${Y}" alt="" />`}if(p!=null&&p.imageFileNames&&p.imageFileNames[A]){const q=p.imageFileNames[A++];return`<img${k} src="/imgs/${q}" style="${de};z-index:${Y}" alt="" />`}return`<div${k} style="${de};z-index:${Y}"></div>`}if(P.type==="line"){const q=P.style||{},$e=q.lineColor||"#ffffff",_=(d=q.lineThickness)!=null?d:2,D=q.lineOrientation||"horizontal",R=q.lineStyle==="dashed",Oe=(U=q.lineDashLength)!=null?U:6,v=(H=q.lineDashGap)!=null?H:4,X=Math.max(1,Math.round((te=P.width)!=null?te:D==="horizontal"?200:2)),oe=Math.max(1,Math.round((T=P.height)!=null?T:D==="horizontal"?2:200)),b=Math.round(oe/2),t=Math.round(X/2),le=R?` stroke-dasharray="${Oe} ${v}"`:"";return D==="horizontal"?`<svg${k} viewBox="0 0 ${X} ${oe}" preserveAspectRatio="none" style="${de};z-index:${Y}"><line x1="0" y1="${b}" x2="${X}" y2="${b}" stroke="${$e}" stroke-width="${_}"${le} fill="none" /></svg>`:`<svg${k} viewBox="0 0 ${X} ${oe}" preserveAspectRatio="none" style="${de};z-index:${Y}"><line x1="${t}" y1="0" x2="${t}" y2="${oe}" stroke="${$e}" stroke-width="${_}"${le} fill="none" /></svg>`}if(P.type==="chart"){const q=P.elementId&&P.elementId.trim()?P.elementId.trim():`chart_${Q}`;return`<div${k} id="${q}" style="${de};z-index:${Y}">${Xn(P.text||"chart")}</div>`}return`<div${k} style="${de};z-index:${Y}">${Xn(P.text||"")}</div>`}).join(`
      `),ae=Pl(e),ke=p!=null&&p.fontFaces&&p.fontFaces.length>0?p.fontFaces.map(P=>`@font-face { font-family: '${P.family.replace(/'/g,"\\'")}'; src: url('/fonts/${P.file}'); font-weight: normal; font-style: normal; }`).join(`
`):"",C=(()=>{const P=[];return e.forEach((Q,de)=>{if(Q.type==="chart"){const Y=Q.elementId&&Q.elementId.trim()?Q.elementId.trim():`chart_${de}`,k=Q.chartOption||{};try{P.push(`'${Y.replace(/'/g,"\\'")}' : ${JSON.stringify(k)}`)}catch{P.push(`'${Y.replace(/'/g,"\\'")}' : {}`)}}}),`{ ${P.join(", ")} }`})(),ge=p!=null&&p.backgroundFileName?`'/imgs/${String(p.backgroundFileName).replace(/'/g,"\\'")}'`:`'${(o.backgroundUrl||"").replace(/'/g,"\\'")}'`;return`import React, { useEffect } from 'react';
${w?`import * as echarts from 'echarts';
`:""}
export default function ${x.replace(/[^A-Za-z0-9_]/g,"_")}() {
  const config = { width: ${Math.round(o.width)}, height: ${Math.round(o.height)}, backgroundColor: '${(o.backgroundColor||"transparent").replace(/'/g,"\\'")}', globalFontFamily: '${(o.globalFontFamily||"").replace(/'/g,"\\'")}', globalFontSize: ${Math.round(o.globalFontSize)}, globalColor: '${o.globalColor}' };
  const backgroundUrl = ${ge};
  ${w?`const chartOptions = ${C};
  useEffect(() => {
    Object.keys(chartOptions || {}).forEach((id) => {
      const el = document.getElementById(id);
      if (el) { const inst = echarts.init(el); inst.setOption(chartOptions[id], true); }
    });
  }, []);
`:""}  const containerStyle = { position:'relative', width: config.width + 'px', height: config.height + 'px', fontFamily: config.globalFontFamily, fontSize: config.globalFontSize + 'px', color: config.globalColor, backgroundColor: config.backgroundColor, ...(backgroundUrl ? { backgroundImage: 'url(' + backgroundUrl + ')', backgroundSize: 'cover', backgroundRepeat: 'no-repeat' } : {}) };
  return (
    <div className="container" style={containerStyle}>
      <style>{\`.text-flex-left{display:flex;align-items:center;justify-content:flex-start}.text-flex-center{display:flex;align-items:center;justify-content:center}.text-flex-right{display:flex;align-items:center;justify-content:flex-end${ke?"\\n"+ke:""}${ae?"\\n"+ae:""}\`}</style>
      <div dangerouslySetInnerHTML={{ __html: \`${J.replace(/`/g,"\\`")}\` }} />
    </div>
  );
}
`}var pl=gl(Ml()),Hl=["placeholder"],Wl={key:0,class:"absolute z-10 bg-gray-900 border border-gray-700 rounded w-full mt-1 max-h-40 overflow-auto shadow custom-scrollbar"},_l=["onMousedown"],Jl={key:0,class:"px-2 py-2 text-xs text-gray-400"},ql=St({__name:"SearchableSelect",props:{modelValue:{},options:{},placeholder:{},numeric:{type:Boolean}},emits:["update:modelValue"],setup(x,{emit:o}){const e=x,p=o,w=we(!1),A=we(""),J=we(null),ae=we("");let ke=null;const C=we(!1);mt(()=>e.modelValue,T=>{T==null?A.value="":A.value=String(T)},{immediate:!0});const ge=Te(()=>e.options.map(T=>String(T))),P=Te(()=>{const T=ae.value.trim().toLowerCase();return T?ge.value.filter(q=>q.toLowerCase().includes(T)):ge.value});function Q(T){A.value=T;const q=e.numeric?Number(T):T;p("update:modelValue",q),w.value=!1}function de(){const T=A.value.trim();if(!T){p("update:modelValue",(e.numeric,null)),w.value=!1;return}const q=e.numeric?Number(T):T;p("update:modelValue",q),w.value=!1}function Y(){C.value=!1,w.value=!0,U(A.value)}function k(){}function d(T){T.key==="Enter"&&de()}function U(T){ke&&window.clearTimeout(ke),ke=window.setTimeout(()=>{ae.value=T},180)}function H(){C.value=!0,w.value=!0,U(A.value)}function te(T){J.value&&(J.value.contains(T.target)||(w.value=!1))}return tr(()=>{window.addEventListener("click",te),ae.value=A.value}),nr(()=>{window.removeEventListener("click",te),ke&&window.clearTimeout(ke)}),(T,q)=>(j(),z("div",{class:"relative",ref_key:"root",ref:J},[ye(n("input",{class:"border border-gray-700 bg-gray-900 text-gray-100 rounded w-full px-2 py-1",placeholder:x.placeholder||"搜索选择或直接输入","onUpdate:modelValue":q[0]||(q[0]=$e=>A.value=$e),onInput:H,onFocus:Y,onBlur:k,onKeydown:d},null,40,Hl),[[Ee,A.value]]),w.value?(j(),z("div",Wl,[(j(!0),z(Ft,null,Rt(P.value,$e=>(j(),z("div",{key:$e,class:"px-2 py-1 hover:bg-gray-700 cursor-pointer text-sm text-gray-100",onMousedown:yl(_=>Q($e),["prevent"])},Ze($e),41,_l))),128)),P.value.length===0?(j(),z("div",Jl,"无匹配项，回车使用当前输入")):Z("",!0)])):Z("",!0)],512))}}),It=ql,Xl={class:"space-y-3"},Yl={class:"flex items-center justify-between"},Kl={class:"inline-flex items-center cursor-pointer"},Zl={class:"flex items-center justify-between"},Ql={class:"inline-flex items-center cursor-pointer"},eo=St({__name:"CanvasSettingsPanel",props:{spacingEnabled:{type:Boolean},alignmentEnabled:{type:Boolean}},emits:["update:spacingEnabled","update:alignmentEnabled"],setup(x,{emit:o}){const e=x,p=o,w=Te({get:()=>e.spacingEnabled,set:J=>p("update:spacingEnabled",J)}),A=Te({get:()=>e.alignmentEnabled,set:J=>p("update:alignmentEnabled",J)});return(J,ae)=>(j(),z("div",Xl,[ae[6]||(ae[6]=n("h3",{class:"text-sm font-medium text-cyan-300 border-b border-cyan-500/30 pb-1"},"辅助间距",-1)),n("div",Yl,[ae[3]||(ae[3]=n("label",{class:"text-xs text-gray-400"},"显示间距标注",-1)),n("label",Kl,[ye(n("input",{type:"checkbox",class:"sr-only peer","onUpdate:modelValue":ae[0]||(ae[0]=ke=>w.value=ke)},null,512),[[Kn,w.value]]),ae[2]||(ae[2]=n("div",{class:"relative w-12 h-6 rounded-full bg-gray-700/60 transition-all duration-200 shadow-inner peer-checked:bg-gradient-to-r peer-checked:from-cyan-600 peer-checked:to-blue-600"},[n("div",{class:"absolute left-0.5 top-0.5 w-5 h-5 bg-white rounded-full shadow transform transition-transform duration-200 peer-checked:translate-x-6"})],-1)),n("span",{class:Ve(["ml-3 text-xs",w.value?"text-cyan-300":"text-gray-300"])},Ze(w.value?"已开启":"已关闭"),3)])]),n("div",Zl,[ae[5]||(ae[5]=n("label",{class:"text-xs text-gray-400"},"显示对齐参考线",-1)),n("label",Ql,[ye(n("input",{type:"checkbox",class:"sr-only peer","onUpdate:modelValue":ae[1]||(ae[1]=ke=>A.value=ke)},null,512),[[Kn,A.value]]),ae[4]||(ae[4]=n("div",{class:"relative w-12 h-6 rounded-full bg-gray-700/60 transition-all duration-200 shadow-inner peer-checked:bg-gradient-to-r peer-checked:from-cyan-600 peer-checked:to-blue-600"},[n("div",{class:"absolute left-0.5 top-0.5 w-5 h-5 bg-white rounded-full shadow transform transition-transform duration-200 peer-checked:translate-x-6"})],-1)),n("span",{class:Ve(["ml-3 text-xs",A.value?"text-cyan-300":"text-gray-300"])},Ze(A.value?"已开启":"已关闭"),3)])])]))}}),to=eo,no={class:"space-y-3"},ro={key:0,class:"text-sm text-gray-400"},lo={key:1,class:"space-y-2"},oo=St({__name:"LayersList",props:{elements:{},selectedId:{}},emits:["select","reorderTop"],setup(x,{emit:o}){const e=x,p=o,w=Te(()=>e.elements),A=we({});function J(Y){A.value[Y]=!A.value[Y]}function ae(Y){const k=Y.children;return Array.isArray(k)&&k.length>0}function ke(Y){const k=Y.children;return Array.isArray(k)?k:[]}const C=we(null),ge=we(null);function P(Y){const k=(Y.elementId||"").trim(),d=(Y.className||"").trim(),U=(Y.text||"").trim();return k||d||U||Y.id}function Q(Y){const k=String(Y.type||"").toLowerCase();return k==="text"?{label:"文本",cls:"bg-blue-600/30 text-blue-200"}:k==="image"?{label:"图片",cls:"bg-emerald-600/30 text-emerald-200"}:k==="chart"?{label:"图表",cls:"bg-orange-600/30 text-orange-200"}:k==="line"?{label:"线条",cls:"bg-slate-600/30 text-slate-200"}:k==="container"?{label:"容器",cls:"bg-cyan-600/30 text-cyan-200"}:k==="group"?{label:"分组",cls:"bg-purple-600/30 text-purple-200"}:{label:"元素",cls:"bg-gray-600/30 text-gray-200"}}const de=St({name:"LayerNode",props:{node:{type:Object,required:!0},selectedId:{type:String,default:null},depth:{type:Number,default:0},index:{type:Number,default:-1}},emits:["select","reorderTop"],setup(Y,{emit:k}){return()=>{const d=Y.node,U=Y.depth===0,H=d.id===Y.selectedId,te=Q(d),T=Et("div",{class:"flex items-center gap-2"},[U&&Y.index>=0?Et("span",{class:"px-1.5 py-0.5 text-[10px] rounded bg-cyan-600/30 text-cyan-200"},String(Y.index+1)):null,ae(d)?Et("button",{class:"px-2 py-1 text-xs bg-gray-700/60 hover:bg-gray-600/60 rounded text-gray-200",onClick:_=>{_.stopPropagation(),J(d.id)},title:A.value[d.id]?"收起":"展开"},A.value[d.id]?"▼":"▶"):null,Et("span",{class:`px-1.5 py-0.5 text-[10px] rounded ${te.cls}`},te.label),Et("span",{class:"text-left text-sm text-gray-100 truncate whitespace-nowrap max-w-[180px]",title:P(d)},P(d))]),q=Et("div",{class:["bg-gray-800/60 border border-cyan-500/20 rounded-lg px-3 py-2 cursor-grab hover:bg-gray-700/60 transition-colors",H?"ring-2 ring-cyan-400/40 bg-gray-700/70":"",U&&ge.value===Y.index?"border-purple-400":"",Y.depth>0?"ml-3":""].filter(Boolean).join(" "),onClick:()=>k("select",d.id),draggable:U?!0:void 0,onDragstart:_=>{U&&(C.value=Y.index,_.target.classList.add("cursor-grabbing"))},onDragover:_=>{U&&(_.preventDefault(),ge.value=Y.index)},onDragenter:()=>{U&&(ge.value=Y.index)},onDrop:_=>{if(!U)return;_.preventDefault();const D=C.value,R=Y.index;C.value=null,ge.value=null,typeof D=="number"&&typeof R=="number"&&D!==R&&k("reorderTop",{from:D,to:R})},onDragend:_=>{C.value=null,ge.value=null,_.target.classList.remove("cursor-grabbing")}},[T,null]),$e=A.value[d.id]&&ae(d)?Et("div",{class:"mt-2 space-y-2 pl-3"},[...ke(d)].map(_=>Et(de,{node:_,selectedId:Y.selectedId,depth:Y.depth+1,index:-1,onSelect:D=>k("select",D)}))):null;return Et("div",{},[q,$e])}}});return(Y,k)=>(j(),z("div",no,[k[2]||(k[2]=n("div",{class:"text-xs text-gray-400"},"所有元素按层叠从上到下显示，支持展开分组/容器",-1)),w.value.length===0?(j(),z("div",ro,"暂无元素")):(j(),z("div",lo,[(j(!0),z(Ft,null,Rt(w.value,(d,U)=>(j(),Zn(ml(de),{key:d.id,node:d,selectedId:x.selectedId,depth:0,index:U,onSelect:k[0]||(k[0]=H=>p("select",H)),onReorderTop:k[1]||(k[1]=H=>p("reorderTop",H))},null,8,["node","selectedId","index"]))),128))]))]))}}),so=oo,ao={class:"w-80 min-w-[300px] bg-gray-900/80 backdrop-blur-sm border border-cyan-500/30 rounded-xl shadow-2xl shadow-cyan-500/20 flex flex-col"},io={class:"p-4 space-y-4 overflow-y-auto flex-1 custom-scrollbar"},uo={class:"flex items-center gap-2"},co={key:0,class:"space-y-2"},po={key:1,class:"space-y-2"},fo={class:"grid grid-cols-2 gap-2"},go={key:2,class:"space-y-2"},mo={class:"flex gap-2"},yo={key:3,class:"space-y-2"},bo={class:"flex gap-2"},xo=["value"],vo={key:4,class:"space-y-3"},ho={class:"space-y-2"},wo={class:"space-y-2"},$o={class:"space-y-2"},ko={key:6,class:"space-y-2 pt-4 border-t border-cyan-500/30"},Eo={class:"relative"},So={key:0,class:"fixed inset-0 z-50 flex items-center justify-center"},Mo={class:"relative w-[520px] max-w-[90vw] p-4 bg-gray-900/95 backdrop-blur-md border border-emerald-500/40 rounded-xl shadow-2xl"},Co={class:"flex items-center justify-between mb-3"},No={class:"grid grid-cols-2 gap-2"},Io={key:7,class:"space-y-3"},Fo=St({__name:"CanvasSidebar",props:{exportName:{},config:{},fontLibrary:{},spacingEnabled:{type:Boolean},alignmentEnabled:{type:Boolean},elements:{},selectedId:{}},emits:["update:exportName","update:configWidth","update:configHeight","update:backgroundColor","update:globalFontFamily","update:globalFontSize","update:globalColor","update:spacingEnabled","update:alignmentEnabled","backgroundFileChange","openPreview","downloadByFormat","downloadAllFormats","resetCanvas","selectElement","moveElementUp","moveElementDown","moveElementTop","moveElementBottom","reorderTopElements"],setup(x,{emit:o}){const e=x,p=o,w=Te({get:()=>e.exportName,set:_=>p("update:exportName",_)}),A=Te({get:()=>e.config.width,set:_=>p("update:configWidth",_)}),J=Te({get:()=>e.config.height,set:_=>p("update:configHeight",_)}),ae=Te({get:()=>e.config.backgroundColor||"",set:_=>p("update:backgroundColor",_)}),ke=Te({get:()=>e.config.globalFontFamily||"",set:_=>p("update:globalFontFamily",_)}),C=Te({get:()=>e.config.globalFontSize||14,set:_=>p("update:globalFontSize",_)}),ge=Te({get:()=>e.config.globalColor||"#ffffff",set:_=>p("update:globalColor",_)}),P=Te({get:()=>e.spacingEnabled,set:_=>p("update:spacingEnabled",_)}),Q=Te({get:()=>e.alignmentEnabled,set:_=>p("update:alignmentEnabled",_)});function de(_){try{return String(_||"#000000")}catch{return"#000000"}}const Y=Te({get:()=>k.value,set:_=>k.value=_}),k=we(!1),d=we("settings");function U(_){p("backgroundFileChange",_)}function H(){p("openPreview")}function te(){k.value=!k.value}function T(_){p("downloadByFormat",_),k.value=!1}function q(){p("downloadAllFormats"),k.value=!1}function $e(){p("resetCanvas")}return(_,D)=>(j(),z("div",ao,[D[31]||(D[31]=n("div",{class:"p-4 border-b border-cyan-500/30 bg-gradient-to-r from-cyan-600/20 to-blue-600/20 flex-shrink-0"},[n("h2",{class:"text-lg font-bold text-cyan-300 flex items-center gap-2"},[n("span",{class:"w-2 h-2 bg-cyan-400 rounded-full animate-pulse"}),yn(" 画布设置 ")])],-1)),n("div",io,[n("div",uo,[n("button",{class:Ve(["px-3 py-1 text-xs rounded bg-gradient-to-r from-cyan-600 to-blue-600 text-white",d.value==="settings"?"":"opacity-50"]),onClick:D[0]||(D[0]=R=>d.value="settings")},"设置",2),n("button",{class:Ve(["px-3 py-1 text-xs rounded bg-gradient-to-r from-purple-600 to-pink-600 text-white",d.value==="layers"?"":"opacity-50"]),onClick:D[1]||(D[1]=R=>d.value="layers")},"容器层级",2)]),d.value==="settings"?(j(),z("div",co,[D[21]||(D[21]=n("label",{class:"block text-sm font-medium text-cyan-300"},"组件名称",-1)),ye(n("input",{"onUpdate:modelValue":D[2]||(D[2]=R=>w.value=R),class:"w-full px-3 py-2 bg-gray-800/50 border border-cyan-500/30 rounded-lg text-gray-100 placeholder-gray-400 focus:border-cyan-400 focus:ring-1 focus:ring-cyan-400 focus:outline-none transition-all duration-200",placeholder:"GeneratedComponent"},null,512),[[Ee,w.value]])])):Z("",!0),d.value==="settings"?(j(),z("div",po,[D[22]||(D[22]=n("label",{class:"block text-sm font-medium text-cyan-300"},"画布尺寸",-1)),n("div",fo,[ye(n("input",{"onUpdate:modelValue":D[3]||(D[3]=R=>A.value=R),type:"number",class:"px-3 py-2 bg-gray-800/50 border border-cyan-500/30 rounded-lg text-gray-100 focus:border-cyan-400 focus:ring-1 focus:ring-cyan-400 focus:outline-none transition-all duration-200",placeholder:"宽度"},null,512),[[Ee,A.value,void 0,{number:!0}]]),ye(n("input",{"onUpdate:modelValue":D[4]||(D[4]=R=>J.value=R),type:"number",class:"px-3 py-2 bg-gray-800/50 border border-cyan-500/30 rounded-lg text-gray-100 focus:border-cyan-400 focus:ring-1 focus:ring-cyan-400 focus:outline-none transition-all duration-200",placeholder:"高度"},null,512),[[Ee,J.value,void 0,{number:!0}]])])])):Z("",!0),d.value==="settings"?(j(),z("div",go,[D[23]||(D[23]=n("label",{class:"block text-sm font-medium text-cyan-300"},"背景图片",-1)),n("div",mo,[n("input",{type:"file",onChange:U,accept:"image/*",class:"flex-1 text-xs text-gray-300 file:mr-2 file:py-1 file:px-2 file:rounded file:border-0 file:text-xs file:bg-cyan-600 file:text-white hover:file:bg-cyan-500 file:cursor-pointer"},null,32)])])):Z("",!0),d.value==="settings"?(j(),z("div",yo,[D[24]||(D[24]=n("label",{class:"block text-sm font-medium text-cyan-300"},"背景颜色",-1)),n("div",bo,[n("input",{value:de(ae.value),type:"color",onInput:D[5]||(D[5]=R=>p("update:backgroundColor",R.target.value)),class:"w-16 h-8 bg-gray-800/50 border border-cyan-500/30 rounded cursor-pointer"},null,40,xo),ye(n("input",{"onUpdate:modelValue":D[6]||(D[6]=R=>ae.value=R),type:"text",class:"flex-1 px-3 py-2 bg-gray-800/50 border border-cyan-500/30 rounded-lg text-gray-100 placeholder-gray-400 focus:border-cyan-400 focus:ring-1 focus:ring-cyan-400 focus:outline-none transition-all duration-200",placeholder:"#000000 或 rgba(...)"},null,512),[[Ee,ae.value]])])])):Z("",!0),d.value==="settings"?(j(),z("div",vo,[D[28]||(D[28]=n("h3",{class:"text-sm font-medium text-cyan-300 border-b border-cyan-500/30 pb-1"},"全局字体设置",-1)),n("div",ho,[D[25]||(D[25]=n("label",{class:"block text-xs text-gray-400"},"字体族",-1)),ct(It,{options:x.fontLibrary,modelValue:ke.value,"onUpdate:modelValue":D[7]||(D[7]=R=>ke.value=R),placeholder:"选择字体"},null,8,["options","modelValue"])]),n("div",wo,[D[26]||(D[26]=n("label",{class:"block text-xs text-gray-400"},"字号 (px)",-1)),ye(n("input",{"onUpdate:modelValue":D[8]||(D[8]=R=>C.value=R),type:"number",class:"w-full px-2 py-1 bg-gray-800/50 border border-cyan-500/30 rounded text-gray-100 text-sm focus:border-cyan-400 focus:ring-1 focus:ring-cyan-400 focus:outline-none transition-all duration-200"},null,512),[[Ee,C.value,void 0,{number:!0}]])]),n("div",$o,[D[27]||(D[27]=n("label",{class:"block text-xs text-gray-400"},"颜色",-1)),ye(n("input",{"onUpdate:modelValue":D[9]||(D[9]=R=>ge.value=R),type:"color",class:"w-full h-8 bg-gray-800/50 border border-cyan-500/30 rounded cursor-pointer"},null,512),[[Ee,ge.value]])])])):Z("",!0),d.value==="settings"?(j(),Zn(to,{key:5,spacingEnabled:P.value,alignmentEnabled:Q.value,"onUpdate:spacingEnabled":D[10]||(D[10]=R=>P.value=R),"onUpdate:alignmentEnabled":D[11]||(D[11]=R=>Q.value=R)},null,8,["spacingEnabled","alignmentEnabled"])):Z("",!0),d.value==="settings"?(j(),z("div",ko,[n("button",{onClick:H,class:"w-full px-4 py-2 bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-500 hover:to-blue-500 text-white rounded-lg font-medium transition-all duration-200 transform hover:scale-105 shadow-lg shadow-cyan-500/25"},"预览（新窗口）"),n("div",Eo,[n("button",{onClick:te,class:"w-full px-4 py-2 bg-gradient-to-r from-emerald-600 to-cyan-600 hover:from-emerald-500 hover:to-cyan-500 text-white rounded-lg font-medium transition-all duration-200 transform hover:scale-105 shadow-lg shadow-emerald-500/25"},"导出"),Y.value?(j(),z("div",So,[n("div",{class:"absolute inset-0 bg-black/60",onClick:D[12]||(D[12]=R=>Y.value=!1)}),n("div",Mo,[n("div",Co,[D[29]||(D[29]=n("h3",{class:"text-sm font-medium text-emerald-300"},"选择导出格式",-1)),n("button",{class:"px-2 py-1 text-xs bg-gray-700/60 hover:bg-gray-600/60 rounded text-gray-200",onClick:D[13]||(D[13]=R=>Y.value=!1)},"关闭")]),n("div",No,[n("button",{onClick:D[14]||(D[14]=R=>T("vue2")),class:"px-3 py-2 text-xs bg-gradient-to-r from-emerald-600 to-cyan-600 hover:from-emerald-500 hover:to-cyan-500 text-white rounded"},"Vue2 组件"),n("button",{onClick:D[15]||(D[15]=R=>T("vue3")),class:"px-3 py-2 text-xs bg-gradient-to-r from-teal-600 to-cyan-600 hover:from-teal-500 hover:to-cyan-500 text-white rounded"},"Vue3 组件"),n("button",{onClick:D[16]||(D[16]=R=>T("react")),class:"px-3 py-2 text-xs bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-500 hover:to-purple-500 text-white rounded"},"React 组件"),n("button",{onClick:D[17]||(D[17]=R=>T("html")),class:"px-3 py-2 text-xs bg-gradient-to-r from-slate-600 to-gray-700 hover:from-slate-500 hover:to-gray-600 text-white rounded"},"纯 HTML 页面"),n("button",{onClick:D[18]||(D[18]=R=>q()),class:"px-3 py-2 text-xs bg-gradient-to-r from-emerald-600 to-teal-600 hover:from-emerald-500 hover:to-teal-500 text-white rounded col-span-2"},"一键导出（全部）")])])])):Z("",!0)]),n("button",{onClick:$e,class:"w-full px-4 py-2 bg-gradient-to-r from-red-600 to-pink-600 hover:from-red-500 hover:to-pink-500 text-white rounded-lg font-medium transition-all duration-200 transform hover:scale-105 shadow-lg shadow-red-500/25"},"清空画布")])):Z("",!0),d.value==="layers"?(j(),z("div",Io,[D[30]||(D[30]=n("h3",{class:"text-sm font-medium text-purple-300 border-b border-purple-500/30 pb-1"},"容器层级",-1)),ct(so,{elements:e.elements||[],selectedId:e.selectedId||null,onSelect:D[19]||(D[19]=R=>p("selectElement",R)),onReorderTop:D[20]||(D[20]=R=>p("reorderTopElements",R))},null,8,["elements","selectedId"])])):Z("",!0)])]))}}),Ao=Fo,fl=gl(Il()),jo={class:"relative w-full"},zo=St({__name:"CssEditor",props:{modelValue:{},height:{},debounceMs:{}},emits:["update:modelValue"],setup(x,{emit:o}){const e=x,p=o,w=we(e.modelValue||"");let A=null;const J=typeof e.debounceMs=="number"?Math.max(0,e.debounceMs):250;mt(()=>e.modelValue,P=>{A&&(clearTimeout(A),A=null);const Q=P||"";Q!==w.value&&(w.value=Q)}),mt(w,P=>{A&&clearTimeout(A),A=window.setTimeout(()=>{p("update:modelValue",P),A=null},J)}),nr(()=>{A&&(clearTimeout(A),A=null)});function ae(){const P=w.value||"";if(navigator.clipboard&&typeof navigator.clipboard.writeText=="function")navigator.clipboard.writeText(P).catch(()=>{try{const Q=document.createElement("textarea");Q.value=P,document.body.appendChild(Q),Q.select(),document.execCommand("copy"),document.body.removeChild(Q)}catch{}});else try{const Q=document.createElement("textarea");Q.value=P,document.body.appendChild(Q),Q.select(),document.execCommand("copy"),document.body.removeChild(Q)}catch{}}function ke(){A&&(clearTimeout(A),A=null),w.value="",p("update:modelValue","")}const C=[$l,kl(),Sl],ge=Te(()=>{var P;return(P=e.height)!=null?P:"180px"});return(P,Q)=>(j(),z("div",jo,[n("div",{class:"absolute right-2 top-2 z-10 flex gap-2"},[n("button",{type:"button",class:"px-2 py-1 text-xs bg-gray-700/70 hover:bg-gray-700 text-gray-100 rounded",onClick:ae},"复制"),n("button",{type:"button",class:"px-2 py-1 text-xs bg-red-600/70 hover:bg-red-600 text-white rounded",onClick:ke},"清空")]),ct(ml(El),{modelValue:w.value,"onUpdate:modelValue":Q[0]||(Q[0]=de=>w.value=de),extensions:C,style:ot({height:ge.value,width:"100%"}),class:"w-full rounded border border-purple-500/30 bg-gray-800/50"},null,8,["modelValue","style"])]))}}),Oo=rr(zo,[["__scopeId","data-v-c1c6cbbe"]]);function Bo(x,o,e,p,w,A){x&&(x.style=x.style||{},x.style.boxShadow=`${o}px ${e}px ${p}px ${w}px ${A}`)}function Do(x){x.style=x.style||{},x.style.textGradient=x.style.textGradient||{colors:["#00A3FF","#ffffff"],angle:0}}function Go(x){x.style=x.style||{},x.style.backgroundGradient=x.style.backgroundGradient||{colors:["#00A3FF","#ffffff"],angle:90}}function Lo(x,o){var ge,P,Q;const e=(ge=o==null?void 0:o.maxDepth)!=null?ge:6,p=(P=o==null?void 0:o.maxEntries)!=null?P:400,w=(Q=o==null?void 0:o.includeIntermediate)!=null?Q:!1,A=[],J=new WeakSet;function ae(de){return Object.prototype.toString.call(de)==="[object Object]"}function ke(de){A.length<p&&A.push(de)}function C(de,Y,k){if(!(k>e)&&de!=null){if(typeof de!="object"){ke(Y);return}if(!J.has(de)){if(J.add(de),Array.isArray(de)){ke(Y);const d=Math.min(de.length,20);for(let U=0;U<d;U++)C(de[U],`${Y}[${U}]`,k+1);return}if(ae(de)){w&&ke(Y);const d=Object.keys(de).slice(0,50);for(const U of d)C(de[U],Y?`${Y}.${U}`:U,k+1);return}ke(Y)}}}return C(x,"",0),A.filter(Boolean)}function Uo(x,o){try{if(!x||!o)return"";const e=o.replace(/\[(\d+)\]/g,".$1").replace(/\['([^']+)'\]/g,".$1").replace(/\["([^\"]+)"\]/g,".$1").split(".").filter(Boolean);let p=x;for(const w of e){if(p==null)return"";p=p[w]}return typeof p=="object"?JSON.stringify(p):p!=null?p:""}catch{return""}}function Ro(x,o){var w;if(!o||!((w=o.dynamic)!=null&&w.enabled)||!o.dynamic.objectName||!o.dynamic.propertyPath)return"";const e=o.dynamic,p=x[e.objectName];return String(Uo(p,e.propertyPath))}var To={class:"w-80 min-w-[300px] bg-gray-900/80 backdrop-blur-sm border border-purple-500/30 rounded-xl shadow-2xl shadow-purple-500/20 flex flex-col"},Vo={key:0,class:"p-4 space-y-4 overflow-y-auto flex-1 custom-scrollbar"},Po={class:"space-y-3"},Ho={class:"grid grid-cols-2 gap-2"},Wo={class:"col-span-2"},_o={class:"space-y-3"},Jo={class:"flex items-center justify-between"},qo={class:"inline-flex items-center cursor-pointer"},Xo={key:0,class:"grid grid-cols-2 gap-2"},Yo={key:1},Ko={class:"space-y-3"},Zo={class:"space-y-2"},Qo={class:"flex items-center justify-between"},es={key:0},ts={class:"flex gap-2"},ns={key:1},rs={key:2},ls={key:3,class:"space-y-2 pt-2 border-t border-purple-500/20"},os={class:"flex items-center justify-between"},ss={class:"inline-flex items-center cursor-pointer"},as=["checked"],is={key:0,class:"space-y-1"},ds=["value"],us={key:0,class:"space-y-3"},cs={class:"flex items-center gap-2"},ps=["value"],fs=["value"],gs={class:"space-y-2"},ms={class:"flex items-center justify-between"},ys={class:"flex items-center gap-1 text-xs text-gray-300"},bs=["checked"],xs={key:0,class:"grid grid-cols-3 gap-2 items-end"},vs={class:"flex items-center gap-2"},hs=["value"],ws=["value"],$s={class:"flex items-center gap-2"},ks=["value"],Es=["value"],Ss={class:"space-y-1"},Ms=["value"],Cs=["value"],Ns={class:"space-y-2"},Is={class:"flex items-center justify-between"},Fs={class:"flex items-center gap-1 text-xs text-gray-300"},As=["checked"],js={key:0,class:"space-y-1"},zs={class:"flex items-center gap-2"},Os={key:0,class:"space-y-1"},Bs=["value"],Ds=["value"],Gs={key:1,class:"space-y-1"},Ls=["value"],Us={class:"flex items-center gap-1"},Rs=["value"],Ts={class:"space-y-2"},Vs={class:"flex items-center justify-between"},Ps={class:"flex items-center gap-1 text-xs text-gray-300"},Hs=["checked"],Ws={key:0,class:"space-y-2"},_s=["value"],Js={class:"space-y-1"},qs={class:"flex items-center gap-2"},Xs=["value"],Ys=["value"],Ks={class:"space-y-1"},Zs={class:"flex items-center gap-2"},Qs=["value"],ea=["value"],ta={class:"space-y-1"},na={class:"flex items-center gap-2"},ra=["value"],la=["value"],oa={class:"space-y-1"},sa={class:"flex items-center gap-2"},aa=["value"],ia=["value"],da={class:"space-y-1"},ua={key:0,class:"flex items-center gap-2"},ca=["value"],pa=["value"],fa={key:1,class:"space-y-3"},ga={class:"flex items-center gap-2"},ma={key:0,class:"space-y-2"},ya=["value"],ba={class:"grid grid-cols-2 gap-2"},xa=["value"],va=["value"],ha={key:0,class:"grid grid-cols-2 gap-2"},wa=["value"],$a=["value"],ka={key:1,class:"grid grid-cols-2 gap-2"},Ea={key:2,class:"grid grid-cols-3 gap-2 items-end"},Sa={key:1},Ma={class:"flex items-center justify-between mt-2"},Ca={key:0,class:"text-xs text-red-400"},Na={key:2,class:"space-y-3"},Ia={class:"space-y-2"},Fa={class:"flex gap-1"},Aa=["value"],ja=["value"],za={class:"grid grid-cols-2 gap-2"},Oa={class:"grid grid-cols-2 gap-1"},Ba=["value"],Da={class:"grid grid-cols-2 gap-2"},Ga=["value"],La={key:0},Ua=["value"],Ra={key:0,class:"grid grid-cols-2 gap-2"},Ta=["value"],Va={key:3,class:"space-y-3"},Pa={class:"space-y-2"},Ha={class:"space-y-2 mt-2"},Wa={class:"flex items-center gap-2"},_a=["checked"],Ja={key:0,class:"space-y-2 p-2 bg-gray-800/30 rounded"},qa={class:"text-xs text-gray-400"},Xa={class:"space-y-2"},Ya={class:"grid grid-cols-2 gap-1"},Ka={class:"grid grid-cols-2 gap-2"},Za={class:"grid grid-cols-2 gap-2"},Qa={class:"grid grid-cols-2 gap-2"},ei=["value"],ti=["value"],ni={class:"space-y-2"},ri={class:"flex gap-1"},li=["value","disabled"],oi=["value","disabled"],si={key:0,class:"text-xs text-yellow-400 mt-1"},ai={class:"space-y-2"},ii={class:"flex gap-1"},di=["value"],ui=["value"],ci={class:"space-y-2"},pi={class:"grid grid-cols-3 gap-1"},fi={class:"space-y-2"},gi={class:"grid grid-cols-2 gap-1"},mi={class:"space-y-2"},yi={class:"flex items-center gap-2"},bi={class:"flex items-center gap-2 mt-1"},xi={class:"space-y-2"},vi={class:"flex items-center justify-between"},hi={class:"flex gap-1"},wi={key:0,class:"grid grid-cols-3 gap-2 items-center"},$i={class:"col-span-1"},ki={class:"col-span-1"},Ei={class:"col-span-1"},Si={class:"space-y-2"},Mi={class:"grid grid-cols-3 gap-1"},Ci={class:"space-y-2"},Ni={class:"flex items-center justify-between"},Ii={class:"flex gap-1"},Fi={key:0,class:"space-y-2 p-2 bg-gray-800/30 rounded"},Ai={class:"grid grid-cols-2 gap-2"},ji={class:"flex gap-1"},zi={class:"flex gap-1"},Oi={class:"block text-xs text-gray-400 mb-1"},Bi={class:"space-y-2"},Di={class:"flex items-center justify-between"},Gi={class:"flex gap-1"},Li={key:0,class:"space-y-2 p-2 bg-gray-800/30 rounded"},Ui={class:"grid grid-cols-2 gap-2"},Ri={class:"flex gap-1"},Ti={class:"flex gap-1"},Vi={class:"block text-xs text-gray-400 mb-1"},Pi={key:4,class:"space-y-3"},Hi={class:"space-y-2"},Wi={key:0,class:"space-y-2"},_i={class:"max-h-32 overflow-y-auto custom-scrollbar bg-gray-800/30 rounded p-2"},Ji={class:"grid grid-cols-4 gap-2"},qi=["onClick"],Xi=["src","alt"],Yi={key:0,class:"text-xs text-gray-500 text-center py-2"},Ki={class:"grid grid-cols-3 gap-2"},Zi={class:"space-y-2"},Qi={class:"pt-4 border-t border-purple-500/30 space-y-2"},ed={key:1,class:"p-4 text-center text-gray-400 flex-1 flex flex-col justify-center"},td={},nd=St({...td,__name:"ElementSettingsPanel",props:{selectedEl:{},config:{},fontLibrary:{},fontSizeLibrary:{},fontWeightOptions:{},fontStyleOptions:{},databaseObjects:{},dbMap:{},iconLibrary:{},defaultChartOption:{type:Function},safeHex:{type:Function},initCustomClassSkeleton:{type:Function},refreshAllCustomClassCss:{type:Function},removeCustomClassCssForElement:{type:Function},getIconDataUrlById:{type:Function}},emits:["duplicateSelected","removeSelected","saveSelectedAsComponent"],setup(x,{emit:o}){const e=x,p=o,w=we("visual"),A=we(""),J=we("");mt(()=>{var b;return(b=e.selectedEl)==null?void 0:b.id},()=>{var t;const b=e.selectedEl;b&&b.type==="chart"&&(w.value="visual",J.value="",A.value=JSON.stringify((t=b.chartOption)!=null?t:e.defaultChartOption(b.chartType||"line"),null,2))});const ae=Te(()=>{var le,ee;const b=(ee=(le=e.selectedEl)==null?void 0:le.dynamic)==null?void 0:ee.objectName;if(!b)return[];const t=e.dbMap[b];try{return Lo(t,{maxDepth:6,maxEntries:400})}catch{return[]}});function ke(b){return Ro(e.dbMap,b)}function C(b){return typeof b=="string"&&b.trim().endsWith("%")?"%":"px"}function ge(b){if(b==null)return 0;if(typeof b=="number")return b;const t=String(b).trim();if(t.endsWith("%")){const ee=Number(t.replace("%",""));return Number.isFinite(ee)?ee:0}const le=Number(t.replace("px",""));return Number.isFinite(le)?le:0}function P(b,t){const le=e.selectedEl;le&&(le.style=le.style||{},le.style.borderRadius=`${b}${t}`)}function Q(b){const t={x:0,y:8,blur:24,spread:0,color:"#000000"};if(!b||!b.trim())return t;const le=b.split(/\s+/).filter(Boolean);if(le.length<3)return t;const ee=le.slice(0,4).map(st=>Number(String(st).replace("px",""))),tt=le.slice(4).join(" ")||t.color,[Pe=NaN,We=NaN,Xe=NaN,Ye=NaN]=ee;return{x:Number.isFinite(Pe)?Pe:t.x,y:Number.isFinite(We)?We:t.y,blur:Number.isFinite(Xe)?Xe:t.blur,spread:Number.isFinite(Ye)?Ye:t.spread,color:tt}}function de(b,t,le,ee,tt){Bo(e.selectedEl,b,t,le,ee,tt)}function Y(b){Do(b)}function k(b){Go(b)}function d(){J.value="";try{const b=JSON.parse(A.value);e.selectedEl&&e.selectedEl.type==="chart"&&(e.selectedEl.chartOption=b)}catch(b){J.value=`JSON 解析失败：${(b==null?void 0:b.message)||String(b)}`}}function U(b,t){if(!e.selectedEl||e.selectedEl.type!=="chart"||!e.selectedEl.chartOption)return;const le=e.selectedEl.chartOption,ee=le.series||[],tt={type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:b},{offset:1,color:t}],global:!1};ee.forEach(Pe=>{Pe.type==="bar"&&(Pe.itemStyle=Pe.itemStyle||{},Pe.itemStyle.color=tt)}),A.value=JSON.stringify(le,null,2)}function H(){const b=e.selectedEl;return!b||b.type!=="chart"?null:(b.chartOption||(b.chartOption=e.defaultChartOption(b.chartType||"line")),b.chartOption)}function te(b){const t=H();t&&(t.title=t.title||{},t.title.text=b,A.value=JSON.stringify(t,null,2))}function T(b){const t=H();t&&(t.color=b.split(",").map(le=>le.trim()).filter(Boolean),A.value=JSON.stringify(t,null,2))}function q(b){const t=H();t&&(t.legend=t.legend||{},t.legend.show=b==="1",A.value=JSON.stringify(t,null,2))}function $e(b){var le;const t=(le=b.target.files)==null?void 0:le[0];if(t&&e.selectedEl){const ee=new FileReader;ee.onload=()=>{e.selectedEl&&(e.selectedEl.src=String(ee.result),e.selectedEl.iconId=void 0)},ee.readAsDataURL(t)}}async function _(b){const t=e.selectedEl;if(!t||t.type!=="image")return;const le=await e.getIconDataUrlById(b.id);if(!le)return;t.src=le,t.iconId=b.id;const ee=new Image;ee.onload=()=>{e.selectedEl&&e.selectedEl.id===t.id&&(e.selectedEl.width=ee.naturalWidth,e.selectedEl.height=ee.naturalHeight)},ee.src=le}function D(){const b=e.selectedEl;if(!b||b.type!=="image"||!b.src)return;const t=new Image;t.onload=()=>{e.selectedEl&&(e.selectedEl.width=t.naturalWidth,e.selectedEl.height=t.naturalHeight)},t.src=b.src}function R(){}const Oe=Te({get(){const b=e.selectedEl;return!!(b&&b.eventBinding&&b.eventBinding.enabled)},set(b){const t=e.selectedEl;t&&(t.eventBinding=t.eventBinding||{enabled:!1,cursor:"pointer",handlerName:"handleClick",code:""},t.eventBinding.enabled=b,(t.eventBinding.handlerName==null||String(t.eventBinding.handlerName).trim()==="")&&(t.eventBinding.handlerName="handleClick"),(t.eventBinding.cursor==null||String(t.eventBinding.cursor).trim()==="")&&(t.eventBinding.cursor="pointer"),t.eventBinding.code==null&&(t.eventBinding.code=""))}}),v=Te({get(){var b,t;return(t=(b=e.selectedEl)==null?void 0:b.eventBinding)==null?void 0:t.cursor},set(b){const t=e.selectedEl;t&&(t.eventBinding=t.eventBinding||{enabled:!0,cursor:"pointer",handlerName:"handleClick",code:""},t.eventBinding.cursor=b)}}),X=Te({get(){var b,t;return(t=(b=e.selectedEl)==null?void 0:b.eventBinding)==null?void 0:t.handlerName},set(b){const t=e.selectedEl;t&&(t.eventBinding=t.eventBinding||{enabled:!0,cursor:"pointer",handlerName:"handleClick",code:""},t.eventBinding.handlerName=b)}}),oe=Te({get(){var b,t;return(t=(b=e.selectedEl)==null?void 0:b.eventBinding)==null?void 0:t.code},set(b){const t=e.selectedEl;t&&(t.eventBinding=t.eventBinding||{enabled:!0,cursor:"pointer",handlerName:"handleClick",code:""},t.eventBinding.code=b)}});return(b,t)=>{var le,ee,tt,Pe,We,Xe,Ye,st,xt,vt,ht,At,je,ve,pt,ft,yt,Mt,He,Ce,Ne,Ae,dt,nt,gt,ze,at,jt,zt,wt,Ot,$t,bn,xn,vn,Ct,Bt,hn,Kt,wn,$n,Zt,kn,En,Sn,Mn,Qt,en,Tt,Vt,Cn,Nn,In,Dt,bt,tn,Gt,nn,Fn,An,jn,_e,Nt,zn,On,rn,ln,on,Bn,Lt,Pt,Ht,Wt,sn,an,Dn,dn,it,rt,Gn,Ln,Un,Rn,Tn,Vn,un,_t,Jt,cn,qt,Xt,Pn,Ut,pn,Hn,fn,Wn,gn,r,l,s,c,g,f,N,I,M,E,i,u,O,W,ie,fe,se,be,me,ce,re,ne,pe,Ie,m,h,L,F,G,K,y,V,$,ue,Me,xe,Se,Fe,Be,Qe,Ke,lt,Je,ut,et,kt,Yt,_n,lr,or,sr,ar,ir,dr,ur,cr,pr,fr,gr,mr,yr,br,xr,vr,hr,wr,$r,kr,Er,Sr,Mr,Cr,Nr,Ir,Fr,Ar,jr,zr,Or,Br,Dr,Gr,Lr,Ur,Rr,Tr,Vr,Pr,Hr,Wr,_r,Jr,qr,Xr,Yr,Kr,Zr,Qr,el,tl,nl,rl,ll;return j(),z("div",To,[t[234]||(t[234]=n("div",{class:"p-4 border-b border-purple-500/30 bg-gradient-to-r from-purple-600/20 to-pink-600/20 flex-shrink-0"},[n("h2",{class:"text-lg font-bold text-purple-300 flex items-center gap-2"},[n("span",{class:"w-2 h-2 bg-purple-400 rounded-full animate-pulse"}),yn(" 元素设置 ")])],-1)),e.selectedEl?(j(),z("div",Vo,[n("div",Po,[t[128]||(t[128]=n("h3",{class:"text-sm font-medium text-purple-300 border-b border-purple-500/30 pb-1"},"位置和尺寸",-1)),n("div",Ho,[n("div",null,[t[123]||(t[123]=n("label",{class:"block text-xs text-gray-400 mb-1"},"X",-1)),ye(n("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>e.selectedEl.left=a),type:"number",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,512),[[Ee,e.selectedEl.left,void 0,{number:!0}]])]),n("div",null,[t[124]||(t[124]=n("label",{class:"block text-xs text-gray-400 mb-1"},"Y",-1)),ye(n("input",{"onUpdate:modelValue":t[1]||(t[1]=a=>e.selectedEl.top=a),type:"number",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,512),[[Ee,e.selectedEl.top,void 0,{number:!0}]])]),n("div",null,[t[125]||(t[125]=n("label",{class:"block text-xs text-gray-400 mb-1"},"宽度",-1)),ye(n("input",{"onUpdate:modelValue":t[2]||(t[2]=a=>e.selectedEl.width=a),type:"number",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,512),[[Ee,e.selectedEl.width,void 0,{number:!0}]])]),n("div",null,[t[126]||(t[126]=n("label",{class:"block text-xs text-gray-400 mb-1"},"高度",-1)),ye(n("input",{"onUpdate:modelValue":t[3]||(t[3]=a=>e.selectedEl.height=a),type:"number",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,512),[[Ee,e.selectedEl.height,void 0,{number:!0}]])]),n("div",Wo,[t[127]||(t[127]=n("label",{class:"block text-xs text-gray-400 mb-1"},"层级（z-index）",-1)),ye(n("input",{"onUpdate:modelValue":t[4]||(t[4]=a=>e.selectedEl.zIndex=a),type:"number",min:"0",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,512),[[Ee,e.selectedEl.zIndex,void 0,{number:!0}]])])])]),n("div",_o,[t[135]||(t[135]=n("h3",{class:"text-sm font-medium text-purple-300 border-b border-purple-500/30 pb-1"},"事件绑定",-1)),n("div",Jo,[t[130]||(t[130]=n("label",{class:"text-xs text-gray-400"},"开启事件绑定",-1)),n("label",qo,[ye(n("input",{type:"checkbox",class:"sr-only peer","onUpdate:modelValue":t[5]||(t[5]=a=>Oe.value=a)},null,512),[[Kn,Oe.value]]),t[129]||(t[129]=n("div",{class:"relative w-12 h-6 rounded-full bg-gray-700/60 transition-all duration-200 shadow-inner peer-checked:bg-gradient-to-r peer-checked:from-cyan-600 peer-checked:to-blue-600"},[n("div",{class:"absolute left-0.5 top-0.5 w-5 h-5 bg-white rounded-full shadow transform transition-transform duration-200 peer-checked:translate-x-6"})],-1)),n("span",{class:Ve(["ml-3 text-xs",Oe.value?"text-cyan-300":"text-gray-300"])},Ze(Oe.value?"已开启":"已关闭"),3)])]),Oe.value?(j(),z("div",Xo,[n("div",null,[t[132]||(t[132]=n("label",{class:"block text-xs text-gray-400 mb-1"},"Cursor",-1)),ye(n("select",{"onUpdate:modelValue":t[6]||(t[6]=a=>v.value=a),class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm"},[...t[131]||(t[131]=[Yn('<option value="pointer" data-v-e92e54ba>pointer</option><option value="default" data-v-e92e54ba>default</option><option value="move" data-v-e92e54ba>move</option><option value="crosshair" data-v-e92e54ba>crosshair</option><option value="grab" data-v-e92e54ba>grab</option>',5)])],512),[[sl,v.value]])]),n("div",null,[t[133]||(t[133]=n("label",{class:"block text-xs text-gray-400 mb-1"},"函数名",-1)),ye(n("input",{"onUpdate:modelValue":t[7]||(t[7]=a=>X.value=a),type:"text",placeholder:"handleClick",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm"},null,512),[[Ee,X.value]])])])):Z("",!0),Oe.value?(j(),z("div",Yo,[t[134]||(t[134]=n("label",{class:"block text-xs text-gray-400 mb-1"},"事件代码",-1)),ye(n("textarea",{"onUpdate:modelValue":t[8]||(t[8]=a=>oe.value=a),rows:"6",placeholder:"function body...",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm"},null,512),[[Ee,oe.value]])])):Z("",!0)]),n("div",Ko,[t[145]||(t[145]=n("h3",{class:"text-sm font-medium text-purple-300 border-b border-purple-500/30 pb-1"},"元素属性",-1)),n("div",Zo,[n("div",Qo,[t[136]||(t[136]=n("label",{class:"text-xs text-gray-400"},"启用 Class 样式",-1)),ye(n("input",{type:"checkbox","onUpdate:modelValue":t[9]||(t[9]=a=>e.selectedEl.enableClassStyle=a),onChange:t[10]||(t[10]=a=>{e.selectedEl&&a.target.checked?(e.initCustomClassSkeleton(e.selectedEl),e.refreshAllCustomClassCss()):e.selectedEl&&!a.target.checked&&e.removeCustomClassCssForElement(e.selectedEl.id)}),class:"rounded border-purple-500/30 text-purple-400 focus:ring-purple-400"},null,544),[[Kn,e.selectedEl.enableClassStyle]])]),(le=e.selectedEl)!=null&&le.enableClassStyle?(j(),z("div",es,[t[137]||(t[137]=n("label",{class:"block text-xs text-gray-400 mb-1"},"CSS Class",-1)),n("div",ts,[ye(n("input",{"onUpdate:modelValue":t[11]||(t[11]=a=>e.selectedEl.className=a),type:"text",placeholder:"自动生成唯一类名，可修改",class:"flex-1 px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,512),[[Ee,e.selectedEl.className]]),n("button",{type:"button",onClick:t[12]||(t[12]=()=>{e.selectedEl&&(e.selectedEl.className=`cls-${String(e.selectedEl.id).slice(0,8)}`,e.initCustomClassSkeleton(e.selectedEl),e.refreshAllCustomClassCss())}),class:"px-2 py-1 text-xs bg-purple-600/60 hover:bg-purple-600 rounded text-white"},"生成默认")])])):Z("",!0),(ee=e.selectedEl)!=null&&ee.enableClassStyle?(j(),z("div",ns,[t[138]||(t[138]=n("label",{class:"block text-xs text-gray-400 mb-1"},"自定义样式（CSS 声明）",-1)),ct(Oo,{modelValue:String((tt=e.selectedEl.customClassCss)!=null?tt:""),"onUpdate:modelValue":t[13]||(t[13]=a=>{e.selectedEl.customClassCss=a,e.refreshAllCustomClassCss()}),height:"180px"},null,8,["modelValue"]),t[139]||(t[139]=n("p",{class:"text-[11px] text-gray-500 mt-1"},"提示：已为当前类名生成 .className { } 模板；也可直接填写声明，系统会自动包裹并追加 !important。",-1))])):Z("",!0),e.selectedEl&&(e.selectedEl.type==="chart"||e.selectedEl.type==="container")?(j(),z("div",rs,[t[140]||(t[140]=n("label",{class:"block text-xs text-gray-400 mb-1"},"元素ID",-1)),ye(n("input",{"onUpdate:modelValue":t[14]||(t[14]=a=>e.selectedEl.elementId=a),type:"text",placeholder:"输入元素ID",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,512),[[Ee,e.selectedEl.elementId]])])):Z("",!0),e.selectedEl?(j(),z("div",ls,[t[144]||(t[144]=n("h3",{class:"text-sm font-medium text-purple-300"},"显示与隐藏",-1)),n("div",os,[t[142]||(t[142]=n("label",{class:"text-xs text-gray-400"},"隐藏该元素",-1)),n("label",ss,[n("input",{type:"checkbox",class:"sr-only peer",checked:!!e.selectedEl.hidden,onChange:t[15]||(t[15]=a=>{const B=a.target.checked;e.selectedEl&&(e.selectedEl.hidden=B,B&&!e.selectedEl.hiddenLabel&&(e.selectedEl.hiddenLabel=`hidden-${String(e.selectedEl.id).slice(0,8)}`))})},null,40,as),t[141]||(t[141]=n("div",{class:"relative w-12 h-6 rounded-full bg-gray-700/60 transition-all duration-200 shadow-inner peer-checked:bg-gradient-to-r peer-checked:from-purple-600 peer-checked:to-pink-600"},[n("div",{class:"absolute left-0.5 top-0.5 w-5 h-5 bg-white rounded-full shadow transform transition-transform duration-200 peer-checked:translate-x-6"})],-1)),n("span",{class:Ve(["ml-3 text-xs",e.selectedEl.hidden?"text-purple-300":"text-gray-300"])},Ze(e.selectedEl.hidden?"已隐藏":"显示中"),3)])]),e.selectedEl.hidden?(j(),z("div",is,[t[143]||(t[143]=n("label",{class:"block text-xs text-gray-400"},"隐藏标识",-1)),n("input",{type:"text",value:e.selectedEl.hiddenLabel||"",onInput:t[16]||(t[16]=a=>{e.selectedEl&&(e.selectedEl.hiddenLabel=a.target.value)}),class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1",placeholder:"hidden-xxxx"},null,40,ds)])):Z("",!0)])):Z("",!0)])]),e.selectedEl&&e.selectedEl.type==="container"?(j(),z("div",us,[t[167]||(t[167]=n("h3",{class:"text-sm font-medium text-purple-300 border-b border-purple-500/30 pb-1"},"容器样式",-1)),n("div",null,[t[146]||(t[146]=n("label",{class:"block text-xs text-gray-400 mb-1"},"背景色（HEX）",-1)),n("div",cs,[n("input",{type:"color",value:((We=(Pe=e.selectedEl)==null?void 0:Pe.style)==null?void 0:We.backgroundColor)||"#000000",onInput:t[17]||(t[17]=a=>{const B=a.target.value;e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.backgroundColor=B)}),class:"w-10 h-8 bg-gray-800/50 border border-purple-500/30 rounded"},null,40,ps),n("input",{type:"text",value:((Ye=(Xe=e.selectedEl)==null?void 0:Xe.style)==null?void 0:Ye.backgroundColor)||"",placeholder:"#1e293b 或 transparent",onInput:t[18]||(t[18]=a=>{const B=a.target.value.trim();e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.backgroundColor=B)}),class:"flex-1 px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,40,fs)]),t[147]||(t[147]=n("p",{class:"text-[11px] text-gray-500 mt-1"},"支持 #RGB/#RRGGBB 或 CSS 颜色名；启用渐变时该颜色被覆盖。",-1))]),n("div",null,[t[148]||(t[148]=n("label",{class:"block text-xs text-gray-400 mb-1"},"容器注释（导出可见）",-1)),ye(n("textarea",{"onUpdate:modelValue":t[19]||(t[19]=a=>e.selectedEl.comment=a),rows:"2",placeholder:"输入注释，方便代码维护...",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,512),[[Ee,e.selectedEl.comment]])]),n("div",gs,[n("div",ms,[t[150]||(t[150]=n("label",{class:"block text-xs text-gray-400 mb-1"},"渐变背景",-1)),n("label",ys,[n("input",{type:"checkbox",checked:!!((xt=(st=e.selectedEl)==null?void 0:st.style)!=null&&xt.backgroundGradient),onChange:t[20]||(t[20]=a=>{const B=a.target.checked;e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},B?e.selectedEl.style.backgroundGradient||(e.selectedEl.style.backgroundGradient={colors:["#42b883","#0ea5e9"],angle:90}):delete e.selectedEl.style.backgroundGradient)})},null,40,bs),t[149]||(t[149]=yn(" 启用 ",-1))])]),(ht=(vt=e.selectedEl)==null?void 0:vt.style)!=null&&ht.backgroundGradient?(j(),z("div",xs,[n("div",null,[t[151]||(t[151]=n("label",{class:"block text-[11px] text-gray-400 mb-1"},"起始色（HEX）",-1)),n("div",vs,[n("input",{type:"color",value:((pt=(ve=(je=(At=e.selectedEl)==null?void 0:At.style)==null?void 0:je.backgroundGradient)==null?void 0:ve.colors)==null?void 0:pt[0])||"#42b883",onInput:t[21]||(t[21]=a=>{var he;const B=a.target.value;if(!e.selectedEl)return;e.selectedEl.style=e.selectedEl.style||{};const S=e.selectedEl.style.backgroundGradient||{colors:["","#"],angle:90};S.colors=(he=S.colors)!=null&&he.length?S.colors:["","#"],S.colors[0]=B,e.selectedEl.style.backgroundGradient=S}),class:"w-10 h-8 bg-gray-800/50 border border-purple-500/30 rounded"},null,40,hs),n("input",{type:"text",value:((He=(Mt=(yt=(ft=e.selectedEl)==null?void 0:ft.style)==null?void 0:yt.backgroundGradient)==null?void 0:Mt.colors)==null?void 0:He[0])||"",placeholder:"#42b883",onInput:t[22]||(t[22]=a=>{var he;const B=a.target.value.trim();if(!e.selectedEl)return;e.selectedEl.style=e.selectedEl.style||{};const S=e.selectedEl.style.backgroundGradient||{colors:["","#"],angle:90};S.colors=(he=S.colors)!=null&&he.length?S.colors:["","#"],S.colors[0]=B,e.selectedEl.style.backgroundGradient=S}),class:"flex-1 px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-xs"},null,40,ws)])]),n("div",null,[t[152]||(t[152]=n("label",{class:"block text-[11px] text-gray-400 mb-1"},"结束色（HEX）",-1)),n("div",$s,[n("input",{type:"color",value:((dt=(Ae=(Ne=(Ce=e.selectedEl)==null?void 0:Ce.style)==null?void 0:Ne.backgroundGradient)==null?void 0:Ae.colors)==null?void 0:dt[1])||"#0ea5e9",onInput:t[23]||(t[23]=a=>{var he;const B=a.target.value;if(!e.selectedEl)return;e.selectedEl.style=e.selectedEl.style||{};const S=e.selectedEl.style.backgroundGradient||{colors:["","#"],angle:90};S.colors=(he=S.colors)!=null&&he.length?S.colors:["","#"],S.colors[1]=B,e.selectedEl.style.backgroundGradient=S}),class:"w-10 h-8 bg-gray-800/50 border border-purple-500/30 rounded"},null,40,ks),n("input",{type:"text",value:((at=(ze=(gt=(nt=e.selectedEl)==null?void 0:nt.style)==null?void 0:gt.backgroundGradient)==null?void 0:ze.colors)==null?void 0:at[1])||"",placeholder:"#0ea5e9",onInput:t[24]||(t[24]=a=>{var he;const B=a.target.value.trim();if(!e.selectedEl)return;e.selectedEl.style=e.selectedEl.style||{};const S=e.selectedEl.style.backgroundGradient||{colors:["","#"],angle:90};S.colors=(he=S.colors)!=null&&he.length?S.colors:["","#"],S.colors[1]=B,e.selectedEl.style.backgroundGradient=S}),class:"flex-1 px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-xs"},null,40,Es)])]),n("div",Ss,[t[153]||(t[153]=n("label",{class:"block text-[11px] text-gray-400"},"角度（0-360）",-1)),n("input",{type:"range",min:"0",max:"360",step:"1",value:(Ot=(wt=(zt=(jt=e.selectedEl)==null?void 0:jt.style)==null?void 0:zt.backgroundGradient)==null?void 0:wt.angle)!=null?Ot:90,onInput:t[25]||(t[25]=a=>{const B=Number(a.target.value)||0;if(!e.selectedEl)return;e.selectedEl.style=e.selectedEl.style||{};const S=e.selectedEl.style.backgroundGradient||{colors:["","#"],angle:90};S.angle=B,e.selectedEl.style.backgroundGradient=S}),class:"w-full"},null,40,Ms),n("input",{type:"number",value:(vn=(xn=(bn=($t=e.selectedEl)==null?void 0:$t.style)==null?void 0:bn.backgroundGradient)==null?void 0:xn.angle)!=null?vn:90,onInput:t[26]||(t[26]=a=>{const B=Number(a.target.value)||0;if(!e.selectedEl)return;e.selectedEl.style=e.selectedEl.style||{};const S=e.selectedEl.style.backgroundGradient||{colors:["","#"],angle:90};S.angle=B,e.selectedEl.style.backgroundGradient=S}),class:"w-24 px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-xs"},null,40,Cs)])])):Z("",!0),t[154]||(t[154]=n("p",{class:"text-[11px] text-gray-500"},"提示：仅在启用后显示渐变设置；未启用时使用背景色。",-1))]),n("div",Ns,[n("div",Is,[t[156]||(t[156]=n("label",{class:"block text-xs text-gray-400"},"圆角",-1)),n("label",Fs,[n("input",{type:"checkbox",checked:!!((Bt=(Ct=e.selectedEl)==null?void 0:Ct.style)!=null&&Bt.borderRadius)&&ge((Kt=(hn=e.selectedEl)==null?void 0:hn.style)==null?void 0:Kt.borderRadius)>0,onChange:t[27]||(t[27]=a=>{const B=a.target.checked;e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},B?e.selectedEl.style.borderRadius||(e.selectedEl.style.borderRadius="8px"):e.selectedEl.style.borderRadius="0")})},null,40,As),t[155]||(t[155]=yn(" 启用 ",-1))])]),($n=(wn=e.selectedEl)==null?void 0:wn.style)!=null&&$n.borderRadius&&ge((kn=(Zt=e.selectedEl)==null?void 0:Zt.style)==null?void 0:kn.borderRadius)>=0?(j(),z("div",js,[n("div",zs,[t[157]||(t[157]=n("span",{class:"text-[11px] text-gray-400"},"单位",-1)),n("button",{type:"button",class:Ve(["px-2 py-0.5 rounded text-[11px]",C((Sn=(En=e.selectedEl)==null?void 0:En.style)==null?void 0:Sn.borderRadius)==="px"?"bg-purple-600/60":"bg-gray-700"]),onClick:t[28]||(t[28]=()=>{var B,S;const a=ge((S=(B=e.selectedEl)==null?void 0:B.style)==null?void 0:S.borderRadius);P(a,"px")})},"px",2),n("button",{type:"button",class:Ve(["px-2 py-0.5 rounded text-[11px]",C((Qt=(Mn=e.selectedEl)==null?void 0:Mn.style)==null?void 0:Qt.borderRadius)==="%"?"bg-purple-600/60":"bg-gray-700"]),onClick:t[29]||(t[29]=()=>{var B,S;const a=ge((S=(B=e.selectedEl)==null?void 0:B.style)==null?void 0:S.borderRadius);P(a,"%")})},"%",2)]),C((Tt=(en=e.selectedEl)==null?void 0:en.style)==null?void 0:Tt.borderRadius)==="px"?(j(),z("div",Os,[n("input",{type:"range",min:"0",max:"64",step:"1",value:ge((Cn=(Vt=e.selectedEl)==null?void 0:Vt.style)==null?void 0:Cn.borderRadius),onInput:t[30]||(t[30]=a=>{const B=Number(a.target.value)||0;P(B,"px")}),class:"w-full"},null,40,Bs),n("input",{type:"number",value:ge((In=(Nn=e.selectedEl)==null?void 0:Nn.style)==null?void 0:In.borderRadius),onInput:t[31]||(t[31]=a=>{const B=Number(a.target.value)||0;P(B,"px")}),class:"w-24 px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm"},null,40,Ds)])):(j(),z("div",Gs,[n("input",{type:"range",min:"0",max:"100",step:"1",value:ge((bt=(Dt=e.selectedEl)==null?void 0:Dt.style)==null?void 0:bt.borderRadius),onInput:t[32]||(t[32]=a=>{const B=Number(a.target.value)||0;P(B,"%")}),class:"w-full"},null,40,Ls),n("div",Us,[n("input",{type:"number",value:ge((Gt=(tn=e.selectedEl)==null?void 0:tn.style)==null?void 0:Gt.borderRadius),onInput:t[33]||(t[33]=a=>{const B=Number(a.target.value)||0;P(B,"%")}),class:"w-20 px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm"},null,40,Rs),t[158]||(t[158]=n("span",{class:"text-xs text-gray-400"},"%",-1))])]))])):Z("",!0)]),n("div",Ts,[n("div",Vs,[t[160]||(t[160]=n("label",{class:"block text-xs text-gray-400"},"阴影（box-shadow）",-1)),n("label",Ps,[n("input",{type:"checkbox",checked:!!((Fn=(nn=e.selectedEl)==null?void 0:nn.style)!=null&&Fn.boxShadow),onChange:t[34]||(t[34]=a=>{const B=a.target.checked;e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},B?e.selectedEl.style.boxShadow||(e.selectedEl.style.boxShadow="0 8px 24px rgba(0,0,0,0.25)"):delete e.selectedEl.style.boxShadow)})},null,40,Hs),t[159]||(t[159]=yn(" 启用 ",-1))])]),(jn=(An=e.selectedEl)==null?void 0:An.style)!=null&&jn.boxShadow?(j(),z("div",Ws,[n("input",{type:"text",value:((Nt=(_e=e.selectedEl)==null?void 0:_e.style)==null?void 0:Nt.boxShadow)||"",placeholder:"例如: 0 8px 24px rgba(0,0,0,0.25)",onInput:t[35]||(t[35]=a=>{const B=a.target.value;e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.boxShadow=B)}),class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm"},null,40,_s),n("div",Js,[t[161]||(t[161]=n("label",{class:"block text-[11px] text-gray-400"},"X 偏移",-1)),n("div",qs,[n("input",{type:"range",min:"-64",max:"64",step:"1",value:Q((On=(zn=e.selectedEl)==null?void 0:zn.style)==null?void 0:On.boxShadow).x,onInput:t[36]||(t[36]=a=>{var he,De,Ge,Le,Ue,Re;const B=Number(a.target.value)||0,S=Q((De=(he=e.selectedEl)==null?void 0:he.style)==null?void 0:De.boxShadow);de(B!=null?B:0,(Ge=S.y)!=null?Ge:0,(Le=S.blur)!=null?Le:0,(Ue=S.spread)!=null?Ue:0,(Re=S.color)!=null?Re:"#000000")}),class:"flex-1"},null,40,Xs),n("input",{type:"number",value:Q((ln=(rn=e.selectedEl)==null?void 0:rn.style)==null?void 0:ln.boxShadow).x,onInput:t[37]||(t[37]=a=>{var he,De,Ge,Le,Ue,Re;const B=Number(a.target.value)||0,S=Q((De=(he=e.selectedEl)==null?void 0:he.style)==null?void 0:De.boxShadow);de(B!=null?B:0,(Ge=S.y)!=null?Ge:0,(Le=S.blur)!=null?Le:0,(Ue=S.spread)!=null?Ue:0,(Re=S.color)!=null?Re:"#000000")}),class:"w-20 px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-xs"},null,40,Ys)])]),n("div",Ks,[t[162]||(t[162]=n("label",{class:"block text-[11px] text-gray-400"},"Y 偏移",-1)),n("div",Zs,[n("input",{type:"range",min:"-64",max:"64",step:"1",value:Q((Bn=(on=e.selectedEl)==null?void 0:on.style)==null?void 0:Bn.boxShadow).y,onInput:t[38]||(t[38]=a=>{var he,De,Ge,Le,Ue,Re;const B=Number(a.target.value)||0,S=Q((De=(he=e.selectedEl)==null?void 0:he.style)==null?void 0:De.boxShadow);de((Ge=S.x)!=null?Ge:0,B!=null?B:0,(Le=S.blur)!=null?Le:0,(Ue=S.spread)!=null?Ue:0,(Re=S.color)!=null?Re:"#000000")}),class:"flex-1"},null,40,Qs),n("input",{type:"number",value:Q((Pt=(Lt=e.selectedEl)==null?void 0:Lt.style)==null?void 0:Pt.boxShadow).y,onInput:t[39]||(t[39]=a=>{var he,De,Ge,Le,Ue,Re;const B=Number(a.target.value)||0,S=Q((De=(he=e.selectedEl)==null?void 0:he.style)==null?void 0:De.boxShadow);de((Ge=S.x)!=null?Ge:0,B!=null?B:0,(Le=S.blur)!=null?Le:0,(Ue=S.spread)!=null?Ue:0,(Re=S.color)!=null?Re:"#000000")}),class:"w-20 px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-xs"},null,40,ea)])]),n("div",ta,[t[163]||(t[163]=n("label",{class:"block text-[11px] text-gray-400"},"模糊",-1)),n("div",na,[n("input",{type:"range",min:"0",max:"128",step:"1",value:Q((Wt=(Ht=e.selectedEl)==null?void 0:Ht.style)==null?void 0:Wt.boxShadow).blur,onInput:t[40]||(t[40]=a=>{var he,De,Ge,Le,Ue,Re;const B=Number(a.target.value)||0,S=Q((De=(he=e.selectedEl)==null?void 0:he.style)==null?void 0:De.boxShadow);de((Ge=S.x)!=null?Ge:0,(Le=S.y)!=null?Le:0,B!=null?B:0,(Ue=S.spread)!=null?Ue:0,(Re=S.color)!=null?Re:"#000000")}),class:"flex-1"},null,40,ra),n("input",{type:"number",value:Q((an=(sn=e.selectedEl)==null?void 0:sn.style)==null?void 0:an.boxShadow).blur,onInput:t[41]||(t[41]=a=>{var he,De,Ge,Le,Ue,Re;const B=Number(a.target.value)||0,S=Q((De=(he=e.selectedEl)==null?void 0:he.style)==null?void 0:De.boxShadow);de((Ge=S.x)!=null?Ge:0,(Le=S.y)!=null?Le:0,B!=null?B:0,(Ue=S.spread)!=null?Ue:0,(Re=S.color)!=null?Re:"#000000")}),class:"w-20 px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-xs"},null,40,la)])]),n("div",oa,[t[164]||(t[164]=n("label",{class:"block text-[11px] text-gray-400"},"扩散",-1)),n("div",sa,[n("input",{type:"range",min:"-64",max:"64",step:"1",value:Q((dn=(Dn=e.selectedEl)==null?void 0:Dn.style)==null?void 0:dn.boxShadow).spread,onInput:t[42]||(t[42]=a=>{var he,De,Ge,Le,Ue,Re;const B=Number(a.target.value)||0,S=Q((De=(he=e.selectedEl)==null?void 0:he.style)==null?void 0:De.boxShadow);de((Ge=S.x)!=null?Ge:0,(Le=S.y)!=null?Le:0,(Ue=S.blur)!=null?Ue:0,B!=null?B:0,(Re=S.color)!=null?Re:"#000000")}),class:"flex-1"},null,40,aa),n("input",{type:"number",value:Q((rt=(it=e.selectedEl)==null?void 0:it.style)==null?void 0:rt.boxShadow).spread,onInput:t[43]||(t[43]=a=>{var he,De,Ge,Le,Ue,Re;const B=Number(a.target.value)||0,S=Q((De=(he=e.selectedEl)==null?void 0:he.style)==null?void 0:De.boxShadow);de((Ge=S.x)!=null?Ge:0,(Le=S.y)!=null?Le:0,(Ue=S.blur)!=null?Ue:0,B!=null?B:0,(Re=S.color)!=null?Re:"#000000")}),class:"w-20 px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-xs"},null,40,ia)])])])):Z("",!0),n("div",da,[t[165]||(t[165]=n("label",{class:"block text-[11px] text-gray-400"},"阴影颜色",-1)),(Ln=(Gn=e.selectedEl)==null?void 0:Gn.style)!=null&&Ln.boxShadow?(j(),z("div",ua,[n("input",{type:"color",value:Q((Rn=(Un=e.selectedEl)==null?void 0:Un.style)==null?void 0:Rn.boxShadow).color||"#000000",onInput:t[44]||(t[44]=a=>{var he,De,Ge,Le,Ue,Re;const B=a.target.value,S=Q((De=(he=e.selectedEl)==null?void 0:he.style)==null?void 0:De.boxShadow);de((Ge=S.x)!=null?Ge:0,(Le=S.y)!=null?Le:0,(Ue=S.blur)!=null?Ue:0,(Re=S.spread)!=null?Re:0,B||"#000000")}),class:"w-10 h-8 bg-gray-800/50 border border-purple-500/30 rounded"},null,40,ca),n("input",{type:"text",value:Q((Vn=(Tn=e.selectedEl)==null?void 0:Tn.style)==null?void 0:Vn.boxShadow).color||"",placeholder:"#000000 或 rgba(...)",onInput:t[45]||(t[45]=a=>{var he,De,Ge,Le,Ue,Re;const B=a.target.value.trim(),S=Q((De=(he=e.selectedEl)==null?void 0:he.style)==null?void 0:De.boxShadow);de((Ge=S.x)!=null?Ge:0,(Le=S.y)!=null?Le:0,(Ue=S.blur)!=null?Ue:0,(Re=S.spread)!=null?Re:0,B||"#000000")}),class:"flex-1 px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm"},null,40,pa)])):Z("",!0)]),t[166]||(t[166]=n("p",{class:"text-[11px] text-gray-500"},"支持滑动或数字输入；颜色可选色块与 HEX 文本。",-1))])])):Z("",!0),e.selectedEl&&e.selectedEl.type==="chart"?(j(),z("div",fa,[t[182]||(t[182]=n("h3",{class:"text-sm font-medium text-purple-300 border-b border-purple-500/30 pb-1"},"图表配置",-1)),n("div",ga,[n("button",{onClick:t[46]||(t[46]=a=>w.value="visual"),class:Ve(["px-3 py-1 rounded text-sm",w.value==="visual"?"bg-purple-600/60":"bg-gray-700"])},"可视化",2),n("button",{onClick:t[47]||(t[47]=a=>w.value="json"),class:Ve(["px-3 py-1 rounded text-sm",w.value==="json"?"bg-purple-600/60":"bg-gray-700"])},"JSON",2)]),w.value==="visual"?(j(),z("div",ma,[n("div",null,[t[168]||(t[168]=n("label",{class:"block text-xs text-gray-400 mb-1"},"图表类型",-1)),ct(It,{options:["line","bar","pie","mix"],modelValue:e.selectedEl.chartType||"line","onUpdate:modelValue":t[48]||(t[48]=a=>{e.selectedEl&&(e.selectedEl.chartType=a,e.selectedEl.chartOption=e.defaultChartOption(a),A.value=JSON.stringify(e.selectedEl.chartOption,null,2))})},null,8,["modelValue"])]),n("div",null,[t[169]||(t[169]=n("label",{class:"block text-xs text-gray-400 mb-1"},"标题",-1)),n("input",{value:((Jt=(_t=(un=e.selectedEl)==null?void 0:un.chartOption)==null?void 0:_t.title)==null?void 0:Jt.text)||"",onInput:t[49]||(t[49]=a=>te(a.target.value)),type:"text",placeholder:"输入图表标题",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm"},null,40,ya)]),n("div",ba,[n("div",null,[t[170]||(t[170]=n("label",{class:"block text-xs text-gray-400 mb-1"},"颜色列表（逗号分隔）",-1)),n("input",{value:((Xt=(qt=(cn=e.selectedEl)==null?void 0:cn.chartOption)==null?void 0:qt.color)==null?void 0:Xt.join(","))||"",onInput:t[50]||(t[50]=a=>T(a.target.value)),type:"text",placeholder:"#42b883,#ff9800",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm"},null,40,xa)]),n("div",null,[t[172]||(t[172]=n("label",{class:"block text-xs text-gray-400 mb-1"},"显示图例",-1)),n("select",{value:(Hn=(pn=(Ut=(Pn=e.selectedEl)==null?void 0:Pn.chartOption)==null?void 0:Ut.legend)==null?void 0:pn.show)==null||Hn?"1":"0",onChange:t[51]||(t[51]=a=>q(a.target.value)),class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm"},[...t[171]||(t[171]=[n("option",{value:"1"},"显示",-1),n("option",{value:"0"},"隐藏",-1)])],40,va)])]),e.selectedEl&&e.selectedEl.chartType!=="pie"?(j(),z("div",ha,[n("div",null,[t[173]||(t[173]=n("label",{class:"block text-xs text-gray-400 mb-1"},"Y轴最小值",-1)),n("input",{value:Array.isArray((Wn=(fn=e.selectedEl)==null?void 0:fn.chartOption)==null?void 0:Wn.yAxis)?(c=(s=(l=(r=(gn=e.selectedEl)==null?void 0:gn.chartOption)==null?void 0:r.yAxis)==null?void 0:l[0])==null?void 0:s.min)!=null?c:"":(I=(N=(f=(g=e.selectedEl)==null?void 0:g.chartOption)==null?void 0:f.yAxis)==null?void 0:N.min)!=null?I:"",onInput:t[52]||(t[52]=a=>{const B=a.target.value;if(!e.selectedEl)return;e.selectedEl.chartOption||(e.selectedEl.chartOption=e.defaultChartOption(e.selectedEl.chartType||"line"));const S=e.selectedEl.chartOption.yAxis,he=B===""?null:Number(B);Array.isArray(S)?(S[0]=S[0]||{},S[0].min=he):(e.selectedEl.chartOption.yAxis=S||{},e.selectedEl.chartOption.yAxis.min=he),A.value=JSON.stringify(e.selectedEl.chartOption,null,2)}),type:"number",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm"},null,40,wa)]),n("div",null,[t[174]||(t[174]=n("label",{class:"block text-xs text-gray-400 mb-1"},"Y轴最大值",-1)),n("input",{value:Array.isArray((E=(M=e.selectedEl)==null?void 0:M.chartOption)==null?void 0:E.yAxis)?(ie=(W=(O=(u=(i=e.selectedEl)==null?void 0:i.chartOption)==null?void 0:u.yAxis)==null?void 0:O[0])==null?void 0:W.max)!=null?ie:"":(me=(be=(se=(fe=e.selectedEl)==null?void 0:fe.chartOption)==null?void 0:se.yAxis)==null?void 0:be.max)!=null?me:"",onInput:t[53]||(t[53]=a=>{const B=a.target.value;if(!e.selectedEl)return;e.selectedEl.chartOption||(e.selectedEl.chartOption=e.defaultChartOption(e.selectedEl.chartType||"line"));const S=e.selectedEl.chartOption.yAxis,he=B===""?null:Number(B);Array.isArray(S)?(S[0]=S[0]||{},S[0].max=he):(e.selectedEl.chartOption.yAxis=S||{},e.selectedEl.chartOption.yAxis.max=he),A.value=JSON.stringify(e.selectedEl.chartOption,null,2)}),type:"number",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm"},null,40,$a)])])):Z("",!0),e.selectedEl&&(e.selectedEl.chartType==="line"||e.selectedEl.chartType==="mix")?(j(),z("div",ka,[n("div",null,[t[176]||(t[176]=n("label",{class:"block text-xs text-gray-400 mb-1"},"折线平滑",-1)),n("select",{value:"1",onChange:t[54]||(t[54]=a=>{const B=a.target.value==="1";e.selectedEl&&e.selectedEl.chartOption&&((e.selectedEl.chartOption.series||[]).forEach(S=>{S.type==="line"&&(S.smooth=B)}),A.value=JSON.stringify(e.selectedEl.chartOption,null,2))}),class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm"},[...t[175]||(t[175]=[n("option",{value:"1"},"平滑",-1),n("option",{value:"0"},"不平滑",-1)])],32)]),n("div",null,[t[177]||(t[177]=n("label",{class:"block text-xs text-gray-400 mb-1"},"线宽",-1)),n("input",{value:2,onInput:t[55]||(t[55]=a=>{const B=Number(a.target.value)||2;e.selectedEl&&e.selectedEl.chartOption&&((e.selectedEl.chartOption.series||[]).forEach(S=>{S.type==="line"&&(S.lineStyle=S.lineStyle||{},S.lineStyle.width=B)}),A.value=JSON.stringify(e.selectedEl.chartOption,null,2))}),type:"number",min:"1",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm"},null,32)])])):Z("",!0),e.selectedEl&&(e.selectedEl.chartType==="bar"||e.selectedEl.chartType==="mix")?(j(),z("div",Ea,[n("div",null,[t[178]||(t[178]=n("label",{class:"block text-xs text-gray-400 mb-1"},"柱状渐变起始色",-1)),n("input",{type:"color",value:"#42b883",onInput:t[56]||(t[56]=a=>{const B=a.target.value;U(B,"#0ea5e9")}),class:"w-full h-8 bg-gray-800/50 border border-purple-500/30 rounded"},null,32)]),n("div",null,[t[179]||(t[179]=n("label",{class:"block text-xs text-gray-400 mb-1"},"柱状渐变结束色",-1)),n("input",{type:"color",value:"#0ea5e9",onInput:t[57]||(t[57]=a=>{const B=a.target.value;U("#42b883",B)}),class:"w-full h-8 bg-gray-800/50 border border-purple-500/30 rounded"},null,32)]),n("div",null,[t[180]||(t[180]=n("label",{class:"block text-xs text-gray-400 mb-1"},"圆角",-1)),n("input",{value:4,onInput:t[58]||(t[58]=a=>{const B=Number(a.target.value)||0;e.selectedEl&&e.selectedEl.chartOption&&((e.selectedEl.chartOption.series||[]).forEach(S=>{S.type==="bar"&&(S.itemStyle=S.itemStyle||{},S.itemStyle.borderRadius=[B,B,0,0])}),A.value=JSON.stringify(e.selectedEl.chartOption,null,2))}),type:"number",min:"0",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm"},null,32)])])):Z("",!0)])):(j(),z("div",Sa,[t[181]||(t[181]=n("label",{class:"block text-xs text-gray-400 mb-1"},"ECharts Option JSON",-1)),ye(n("textarea",{"onUpdate:modelValue":t[59]||(t[59]=a=>A.value=a),rows:"10",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-xs font-mono"},null,512),[[Ee,A.value]]),n("div",Ma,[n("button",{onClick:t[60]||(t[60]=a=>d()),class:"px-3 py-1 bg-emerald-600 rounded text-sm"},"应用配置"),J.value?(j(),z("div",Ca,Ze(J.value),1)):Z("",!0)])]))])):Z("",!0),e.selectedEl&&e.selectedEl.type==="line"?(j(),z("div",Na,[t[190]||(t[190]=n("h3",{class:"text-sm font-medium text-purple-300 border-b border-purple-500/30 pb-1"},"线条设置",-1)),n("div",Ia,[t[183]||(t[183]=n("label",{class:"block text-xs text-gray-400 mb-1"},"颜色",-1)),n("div",Fa,[n("input",{value:e.safeHex(((re=(ce=e.selectedEl)==null?void 0:ce.style)==null?void 0:re.lineColor)||""),onInput:t[61]||(t[61]=a=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.lineColor=a.target.value)}),type:"color",class:"w-8 h-6 bg-gray-800/50 border border-purple-500/30 rounded cursor-pointer"},null,40,Aa),n("input",{value:(Ie=(pe=(ne=e.selectedEl)==null?void 0:ne.style)==null?void 0:pe.lineColor)!=null?Ie:"#ffffff",onInput:t[62]||(t[62]=a=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.lineColor=a.target.value)}),type:"text",class:"flex-1 px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-xs focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200",placeholder:"#ffffff"},null,40,ja)])]),n("div",za,[n("div",null,[t[184]||(t[184]=n("label",{class:"block text-xs text-gray-400 mb-1"},"方向",-1)),n("div",Oa,[n("button",{onClick:t[63]||(t[63]=()=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.lineOrientation="horizontal")}),class:Ve(["px-2 py-1 text-xs rounded transition-colors duration-200",(((h=(m=e.selectedEl)==null?void 0:m.style)==null?void 0:h.lineOrientation)||"horizontal")==="horizontal"?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"])},"横向",2),n("button",{onClick:t[64]||(t[64]=()=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.lineOrientation="vertical")}),class:Ve(["px-2 py-1 text-xs rounded transition-colors duration-200",(((F=(L=e.selectedEl)==null?void 0:L.style)==null?void 0:F.lineOrientation)||"horizontal")==="vertical"?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"])},"纵向",2)])]),n("div",null,[t[185]||(t[185]=n("label",{class:"block text-xs text-gray-400 mb-1"},"粗细(px)",-1)),n("input",{value:(y=(K=(G=e.selectedEl)==null?void 0:G.style)==null?void 0:K.lineThickness)!=null?y:2,onInput:t[65]||(t[65]=a=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.lineThickness=Number(a.target.value))}),type:"number",min:"1",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,40,Ba)])]),n("div",Da,[n("div",null,[t[187]||(t[187]=n("label",{class:"block text-xs text-gray-400 mb-1"},"样式",-1)),n("select",{value:(($=(V=e.selectedEl)==null?void 0:V.style)==null?void 0:$.lineStyle)||"solid",onChange:t[66]||(t[66]=a=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.lineStyle=a.target.value)}),class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},[...t[186]||(t[186]=[n("option",{value:"solid"},"实线",-1),n("option",{value:"dashed"},"虚线",-1)])],40,Ga)]),((Me=(ue=e.selectedEl)==null?void 0:ue.style)==null?void 0:Me.lineStyle)==="dashed"?(j(),z("div",La,[t[188]||(t[188]=n("label",{class:"block text-xs text-gray-400 mb-1"},"虚线长度(px)",-1)),n("input",{value:(Fe=(Se=(xe=e.selectedEl)==null?void 0:xe.style)==null?void 0:Se.lineDashLength)!=null?Fe:6,onInput:t[67]||(t[67]=a=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.lineDashLength=Number(a.target.value))}),type:"number",min:"1",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,40,Ua)])):Z("",!0)]),((Qe=(Be=e.selectedEl)==null?void 0:Be.style)==null?void 0:Qe.lineStyle)==="dashed"?(j(),z("div",Ra,[n("div",null,[t[189]||(t[189]=n("label",{class:"block text-xs text-gray-400 mb-1"},"虚线间距(px)",-1)),n("input",{value:(Je=(lt=(Ke=e.selectedEl)==null?void 0:Ke.style)==null?void 0:lt.lineDashGap)!=null?Je:4,onInput:t[68]||(t[68]=a=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.lineDashGap=Number(a.target.value))}),type:"number",min:"0",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,40,Ta)])])):Z("",!0)])):Z("",!0),e.selectedEl&&e.selectedEl.type==="text"?(j(),z("div",Va,[t[223]||(t[223]=n("h3",{class:"text-sm font-medium text-purple-300 border-b border-purple-500/30 pb-1"},"文本设置",-1)),n("div",Pa,[t[195]||(t[195]=n("label",{class:"block text-xs text-gray-400 mb-1"},"内容",-1)),ye(n("textarea",{"onUpdate:modelValue":t[69]||(t[69]=a=>e.selectedEl.text=a),class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200 resize-none",rows:"2"},null,512),[[Ee,e.selectedEl.text]]),n("div",Ha,[t[194]||(t[194]=n("label",{class:"block text-xs text-gray-400 mb-1"},"动态值",-1)),n("div",Wa,[n("input",{type:"checkbox",checked:!!((et=(ut=e.selectedEl)==null?void 0:ut.dynamic)!=null&&et.enabled),onChange:t[70]||(t[70]=a=>{e.selectedEl&&(e.selectedEl.dynamic=e.selectedEl.dynamic||{enabled:!1,objectName:"",propertyPath:""},e.selectedEl.dynamic.enabled=a.target.checked)}),class:"rounded accent-purple-600"},null,40,_a),t[191]||(t[191]=n("span",{class:"text-xs text-gray-400"},"启用后从数据库对象绑定",-1))]),(Yt=(kt=e.selectedEl)==null?void 0:kt.dynamic)!=null&&Yt.enabled?(j(),z("div",Ja,[n("div",null,[t[192]||(t[192]=n("label",{class:"block text-xs text-gray-400 mb-1"},"选择对象",-1)),ct(It,{options:e.databaseObjects.map(a=>a.name),modelValue:((lr=(_n=e.selectedEl)==null?void 0:_n.dynamic)==null?void 0:lr.objectName)||"","onUpdate:modelValue":t[71]||(t[71]=a=>{e.selectedEl&&(e.selectedEl.dynamic=e.selectedEl.dynamic||{enabled:!0,objectName:"",propertyPath:""},e.selectedEl.dynamic.objectName=String(a||""))})},null,8,["options","modelValue"])]),n("div",null,[t[193]||(t[193]=n("label",{class:"block text-xs text-gray-400 mb-1"},"属性路径",-1)),ct(It,{options:ae.value,modelValue:((sr=(or=e.selectedEl)==null?void 0:or.dynamic)==null?void 0:sr.propertyPath)||"","onUpdate:modelValue":t[72]||(t[72]=a=>{e.selectedEl&&(e.selectedEl.dynamic=e.selectedEl.dynamic||{enabled:!0,objectName:"",propertyPath:""},e.selectedEl.dynamic.propertyPath=String(a||""))})},null,8,["options","modelValue"])]),n("div",qa,"预览值: "+Ze(ke(e.selectedEl)),1)])):Z("",!0)])]),n("div",Xa,[t[196]||(t[196]=n("label",{class:"block text-xs text-gray-400 mb-1"},"尺寸模式",-1)),n("div",Ya,[n("button",{onClick:t[73]||(t[73]=()=>{const a=e.selectedEl;!a||a.type!=="text"||(a.autoSize=!0)}),class:Ve(["px-2 py-1 text-xs rounded transition-colors duration-200",e.selectedEl.autoSize!==!1?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"])},"自适应",2),n("button",{onClick:t[74]||(t[74]=()=>{const a=e.selectedEl;!a||a.type!=="text"||(a.autoSize=!1)}),class:Ve(["px-2 py-1 text-xs rounded transition-colors duration-200",e.selectedEl.autoSize===!1?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"])},"固定尺寸",2)])]),n("div",Ka,[n("div",null,[t[197]||(t[197]=n("label",{class:"block text-xs text-gray-400 mb-1"},"字号",-1)),ct(It,{options:e.fontSizeLibrary,modelValue:((ar=e.selectedEl.style)==null?void 0:ar.fontSize)||14,"onUpdate:modelValue":t[75]||(t[75]=a=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.fontSize=a)}),numeric:!0},null,8,["options","modelValue"])]),n("div",null,[t[198]||(t[198]=n("label",{class:"block text-xs text-gray-400 mb-1"},"字体",-1)),ct(It,{options:e.fontLibrary,modelValue:((ir=e.selectedEl.style)==null?void 0:ir.fontFamily)||e.config.globalFontFamily,"onUpdate:modelValue":t[76]||(t[76]=a=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.fontFamily=a)})},null,8,["options","modelValue"])])]),n("div",Za,[n("div",null,[t[199]||(t[199]=n("label",{class:"block text-xs text-gray-400 mb-1"},"粗细",-1)),ct(It,{options:e.fontWeightOptions,modelValue:((dr=e.selectedEl.style)==null?void 0:dr.fontWeight)||"400","onUpdate:modelValue":t[77]||(t[77]=a=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.fontWeight=a)})},null,8,["options","modelValue"])]),n("div",null,[t[200]||(t[200]=n("label",{class:"block text-xs text-gray-400 mb-1"},"样式",-1)),ct(It,{options:e.fontStyleOptions,modelValue:((ur=e.selectedEl.style)==null?void 0:ur.fontStyle)||"normal","onUpdate:modelValue":t[78]||(t[78]=a=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.fontStyle=a)})},null,8,["options","modelValue"])])]),n("div",Qa,[n("div",null,[t[201]||(t[201]=n("label",{class:"block text-xs text-gray-400 mb-1"},"字间距",-1)),n("input",{value:((cr=e.selectedEl.style)==null?void 0:cr.letterSpacing)||0,onInput:t[79]||(t[79]=a=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.letterSpacing=Number(a.target.value))}),type:"number",step:"0.1",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,40,ei)]),n("div",null,[t[202]||(t[202]=n("label",{class:"block text-xs text-gray-400 mb-1"},"行高",-1)),n("input",{value:((pr=e.selectedEl.style)==null?void 0:pr.lineHeight)||1.5,onInput:t[80]||(t[80]=a=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.lineHeight=Number(a.target.value))}),type:"number",step:"0.1",min:"0.5",max:"3",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,40,ti)])]),n("div",ni,[t[203]||(t[203]=n("label",{class:"block text-xs text-gray-400 mb-1"},"颜色",-1)),n("div",ri,[n("input",{value:(gr=(fr=e.selectedEl)==null?void 0:fr.style)!=null&&gr.textGradient?"#000000":((yr=(mr=e.selectedEl)==null?void 0:mr.style)==null?void 0:yr.color)||e.config.globalColor,onInput:t[81]||(t[81]=a=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.color=a.target.value)}),type:"color",disabled:!!((xr=(br=e.selectedEl)==null?void 0:br.style)!=null&&xr.textGradient),class:"w-8 h-6 bg-gray-800/50 border border-purple-500/30 rounded cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed"},null,40,li),n("input",{value:(hr=(vr=e.selectedEl)==null?void 0:vr.style)!=null&&hr.textGradient?"transparent":(kr=($r=(wr=e.selectedEl)==null?void 0:wr.style)==null?void 0:$r.color)!=null?kr:e.config.globalColor,onInput:t[82]||(t[82]=a=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.color=a.target.value)}),type:"text",disabled:!!((Sr=(Er=e.selectedEl)==null?void 0:Er.style)!=null&&Sr.textGradient),class:"flex-1 px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-xs focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",placeholder:"#000000"},null,40,oi)]),(Cr=(Mr=e.selectedEl)==null?void 0:Mr.style)!=null&&Cr.textGradient?(j(),z("div",si,"文字渐变启用时，文字颜色自动设为透明")):Z("",!0)]),n("div",ai,[t[204]||(t[204]=n("label",{class:"block text-xs text-gray-400 mb-1"},"背景色",-1)),n("div",ii,[n("input",{value:e.safeHex(((Ir=(Nr=e.selectedEl)==null?void 0:Nr.style)==null?void 0:Ir.backgroundColor)||""),onInput:t[83]||(t[83]=a=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.backgroundColor=a.target.value)}),type:"color",class:"w-8 h-6 bg-gray-800/50 border border-purple-500/30 rounded cursor-pointer"},null,40,di),n("input",{value:(jr=(Ar=(Fr=e.selectedEl)==null?void 0:Fr.style)==null?void 0:Ar.backgroundColor)!=null?jr:"transparent",onInput:t[84]||(t[84]=a=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.backgroundColor=a.target.value)}),type:"text",class:"flex-1 px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-xs focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200",placeholder:"transparent"},null,40,ui)])]),n("div",ci,[t[205]||(t[205]=n("label",{class:"block text-xs text-gray-400 mb-1"},"文本对齐",-1)),n("div",pi,[n("button",{onClick:t[85]||(t[85]=()=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.textAlign="left")}),class:Ve(["px-2 py-1 text-xs rounded transition-colors duration-200",(((zr=e.selectedEl.style)==null?void 0:zr.textAlign)||"left")==="left"?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"])},"左对齐",2),n("button",{onClick:t[86]||(t[86]=()=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.textAlign="center")}),class:Ve(["px-2 py-1 text-xs rounded transition-colors duration-200",(((Or=e.selectedEl.style)==null?void 0:Or.textAlign)||"left")==="center"?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"])},"居中",2),n("button",{onClick:t[87]||(t[87]=()=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.textAlign="right")}),class:Ve(["px-2 py-1 text-xs rounded transition-colors duration-200",(((Br=e.selectedEl.style)==null?void 0:Br.textAlign)||"left")==="right"?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"])},"右对齐",2)])]),n("div",fi,[t[206]||(t[206]=n("label",{class:"block text-xs text-gray-400 mb-1"},"文本方向",-1)),n("div",gi,[n("button",{onClick:t[88]||(t[88]=()=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.textOrientation="horizontal")}),class:Ve(["px-2 py-1 text-xs rounded transition-colors duration-200",(((Gr=(Dr=e.selectedEl)==null?void 0:Dr.style)==null?void 0:Gr.textOrientation)||"horizontal")==="horizontal"?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"])},"横向",2),n("button",{onClick:t[89]||(t[89]=()=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.textOrientation="vertical")}),class:Ve(["px-2 py-1 text-xs rounded transition-colors duration-200",(((Ur=(Lr=e.selectedEl)==null?void 0:Lr.style)==null?void 0:Ur.textOrientation)||"horizontal")==="vertical"?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"])},"纵向",2)]),t[207]||(t[207]=n("p",{class:"text-[11px] text-gray-400"},"纵向使用 CSS writing-mode 展示，适合竖排文本。",-1))]),n("div",mi,[t[209]||(t[209]=n("label",{class:"block text-xs text-gray-400 mb-1"},"布局倾斜",-1)),n("div",yi,[ye(n("input",{"onUpdate:modelValue":t[90]||(t[90]=a=>e.selectedEl.style.skewAngle=a),type:"range",min:"-45",max:"45",class:"flex-1"},null,512),[[Ee,e.selectedEl.style.skewAngle,void 0,{number:!0}]]),ye(n("input",{"onUpdate:modelValue":t[91]||(t[91]=a=>e.selectedEl.style.skewAngle=a),type:"number",min:"-45",max:"45",class:"w-16 px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-xs focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,512),[[Ee,e.selectedEl.style.skewAngle,void 0,{number:!0}]])]),n("div",bi,[t[208]||(t[208]=n("label",{class:"text-xs text-gray-400"},"布局倾斜跟随",-1)),n("button",{onClick:t[92]||(t[92]=()=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.skewFlowEnabled=!0)}),class:Ve(["px-2 py-1 text-xs rounded transition-colors duration-200",(Tr=(Rr=e.selectedEl)==null?void 0:Rr.style)!=null&&Tr.skewFlowEnabled?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"])},"开",2),n("button",{onClick:t[93]||(t[93]=()=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.skewFlowEnabled=!1)}),class:Ve(["px-2 py-1 text-xs rounded transition-colors duration-200",(Pr=(Vr=e.selectedEl)==null?void 0:Vr.style)!=null&&Pr.skewFlowEnabled?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-purple-600 text-white"])},"关",2)]),t[210]||(t[210]=n("p",{class:"text-[11px] text-gray-400"},"调整整体容器的 X 轴倾斜角度（-45° ~ 45°）。启用“跟随”后，文本布局按父视图倾斜线性排布，字符保持正立，可与波形叠加。",-1))]),n("div",xi,[n("div",vi,[t[211]||(t[211]=n("label",{class:"text-xs text-gray-400"},"文本波形",-1)),n("div",hi,[(_r=(Wr=(Hr=e.selectedEl)==null?void 0:Hr.style)==null?void 0:Wr.textWave)!=null&&_r.enabled?(j(),z("button",{key:1,onClick:t[95]||(t[95]=()=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.textWave={enabled:!1})}),class:"px-2 py-1 bg-red-600/30 hover:bg-red-600/50 text-red-300 rounded text-xs transition-colors duration-200"},"关闭")):(j(),z("button",{key:0,onClick:t[94]||(t[94]=()=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.textWave={enabled:!0,amplitude:8,frequency:.5,phase:0})}),class:"px-2 py-1 bg-purple-600/30 hover:bg-purple-600/50 text-purple-300 rounded text-xs transition-colors duration-200"},"启用"))])]),(Xr=(qr=(Jr=e.selectedEl)==null?void 0:Jr.style)==null?void 0:qr.textWave)!=null&&Xr.enabled?(j(),z("div",wi,[n("div",$i,[t[212]||(t[212]=n("label",{class:"block text-xs text-gray-400 mb-1"},"幅度(px)",-1)),ye(n("input",{"onUpdate:modelValue":t[96]||(t[96]=a=>e.selectedEl.style.textWave.amplitude=a),type:"number",min:"0",max:"100",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-xs focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,512),[[Ee,e.selectedEl.style.textWave.amplitude,void 0,{number:!0}]])]),n("div",ki,[t[213]||(t[213]=n("label",{class:"block text-xs text-gray-400 mb-1"},"频率(rad/字)",-1)),ye(n("input",{"onUpdate:modelValue":t[97]||(t[97]=a=>e.selectedEl.style.textWave.frequency=a),type:"number",step:"0.1",min:"0.1",max:"10",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-xs focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,512),[[Ee,e.selectedEl.style.textWave.frequency,void 0,{number:!0}]])]),n("div",Ei,[t[214]||(t[214]=n("label",{class:"block text-xs text-gray-400 mb-1"},"相位(rad)",-1)),ye(n("input",{"onUpdate:modelValue":t[98]||(t[98]=a=>e.selectedEl.style.textWave.phase=a),type:"number",step:"0.1",min:"-100",max:"100",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-xs focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,512),[[Ee,e.selectedEl.style.textWave.phase,void 0,{number:!0}]])])])):Z("",!0),t[215]||(t[215]=n("p",{class:"text-[11px] text-gray-400"},"每个字符沿 Y 轴按正弦位移，字符保持正立。",-1))]),n("div",Si,[t[216]||(t[216]=n("label",{class:"block text-xs text-gray-400 mb-1"},"文本装饰",-1)),n("div",Mi,[n("button",{onClick:t[99]||(t[99]=()=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.textDecoration=e.selectedEl.style.textDecoration==="underline"?"none":"underline")}),class:Ve(["px-2 py-1 text-xs rounded transition-colors duration-200",(((Yr=e.selectedEl.style)==null?void 0:Yr.textDecoration)||"none")==="underline"?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"])},"下划线",2),n("button",{onClick:t[100]||(t[100]=()=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.textDecoration=e.selectedEl.style.textDecoration==="line-through"?"none":"line-through")}),class:Ve(["px-2 py-1 text-xs rounded transition-colors duration-200",(((Kr=e.selectedEl.style)==null?void 0:Kr.textDecoration)||"none")==="line-through"?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"])},"删除线",2),n("button",{onClick:t[101]||(t[101]=()=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.textDecoration="none")}),class:Ve(["px-2 py-1 text-xs rounded transition-colors duration-200",(((Zr=e.selectedEl.style)==null?void 0:Zr.textDecoration)||"none")==="none"?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"])},"无",2)])]),n("div",Ci,[n("div",Ni,[t[217]||(t[217]=n("label",{class:"text-xs text-gray-400"},"文本渐变",-1)),n("div",Ii,[(Qr=e.selectedEl.style)!=null&&Qr.textGradient?Z("",!0):(j(),z("button",{key:0,onClick:t[102]||(t[102]=a=>Y(e.selectedEl)),class:"px-2 py-1 bg-purple-600/30 hover:bg-purple-600/50 text-purple-300 rounded text-xs transition-colors duration-200"},"启用")),(el=e.selectedEl.style)!=null&&el.textGradient?(j(),z("button",{key:1,onClick:t[103]||(t[103]=()=>{e.selectedEl&&e.selectedEl.style&&(e.selectedEl.style.textGradient=void 0)}),class:"px-2 py-1 bg-red-600/30 hover:bg-red-600/50 text-red-300 rounded text-xs transition-colors duration-200"},"关闭")):Z("",!0)])]),(tl=e.selectedEl.style)!=null&&tl.textGradient?(j(),z("div",Fi,[n("div",Ai,[n("div",null,[t[218]||(t[218]=n("label",{class:"block text-xs text-gray-400 mb-1"},"起始色",-1)),n("div",ji,[ye(n("input",{"onUpdate:modelValue":t[104]||(t[104]=a=>e.selectedEl.style.textGradient.colors[0]=a),type:"color",class:"w-8 h-6 bg-gray-800/50 border border-purple-500/30 rounded cursor-pointer"},null,512),[[Ee,e.selectedEl.style.textGradient.colors[0]]]),ye(n("input",{"onUpdate:modelValue":t[105]||(t[105]=a=>e.selectedEl.style.textGradient.colors[0]=a),type:"text",class:"flex-1 px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-xs focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200",placeholder:"#DFDD5A"},null,512),[[Ee,e.selectedEl.style.textGradient.colors[0]]])])]),n("div",null,[t[219]||(t[219]=n("label",{class:"block text-xs text-gray-400 mb-1"},"结束色",-1)),n("div",zi,[ye(n("input",{"onUpdate:modelValue":t[106]||(t[106]=a=>e.selectedEl.style.textGradient.colors[1]=a),type:"color",class:"w-8 h-6 bg-gray-800/50 border border-purple-500/30 rounded cursor-pointer"},null,512),[[Ee,e.selectedEl.style.textGradient.colors[1]]]),ye(n("input",{"onUpdate:modelValue":t[107]||(t[107]=a=>e.selectedEl.style.textGradient.colors[1]=a),type:"text",class:"flex-1 px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-xs focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200",placeholder:"#FFFFFF"},null,512),[[Ee,e.selectedEl.style.textGradient.colors[1]]])])])]),n("div",null,[n("label",Oi,"角度: "+Ze(e.selectedEl.style.textGradient.angle||0)+"°",1),ye(n("input",{"onUpdate:modelValue":t[108]||(t[108]=a=>e.selectedEl.style.textGradient.angle=a),type:"range",min:"0",max:"360",class:"w-full"},null,512),[[Ee,e.selectedEl.style.textGradient.angle,void 0,{number:!0}]])])])):Z("",!0)]),n("div",Bi,[n("div",Di,[t[220]||(t[220]=n("label",{class:"text-xs text-gray-400"},"背景渐变",-1)),n("div",Gi,[(nl=e.selectedEl.style)!=null&&nl.backgroundGradient?Z("",!0):(j(),z("button",{key:0,onClick:t[109]||(t[109]=a=>k(e.selectedEl)),class:"px-2 py-1 bg-purple-600/30 hover:bg-purple-600/50 text-purple-300 rounded text-xs transition-colors duration-200"},"启用")),(rl=e.selectedEl.style)!=null&&rl.backgroundGradient?(j(),z("button",{key:1,onClick:t[110]||(t[110]=()=>{e.selectedEl&&e.selectedEl.style&&(e.selectedEl.style.backgroundGradient=void 0)}),class:"px-2 py-1 bg-red-600/30 hover:bg-red-600/50 text-red-300 rounded text-xs transition-colors duration-200"},"关闭")):Z("",!0)])]),(ll=e.selectedEl.style)!=null&&ll.backgroundGradient?(j(),z("div",Li,[n("div",Ui,[n("div",null,[t[221]||(t[221]=n("label",{class:"block text-xs text-gray-400 mb-1"},"起始色",-1)),n("div",Ri,[ye(n("input",{"onUpdate:modelValue":t[111]||(t[111]=a=>e.selectedEl.style.backgroundGradient.colors[0]=a),type:"color",class:"w-8 h-6 bg-gray-800/50 border border-purple-500/30 rounded cursor-pointer"},null,512),[[Ee,e.selectedEl.style.backgroundGradient.colors[0]]]),ye(n("input",{"onUpdate:modelValue":t[112]||(t[112]=a=>e.selectedEl.style.backgroundGradient.colors[0]=a),type:"text",class:"flex-1 px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-xs focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200",placeholder:"#00A3FF"},null,512),[[Ee,e.selectedEl.style.backgroundGradient.colors[0]]])])]),n("div",null,[t[222]||(t[222]=n("label",{class:"block text-xs text-gray-400 mb-1"},"结束色",-1)),n("div",Ti,[ye(n("input",{"onUpdate:modelValue":t[113]||(t[113]=a=>e.selectedEl.style.backgroundGradient.colors[1]=a),type:"color",class:"w-8 h-6 bg-gray-800/50 border border-purple-500/30 rounded cursor-pointer"},null,512),[[Ee,e.selectedEl.style.backgroundGradient.colors[1]]]),ye(n("input",{"onUpdate:modelValue":t[114]||(t[114]=a=>e.selectedEl.style.backgroundGradient.colors[1]=a),type:"text",class:"flex-1 px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-xs focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200",placeholder:"#ffffff"},null,512),[[Ee,e.selectedEl.style.backgroundGradient.colors[1]]])])])]),n("div",null,[n("label",Vi,"角度: "+Ze(e.selectedEl.style.backgroundGradient.angle||0)+"°",1),ye(n("input",{"onUpdate:modelValue":t[115]||(t[115]=a=>e.selectedEl.style.backgroundGradient.angle=a),type:"range",min:"0",max:"360",class:"w-full"},null,512),[[Ee,e.selectedEl.style.backgroundGradient.angle,void 0,{number:!0}]])])])):Z("",!0)])])):Z("",!0),e.selectedEl&&e.selectedEl.type==="image"?(j(),z("div",Pi,[t[232]||(t[232]=Yn('<h3 class="text-sm font-medium text-purple-300 border-b border-purple-500/30 pb-1" data-v-e92e54ba>图片设置</h3><div class="space-y-2" data-v-e92e54ba><label class="block text-xs text-gray-400 mb-1" data-v-e92e54ba>图片来源</label><div class="grid grid-cols-2 gap-2" data-v-e92e54ba><button class="px-3 py-2 bg-purple-600/30 hover:bg-purple-600/50 text-purple-300 rounded text-xs transition-colors duration-200" data-v-e92e54ba>上传文件</button><button class="px-3 py-2 bg-green-600/30 hover:bg-green-600/50 text-green-300 rounded text-xs transition-colors duration-200" data-v-e92e54ba>选择图标</button></div></div>',2)),n("div",Hi,[t[224]||(t[224]=n("label",{class:"block text-xs text-gray-400 mb-1"},"图片文件",-1)),n("input",{type:"file",onChange:$e,accept:"image/*",class:"w-full text-xs text-gray-300 file:mr-2 file:py-1 file:px-2 file:rounded file:border-0 file:text-xs file:bg-purple-600 file:text-white hover:file:bg-purple-500 file:cursor-pointer"},null,32)]),e.iconLibrary.length>0?(j(),z("div",Wi,[t[225]||(t[225]=n("label",{class:"block text-xs text-gray-400 mb-1"},"选择图标",-1)),n("div",_i,[n("div",Ji,[(j(!0),z(Ft,null,Rt(e.iconLibrary,a=>(j(),z("div",{key:a.id,onClick:B=>_(a),class:"aspect-square bg-gray-700/50 rounded cursor-pointer hover:bg-gray-600/50 transition-colors duration-200 flex items-center justify-center p-1 border border-transparent hover:border-green-400/50"},[n("img",{src:a.url,alt:a.name,class:"max-w-full max-h-full object-contain",loading:"lazy"},null,8,Xi)],8,qi))),128))])]),e.iconLibrary.length===0?(j(),z("div",Yi,"暂无图标，请先在图标库管理中上传图标")):Z("",!0)])):Z("",!0),n("div",{class:"space-y-2"},[t[226]||(t[226]=n("label",{class:"block text-xs text-gray-400 mb-1"},"尺寸模式",-1)),n("div",{class:"grid grid-cols-2 gap-2"},[n("button",{onClick:D,class:Ve(["px-3 py-2 rounded text-xs transition-colors duration-200","bg-blue-600/30 hover:bg-blue-600/50 text-blue-300"])},"自适应（原始尺寸）"),n("button",{onClick:R,class:Ve(["px-3 py-2 rounded text-xs transition-colors duration-200","bg-purple-600/30 hover:bg-purple-600/50 text-purple-300"])},"固定大小")])]),n("div",Ki,[n("div",null,[t[227]||(t[227]=n("label",{class:"block text-xs text-gray-400 mb-1"},"宽度(px)",-1)),ye(n("input",{"onUpdate:modelValue":t[116]||(t[116]=a=>e.selectedEl.width=a),type:"number",min:"1",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,512),[[Ee,e.selectedEl.width,void 0,{number:!0}]])]),n("div",null,[t[228]||(t[228]=n("label",{class:"block text-xs text-gray-400 mb-1"},"高度(px)",-1)),ye(n("input",{"onUpdate:modelValue":t[117]||(t[117]=a=>e.selectedEl.height=a),type:"number",min:"1",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,512),[[Ee,e.selectedEl.height,void 0,{number:!0}]])]),n("div",null,[t[230]||(t[230]=n("label",{class:"block text-xs text-gray-400 mb-1"},"对象适配",-1)),ye(n("select",{"onUpdate:modelValue":t[118]||(t[118]=a=>e.selectedEl.style.objectFit=a),class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},[...t[229]||(t[229]=[Yn('<option value="contain" data-v-e92e54ba>contain（完整显示）</option><option value="cover" data-v-e92e54ba>cover（填充裁剪）</option><option value="fill" data-v-e92e54ba>fill（拉伸填充）</option><option value="scale-down" data-v-e92e54ba>scale-down（缩小适配）</option><option value="none" data-v-e92e54ba>none（不适配）</option>',5)])],512),[[sl,e.selectedEl.style.objectFit]])])]),n("div",Zi,[t[231]||(t[231]=n("label",{class:"block text-xs text-gray-400 mb-1"},"圆角",-1)),ye(n("input",{"onUpdate:modelValue":t[119]||(t[119]=a=>e.selectedEl.style.borderRadius=a),type:"number",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,512),[[Ee,e.selectedEl.style.borderRadius,void 0,{number:!0}]])])])):Z("",!0),n("div",Qi,[n("button",{onClick:t[120]||(t[120]=a=>p("saveSelectedAsComponent")),class:"w-full px-3 py-2 bg-gradient-to-r from-purple-600 to-fuchsia-600 hover:from-purple-500 hover:to-fuchsia-500 text-white rounded-lg text-sm font-medium transition-all duration-200 transform hover:scale-105 shadow-lg shadow-purple-500/25"},"保存为组件"),n("button",{onClick:t[121]||(t[121]=a=>p("duplicateSelected")),class:"w-full px-3 py-2 bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-500 hover:to-cyan-500 text-white rounded-lg text-sm font-medium transition-all duration-200 transform hover:scale-105 shadow-lg shadow-blue-500/25"},"复制元素"),n("button",{onClick:t[122]||(t[122]=a=>p("removeSelected")),class:"w-full px-3 py-2 bg-gradient-to-r from-red-600 to-pink-600 hover:from-red-500 hover:to-pink-500 text-white rounded-lg text-sm font-medium transition-all duration-200 transform hover:scale-105 shadow-lg shadow-red-500/25"},"删除元素")])])):Z("",!0),e.selectedEl?Z("",!0):(j(),z("div",ed,[...t[233]||(t[233]=[n("div",{class:"w-16 h-16 mx-auto mb-4 border-2 border-dashed border-gray-600 rounded-lg flex items-center justify-center"},[n("span",{class:"text-2xl"},"📝")],-1),n("p",{class:"text-sm"},"选择一个元素来编辑其属性",-1)])]))])}}}),rd=rr(nd,[["__scopeId","data-v-e92e54ba"]]),ld={class:"h-full bg-gradient-to-br from-gray-900 via-blue-900 to-purple-900 text-white relative overflow-hidden min-w-[1200px]"},od={class:"relative z-10 flex h-full min-h-[600px] gap-4 p-4"},sd={class:"flex-1 min-w-0 flex flex-col bg-gray-900/60 backdrop-blur-sm border border-purple-500/30 rounded-xl shadow-2xl shadow-purple-500/20"},ad={class:"flex items-center justify-between p-4 border-b border-purple-500/30 bg-gradient-to-r from-purple-600/20 to-pink-600/20 flex-shrink-0"},id={class:"flex gap-2"},dd={class:"relative"},ud={class:"grid grid-cols-2 gap-2"},cd={class:"flex items-center gap-2"},pd={class:"text-sm text-gray-400 min-w-[60px] text-center"},fd={key:0,class:"absolute inset-0 pointer-events-none z-50"},gd={key:1,class:"absolute inset-0 z-[9999] select-none pointer-events-none"},md={key:0,class:"fixed inset-0 z-50 flex items-center justify-center"},yd={class:"relative w-[800px] max-w-[90vw] bg-gray-900/90 backdrop-blur-md border border-fuchsia-500/40 rounded-xl shadow-2xl"},bd={class:"p-4 space-y-3"},xd={class:"flex items-center gap-2"},vd={key:0,class:"text-center text-sm text-gray-400 py-6"},hd={key:1},wd={key:0,class:"text-center text-sm text-gray-400 py-6"},$d={key:1,class:"grid grid-cols-3 gap-3"},kd={class:"aspect-video bg-gray-700/50 flex items-center justify-center"},Ed=["src"],Sd={key:1,class:"text-gray-400 text-xs"},Md={class:"p-3 space-y-1"},Cd={class:"flex items-center justify-between"},Nd=["title"],Id={class:"text-xs text-gray-500"},Fd={class:"flex flex-wrap gap-1 mt-1"},Ad={class:"pt-2"},jd=["onClick"],zd={key:1,class:"fixed inset-0 z-50 flex items-center justify-center"},Od={class:"relative w-[600px] max-w-[90vw] bg-gray-900/90 backdrop-blur-md border border-cyan-500/40 rounded-xl shadow-2xl"},Bd={class:"flex items-center justify-between p-4 border-b border-cyan-500/30 bg-gradient-to-r from-cyan-600/20 to-blue-600/20"},Dd={class:"p-4 space-y-3 max-h-[50vh] overflow-y-auto"},Gd={key:0,class:"text-center text-sm text-gray-400 py-6"},Ld={key:1,class:"space-y-2"},Ud=["title"],Rd=["onClick"],Td=50,Vd=St({__name:"LowCodeBuilder",props:{projectId:{},currentProject:{},isComponent:{type:Boolean}},setup(x){const o=x,e=Cl(),p=Fl(),w=Te(()=>{var r;return(r=o.projectId)!=null?r:e.params.id?String(e.params.id):void 0}),A=we(null);async function J(){if(w.value)try{const r=(await ke()).transaction(["projects"],"readonly").objectStore("projects").get(w.value);r.onsuccess=()=>{A.value=r.result}}catch(r){console.error("加载项目信息失败:",r)}}function ae(){if(!w.value)return;const r=o.isComponent?{path:`/project/${w.value}/preview`,query:{type:"component"}}:{path:`/project/${w.value}/preview`},l=p.resolve(r).href;window.open(l,"_blank")}async function ke(){return new Promise((r,l)=>{const s="lowcode-projects",c="projects",g=indexedDB.open(s);g.onerror=()=>l(g.error),g.onupgradeneeded=()=>{const f=g.result;f.objectStoreNames.contains(c)||f.createObjectStore(c,{keyPath:"id"})},g.onsuccess=()=>{const f=g.result;if(f.objectStoreNames.contains(c))r(f);else{const N=f.version+1;f.close();const I=indexedDB.open(s,N);I.onerror=()=>l(I.error),I.onupgradeneeded=()=>{const M=I.result;M.objectStoreNames.contains(c)||M.createObjectStore(c,{keyPath:"id"})},I.onsuccess=()=>r(I.result)}}})}const C=ol({width:1024,height:576,backgroundUrl:"",backgroundColor:"#000000",globalFontFamily:"Arial, Helvetica, sans-serif",globalFontSize:14,globalColor:"#FFFFFF"}),ge=we("GeneratedComponent"),P=we(["Arial, Helvetica, sans-serif","PingFang SC","Microsoft YaHei","Roboto","Inter"]),Q=we([8,9,10,11,12,14,16,18,20,24,28,32,36,48,64]),de=we(["100","200","300","400","500","600","700","800","900"]),Y=we(["normal","italic","oblique"]),k=we([]),d=we(null),U=we([]),H=we({}),te=we(null),T=we([]),q=we(!1);function $e(){try{const r=JSON.parse(JSON.stringify(k.value));T.value.push(r),T.value.length>Td&&T.value.shift()}catch(r){console.warn("pushHistory 序列化失败：",r)}}function _(){T.value.length!==0&&(k.value=T.value.pop(),d.value=null,le.value=!1)}function D(r){var f,N,I,M,E,i,u,O,W,ie,fe,se,be,me,ce;function l(re){var pe;if(!re)return!1;const ne=(pe=re.tagName)==null?void 0:pe.toLowerCase();return re.isContentEditable||!!re.closest('[contenteditable="true"]')||ne==="input"||ne==="textarea"||ne==="select"}const s=document.activeElement;if(l(s)||l(r.target))return;const c=r.metaKey||r.ctrlKey,g=r.key.toLowerCase();if(g==="arrowleft"||g==="arrowright"||g==="arrowup"||g==="arrowdown"){if(!d.value)return;const{el:re}=ze(d.value);if(!re)return;R.shift=r.shiftKey,g==="arrowleft"&&(R.left=!0),g==="arrowright"&&(R.right=!0),g==="arrowup"&&(R.up=!0),g==="arrowdown"&&(R.down=!0);const ne=r.shiftKey?10:1;oe(g==="arrowleft"?-ne:g==="arrowright"?ne:0,g==="arrowup"?-ne:g==="arrowdown"?ne:0),X!=null&&(clearTimeout(X),X=null),X=window.setTimeout(()=>{b()},220),r.preventDefault();return}if(c&&g==="c"){if($t.value){try{te.value=JSON.parse(JSON.stringify($t.value))}catch{}r.preventDefault()}}else if(c&&g==="v"){if(te.value){const re=te.value,ne=on(re),{parentGroup:pe}=ze(re.id);if(pe){const Ie=Number((N=(f=pe.left)!=null?f:pe.x)!=null?N:0),m=Number((M=(I=pe.top)!=null?I:pe.y)!=null?M:0),h=Number((E=pe.width)!=null?E:0),L=Number((i=pe.height)!=null?i:0),F=Ie+h,G=m+L,K=Number((u=re.width)!=null?u:0),y=Number((O=re.height)!=null?O:0);let V=K,$=y;if(!V||!$)if(re.type==="text"){const Qe=Number((W=re.fontSize)!=null?W:16),Ke=String((fe=(ie=re.text)!=null?ie:re.content)!=null?fe:"").trim();V=Math.max(K||50,Math.round((Ke.length||2)*Qe*.6)),$=Math.max(y||20,Math.round(Qe*1.5))}else re.type==="image"?(V=K||200,$=y||150):re.type==="chart"?(V=K||240,$=y||160):re.type==="line"?(V=K||200,$=y||2):(V=K||100,$=y||60);const ue=10,Me=Ie+h/2,xe=m+L/2;let Se=!1,Fe=F+ue,Be=Math.round(xe-$/2);if(!Se&&Fe+V<=C.width&&(ne.left=Math.max(0,Math.min(Fe,Math.max(0,C.width-V))),ne.top=Math.max(0,Math.min(Be,Math.max(0,C.height-$))),Se=!0),Fe=Ie-V-ue,Be=Math.round(xe-$/2),!Se&&Fe>=0&&(ne.left=Math.max(0,Math.min(Fe,Math.max(0,C.width-V))),ne.top=Math.max(0,Math.min(Be,Math.max(0,C.height-$))),Se=!0),Fe=Math.round(Me-V/2),Be=G+ue,!Se&&Be+$<=C.height&&(ne.left=Math.max(0,Math.min(Fe,Math.max(0,C.width-V))),ne.top=Math.max(0,Math.min(Be,Math.max(0,C.height-$))),Se=!0),Fe=Math.round(Me-V/2),Be=m-$-ue,!Se&&Be>=0&&(ne.left=Math.max(0,Math.min(Fe,Math.max(0,C.width-V))),ne.top=Math.max(0,Math.min(Be,Math.max(0,C.height-$))),Se=!0),!Se){const Qe=Number((be=(se=re.left)!=null?se:re.x)!=null?be:0),Ke=Number((ce=(me=re.top)!=null?me:re.y)!=null?ce:0),lt=Ie+Qe+ue,Je=m+Ke+ue;ne.left=Math.max(0,Math.min(Math.round(lt),Math.max(0,C.width-V))),ne.top=Math.max(0,Math.min(Math.round(Je),Math.max(0,C.height-$)))}ne.x=ne.left,ne.y=ne.top}$e(),k.value.push(ne),d.value=ne.id,r.preventDefault()}}else if(g==="delete"||g==="backspace"){if(d.value){$e();const{el:re,parentGroup:ne}=ze(d.value);re&&ne&&Array.isArray(ne.children)?ne.children=ne.children.filter(pe=>pe.id!==re.id):(k.value=k.value.filter(pe=>pe.id!==d.value),re&&re.type==="group"&&Kt(re.id)),d.value=null,r.preventDefault()}}else c&&g==="z"&&(_(),r.preventDefault())}const R=ol({left:!1,right:!1,up:!1,down:!1,shift:!1});let Oe=null,v=0,X=null;function oe(r,l){var be,me,ce,re,ne,pe,Ie,m;const s=d.value;if(!s)return;const{el:c,parentGroup:g}=ze(s);if(!c)return;const f=(ce=(me=c.width)!=null?me:(be=H.value[s])==null?void 0:be.width)!=null?ce:0,N=(pe=(ne=c.height)!=null?ne:(re=H.value[s])==null?void 0:re.height)!=null?pe:0;let I=C.width,M=C.height;g&&g.width&&g.height&&(I=Number(g.width)||I,M=Number(g.height)||M);let E=((Ie=c.left)!=null?Ie:0)+r,i=((m=c.top)!=null?m:0)+l;E=Math.round(E),i=Math.round(i),E=Math.max(0,Math.min(E,I-(f||0))),i=Math.max(0,Math.min(i,M-(N||0))),c.left=E,c.top=i,c.x=c.left,c.y=c.top;const u=c.left,O=c.top,W=u+(f||0),ie=O+(N||0),fe=u+(f||0)/2,se=O+(N||0)/2;dt({left:u,top:O,right:W,bottom:ie,centerX:fe,centerY:se})}function b(){if(Oe!=null)return;v=Date.now(),$e();const r=()=>{if(!R.left&&!R.right&&!R.up&&!R.down){Oe!=null&&cancelAnimationFrame(Oe),Oe=null,gt();return}const l=Date.now()-v,s=l>1500?8:l>800?4:l>300?2:1,c=(R.shift?10:1)*s,g=(R.left?-c:0)+(R.right?c:0),f=(R.up?-c:0)+(R.down?c:0);oe(g,f),Oe=requestAnimationFrame(r)};Oe=requestAnimationFrame(r)}function t(r){const l=r.key.toLowerCase();l==="shift"&&(R.shift=!1),l==="arrowleft"&&(R.left=!1),l==="arrowright"&&(R.right=!1),l==="arrowup"&&(R.up=!1),l==="arrowdown"&&(R.down=!1),X!=null&&(clearTimeout(X),X=null),!R.left&&!R.right&&!R.up&&!R.down&&Oe==null&&$e(),!R.left&&!R.right&&!R.up&&!R.down&&gt()}const le=we(!1),ee=we({left:0,top:0,right:0,bottom:0,centerX:0,centerY:0});function tt(r){H.value[r.id]=r}function Pe(r){return r==="pie"?{backgroundColor:"transparent",tooltip:{trigger:"item"},legend:{top:"5%",left:"center",textStyle:{color:"#fff"},show:!0},series:[{name:"分类占比",type:"pie",radius:["40%","70%"],avoidLabelOverlap:!1,itemStyle:{borderRadius:8,borderColor:"#111",borderWidth:2},label:{show:!0,color:"#fff"},labelLine:{show:!0},data:[{value:1048,name:"A"},{value:735,name:"B"},{value:580,name:"C"},{value:484,name:"D"},{value:300,name:"E"}]}]}:r==="mix"?{backgroundColor:"transparent",color:["#00bcd4","#ff9800"],tooltip:{trigger:"axis"},legend:{textStyle:{color:"#fff"},show:!0},xAxis:{type:"category",data:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],axisLine:{lineStyle:{color:"#888"}},axisLabel:{color:"#ccc"}},yAxis:{type:"value",axisLine:{lineStyle:{color:"#888"}},axisLabel:{color:"#ccc"}},series:[{name:"销量",type:"bar",data:[120,200,150,80,70,110,130],itemStyle:{borderRadius:[4,4,0,0]}},{name:"均价",type:"line",smooth:!0,data:[30,40,45,50,49,60,70],lineStyle:{width:2}}]}:r==="bar"?{backgroundColor:"transparent",color:["#42b883"],tooltip:{trigger:"axis"},legend:{show:!0,textStyle:{color:"#fff"}},xAxis:{type:"category",data:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],axisLine:{lineStyle:{color:"#888"}},axisLabel:{color:"#ccc"}},yAxis:{type:"value",axisLine:{lineStyle:{color:"#888"}},axisLabel:{color:"#ccc"}},series:[{name:"数量",type:"bar",data:[120,200,150,80,70,110,130],itemStyle:{borderRadius:[4,4,0,0]}}]}:{backgroundColor:"transparent",color:["#42b883"],tooltip:{trigger:"axis"},legend:{show:!0,textStyle:{color:"#fff"}},xAxis:{type:"category",data:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],axisLine:{lineStyle:{color:"#888"}},axisLabel:{color:"#ccc"}},yAxis:{type:"value",axisLine:{lineStyle:{color:"#888"}},axisLabel:{color:"#ccc"}},series:[{name:"趋势",type:"line",smooth:!0,data:[150,230,224,218,135,147,260],lineStyle:{width:2}}]}}function We(r){var re,ne;const l=`${r}-${Date.now()}`,s=Nt.value,c=_e.value||1,g=(re=s==null?void 0:s.clientWidth)!=null?re:0,f=(ne=s==null?void 0:s.clientHeight)!=null?ne:0,N=s?(s.scrollLeft+g/2)/c:20,I=s?(s.scrollTop+f/2)/c:20,M=r==="chart"?240:r==="image"||r==="line"?200:r==="container"?240:void 0,E=r==="chart"?160:r==="image"?150:r==="line"?2:r==="container"?160:void 0,i=Math.round(N-(M?M/2:10)),u=Math.round(I-(E?E/2:10)),O=Math.max(0,Math.min(i,Math.max(0,C.width-(M!=null?M:0)))),W=Math.max(0,Math.min(u,Math.max(0,C.height-(E!=null?E:0)))),ie=(pe,Ie,m,h)=>{const L=Math.max(0,Math.min(pe,Math.max(0,C.width-(m!=null?m:0)))),F=Math.max(0,Math.min(Ie,Math.max(0,C.height-(h!=null?h:0))));return{cl:L,ct:F}},fe=k.value.map(pe=>{var F,G,K,y,V,$;const Ie=(F=pe.width)!=null?F:0,m=(G=pe.height)!=null?G:0,h=Number((y=(K=pe.left)!=null?K:pe.x)!=null?y:0),L=Number(($=(V=pe.top)!=null?V:pe.y)!=null?$:0);return{l:h,t:L,r:h+Ie,b:L+m}}),se=(pe,Ie,m,h)=>{const L=pe+(m!=null?m:0),F=Ie+(h!=null?h:0);for(const G of fe)if(!(m===void 0||h===void 0)&&!(L<=G.l||F<=G.t||pe>=G.r||Ie>=G.b))return!0;return!1},be=24;let me={cl:O,ct:W};if(M&&E&&se(me.cl,me.ct,M,E)){let pe=!1;for(let Ie=1;Ie<=20&&!pe;Ie++)for(const m of[[Ie,0],[0,Ie],[-Ie,0],[0,-Ie]]){const[h,L]=m,F=i+h*be,G=u+L*be,K=ie(F,G,M,E);if(!se(K.cl,K.ct,M,E)){me=K,pe=!0;break}}}const ce={id:l,type:r,left:me.cl,top:me.ct,autoSize:r==="text",width:M,height:E,text:r==="text"?"文字":r==="image"||r==="line"?"":"图表",className:"",zIndex:1,style:{}};r==="text"?Object.assign(ce,{content:"文字",fontSize:16,fontWeight:"400",fontFamily:"Arial, Helvetica, sans-serif",color:"#ffffff",letterSpacing:"0px",lineHeight:"1.5",fontStyle:"normal",useGradient:!1,gradientStart:"#00A3FF",gradientEnd:"#ffffff",gradientDirection:"to right",x:me.cl,y:me.ct}):r==="image"&&(Object.assign(ce,{src:"",borderRadius:0,x:me.cl,y:me.ct}),ce.style={...ce.style||{},objectFit:"contain"}),r==="chart"&&Object.assign(ce,{elementId:`chart-${Date.now()}`,chartType:"line",chartOption:Pe("line")}),r==="line"&&(ce.autoSize=!1,ce.style={...ce.style||{},lineColor:"#ffffff",lineThickness:2,lineOrientation:"horizontal",lineStyle:"solid",lineDashLength:6,lineDashGap:4}),r==="container"&&(ce.autoSize=!1,ce.text="",ce.elementId=`container-${Date.now()}`,ce.style={...ce.style||{},backgroundColor:"transparent",borderRadius:"6px"}),$e(),k.value.push(ce),d.value=l}function Xe(r){const{el:l}=ze(r.id);l&&(q.value||($e(),q.value=!0),l.left=r.left,l.top=r.top,l.x=r.left,l.y=r.top)}function Ye(r){const{el:l}=ze(r.id);l&&(q.value||($e(),q.value=!0),l.width=r.width,l.height=r.height,r.left!==void 0&&(l.left=r.left,l.x=r.left),r.top!==void 0&&(l.top=r.top,l.y=r.top))}function st(r){d.value=r,ht()}function xt(r){d.value=r,ht(),Qn(()=>{const l=document.querySelector(`[data-el-id="${r}"]`);l&&l.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})})}function vt(r,l){if(r===l||r<0||l<0||r>=k.value.length||l>=k.value.length)return;$e();const[s]=k.value.splice(r,1);s&&(k.value.splice(l,0,s),d.value=s.id)}function ht(){if(nt(),!ft.value)return;const r=d.value;if(!r)return;const l=Ae.value.find(f=>f.id===r);if(!l)return;const s=Ae.value.filter(f=>f.id!==r),c={left:l.left,top:l.top,right:l.right,bottom:l.bottom,centerX:l.centerX,centerY:l.centerY};ee.value={left:c.left,top:c.top,right:c.right,bottom:c.bottom,centerX:c.centerX,centerY:c.centerY},je.value={centerV:!1,centerH:!1,left:!1,right:!1,top:!1,bottom:!1};const g=4;for(const f of s)Math.abs(c.centerX-f.centerX)<=g&&f.w>0&&(je.value.centerV=!0,ee.value.centerX=f.centerX),Math.abs(c.centerY-f.centerY)<=g&&f.h>0&&(je.value.centerH=!0,ee.value.centerY=f.centerY),Math.abs(c.left-f.left)<=g&&(je.value.left=!0,ee.value.left=f.left),Math.abs(c.right-f.right)<=g&&f.w>0&&(je.value.right=!0,ee.value.right=f.right),Math.abs(c.top-f.top)<=g&&(je.value.top=!0,ee.value.top=f.top),Math.abs(c.bottom-f.bottom)<=g&&f.h>0&&(je.value.bottom=!0,ee.value.bottom=f.bottom);le.value=Object.values(je.value).some(Boolean)}function At(){d.value=null,gt()}const je=we({centerV:!1,centerH:!1,left:!1,right:!1,top:!1,bottom:!1}),ve=we({left:null,right:null,up:null,down:null}),pt=we(!0),ft=we(!0),yt=we(!1),Mt=Te(()=>k.value.filter(r=>r.hidden));function He(r){const l=k.value.find(s=>s.id===r);l&&(l.hidden=!1,d.value=r,Qn(()=>{const s=document.querySelector(`[data-el-id="${r}"]`);s&&s.scrollIntoView({behavior:"smooth",block:"center"}),yt.value=!1}))}const Ce=we(null),Ne=we(null),Ae=Te(()=>{const r=[];function l(s,c,g,f){var N,I,M,E;for(const i of s){const u=H.value[i.id],O=u?u.left:(N=i.left)!=null?N:0,W=u?u.top:(I=i.top)!=null?I:0,ie=u?u.width:(M=i.width)!=null?M:0,fe=u?u.height:(E=i.height)!=null?E:0,se=c+O,be=g+W;r.push({id:i.id,left:se,top:be,right:se+ie,bottom:be+fe,centerX:se+ie/2,centerY:be+fe/2,w:ie,h:fe,type:i.type,parentId:f}),(i.type==="group"||i.type==="container")&&Array.isArray(i.children)&&l(i.children,se,be,i.id)}}return l(k.value,0,0,null),r});function dt(r){q.value||($e(),q.value=!0),ee.value={left:r.left,top:r.top,right:r.right,bottom:r.bottom,centerX:r.centerX,centerY:r.centerY},je.value={centerV:!1,centerH:!1,left:!1,right:!1,top:!1,bottom:!1},ve.value={left:null,right:null,up:null,down:null};const l=.5,s=d.value,c=Ae.value.find(u=>u.id===s),g=c?c.parentId:null,f=Ae.value.filter(u=>u.parentId===g);function N(u,O,W,ie){const fe=Math.max(u,W);return Math.min(O,ie)-fe}let I=null,M=null,E=null,i=null;for(const u of f)if(!(!s||u.id===s)){if(Math.abs(r.centerX-u.centerX)<=l&&u.w>0&&(je.value.centerV=!0,ee.value.centerX=u.centerX),Math.abs(r.centerY-u.centerY)<=l&&u.h>0&&(je.value.centerH=!0,ee.value.centerY=u.centerY),Math.abs(r.left-u.left)<=l&&(je.value.left=!0,ee.value.left=u.left),Math.abs(r.right-u.right)<=l&&u.w>0&&(je.value.right=!0,ee.value.right=u.right),Math.abs(r.top-u.top)<=l&&(je.value.top=!0,ee.value.top=u.top),Math.abs(r.bottom-u.bottom)<=l&&u.h>0&&(je.value.bottom=!0,ee.value.bottom=u.bottom),N(r.top,r.bottom,u.top,u.bottom)>0){const O=r.left-u.right;O>=0&&(!I||O<I.gap)&&(I={gap:O,m:u});const W=u.left-r.right;W>=0&&(!M||W<M.gap)&&(M={gap:W,m:u})}if(N(r.left,r.right,u.left,u.right)>0){const O=r.top-u.bottom;O>=0&&(!E||O<E.gap)&&(E={gap:O,m:u});const W=u.top-r.bottom;W>=0&&(!i||W<i.gap)&&(i={gap:W,m:u})}}if(le.value=Object.values(je.value).some(Boolean),!pt.value){ve.value={left:null,right:null,up:null,down:null};return}if(I){const u=I.m,O=(Math.max(r.left,u.left)+Math.min(r.right,u.right))/2,W=(Math.max(r.top,u.top)+Math.min(r.bottom,u.bottom))/2;ve.value.left={gap:Math.floor(I.gap),exact:I.gap,refId:u.id,x:Math.round(O),y:Math.round(W)}}if(M){const u=M.m,O=(Math.max(r.left,u.left)+Math.min(r.right,u.right))/2,W=(Math.max(r.top,u.top)+Math.min(r.bottom,u.bottom))/2;ve.value.right={gap:Math.floor(M.gap),exact:M.gap,refId:u.id,x:Math.round(O),y:Math.round(W)}}if(E){const u=E.m,O=(Math.max(r.left,u.left)+Math.min(r.right,u.right))/2,W=(u.bottom+r.top)/2;ve.value.up={gap:Math.floor(E.gap),exact:E.gap,refId:u.id,x:Math.round(O),y:Math.round(W)}}if(i){const u=i.m,O=(Math.max(r.left,u.left)+Math.min(r.right,u.right))/2,W=(r.bottom+u.top)/2;ve.value.down={gap:Math.floor(i.gap),exact:i.gap,refId:u.id,x:Math.round(O),y:Math.round(W)}}ft.value||(je.value={centerV:!1,centerH:!1,left:!1,right:!1,top:!1,bottom:!1},le.value=!1)}function nt(){if(!pt.value){ve.value={left:null,right:null,up:null,down:null};return}const r=d.value;if(!r){ve.value={left:null,right:null,up:null,down:null};return}const l=Ae.value.find(u=>u.id===r);if(!l){ve.value={left:null,right:null,up:null,down:null};return}const s={left:l.left,top:l.top,right:l.right,bottom:l.bottom,centerX:l.centerX,centerY:l.centerY},c=l.parentId,g=Ae.value.filter(u=>u.id!==r&&u.parentId===c);function f(u,O,W,ie){const fe=Math.max(u,W);return Math.min(O,ie)-fe}let N=null,I=null,M=null,E=null;for(const u of g){if(f(s.top,s.bottom,u.top,u.bottom)>0){const O=s.left-u.right;O>=0&&(!N||O<N.gap)&&(N={gap:O,m:u});const W=u.left-s.right;W>=0&&(!I||W<I.gap)&&(I={gap:W,m:u})}if(f(s.left,s.right,u.left,u.right)>0){const O=s.top-u.bottom;O>=0&&(!M||O<M.gap)&&(M={gap:O,m:u});const W=u.top-s.bottom;W>=0&&(!E||W<E.gap)&&(E={gap:W,m:u})}}const i={left:null,right:null,up:null,down:null};if(N){const u=N.m,O=(Math.max(s.left,u.left)+Math.min(s.right,u.right))/2,W=(Math.max(s.top,u.top)+Math.min(s.bottom,u.bottom))/2;i.left={gap:Math.floor(N.gap),exact:N.gap,refId:u.id,x:Math.round(O),y:Math.round(W)}}if(I){const u=I.m,O=(Math.max(s.left,u.left)+Math.min(s.right,u.right))/2,W=(Math.max(s.top,u.top)+Math.min(s.bottom,u.bottom))/2;i.right={gap:Math.floor(I.gap),exact:I.gap,refId:u.id,x:Math.round(O),y:Math.round(W)}}if(M){const u=M.m,O=(Math.max(s.left,u.left)+Math.min(s.right,u.right))/2,W=(u.bottom+s.top)/2;i.up={gap:Math.floor(M.gap),exact:M.gap,refId:u.id,x:Math.round(O),y:Math.round(W)}}if(E){const u=E.m,O=(Math.max(s.left,u.left)+Math.min(s.right,u.right))/2,W=(s.bottom+u.top)/2;i.down={gap:Math.floor(E.gap),exact:E.gap,refId:u.id,x:Math.round(O),y:Math.round(W)}}ve.value=i}function gt(){q.value=!1,ft.value&&d.value?ht():le.value=!1,nt()}function ze(r){if(!r)return{el:null,parentGroup:null};const l=(s,c)=>{for(const g of s){if(g.id===r)return{el:g,parentGroup:c};if((g.type==="group"||g.type==="container")&&Array.isArray(g.children)){const f=l(g.children,g);if(f)return f}}return null};return l(k.value,null)||{el:null,parentGroup:null}}const at=we(null);function jt(r,l){if(!r.children||!Array.isArray(r.children))return!1;const s=[...r.children];for(;s.length;){const c=s.pop();if((c==null?void 0:c.id)===l.id)return!0;c!=null&&c.children&&Array.isArray(c.children)&&s.push(...c.children)}return!1}function zt(r){var O,W,ie,fe;const{id:l,globalLeft:s,globalTop:c}=r;if(!l)return;const g=(O=at.value)==null?void 0:O.getBoundingClientRect();if(!g)return;const{el:f,parentGroup:N}=ze(l);if(!f)return;const I=(((W=H.value[l])==null?void 0:W.width)||Number(f.width)||0)*_e.value,M=(((ie=H.value[l])==null?void 0:ie.height)||Number(f.height)||0)*_e.value,E={left:s,top:c,right:s+I,bottom:c+M};function i(){const se=E.left+1,be=E.top+1,me=E.right-1,ce=E.bottom-1;return[{x:(E.left+E.right)/2,y:(E.top+E.bottom)/2},{x:se,y:be},{x:me,y:be},{x:se,y:ce},{x:me,y:ce}]}let u=null;for(const se of i()){const be=document.elementsFromPoint(se.x,se.y);for(const me of be){const ce=(fe=me.closest("[data-box-id]"))==null?void 0:fe.getAttribute("data-box-id");if(!ce||ce===l)continue;const{el:re}=ze(ce);if(re&&!(re.type!=="container"&&re.type!=="group")&&re.id!==f.id&&!jt(f,re)){u=ce;break}}if(u)break}if(N?Array.isArray(N.children)&&(N.children=N.children.filter(se=>se.id!==l)):k.value=k.value.filter(se=>se.id!==l),u){const{el:se}=ze(u);if(se){const be=document.querySelector(`[data-box-id="${u}"]`);if(be){const me=be.getBoundingClientRect(),ce=(s-me.left)/_e.value,re=(c-me.top)/_e.value;f.left=Math.round(ce),f.top=Math.round(re),f.x=f.left,f.y=f.top,se.children||(se.children=[]),se.children.push(f)}}}else{const se=(s-g.left)/_e.value,be=(c-g.top)/_e.value;f.left=Math.round(se),f.top=Math.round(be),f.x=f.left,f.y=f.top,k.value.push(f)}$e(),Qn(()=>{d.value=l})}function wt(r){const l=ve.value[r];l&&(Ce.value=r,Ne.value=l.gap)}function Ot(){var I,M,E,i,u;if(!Ce.value||Ne.value==null){Ce.value=null,Ne.value=null;return}const r=Ce.value,l=ve.value[r];if(!l){Ce.value=null,Ne.value=null;return}const s=Ae.value.find(O=>O.id===l.refId),c=Ne.value,g=$t.value;if(!s||!g){Ce.value=null,Ne.value=null;return}$e();const f=(I=l.exact)!=null?I:l.gap,N=c-f;r==="left"?g.left=Math.round(((M=g.left)!=null?M:0)+N):r==="right"?g.left=Math.round(((E=g.left)!=null?E:0)-N):r==="up"?g.top=Math.round(((i=g.top)!=null?i:0)+N):r==="down"&&(g.top=Math.round(((u=g.top)!=null?u:0)-N)),Ce.value=null,Ne.value=null,nt()}mt(d,()=>{q.value||nt()}),mt(H,()=>{q.value||nt()},{deep:!0}),mt(pt,r=>{r?nt():(Ce.value=null,Ne.value=null,ve.value={left:null,right:null,up:null,down:null})}),mt(ft,r=>{r?ht():(je.value={centerV:!1,centerH:!1,left:!1,right:!1,top:!1,bottom:!1},le.value=!1)});const $t=Te(()=>d.value?ze(d.value).el:null);async function bn(){return new Promise((r,l)=>{const s=indexedDB.open("lowcode-db",1);s.onupgradeneeded=()=>{const c=s.result;if(!c.objectStoreNames.contains("objects")){const g=c.createObjectStore("objects",{keyPath:"id"});try{g.createIndex("projectId","projectId",{unique:!1}),g.createIndex("name","name",{unique:!1})}catch{}}},s.onsuccess=()=>r(s.result),s.onerror=()=>l(s.error)})}async function xn(){try{const r=(await bn()).transaction(["objects"],"readonly").objectStore("objects").getAll();r.onsuccess=()=>{U.value=(r.result||[]).filter(l=>!l.projectId||l.projectId===(o.projectId||void 0))},r.onerror=()=>{console.warn("loadDatabaseObjects error",r.error)}}catch(r){console.warn("openDatabaseDB error",r)}}const vn=Te(()=>{const r={};for(const l of U.value)l&&l.name&&(r[l.name]=l.content);return r}),Ct=we({}),Bt=Te(()=>{const r={...vn.value};for(const l in Ct.value)Object.assign(r,Ct.value[l]);return r});function hn(r,l){const s={};for(const c of l)c&&c.name&&(s[c.name]=c.content);Ct.value[r]=s}function Kt(r){Ct.value[r]&&delete Ct.value[r];const l=`component-fonts-${r}`,s=document.getElementById(l);s&&s.parentNode&&s.parentNode.removeChild(s)}function wn(r,l="#000000"){try{const s=String(r||"").trim();return/^#([0-9a-fA-F]{6})$/.test(s)?s:l}catch{return l}}function $n(){if(!d.value)return;$e();const{el:r,parentGroup:l}=ze(d.value);r&&l&&Array.isArray(l.children)?l.children=l.children.filter(s=>s.id!==r.id):(k.value=k.value.filter(s=>s.id!==d.value),r&&r.type==="group"&&Kt(r.id)),d.value=null}function Zt(r){(!r.className||!r.className.trim())&&(r.className=`cls-${String(r.id).slice(0,8)}`)}function kn(r){try{Zt(r);const l=String(r.className||"").trim();String(r.customClassCss||"").trim()||(r.customClassCss=`.${l} {
  
}`)}catch{}}function En(r){const l=String(r||"").trim();return l?l.split(";").map(s=>{const c=s.trim();return c?/!important\s*$/.test(c)?c+";":c+" !important;":""}).filter(Boolean).join(`
`):""}function Sn(r){return String(r||"").replace(/\{([^}]*)\}/g,(l,s)=>`{
`+String(s||"").split(";").map(c=>{const g=c.trim();return g?g.startsWith("@")||!/:/.test(g)||/!important\s*$/.test(g)?g+";":g+" !important;":""}).filter(Boolean).join(`
`)+`
}`)}function Mn(r){try{if(!r.enableClassStyle)return;Zt(r);const l=String(r.customClassCss||"").trim();if(!l)return;const s=`custom-class-${r.id}`;let c=document.getElementById(s);if(c||(c=document.createElement("style"),c.id=s,document.head.appendChild(c)),/{[^}]*}/.test(l)){c.textContent=Sn(l);return}const g=En(l);c.textContent=`.${String(r.className).trim()} {
${g}
}`}catch(l){console.warn("注入自定义类样式失败：",l)}}function Qt(r){try{const l=`custom-class-${r}`,s=document.getElementById(l);s&&s.remove()}catch{}}function en(r,l){for(const s of r)l(s),(s.type==="group"||s.type==="container")&&Array.isArray(s.children)&&en(s.children,l)}let Tt=null;function Vt(){Tt&&clearTimeout(Tt),Tt=setTimeout(()=>{try{en(k.value,r=>{r.enableClassStyle&&r.customClassCss&&r.className?Mn(r):Qt(r.id)})}catch(r){console.warn("刷新自定义类样式失败：",r)}},50)}async function Cn(){var r,l,s,c,g,f,N,I,M,E;try{const i=$t.value;if(!i){alert("请先选中要保存的元素或分组");return}const u=ge.value||(i.type==="group"?"分组组件":"元素组件"),O=prompt("请输入组件名称",u);if(O===null)return;const W=(O||u).trim()||"未命名组件";let ie=[];if(i.type==="group"&&Array.isArray(i.children)){const m=Number((l=(r=i.left)!=null?r:i.x)!=null?l:0),h=Number((c=(s=i.top)!=null?s:i.y)!=null?c:0);ie=i.children.map(L=>{var ue,Me,xe,Se,Fe,Be;const F=JSON.parse(JSON.stringify(L)),G=Number((Me=(ue=F.left)!=null?ue:F.x)!=null?Me:0),K=Number((Se=(xe=F.top)!=null?xe:F.y)!=null?Se:0);F.left=m+G,F.top=h+K,F.x=F.left,F.y=F.top;const y=H.value[L.id],V=Number(F.width||0),$=Number(F.height||0);if(!(V>0)){const Qe=(()=>{var Ke,lt,Je,ut,et;if(F.type==="text"){const kt=Number((Ke=F.fontSize)!=null?Ke:16),Yt=String((lt=F.text)!=null?lt:"").trim();return Math.max(50,Math.round((Yt.length||2)*kt*.6))}if(F.type==="image")return 100;if(F.type==="chart")return 240;if(F.type==="line"){const kt=Number((ut=(Je=F.style)==null?void 0:Je.lineThickness)!=null?ut:2);return(((et=F.style)==null?void 0:et.lineOrientation)||"horizontal")==="vertical"?kt:100}return 50})();F.width=Math.max(1,Math.round((Fe=y==null?void 0:y.width)!=null?Fe:Qe))}if(!($>0)){const Qe=(()=>{var Ke,lt,Je,ut;if(F.type==="text"){const et=Number((Ke=F.fontSize)!=null?Ke:16);return Math.max(20,Math.round(et*1.5))}if(F.type==="image")return 100;if(F.type==="chart")return 160;if(F.type==="line"){const et=Number((Je=(lt=F.style)==null?void 0:lt.lineThickness)!=null?Je:2);return(((ut=F.style)==null?void 0:ut.lineOrientation)||"horizontal")==="vertical"?100:et}return 20})();F.height=Math.max(1,Math.round((Be=y==null?void 0:y.height)!=null?Be:Qe))}return F.id=`${F.type}-${Date.now()}-${Math.random().toString(36).slice(2,8)}`,F})}else{const m=JSON.parse(JSON.stringify(i)),h=Number((f=(g=m.left)!=null?g:m.x)!=null?f:0),L=Number((I=(N=m.top)!=null?N:m.y)!=null?I:0);m.left=h,m.top=L,m.x=m.left,m.y=m.top;const F=H.value[i.id],G=Number(m.width||0),K=Number(m.height||0);if(!(G>0)){const y=(()=>{var V,$,ue,Me,xe;if(m.type==="text"){const Se=Number((V=m.fontSize)!=null?V:16),Fe=String(($=m.text)!=null?$:"").trim();return Math.max(50,Math.round((Fe.length||2)*Se*.6))}if(m.type==="image")return 100;if(m.type==="chart")return 240;if(m.type==="line"){const Se=Number((Me=(ue=m.style)==null?void 0:ue.lineThickness)!=null?Me:2);return(((xe=m.style)==null?void 0:xe.lineOrientation)||"horizontal")==="vertical"?Se:100}return 50})();m.width=Math.max(1,Math.round((M=F==null?void 0:F.width)!=null?M:y))}if(!(K>0)){const y=(()=>{var V,$,ue,Me;if(m.type==="text"){const xe=Number((V=m.fontSize)!=null?V:16);return Math.max(20,Math.round(xe*1.5))}if(m.type==="image")return 100;if(m.type==="chart")return 160;if(m.type==="line"){const xe=Number((ue=($=m.style)==null?void 0:$.lineThickness)!=null?ue:2);return(((Me=m.style)==null?void 0:Me.lineOrientation)||"horizontal")==="vertical"?100:xe}return 20})();m.height=Math.max(1,Math.round((E=F==null?void 0:F.height)!=null?E:y))}m.id=`${m.type}-${Date.now()}-${Math.random().toString(36).slice(2,8)}`,ie=[m]}const fe=Math.min(...ie.map(m=>{var h,L;return Number((L=(h=m.left)!=null?h:m.x)!=null?L:0)})),se=Math.min(...ie.map(m=>{var h,L;return Number((L=(h=m.top)!=null?h:m.y)!=null?L:0)})),be=Math.max(...ie.map(m=>{var h,L,F;return Number((L=(h=m.left)!=null?h:m.x)!=null?L:0)+Number((F=m.width)!=null?F:0)})),me=Math.max(...ie.map(m=>{var h,L,F;return Number((L=(h=m.top)!=null?h:m.y)!=null?L:0)+Number((F=m.height)!=null?F:0)})),ce=Math.max(1,Math.round(be-fe)),re=Math.max(1,Math.round(me-se));ie=ie.map(m=>{var G,K,y,V;const h=JSON.parse(JSON.stringify(m)),L=Number((K=(G=h.left)!=null?G:h.x)!=null?K:0)-fe,F=Number((V=(y=h.top)!=null?y:h.y)!=null?V:0)-se;return h.left=Math.max(0,Math.round(L)),h.top=Math.max(0,Math.round(F)),h.x=h.left,h.y=h.top,h});const ne={width:ce,height:re,backgroundUrl:"",backgroundColor:"transparent",globalFontFamily:C.globalFontFamily,globalFontSize:C.globalFontSize,globalColor:C.globalColor},pe=`${Date.now()}${Math.random().toString(36).slice(2,9)}`,Ie={id:pe,name:W,description:"",tags:[],elements:ie,config:ne,usageCount:0,createdAt:Date.now(),updatedAt:Date.now()};await qe.init(),await qe.saveComponent(JSON.parse(JSON.stringify(Ie))),await Jt(`component-${pe}`,{config:ne,elements:ie,exportName:W}),alert("组件已保存到组件库")}catch(i){console.warn("保存组件失败：",i),alert("保存组件失败，请稍后重试")}}const Nn=we(null);function In(r){var c;const l=(c=r.target.files)==null?void 0:c[0];if(!l)return;const s=new FileReader;s.onload=()=>{const g=String(s.result);C.backgroundUrl=g;const f=new Image;f.onload=()=>{Nn.value={width:f.naturalWidth,height:f.naturalHeight},C.width=f.naturalWidth,C.height=f.naturalHeight},f.src=g},s.readAsDataURL(l)}function Dt(r){var l;return r&&((l=r.split(",")[0])!=null?l:"").trim().replace(/^['"]|['"]$/g,"")||null}function bt(r){return{"image/png":"png","image/jpeg":"jpg","image/jpg":"jpg","image/webp":"webp","image/gif":"gif","image/svg+xml":"svg","image/avif":"avif","image/apng":"apng","image/x-icon":"ico","image/vnd.microsoft.icon":"ico","font/ttf":"ttf","font/otf":"otf","font/woff":"woff","font/woff2":"woff2","application/font-ttf":"ttf","application/font-otf":"otf","application/font-woff":"woff","application/font-woff2":"woff2","application/x-font-ttf":"ttf","application/x-font-otf":"otf","application/x-font-woff":"woff","application/x-font-woff2":"woff2","application/vnd.ms-fontobject":"eot","application/octet-stream":"bin"}[r]||"bin"}function tn(r){var c;const l=/\.([A-Za-z0-9]+)$/.exec(r||"");if(!l)return null;const s=((c=l[1])!=null?c:"").toLowerCase();return s?["png","jpg","jpeg","gif","svg","webp","avif","apng","ico"].includes(s)?s==="jpeg"?"jpg":s:["ttf","otf","woff","woff2","eot"].includes(s)?s:null:null}async function Gt(r){try{const l="lowcode-icons",s="icons",c=await new Promise((g,f)=>{const N=indexedDB.open(l);N.onsuccess=()=>{const I=N.result;if(I.objectStoreNames.contains(s))g(I);else{const M=I.version+1;I.close();const E=indexedDB.open(l,M);E.onupgradeneeded=()=>{const i=E.result;i.objectStoreNames.contains(s)||i.createObjectStore(s,{keyPath:"id"})},E.onsuccess=()=>g(E.result),E.onerror=()=>f(E.error)}},N.onerror=()=>f(N.error)});return await new Promise((g,f)=>{const N=c.transaction(s,"readonly").objectStore(s).get(r);N.onsuccess=()=>g(N.result||null),N.onerror=()=>f(N.error)})}catch{return null}}function nn(r){var l,s,c,g,f,N,I,M;try{const E=new Uint8Array(r),i=String.fromCharCode((l=E[0])!=null?l:0,(s=E[1])!=null?s:0,(c=E[2])!=null?c:0,(g=E[3])!=null?g:0);return i==="wOFF"?"woff":i==="wOF2"?"woff2":i==="OTTO"?"otf":(((f=E[0])!=null?f:0)===0&&((N=E[1])!=null?N:0)===1&&((I=E[2])!=null?I:0)===0&&((M=E[3])!=null?M:0)===0||i==="true"||i==="typ1","ttf")}catch{return"ttf"}}async function Fn(r){const l=prompt("请输入导出名称",ge.value||"GeneratedComponent");if(l===null)return;const s=l.trim()||"GeneratedComponent";ge.value=s;function c(m){const h=new Set,L={};function F(K){let y=Date.now(),V=`${K}-${y}`;for(;h.has(V);)y+=1,V=`${K}-${y}`;return V}function G(K){const y=JSON.parse(JSON.stringify(K)),V=String(y.id);let $=V;return h.has($)&&($=F(String(y.type||"el"))),h.add($),L[V]=$,y.id=$,(y.type==="group"||y.type==="container")&&Array.isArray(y.children)&&(y.children=y.children.map(ue=>G(ue))),y}return{normalized:m.map(K=>G(K)),remap:L}}const{normalized:g}=c(k.value),f=[],N=m=>{for(const h of m)(h.type==="group"||h.type==="container")&&Array.isArray(h.children)?N(h.children):h.type==="image"&&(h.src||h.iconId)&&f.push(h)};N(g);const I={},M=new Map;let E=0;for(const m of f)try{let h;if(m.src)h=await(await fetch(String(m.src))).blob();else if(m.iconId){const y=m.iconId,V=await Gt(y);if(!V)throw new Error("icon record missing: "+y);h=new Blob([V.buffer],{type:String(V.mime||"image/png")})}else continue;let L=bt(h.type);if(L==="bin"&&m.iconId){const y=m.iconId,V=await Gt(y);if(V){const $=bt(String(V.mime||"")),ue=tn(String(V.originalName||""));L=$!=="bin"?$:ue||L}L==="bin"&&(L="png")}const F=await h.arrayBuffer(),G=await crypto.subtle.digest("SHA-256",F),K=Array.from(new Uint8Array(G)).map(y=>y.toString(16).padStart(2,"0")).join("");if(M.has(K)){const{fileName:y}=M.get(K);I[m.id]=y}else{const y=`${s}_img_${E}.${L}`;M.set(K,{fileName:y,blob:h}),E++,I[m.id]=y}}catch(h){console.warn("导出图片失败：",h)}const i=Array.from(M.values());let u=null,O=null;if(C.backgroundUrl)try{const m=await(await fetch(String(C.backgroundUrl))).blob(),h=bt(m.type);u=`${s}_bg.${h}`,O=m}catch(m){console.warn("导出背景图片失败：",m)}const W=new Set,ie=Dt(C.globalFontFamily);ie&&W.add(ie);const fe=m=>{var h;for(const L of m)if((L.type==="group"||L.type==="container")&&Array.isArray(L.children))fe(L.children);else if(L.type==="text"){const F=Dt((h=L.style)==null?void 0:h.fontFamily);F&&W.add(F)}};fe(k.value);const se=[],be=[];if(W.size>0)try{const m="lowcode-fonts",h="fonts",L=await new Promise((y,V)=>{const $=indexedDB.open(m);$.onsuccess=()=>{const ue=$.result;if(ue.objectStoreNames.contains(h))y(ue);else{const Me=ue.version+1;ue.close();const xe=indexedDB.open(m,Me);xe.onupgradeneeded=()=>{const Se=xe.result;Se.objectStoreNames.contains(h)||Se.createObjectStore(h,{keyPath:"id"})},xe.onsuccess=()=>y(xe.result),xe.onerror=()=>V(xe.error)}},$.onerror=()=>V($.error)}),F=await new Promise((y,V)=>{const $=L.transaction(h,"readonly").objectStore(h).getAll();$.onsuccess=()=>y($.result),$.onerror=()=>V($.error)}),G=w.value,K=G?F.filter(y=>y.projectId===G):F.filter(y=>!y.projectId);for(const y of K)if(W.has(y.name)){const V=new Blob([y.buffer],{type:y.mime});let $=bt(y.mime);if($==="bin")try{$=nn(y.buffer)}catch{$="ttf"}const ue=y.name.replace(/[^A-Za-z0-9_\-]/g,"_"),Me=`${s}_${ue}.${$}`;se.push({family:y.name,file:Me}),be.push({file:Me,blob:V})}}catch(m){console.warn("读取字体库失败：",m)}const me=new fl.default,ce=me.folder(s),re=ce.folder("imgs");for(const m of i)re.file(m.fileName,m.blob);O&&u&&re.file(u,O);const ne=ce.folder("fonts");for(const m of be)ne.file(m.file,m.blob);let pe="";r==="vue2"?(pe=al(s,C,g,{imageFileNames:i.map(m=>m.fileName),imageFileMap:I,backgroundFileName:O&&u?u:null,fontFaces:se,hideDirective:"if"},Bt.value),ce.file("index.vue",pe)):r==="vue3"?(pe=il(s,C,g,{imageFileNames:i.map(m=>m.fileName),imageFileMap:I,backgroundFileName:O&&u?u:null,fontFaces:se,hideDirective:"if"}),ce.file("index.vue",pe)):r==="react"?(pe=cl(s,C,g,{imageFileNames:i.map(m=>m.fileName),imageFileMap:I,backgroundFileName:O&&u?u:null,fontFaces:se}),ce.file("index.jsx",pe),ce.file("README.md","# React 导出使用说明\n\n- 将本目录的 `imgs/` 与 `fonts/` 拷贝到 React 项目 `public/` 根目录：\n  - `public/imgs`\n  - `public/fonts`\n- 组件中图片路径为 `/imgs/...`，字体为 `/fonts/...`，确保开发与生产可访问。\n\n可选方案：若不使用 `public`，需自行改为通过打包管道解析资源（如 `new URL(path, import.meta.url).href` 或 import）。")):(pe=dl(s,C,g,{imageFileNames:i.map(m=>m.fileName),imageFileMap:I,backgroundFileName:O&&u?u:null,fontFaces:se}),ce.file("index.html",pe));const Ie=await me.generateAsync({type:"blob"});(0,pl.saveAs)(Ie,`${s}.zip`)}async function An(){const r=prompt("请输入导出名称",ge.value||"GeneratedComponent");if(r===null)return;const l=r.trim()||"GeneratedComponent";ge.value=l;const s=[],c=m=>{for(const h of m)(h.type==="group"||h.type==="container")&&Array.isArray(h.children)?c(h.children):h.type==="image"&&h.src&&s.push(h)};c(k.value);const g={},f=new Map;let N=0;for(const m of s)try{let h;if(m.src)h=await(await fetch(String(m.src))).blob();else if(m.iconId){const y=m.iconId,V=await Gt(y);if(!V)throw new Error("icon record missing: "+y);h=new Blob([V.buffer],{type:String(V.mime||"image/png")})}else continue;let L=bt(h.type);if(L==="bin"&&m.iconId){const y=m.iconId,V=await Gt(y);if(V){const $=bt(String(V.mime||"")),ue=tn(String(V.originalName||""));L=$!=="bin"?$:ue||L}L==="bin"&&(L="png")}const F=await h.arrayBuffer(),G=await crypto.subtle.digest("SHA-256",F),K=Array.from(new Uint8Array(G)).map(y=>y.toString(16).padStart(2,"0")).join("");if(f.has(K)){const{fileName:y}=f.get(K);g[m.id]=y}else{const y=`${l}_img_${N}.${L}`;f.set(K,{fileName:y,blob:h}),N++,g[m.id]=y}}catch(h){console.warn("导出图片失败：",h)}const I=Array.from(f.values());let M=null,E=null;if(C.backgroundUrl)try{const m=await(await fetch(String(C.backgroundUrl))).blob(),h=bt(m.type);M=`${l}_bg.${h}`,E=m}catch(m){console.warn("导出背景图片失败：",m)}const i=new Set,u=Dt(C.globalFontFamily);u&&i.add(u);const O=m=>{var h;for(const L of m)if((L.type==="group"||L.type==="container")&&Array.isArray(L.children))O(L.children);else if(L.type==="text"){const F=Dt((h=L.style)==null?void 0:h.fontFamily);F&&i.add(F)}};O(k.value);const W=[],ie=[];if(i.size>0)try{const m="lowcode-fonts",h="fonts",L=await new Promise((y,V)=>{const $=indexedDB.open(m);$.onsuccess=()=>{const ue=$.result;if(ue.objectStoreNames.contains(h))y(ue);else{const Me=ue.version+1;ue.close();const xe=indexedDB.open(m,Me);xe.onupgradeneeded=()=>{const Se=xe.result;Se.objectStoreNames.contains(h)||Se.createObjectStore(h,{keyPath:"id"})},xe.onsuccess=()=>y(xe.result),xe.onerror=()=>V(xe.error)}},$.onerror=()=>V($.error)}),F=await new Promise((y,V)=>{const $=L.transaction(h,"readonly").objectStore(h).getAll();$.onsuccess=()=>y($.result),$.onerror=()=>V($.error)}),G=w.value,K=G?F.filter(y=>y.projectId===G):F.filter(y=>!y.projectId);for(const y of K)if(i.has(y.name)){const V=new Blob([y.buffer],{type:y.mime});let $=bt(y.mime);if($==="bin")try{$=nn(y.buffer)}catch{$="ttf"}const ue=y.name.replace(/[^A-Za-z0-9_\-]/g,"_"),Me=`${l}_${ue}.${$}`;W.push({family:y.name,file:Me}),ie.push({file:Me,blob:V})}}catch(m){console.warn("读取字体库失败：",m)}const fe=new fl.default,se=fe.folder(`${l}_all`),be=[],me={imageFileNames:I.map(m=>m.fileName),imageFileMap:g,backgroundFileName:E&&M?M:null,fontFaces:W,hideDirective:"if"},ce=al(l,C,k.value,me,Bt.value);be.push({key:"vue2",file:"index.vue",content:ce});const re=il(l,C,k.value,me);be.push({key:"vue3",file:"index.vue",content:re});const ne=cl(l,C,k.value,me);be.push({key:"react",file:"index.jsx",content:ne});const pe=dl(l,C,k.value,me);be.push({key:"html",file:"index.html",content:pe});for(const m of be){const h=se.folder(m.key);h.file(m.file,m.content),m.key==="react"&&h.file("README.md","# React 导出使用说明\n\n- 将本目录的 `imgs/` 与 `fonts/` 拷贝到 React 项目 `public/` 根目录：\n  - `public/imgs`\n  - `public/fonts`\n- 组件中图片路径为 `/imgs/...`，字体为 `/fonts/...`，确保开发与生产可访问。\n\n可选方案：若不使用 `public`，需自行改为通过打包管道解析资源（如 `new URL(path, import.meta.url).href` 或 import）。");const L=h.folder("imgs");for(const G of I)L.file(G.fileName,G.blob);E&&M&&L.file(M,E);const F=h.folder("fonts");for(const G of ie)F.file(G.file,G.blob)}const Ie=await fe.generateAsync({type:"blob"});(0,pl.saveAs)(Ie,`${l}-all.zip`)}function jn(){confirm("确认清空当前画布与元素吗？")&&(k.value=[],d.value=null)}const _e=we(1),Nt=we(null);function zn(){_e.value=Math.min(2,+(_e.value+.1).toFixed(2))}function On(){_e.value=Math.max(.2,+(_e.value-.1).toFixed(2))}function rn(){const r=Nt.value;if(!r)return;const l=r.clientWidth-16,s=r.clientHeight-16,c=l/C.width,g=s/C.height;_e.value=+Math.max(.2,Math.min(2,Math.min(c,g))).toFixed(2)}tr(async()=>{rn(),await xn()});const ln=we([]);function on(r){const l=JSON.parse(JSON.stringify(r));let s=Date.now();function c(f){return s+=1,`${f}-${s}`}function g(f){f.id=c(String(f.type||"el")),(f.type==="chart"||f.type==="container")&&f.elementId&&(f.elementId=String(f.elementId)+"_"+String(s%1e3)),(f.type==="group"||f.type==="container")&&Array.isArray(f.children)&&f.children.forEach(N=>g(N))}return g(l),l.left=(r.left||0)+10,l.top=(r.top||0)+10,l.x=l.left,l.y=l.top,l.zIndex=(r.zIndex||1)+1,l}function Bn(){var g,f,N,I,M,E,i,u,O,W,ie,fe,se,be,me;if(!$t.value)return;let r=$t.value;const l=ze(r.id);l.parentGroup&&(r=l.parentGroup);const s=on(r),{parentGroup:c}=ze(r.id);if(c){const ce=Number((f=(g=c.left)!=null?g:c.x)!=null?f:0),re=Number((I=(N=c.top)!=null?N:c.y)!=null?I:0),ne=Number((M=c.width)!=null?M:0),pe=Number((E=c.height)!=null?E:0),Ie=ce+ne,m=re+pe,h=Number((i=r.width)!=null?i:0),L=Number((u=r.height)!=null?u:0);let F=h,G=L;if(!F||!G)if(r.type==="text"){const xe=Number((O=r.fontSize)!=null?O:16),Se=String((ie=(W=r.text)!=null?W:r.content)!=null?ie:"").trim();F=Math.max(h||50,Math.round((Se.length||2)*xe*.6)),G=Math.max(L||20,Math.round(xe*1.5))}else r.type==="image"?(F=h||200,G=L||150):r.type==="chart"?(F=h||240,G=L||160):r.type==="line"?(F=h||200,G=L||2):(F=h||100,G=L||60);const K=10,y=ce+ne/2,V=re+pe/2;let $=!1,ue=Ie+K,Me=Math.round(V-G/2);if(!$&&ue+F<=C.width&&(s.left=Math.max(0,Math.min(ue,Math.max(0,C.width-F))),s.top=Math.max(0,Math.min(Me,Math.max(0,C.height-G))),$=!0),ue=ce-F-K,Me=Math.round(V-G/2),!$&&ue>=0&&(s.left=Math.max(0,Math.min(ue,Math.max(0,C.width-F))),s.top=Math.max(0,Math.min(Me,Math.max(0,C.height-G))),$=!0),ue=Math.round(y-F/2),Me=m+K,!$&&Me+G<=C.height&&(s.left=Math.max(0,Math.min(ue,Math.max(0,C.width-F))),s.top=Math.max(0,Math.min(Me,Math.max(0,C.height-G))),$=!0),ue=Math.round(y-F/2),Me=re-G-K,!$&&Me>=0&&(s.left=Math.max(0,Math.min(ue,Math.max(0,C.width-F))),s.top=Math.max(0,Math.min(Me,Math.max(0,C.height-G))),$=!0),!$){const xe=Number((se=(fe=r.left)!=null?fe:r.x)!=null?se:0),Se=Number((me=(be=r.top)!=null?be:r.y)!=null?me:0),Fe=ce+xe+K,Be=re+Se+K;s.left=Math.max(0,Math.min(Math.round(Fe),Math.max(0,C.width-F))),s.top=Math.max(0,Math.min(Math.round(Be),Math.max(0,C.height-G)))}s.x=s.left,s.y=s.top}$e(),k.value.push(s),d.value=s.id}const Lt=we(!1),Pt=we([]),Ht=we(""),Wt=we(!1),sn=Te(()=>{const r=Ht.value.trim().toLowerCase();return r?Pt.value.filter(l=>l.name.toLowerCase().includes(r)||(l.description||"").toLowerCase().includes(r)||Array.isArray(l.tags)&&l.tags.some(s=>s.toLowerCase().includes(r))):Pt.value});async function an(){try{Wt.value=!0,await qe.init(),Pt.value=(await qe.getAllComponents()||[]).sort((r,l)=>(l.updatedAt||0)-(r.updatedAt||0))}catch(r){console.warn("加载组件缓存失败：",r)}finally{Wt.value=!1}}async function Dn(){await an(),Lt.value=!0}function dn(){Lt.value=!1}const it=we(!1);let rt=null;function Gn(){it.value=!0,rt&&(clearTimeout(rt),rt=null)}function Ln(){rt&&clearTimeout(rt),rt=setTimeout(()=>{it.value=!1,rt=null},120)}function Un(){it.value=!0,rt&&(clearTimeout(rt),rt=null)}function Rn(){it.value=!1,rt&&(clearTimeout(rt),rt=null)}function Tn(r){const l=[],s=[],c=[],g=[];function f(i){var W,ie,fe,se,be;const u=Number(i.width||0),O=Number(i.height||0);if(u>0&&O>0)return{w:u,h:O};if(i.type==="text"){const me=Number((W=i.fontSize)!=null?W:16),ce=String((ie=i.text)!=null?ie:"").trim(),re=Math.max(50,Math.round((ce.length||2)*me*.6)),ne=Math.max(20,Math.round(me*1.5));return{w:u||re,h:O||ne}}if(i.type==="image")return{w:u||100,h:O||100};if(i.type==="chart")return{w:u||240,h:O||160};if(i.type==="line"){const me=Number((se=(fe=i.style)==null?void 0:fe.lineThickness)!=null?se:2);return(((be=i.style)==null?void 0:be.lineOrientation)||"horizontal")==="vertical"?{w:u||me,h:O||100}:{w:u||100,h:O||me}}return{w:u||50,h:O||20}}for(const i of r){const u=Number(i.left||i.x||0),O=Number(i.top||i.y||0),{w:W,h:ie}=f(i);l.push(u),s.push(O),c.push(u+(W||0)),g.push(O+(ie||0))}const N=l.length?Math.min(...l):0,I=s.length?Math.min(...s):0,M=c.length?Math.max(...c):N,E=g.length?Math.max(...g):I;return{minX:N,minY:I,maxX:M,maxY:E,width:Math.max(0,M-N),height:Math.max(0,E-I)}}async function Vn(r){var l,s,c,g,f,N,I,M,E,i;try{const u=await cn(`component-${r.id}`),O=JSON.parse(JSON.stringify((u==null?void 0:u.elements)||r.elements||[]));if(!O||O.length===0){console.warn("该组件没有可插入的元素");return}let W=Date.now();const ie=G=>{G.id=`${G.type||"el"}-${W++}-${Math.random().toString(36).slice(2,8)}`,(G.type==="chart"||G.type==="container")&&G.elementId&&(G.elementId=String(G.elementId)+"_"+String(W%1e3)),(G.type==="group"||G.type==="container")&&Array.isArray(G.children)&&G.children.forEach(K=>ie(K))},fe=Nt.value,se=_e.value||1,be=(l=fe==null?void 0:fe.clientWidth)!=null?l:0,me=(s=fe==null?void 0:fe.clientHeight)!=null?s:0,ce=fe?(fe.scrollLeft+be/2)/se:20,re=fe?(fe.scrollTop+me/2)/se:20,ne=Tn(O),pe=ne.minX+ne.width/2,Ie=ne.minY+ne.height/2,m=Math.round(ce-pe),h=Math.round(re-Ie),L=k.value.reduce((G,K)=>Math.max(G,Number(K.zIndex||0)),0);let F=null;if(O.length===1){const G=O[0];if(!G){console.warn("单元素组件插入失败：源元素不存在");return}const y=JSON.parse(JSON.stringify(G));ie(y);const V=Number((g=(c=y.left)!=null?c:y.x)!=null?g:0),$=Number((N=(f=y.top)!=null?f:y.y)!=null?N:0);y.left=Math.round(V+m),y.top=Math.round($+h),y.x=y.left,y.y=y.top;const{w:ue,h:Me}=(function(){var Fe,Be,Qe,Ke,lt;const xe=Number(y.width||0),Se=Number(y.height||0);if(xe>0&&Se>0)return{w:xe,h:Se};if(y.type==="text"){const Je=Number((Fe=y.fontSize)!=null?Fe:16),ut=String((Be=y.text)!=null?Be:"").trim(),et=Math.max(50,Math.round((ut.length||2)*Je*.6)),kt=Math.max(20,Math.round(Je*1.5));return{w:xe||et,h:Se||kt}}if(y.type==="image")return{w:xe||100,h:Se||100};if(y.type==="chart")return{w:xe||240,h:Se||160};if(y.type==="line"){const Je=Number((Ke=(Qe=y.style)==null?void 0:Qe.lineThickness)!=null?Ke:2);return(((lt=y.style)==null?void 0:lt.lineOrientation)||"horizontal")==="vertical"?{w:xe||Je,h:Se||100}:{w:xe||100,h:Se||Je}}return{w:xe||50,h:Se||20}})();if(y.width=ue,y.height=Me,y.type==="image"&&!(y.src||"").startsWith("data:")&&y.iconId)try{Ut(y.iconId).then(xe=>{xe&&(y.src=xe)}).catch(()=>{})}catch{}y.zIndex=Math.max(1,L+1),$e(),k.value=k.value.concat(y),d.value=y.id,F=y.id}else{const G=`group-${Date.now()}-${Math.random().toString(36).slice(2,8)}`,K=[];for(const V of O){const $=JSON.parse(JSON.stringify(V));ie($);const ue=Number((M=(I=$.left)!=null?I:$.x)!=null?M:0),Me=Number((i=(E=$.top)!=null?E:$.y)!=null?i:0);$.left=Math.round(ue-ne.minX),$.top=Math.round(Me-ne.minY),$.x=$.left,$.y=$.top;const{w:xe,h:Se}=(function(){var Qe,Ke,lt,Je,ut;const Fe=Number($.width||0),Be=Number($.height||0);if(Fe>0&&Be>0)return{w:Fe,h:Be};if($.type==="text"){const et=Number((Qe=$.fontSize)!=null?Qe:16),kt=String((Ke=$.text)!=null?Ke:"").trim(),Yt=Math.max(50,Math.round((kt.length||2)*et*.6)),_n=Math.max(20,Math.round(et*1.5));return{w:Fe||Yt,h:Be||_n}}if($.type==="image")return{w:Fe||100,h:Be||100};if($.type==="chart")return{w:Fe||240,h:Be||160};if($.type==="line"){const et=Number((Je=(lt=$.style)==null?void 0:lt.lineThickness)!=null?Je:2);return(((ut=$.style)==null?void 0:ut.lineOrientation)||"horizontal")==="vertical"?{w:Fe||et,h:Be||100}:{w:Fe||100,h:Be||et}}return{w:Fe||50,h:Be||20}})();if($.width=xe,$.height=Se,$.type==="image"&&!($.src||"").startsWith("data:")&&$.iconId)try{Ut($.iconId).then(Fe=>{Fe&&($.src=Fe)}).catch(()=>{})}catch{}K.push($)}const y={id:G,type:"group",left:Math.round(ne.minX+m),top:Math.round(ne.minY+h),width:Math.max(1,Math.round(ne.width)),height:Math.max(1,Math.round(ne.height)),zIndex:Math.max(1,L+1),className:r.name?`component-${r.name.replace(/[^A-Za-z0-9_-]/g,"-")}`:void 0,children:K,componentId:r.id,editable:!0,style:{backgroundColor:"transparent"}};$e(),k.value=k.value.concat(y),d.value=y.id,F=G}try{if(F){const G=await qe.getFontsByComponentId(r.id);if(Array.isArray(G)&&G.length>0){let K=document.getElementById(`component-fonts-${F}`);K||(K=document.createElement("style"),K.id=`component-fonts-${F}`,document.head.appendChild(K));const y=[];for(const V of G){const $=String(V.name||"").replace(/[^A-Za-z0-9_\-]/g,"_"),ue=V.bufferBase64;ue&&y.push(`@font-face { font-family: '${$}'; src: url('${ue}'); font-weight: normal; font-style: normal; font-display: swap; }`)}K.textContent=y.join(`
`)}}}catch(G){console.warn("注入组件字体失败：",G)}try{if(F){const G=await qe.getDatabaseObjectsByComponentId(r.id);Array.isArray(G)&&G.length>0&&hn(F,G.map(K=>({name:K.name,content:K.content})))}}catch(G){console.warn("注入组件数据库对象失败：",G)}await qe.incrementUsageCount(r.id),Lt.value=!1}catch(u){console.warn("插入组件失败：",u)}}const un=()=>w.value?`lowcode-builder-state-${w.value}`:"lowcode-builder-state-v1",_t=()=>w.value?o.isComponent?`component-${w.value}`:`project-${w.value}`:"default";async function Jt(r,l){try{const s=JSON.parse(JSON.stringify(l));if(r.startsWith("component-")){const c=r.replace(/^component-/,"");await qe.saveBuilderStateForComponent(c,s)}else if(r.startsWith("project-")){const c=r.replace(/^project-/,"");await qe.saveBuilderStateForProject(c,s)}else await qe.saveBuilderStateForProject(r,s)}catch(s){console.warn("保存构建器状态失败：",s)}}async function cn(r){try{if(r.startsWith("component-")){const l=r.replace(/^component-/,"");return await qe.getBuilderStateForComponent(l)}else if(r.startsWith("project-")){const l=r.replace(/^project-/,"");return await qe.getBuilderStateForProject(l)}return await qe.getBuilderStateForProject(r)}catch(l){return console.warn("恢复构建器状态失败：",l),null}}let qt=null;function Xt(){qt&&clearTimeout(qt),qt=setTimeout(()=>{const r={config:C,elements:k.value,exportName:ge.value};try{const l=async()=>{if(await Jt(_t(),r),o.isComponent&&w.value)try{const s=String(w.value),c=await qe.getComponent(s),g={id:s,name:ge.value||(c==null?void 0:c.name)||"未命名组件",description:(c==null?void 0:c.description)||"",tags:(c==null?void 0:c.tags)||[],elements:k.value,config:C,usageCount:(c==null?void 0:c.usageCount)||0,createdAt:(c==null?void 0:c.createdAt)||Date.now(),updatedAt:Date.now()};await qe.saveComponent(JSON.parse(JSON.stringify(g))),gn()}catch(s){console.warn("同步保存组件记录失败：",s)}};typeof window.requestIdleCallback=="function"?window.requestIdleCallback(()=>{l()}):l()}catch(l){console.warn("保存失败：",l)}},400)}mt(C,Xt,{deep:!0}),mt(k,Xt,{deep:!0}),mt(ge,Xt),mt(k,()=>{Vt()},{deep:!0});async function Pn(){try{const r="lowcode-icons",l="icons",s=await new Promise((f,N)=>{const I=indexedDB.open(r);I.onsuccess=()=>{const M=I.result;if(M.objectStoreNames.contains(l))f(M);else{const E=M.version+1;M.close();const i=indexedDB.open(r,E);i.onupgradeneeded=()=>{const u=i.result;u.objectStoreNames.contains(l)||u.createObjectStore(l,{keyPath:"id"})},i.onsuccess=()=>f(i.result),i.onerror=()=>N(i.error)}},I.onerror=()=>N(I.error)}),c=await new Promise((f,N)=>{const I=s.transaction(l,"readonly").objectStore(l).getAll();I.onsuccess=()=>f(I.result),I.onerror=()=>N(I.error)}),g=w.value;ln.value=(g?c.filter(f=>f.projectId===g):c.filter(f=>!f.projectId)).map(f=>{const N=new Blob([f.buffer],{type:f.mime}),I=URL.createObjectURL(N);return{id:f.id,url:I,name:f.name}})}catch(r){console.warn("图标库初始化失败：",r)}}async function Ut(r){try{const l="lowcode-icons",s="icons",c=await new Promise((N,I)=>{const M=indexedDB.open(l);M.onsuccess=()=>{const E=M.result;if(E.objectStoreNames.contains(s))N(E);else{const i=E.version+1;E.close();const u=indexedDB.open(l,i);u.onupgradeneeded=()=>{const O=u.result;O.objectStoreNames.contains(s)||O.createObjectStore(s,{keyPath:"id"})},u.onsuccess=()=>N(u.result),u.onerror=()=>I(u.error)}},M.onerror=()=>I(M.error)}),g=await new Promise((N,I)=>{const M=c.transaction(s,"readonly").objectStore(s).get(r);M.onsuccess=()=>N(M.result),M.onerror=()=>I(M.error)});if(!g||!g.buffer)return null;const f=new Blob([g.buffer],{type:g.mime||"application/octet-stream"});return await new Promise((N,I)=>{const M=new FileReader;M.onload=()=>N(String(M.result)),M.onerror=()=>I(M.error),M.readAsDataURL(f)})}catch(l){return console.warn("读取图标数据失败：",l),null}}async function pn(){const r=k.value.filter(l=>l.type==="image");for(const l of r){if((l.src||"").startsWith("data:")||!l.iconId)continue;const s=await Ut(l.iconId);s&&(l.src=s)}}async function Hn(){try{const r="lowcode-fonts",l="fonts",s=await new Promise((g,f)=>{const N=indexedDB.open(r);N.onsuccess=()=>{const I=N.result;if(I.objectStoreNames.contains(l))g(I);else{const M=I.version+1;I.close();const E=indexedDB.open(r,M);E.onupgradeneeded=()=>{const i=E.result;i.objectStoreNames.contains(l)||i.createObjectStore(l,{keyPath:"id"})},E.onsuccess=()=>g(E.result),E.onerror=()=>f(E.error)}},N.onerror=()=>f(N.error)}),c=await new Promise((g,f)=>{const N=s.transaction(l,"readonly").objectStore(l).getAll();N.onsuccess=()=>g(N.result),N.onerror=()=>f(N.error)});if(c.length>0){let g=document.querySelector("style[data-font-lib]");g||(g=document.createElement("style"),g.setAttribute("data-font-lib",""),document.head.appendChild(g));const f=[],N=[],I=w.value,M=I?c.filter(i=>i.projectId===I):c.filter(i=>!i.projectId);for(const i of M){const u=new Blob([i.buffer],{type:i.mime}),O=URL.createObjectURL(u),W=i.name;N.push(W),f.push(`@font-face { font-family: '${W}'; src: url('${O}'); font-weight: normal; font-style: normal; }`)}g.textContent=f.join(`
`);const E=new Set([...P.value,...N]);P.value=Array.from(E)}}catch(r){console.warn("字体库初始化失败：",r)}}tr(async()=>{await J(),await Hn(),await Pn();try{if(o.isComponent&&w.value){const r=String(w.value);if(!await qe.getComponent(r)){const l={id:r,name:ge.value||"未命名组件",description:"",tags:[],elements:[],config:C,usageCount:0,createdAt:Date.now(),updatedAt:Date.now()};await qe.saveComponent(JSON.parse(JSON.stringify(l)))}}}catch(r){console.warn("预创建组件记录失败：",r)}try{const r=await cn(_t());if(r){r.config&&Object.assign(C,r.config),Array.isArray(r.elements)&&(k.value=r.elements),typeof r.exportName=="string"&&r.exportName&&(ge.value=r.exportName),await pn();try{k.value=k.value.map(l=>{if(l.type==="chart"&&l.style&&typeof l.style.border=="string"&&l.style.border.includes("dashed")){const s={...l,style:{...l.style}};return delete s.style.border,s}return l})}catch{}}else{const l=localStorage.getItem(un());if(l){const s=JSON.parse(l);s&&s.config&&Object.assign(C,s.config),Array.isArray(s==null?void 0:s.elements)&&(k.value=s.elements),typeof(s==null?void 0:s.exportName)=="string"&&s.exportName&&(ge.value=s.exportName),await pn();try{k.value=k.value.map(c=>{if(c.type==="chart"&&c.style&&typeof c.style.border=="string"&&c.style.border.includes("dashed")){const g={...c,style:{...c.style}};return delete g.style.border,g}return c})}catch{}await Jt(_t(),{config:C,elements:k.value,exportName:ge.value});try{localStorage.removeItem(un())}catch{}}}}catch(r){console.warn("恢复失败：",r)}Vt(),window.addEventListener("keydown",D),window.addEventListener("keyup",t)}),nr(()=>{window.removeEventListener("keydown",D),window.removeEventListener("keyup",t),gn()});let fn=0;async function Wn(r,l){var s,c,g;try{const f=C.width||r.clientWidth||800,N=C.height||r.clientHeight||600,I=(s=l==null?void 0:l.maxWidth)!=null?s:420,M=(c=l==null?void 0:l.scale)!=null?c:Math.min(1,I/f),E=(g=l==null?void 0:l.quality)!=null?g:.85,i=r.cloneNode(!0);i.style.transform="none",i.style.transformOrigin="top left",i.style.width=`${f}px`,i.style.height=`${N}px`;const u=new XMLSerializer().serializeToString(i),O=`<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" width="${Math.round(f*M)}" height="${Math.round(N*M)}">
  <foreignObject width="100%" height="100%">
    <div xmlns="http://www.w3.org/1999/xhtml" style="transform: scale(${M}); transform-origin: top left;">${u}</div>
  </foreignObject>
</svg>`,W="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(O),ie=new Image;return await new Promise(fe=>{ie.onload=()=>{try{const se=document.createElement("canvas");se.width=ie.width,se.height=ie.height;const be=se.getContext("2d");if(!be)return fe(null);be.drawImage(ie,0,0);const me=se.toDataURL("image/jpeg",E);fe(me)}catch{fe(null)}},ie.onerror=()=>fe(null),ie.src=W})}catch{return null}}async function gn(){try{const r=Date.now();if(r-fn<5e3||(fn=r,!o.isComponent||!w.value))return;const l=Nt.value;if(!l)return;const s=l.firstElementChild;if(!s)return;const c=await Wn(s,{maxWidth:420,quality:.8});if(!c)return;const g=String(w.value),f=await qe.getComponent(g);if(!f)return;const N={...f,previewDataUrl:c,updatedAt:Date.now()};await qe.saveComponent(JSON.parse(JSON.stringify(N)))}catch(r){console.warn("生成缩略图失败：",r)}}return(r,l)=>{var s,c,g,f,N,I,M,E;return j(),z(Ft,null,[n("div",ld,[l[32]||(l[32]=Yn('<div class="absolute inset-0 opacity-10" data-v-8d4636e8><div class="absolute top-10 left-10 w-32 h-32 border border-cyan-400 rotate-45 animate-pulse" data-v-8d4636e8></div><div class="absolute top-32 right-20 w-24 h-24 border border-purple-400 rounded-full animate-spin" style="animation-duration:20s;" data-v-8d4636e8></div><div class="absolute bottom-20 left-1/4 w-40 h-40 border border-blue-400 rotate-12 animate-bounce" style="animation-duration:3s;" data-v-8d4636e8></div><div class="absolute bottom-32 right-1/3 w-28 h-28 border border-green-400 rounded-lg rotate-45 animate-pulse" style="animation-delay:1s;" data-v-8d4636e8></div></div><div class="absolute inset-0 opacity-5" style="background-image:linear-gradient(cyan 1px, transparent 1px), linear-gradient(90deg, cyan 1px, transparent 1px);background-size:50px 50px;" data-v-8d4636e8></div>',2)),n("div",od,[ct(Ao,{exportName:ge.value,config:C,fontLibrary:P.value,spacingEnabled:pt.value,alignmentEnabled:ft.value,"onUpdate:exportName":l[0]||(l[0]=i=>ge.value=i),"onUpdate:configWidth":l[1]||(l[1]=i=>C.width=i),"onUpdate:configHeight":l[2]||(l[2]=i=>C.height=i),"onUpdate:backgroundColor":l[3]||(l[3]=i=>C.backgroundColor=i),"onUpdate:globalFontFamily":l[4]||(l[4]=i=>C.globalFontFamily=i),"onUpdate:globalFontSize":l[5]||(l[5]=i=>C.globalFontSize=i),"onUpdate:globalColor":l[6]||(l[6]=i=>C.globalColor=i),"onUpdate:spacingEnabled":l[7]||(l[7]=i=>pt.value=i),"onUpdate:alignmentEnabled":l[8]||(l[8]=i=>ft.value=i),onBackgroundFileChange:In,onOpenPreview:ae,onDownloadByFormat:l[9]||(l[9]=i=>Fn(i)),onDownloadAllFormats:An,onResetCanvas:jn,elements:k.value,selectedId:d.value,onSelectElement:l[10]||(l[10]=i=>xt(i)),onReorderTopElements:l[11]||(l[11]=i=>vt(i.from,i.to))},null,8,["exportName","config","fontLibrary","spacingEnabled","alignmentEnabled","elements","selectedId"]),n("div",sd,[n("div",ad,[n("div",id,[n("div",dd,[n("button",{onMouseenter:Gn,onMouseleave:Ln,onClick:l[12]||(l[12]=i=>it.value=!0),class:"px-4 py-2 bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-500 hover:to-blue-500 text-white rounded-lg font-medium transition-all duration-200 transform hover:scale-105 shadow-lg shadow-cyan-500/25"}," 插入元素 ",32),ye(n("div",{onMouseenter:Un,onMouseleave:Rn,class:"absolute left-0 top-full w-72 p-3 bg-gray-900/95 backdrop-blur-md border border-cyan-500/40 rounded-xl shadow-2xl z-50"},[n("div",ud,[n("button",{onClick:l[13]||(l[13]=i=>{We("text"),it.value=!1}),class:"px-3 py-2 text-xs bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-500 hover:to-blue-500 text-white rounded"},"文本"),n("button",{onClick:l[14]||(l[14]=i=>{We("image"),it.value=!1}),class:"px-3 py-2 text-xs bg-gradient-to-r from-emerald-600 to-green-600 hover:from-emerald-500 hover:to-green-500 text-white rounded"},"图片"),n("button",{onClick:l[15]||(l[15]=i=>{We("chart"),it.value=!1}),class:"px-3 py-2 text-xs bg-gradient-to-r from-orange-600 to-red-600 hover:from-orange-500 hover:to-red-500 text-white rounded"},"图表"),n("button",{onClick:l[16]||(l[16]=i=>{We("line"),it.value=!1}),class:"px-3 py-2 text-xs bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-500 hover:to-purple-500 text-white rounded"},"线条"),n("button",{onClick:l[17]||(l[17]=i=>{We("container"),it.value=!1}),class:"px-3 py-2 text-xs bg-gradient-to-r from-slate-600 to-gray-700 hover:from-slate-500 hover:to-gray-600 text-white rounded col-span-2"},"容器")])],544),[[Nl,it.value]])]),n("button",{onClick:l[18]||(l[18]=i=>yt.value=!0),class:"px-4 py-2 bg-gradient-to-r from-gray-600 to-slate-700 hover:from-gray-500 hover:to-slate-600 text-white rounded-lg font-medium transition-all duration-200 transform hover:scale-105 shadow-lg shadow-gray-500/25"}," 隐藏元素 "),n("button",{onClick:Dn,class:"px-4 py-2 bg-gradient-to-r from-pink-600 to-fuchsia-600 hover:from-pink-500 hover:to-fuchsia-500 text-white rounded-lg font-medium transition-all duration-200 transform hover:scale-105 shadow-lg shadow-pink-500/25"}," 插入组件 ")]),n("div",cd,[n("button",{onClick:On,class:"p-2 bg-gray-700/50 hover:bg-gray-600/50 rounded-lg transition-colors duration-200"},[...l[30]||(l[30]=[n("span",{class:"text-gray-300"},"-",-1)])]),n("span",pd,Ze(Math.round(_e.value*100))+"%",1),n("button",{onClick:zn,class:"p-2 bg-gray-700/50 hover:bg-gray-600/50 rounded-lg transition-colors duration-200"},[...l[31]||(l[31]=[n("span",{class:"text-gray-300"},"+",-1)])]),n("button",{onClick:rn,class:"px-3 py-2 bg-gray-700/50 hover:bg-gray-600/50 rounded-lg text-xs text-gray-300 transition-colors duration-200"}," 适应 ")])]),n("div",{ref_key:"canvasScrollRef",ref:Nt,class:"flex-1 overflow-auto bg-gray-800/30 p-4 min-h-0 custom-scrollbar"},[n("div",{ref_key:"canvasContentRef",ref:at,class:"relative border border-gray-600/50 bg-gray-100 shadow-2xl mx-auto",onMousedown:yl(At,["self"]),style:ot({width:`${C.width}px`,height:`${C.height}px`,backgroundColor:C.backgroundColor||"transparent",backgroundImage:C.backgroundUrl?`url(${C.backgroundUrl})`:"none",backgroundSize:"cover",backgroundPosition:"center",transform:`scale(${_e.value})`,transformOrigin:"top left"})},[le.value?(j(),z("div",fd,[je.value.left?(j(),z("div",{key:0,class:"absolute top-0 bottom-0 border-l border-dashed border-orange-400/70",style:ot([{"border-width":"0.5px"},{left:`${ee.value.left}px`}])},null,4)):Z("",!0),je.value.right?(j(),z("div",{key:1,class:"absolute top-0 bottom-0 border-l border-dashed border-orange-400/70",style:ot([{"border-width":"0.5px"},{left:`${ee.value.right}px`}])},null,4)):Z("",!0),je.value.top?(j(),z("div",{key:2,class:"absolute left-0 right-0 border-t border-dashed border-orange-400/70",style:ot([{"border-width":"0.5px"},{top:`${ee.value.top}px`}])},null,4)):Z("",!0),je.value.bottom?(j(),z("div",{key:3,class:"absolute left-0 right-0 border-t border-dashed border-orange-400/70",style:ot([{"border-width":"0.5px"},{top:`${ee.value.bottom}px`}])},null,4)):Z("",!0),je.value.centerV?(j(),z("div",{key:4,class:"absolute top-0 bottom-0 border-l border-dashed border-blue-400/60",style:ot([{"border-width":"0.5px"},{left:`${ee.value.centerX}px`}])},null,4)):Z("",!0),je.value.centerH?(j(),z("div",{key:5,class:"absolute left-0 right-0 border-t border-dashed border-blue-400/60",style:ot([{"border-width":"0.5px"},{top:`${ee.value.centerY}px`}])},null,4)):Z("",!0)])):Z("",!0),pt.value&&(ve.value.left||ve.value.right||ve.value.up||ve.value.down)?(j(),z("div",gd,[ve.value.left&&Ce.value!=="left"?(j(),z("div",{key:0,class:"absolute text-[10px] px-1.5 py-0.5 rounded bg-gray-900/80 border border-orange-400/60 text-orange-200 cursor-pointer pointer-events-auto",style:ot({left:`${ve.value.left.x-14}px`,top:`${ve.value.left.y-14}px`}),onDblclick:l[19]||(l[19]=i=>wt("left"))},Ze(ve.value.left.gap)+"px ",37)):Z("",!0),ve.value.right&&Ce.value!=="right"?(j(),z("div",{key:1,class:"absolute text-[10px] px-1.5 py-0.5 rounded bg-gray-900/80 border border-orange-400/60 text-orange-200 cursor-pointer pointer-events-auto",style:ot({left:`${ve.value.right.x-14}px`,top:`${ve.value.right.y-14}px`}),onDblclick:l[20]||(l[20]=i=>wt("right"))},Ze(ve.value.right.gap)+"px ",37)):Z("",!0),ve.value.up&&Ce.value!=="up"?(j(),z("div",{key:2,class:"absolute text-[10px] px-1.5 py-0.5 rounded bg-gray-900/80 border border-orange-400/60 text-orange-200 cursor-pointer pointer-events-auto",style:ot({left:`${ve.value.up.x-14}px`,top:`${ve.value.up.y-18}px`}),onDblclick:l[21]||(l[21]=i=>wt("up"))},Ze(ve.value.up.gap)+"px ",37)):Z("",!0),ve.value.down&&Ce.value!=="down"?(j(),z("div",{key:3,class:"absolute text-[10px] px-1.5 py-0.5 rounded bg-gray-900/80 border border-orange-400/60 text-orange-200 cursor-pointer pointer-events-auto",style:ot({left:`${ve.value.down.x-14}px`,top:`${ve.value.down.y-18}px`}),onDblclick:l[22]||(l[22]=i=>wt("down"))},Ze(ve.value.down.gap)+"px ",37)):Z("",!0),Ce.value==="left"?ye((j(),z("input",{key:4,type:"number",class:"absolute w-14 h-6 px-1 text-[10px] rounded bg-gray-900/90 border border-orange-400/80 text-orange-100 focus:outline-none pointer-events-auto",style:ot({left:`${(((s=ve.value.left)==null?void 0:s.x)||0)-28}px`,top:`${(((c=ve.value.left)==null?void 0:c.y)||0)-14}px`}),"onUpdate:modelValue":l[23]||(l[23]=i=>Ne.value=i),onKeydown:Jn(Ot,["enter"])},null,36)),[[Ee,Ne.value,void 0,{number:!0}]]):Z("",!0),Ce.value==="right"?ye((j(),z("input",{key:5,type:"number",class:"absolute w-14 h-6 px-1 text-[10px] rounded bg-gray-900/90 border border-orange-400/80 text-orange-100 focus:outline-none pointer-events-auto",style:ot({left:`${(((g=ve.value.right)==null?void 0:g.x)||0)-28}px`,top:`${(((f=ve.value.right)==null?void 0:f.y)||0)-14}px`}),"onUpdate:modelValue":l[24]||(l[24]=i=>Ne.value=i),onKeydown:Jn(Ot,["enter"])},null,36)),[[Ee,Ne.value,void 0,{number:!0}]]):Z("",!0),Ce.value==="up"?ye((j(),z("input",{key:6,type:"number",class:"absolute w-14 h-6 px-1 text-[10px] rounded bg-gray-900/90 border border-orange-400/80 text-orange-100 focus:outline-none pointer-events-auto",style:ot({left:`${(((N=ve.value.up)==null?void 0:N.x)||0)-28}px`,top:`${(((I=ve.value.up)==null?void 0:I.y)||0)-18}px`}),"onUpdate:modelValue":l[25]||(l[25]=i=>Ne.value=i),onKeydown:Jn(Ot,["enter"])},null,36)),[[Ee,Ne.value,void 0,{number:!0}]]):Z("",!0),Ce.value==="down"?ye((j(),z("input",{key:7,type:"number",class:"absolute w-14 h-6 px-1 text-[10px] rounded bg-gray-900/90 border border-orange-400/80 text-orange-100 focus:outline-none pointer-events-auto",style:ot({left:`${(((M=ve.value.down)==null?void 0:M.x)||0)-28}px`,top:`${(((E=ve.value.down)==null?void 0:E.y)||0)-18}px`}),"onUpdate:modelValue":l[26]||(l[26]=i=>Ne.value=i),onKeydown:Jn(Ot,["enter"])},null,36)),[[Ee,Ne.value,void 0,{number:!0}]]):Z("",!0)])):Z("",!0),(j(!0),z(Ft,null,Rt(k.value,i=>(j(),Zn(Al,{key:i.id,element:i,selected:i.id===d.value,"selected-id":d.value,config:C,zoom:_e.value,dbMap:Bt.value,"metrics-map":H.value,onSelect:st,"onUpdate:position":Xe,"onUpdate:size":Ye,onShowGuidelines:dt,onHideGuidelines:gt,onReportMetrics:tt,onDragEnd:zt},null,8,["element","selected","selected-id","config","zoom","dbMap","metrics-map"]))),128))],36)],512)]),ct(rd,{selectedEl:$t.value,config:C,fontLibrary:P.value,fontSizeLibrary:Q.value,fontWeightOptions:de.value,fontStyleOptions:Y.value,databaseObjects:U.value,dbMap:Bt.value,iconLibrary:ln.value,defaultChartOption:Pe,safeHex:wn,initCustomClassSkeleton:kn,refreshAllCustomClassCss:Vt,removeCustomClassCssForElement:Qt,getIconDataUrlById:Ut,onDuplicateSelected:Bn,onRemoveSelected:$n,onSaveSelectedAsComponent:Cn},null,8,["selectedEl","config","fontLibrary","fontSizeLibrary","fontWeightOptions","fontStyleOptions","databaseObjects","dbMap","iconLibrary"])])]),Lt.value?(j(),z("div",md,[n("div",{class:"absolute inset-0 bg-black/60",onClick:dn}),n("div",yd,[n("div",{class:"flex items-center justify-between p-4 border-b border-fuchsia-500/30 bg-gradient-to-r from-fuchsia-600/20 to-pink-600/20"},[l[33]||(l[33]=n("h3",{class:"text-lg font-bold text-pink-300"},"插入组件",-1)),n("button",{onClick:dn,class:"px-3 py-1 bg-gray-700/60 hover:bg-gray-600/60 rounded text-sm text-gray-200"},"关闭")]),n("div",bd,[n("div",xd,[ye(n("input",{"onUpdate:modelValue":l[27]||(l[27]=i=>Ht.value=i),type:"text",placeholder:"搜索名称、描述或标签",class:"flex-1 px-3 py-2 bg-gray-800/60 border border-fuchsia-500/30 rounded-lg text-gray-100 placeholder-gray-400 focus:border-fuchsia-400 focus:ring-1 focus:ring-fuchsia-400 focus:outline-none transition-all duration-200"},null,512),[[Ee,Ht.value]]),n("button",{onClick:an,class:"px-3 py-2 bg-pink-600/70 hover:bg-pink-600 text-white rounded"},"刷新")]),Wt.value?(j(),z("div",vd,"正在加载组件...")):(j(),z("div",hd,[sn.value.length===0?(j(),z("div",wd,"暂无匹配的组件")):(j(),z("div",$d,[(j(!0),z(Ft,null,Rt(sn.value,i=>(j(),z("div",{key:i.id,class:"bg-gray-800/60 border border-pink-500/20 rounded-lg overflow-hidden"},[n("div",kd,[i.previewDataUrl?(j(),z("img",{key:0,src:i.previewDataUrl,alt:"预览",class:"max-w-full max-h-full object-contain"},null,8,Ed)):(j(),z("div",Sd,"无预览"))]),n("div",Md,[n("div",Cd,[n("div",{class:"text-sm text-gray-100 font-medium truncate",title:i.name},Ze(i.name),9,Nd),n("div",Id,Ze(i.usageCount||0)+" 次",1)]),n("div",Fd,[(j(!0),z(Ft,null,Rt(i.tags||[],u=>(j(),z("span",{key:u,class:"px-1.5 py-0.5 text-[10px] rounded bg-pink-600/30 text-pink-200"},Ze(u),1))),128))]),n("div",Ad,[n("button",{onClick:u=>Vn(i),class:"w-full px-3 py-1.5 bg-gradient-to-r from-pink-600 to-fuchsia-600 hover:from-pink-500 hover:to-fuchsia-500 text-white rounded text-sm transition"}," 插入到画布 ",8,jd)])])]))),128))]))]))])])])):Z("",!0),yt.value?(j(),z("div",zd,[n("div",{class:"absolute inset-0 bg-black/60",onClick:l[28]||(l[28]=i=>yt.value=!1)}),n("div",Od,[n("div",Bd,[l[34]||(l[34]=n("h3",{class:"text-lg font-bold text-cyan-300"},"隐藏元素列表",-1)),n("button",{onClick:l[29]||(l[29]=i=>yt.value=!1),class:"px-3 py-1 bg-gray-700/60 hover:bg-gray-600/60 rounded text-sm text-gray-200"},"关闭")]),n("div",Dd,[Mt.value.length===0?(j(),z("div",Gd,"暂无隐藏元素")):(j(),z("div",Ld,[(j(!0),z(Ft,null,Rt(Mt.value,i=>(j(),z("div",{key:i.id,class:"flex items-center justify-between bg-gray-800/60 border border-cyan-500/20 rounded-lg px-3 py-2"},[n("div",{class:"text-sm text-gray-100 truncate",title:i.hiddenLabel||i.className||i.id},Ze(i.hiddenLabel||i.className||i.id),9,Ud),n("button",{onClick:u=>He(i.id),class:"px-3 py-1 bg-cyan-600/70 hover:bg-cyan-600 text-white rounded text-sm"},"取消隐藏并定位",8,Rd)]))),128))]))])])])):Z("",!0)],64)}}}),Pd=rr(Vd,[["__scopeId","data-v-8d4636e8"]]),Hd=St({__name:"index",props:{projectId:{},currentProject:{},isComponent:{type:Boolean}},setup(x){const o=x;return(e,p)=>(j(),Zn(Pd,{"project-id":o.projectId,"current-project":o.currentProject,"is-component":o.isComponent},null,8,["project-id","current-project","is-component"]))}}),Zd=Hd;export{Zd as default};
