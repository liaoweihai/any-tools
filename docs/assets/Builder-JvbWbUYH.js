import{i as No}from"./rolldown-runtime-CKFmjIRy.js";import{C as ur,E as C,H as jo,I as ce,L as vo,O as Jt,P as Yt,R as me,S as sr,_ as ol,b as nl,c as st,ct as Bt,d as Y,f as I,g as wt,h as Tl,i as Go,l,lt as ut,m as nr,n as To,o as Vt,r as Lo,st as Ne,t as Uo,u as or,w as dr}from"./codemirror-B25QCqWr.js";import{d as $o,f as ke,h as cr,m as lr,n as Vo,o as Ro,p as Po,r as Wo,s as Ho,u as Ll}from"./vendor-vue-C93_ecI2.js";import{t as pr}from"./index-BvtxZ7eM.js";import{t as It}from"./componentStorage-k4mRdpgu.js";import"./echarts-xBohgwka.js";import{t as _o}from"./DraggableBox-GLxBGqCS.js";function kl(g){return g.replace(/[&<>"']/g,a=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"})[a]||a)}function Jo(g,a=!1){var D,P;const e=g.style||{},d=[],S=g.position||(a?"static":"absolute");if(S==="absolute"?(d.push("position:absolute"),d.push(`left:${Math.round(g.left||0)}px`),d.push(`top:${Math.round(g.top||0)}px`)):S==="relative"&&(d.push("position:relative"),g.left!==void 0&&d.push(`left:${Math.round(g.left||0)}px`),g.top!==void 0&&d.push(`top:${Math.round(g.top||0)}px`)),g.autoSize||(g.width&&d.push(`width:${Math.round(g.width)}px`),g.height&&d.push(`height:${Math.round(g.height)}px`)),e.opacity!==void 0&&d.push(`opacity:${e.opacity}`),e.border&&!(g.type==="container"&&e.border==="1px dashed rgba(148,163,184,0.6)")&&d.push(`border:${e.border}`),e.borderRadius&&d.push(`border-radius:${e.borderRadius}`),e.backgroundColor&&d.push(`background-color:${e.backgroundColor}`),e.boxShadow&&d.push(`box-shadow:${e.boxShadow}`),e.display&&d.push(`display:${e.display}`),e.flexDirection&&d.push(`flex-direction:${e.flexDirection}`),e.justifyContent&&d.push(`justify-content:${e.justifyContent}`),e.alignItems&&d.push(`align-items:${e.alignItems}`),e.gap!==void 0&&d.push(`gap:${Math.round(Number(e.gap))}px`),e.backgroundGradient&&((D=e.backgroundGradient.colors)!=null&&D.length)){const te=e.backgroundGradient.angle||0,fe=e.backgroundGradient.colors[0]||"#000000",E=e.backgroundGradient.colors[1]||"#000000";d.push(`background-image:linear-gradient(${te}deg, ${fe}, ${E})`),d.push("background-size:cover"),d.push("background-repeat:no-repeat")}if(g.type==="text"){e.fontFamily&&d.push(`font-family:${e.fontFamily}`),e.fontSize!==void 0&&d.push(`font-size:${e.fontSize}px`),e.color&&d.push(`color:${e.color}`),e.fontWeight&&d.push(`font-weight:${e.fontWeight}`),e.letterSpacing!==void 0&&e.letterSpacing!==null&&d.push(`letter-spacing:${e.letterSpacing}px`),e.lineHeight!==void 0&&d.push(`line-height:${e.lineHeight}`),e.fontStyle&&d.push(`font-style:${e.fontStyle}`),e.textAlign&&d.push(`text-align:${e.textAlign}`),e.textDecoration&&d.push(`text-decoration:${e.textDecoration}`),e.textIndent&&d.push(`text-indent:${e.textIndent}`);const te=e.textOrientation;if(te==="vertical"?(d.push("writing-mode:vertical-rl"),d.push("text-orientation:upright")):te==="horizontal"&&d.push("writing-mode:horizontal-tb"),e.textGradient&&((P=e.textGradient.colors)!=null&&P.length)){const fe=e.textGradient.angle||0,E=e.textGradient.colors[0]||"#000000",ie=e.textGradient.colors[1]||"#000000";d.push(`background-image:linear-gradient(${fe}deg, ${E}, ${ie})`),d.push("-webkit-background-clip:text"),d.push("background-clip:text"),d.push("color:transparent")}}return g.type==="image"&&e.objectFit&&d.push(`object-fit:${e.objectFit}`),d.join(";")}function qo(g,a=!1){var D;const e=g.style||{},d=[],S=g.position||(a?"static":"absolute");if(S==="absolute"?(d.push("position:absolute"),d.push(`left:${Math.round(g.left||0)}px`),d.push(`top:${Math.round(g.top||0)}px`)):S==="relative"&&(d.push("position:relative"),g.left!==void 0&&d.push(`left:${Math.round(g.left||0)}px`),g.top!==void 0&&d.push(`top:${Math.round(g.top||0)}px`)),g.autoSize||(g.width&&d.push(`width:${Math.round(g.width)}px`),g.height&&d.push(`height:${Math.round(g.height)}px`)),g.type!=="text"&&(e.opacity!==void 0&&d.push(`opacity:${e.opacity}`),e.border&&!(g.type==="container"&&e.border==="1px dashed rgba(148,163,184,0.6)")&&d.push(`border:${e.border}`),e.borderRadius&&d.push(`border-radius:${e.borderRadius}`),e.backgroundColor&&d.push(`background-color:${e.backgroundColor}`),e.boxShadow&&d.push(`box-shadow:${e.boxShadow}`),e.display&&d.push(`display:${e.display}`),e.flexDirection&&d.push(`flex-direction:${e.flexDirection}`),e.justifyContent&&d.push(`justify-content:${e.justifyContent}`),e.alignItems&&d.push(`align-items:${e.alignItems}`),e.gap!==void 0&&d.push(`gap:${Math.round(Number(e.gap))}px`),e.backgroundGradient&&((D=e.backgroundGradient.colors)!=null&&D.length))){const P=e.backgroundGradient.angle||0,te=e.backgroundGradient.colors[0]||"#000000",fe=e.backgroundGradient.colors[1]||"#000000";d.push(`background-image:linear-gradient(${P}deg, ${te}, ${fe})`),d.push("background-size:cover"),d.push("background-repeat:no-repeat")}return d.join(";")}function Yo(g){const a=g.style||{},e=[];return a.fontFamily&&e.push(`font-family:${a.fontFamily}`),a.fontSize!==void 0&&e.push(`font-size:${a.fontSize}px`),a.fontWeight&&e.push(`font-weight:${a.fontWeight}`),a.fontStyle&&e.push(`font-style:${a.fontStyle}`),a.letterSpacing!==void 0&&a.letterSpacing!==null&&e.push(`letter-spacing:${a.letterSpacing}px`),a.color&&e.push(`fill:${a.color}`),e.join(";")}function Ko(g){var f,m,L,V;const a=Math.max(1,Math.round(g.width||1)),e=Math.max(1,Math.round(g.height||1)),d=a/2,S=e/2,D=((f=g.style)==null?void 0:f.arcText)||{},P=Math.max(1,Number((m=D.radius)!=null?m:Math.min(a,e)/2-4)),te=Number((L=D.startAngle)!=null?L:0),fe=Math.max(0,Number((V=D.sweepAngle)!=null?V:180)),E=D.clockwise!==!1,ie=te*Math.PI/180,Ae=(te+fe)*Math.PI/180,Be=d+P*Math.cos(ie),Ce=S+P*Math.sin(ie),ne=d+P*Math.cos(Ae),j=S+P*Math.sin(Ae);return`M ${Be} ${Ce} A ${P} ${P} 0 ${fe>180?1:0} ${E?1:0} ${ne} ${j}`}function Xo(g){var e;const a=((e=g.style)==null?void 0:e.textAlign)||"center";return a==="left"?"0%":a==="right"?"100%":"50%"}function Zo(g){var e;const a=((e=g.style)==null?void 0:e.textAlign)||"center";return a==="left"?"start":a==="right"?"end":"middle"}function Fo(g){return String(g).split(";").map(a=>a.trim()).filter(Boolean).map(a=>a.includes("!important")?a:`${a} !important`).join("; ")}function Qo(g){return String(g).replace(/\{([^}]*)\}/g,(a,e)=>`{ ${Fo(e)} }`)}function es(g){const a=[],e=d=>{d.forEach(S=>{if((S.type==="group"||S.type==="container")&&Array.isArray(S.children))e(S.children);else{const D=(S.className||"").trim(),P=S.customClassCss?String(S.customClassCss).trim():"";if(!D||!P)return;/\{[^}]*\}/.test(P)?a.push(Qo(P)):a.push(`.${D} { ${Fo(P)} }`)}})};return e(g),a.join(`
`)}function ts(g){return g.replace(/[A-Z]/g,a=>`-${a.toLowerCase()}`)}function Ut(g){return`\`
${Object.entries(g).map(([a,e])=>`      ${ts(a)}: ${e};`).join(`
`)}
    \``}function wo(g,a,e,d,S){const D=g.replace(/[^A-Za-z0-9_]/g,"_");let P=0;const te=`lc-${D}-root`,fe=`lc-${D}-bg`,E=`lc-${D}-flex-left`,ie=`lc-${D}-flex-center`,Ae=`lc-${D}-flex-right`,Be=[],Ce=[],ne=[],j=new Map,f=new Map,m=[],L=new Set;function V(r){if(!L.has(r))return L.add(r),r;let re=2;for(;L.has(`${r}_${re}`);)re++;const Z=`${r}_${re}`;return L.add(Z),Z}function U(r){var Lt;const re=r.style||{},Z=[],nt=re.color,Re=re.textGradient;if(Re&&((Lt=Re.colors)!=null&&Lt.length)){const Kt=Re.angle||0,rl=Re.colors[0]||"#000000",ct=Re.colors[1]||"#000000";Z.push(`background-image:linear-gradient(${Kt}deg, ${rl}, ${ct})`),Z.push("-webkit-background-clip:text"),Z.push("background-clip:text"),Z.push("color:transparent")}else nt&&Z.push(`color:${nt}`);const _e=re.fontWeight;_e&&Z.push(`font-weight:${_e}`);const Ee=re.fontStyle;Ee&&Z.push(`font-style:${Ee}`);const ue=re.textOrientation;ue==="vertical"?(Z.push("writing-mode:vertical-rl"),Z.push("text-orientation:upright")):ue==="horizontal"&&Z.push("writing-mode:horizontal-tb");const lt=Z.join(";"),Rt=Z.join(";");return{key:lt,css:Rt}}function q(){const r=[],re=nt=>{nt.forEach(Re=>{if((Re.type==="group"||Re.type==="container")&&Array.isArray(Re.children))re(Re.children);else if(Re.type==="text"){const _e=((Re.style||{}).fontFamily||"").trim();_e&&!j.has(_e)&&(r.push(_e),j.set(_e,`lc-${D}-f${r.length}`));const{key:Ee,css:ue}=U(Re);if(Ee){const lt=f.get(Ee);lt?lt.count++:f.set(Ee,{count:1,css:ue})}}})};re(e);let Z=1;Array.from(f.entries()).forEach(([nt,Re])=>{Re.count>=3&&(Re.className=`lc-${D}-s${Z++}`)})}q();const Ve=a.backgroundUrl||"",X=a.backgroundColor||"transparent",G=a.globalFontFamily||"",se=a.globalFontSize||14,Le=a.globalColor||"#000000",Et=e.some(r=>r.type==="chart"),je=d!=null&&d.backgroundFileName&&d.backgroundFileName.trim()?`require('./imgs/${d.backgroundFileName.replace(/'/g,"\\'")}')`:Ve?`'${Ve.replace(/'/g,"\\'")}'`:"''";function $e(r){const re=String(r||"").trim();if(!re)return"";let Z=re.replace(/[^A-Za-z0-9_]/g,"_");return/[A-Za-z_]/.test(Z[0]||"")||(Z="_"+Z),Z}function Ge(r){if(!r.hidden)return"";const re=$e(r.hiddenLabel);return re?` ${d&&d.hideDirective==="show"?"v-show":"v-if"}="${re}"`:""}function qe(r,re,Z=!1){var Lt,Kt,rl,ct,bt,Pt,sl,qt,Xt,ht,al,dl,ul,Zt,Qt,Wt,cl,pl,gl;const nt=r,Re=nt.type==="text"?qo(nt,Z):Jo(nt,Z),_e=r.zIndex||1,Ee=r.className&&r.className.trim()?` class="${r.className.trim()}"`:"",ue=r.eventBinding,lt=ue&&ue.enabled&&ue.handlerName?` @click="${String(ue.handlerName)}($event)"`:"";if(r.type==="group"&&Array.isArray(r.children)){const at=r.children,pt=((Lt=r.style)==null?void 0:Lt.display)==="flex",oe=at.map((Ie,et)=>qe(Ie,et,pt)).join(`
        `),ze=r.elementId&&r.elementId.trim()?r.elementId.trim():r.className&&r.className.trim()?r.className.trim():`group_${re}`,xt=V(ze),Me={},vt=r.position||(Z?"static":"absolute");return vt==="absolute"?(Me.position="absolute",Me.left=`${Math.round(r.left||0)}px`,Me.top=`${Math.round(r.top||0)}px`):vt==="relative"&&(Me.position="relative",r.left!==void 0&&(Me.left=`${Math.round(r.left||0)}px`),r.top!==void 0&&(Me.top=`${Math.round(r.top||0)}px`)),Me.zIndex=_e,r.autoSize||(r.width&&(Me.width=`${Math.round(r.width)}px`),r.height&&(Me.height=`${Math.round(r.height)}px`)),m.push(`'${xt.replace(/'/g,"\\'")}' : ${Ut(Me)}`),`<div${Ee}${Ge(r)} :style="pos['${xt.replace(/'/g,"\\'")}']" >
        ${oe}
      </div>`}if(r.type==="text"){const at=r.autoSize!==!1,pt=at?(()=>{var Se;const we=((Se=r.style)==null?void 0:Se.textAlign)||"left";return we==="center"?ie:we==="right"?Ae:E})():"",oe=r.style||{},ze=(oe.fontFamily||"").trim(),xt=ze&&j.get(ze)||"",Me=(()=>{const{key:we}=U(r),Se=we?f.get(we):void 0;return Se&&Se.className?Se.className:""})(),vt=[(Kt=r.className)==null?void 0:Kt.trim(),pt,xt,Me].filter(Boolean).join(" "),Ie=vt?` class="${vt}"`:"",et=r.elementId&&r.elementId.trim()?r.elementId.trim():r.className&&r.className.trim()?r.className.trim():`text_${re}`,Oe=V(et),De={};if(oe.fontSize!==void 0&&(De.fontSize=`${oe.fontSize}px`),oe.letterSpacing!==void 0&&oe.letterSpacing!==null&&(De.letterSpacing=`${oe.letterSpacing}px`),oe.lineHeight!==void 0&&(De.lineHeight=oe.lineHeight),oe.textIndent&&(De.textIndent=String(oe.textIndent)),at||(De.display="block",De.whiteSpace="pre-wrap",De.wordBreak="break-word",De.overflow="hidden",oe.textAlign&&(De.textAlign=oe.textAlign)),oe.textGradient&&((rl=oe.textGradient.colors)!=null&&rl.length)){const we=oe.textGradient.angle||0,Se=oe.textGradient.colors[0]||"#000000",rt=oe.textGradient.colors[1]||"#000000";De.backgroundImage=`linear-gradient(${we}deg, ${Se}, ${rt})`,De["-webkit-background-clip"]="text",De.backgroundClip="text",De.color="transparent"}else oe.color&&(De.color=oe.color);oe.fontWeight&&(De.fontWeight=oe.fontWeight),oe.fontStyle&&(De.fontStyle=oe.fontStyle);const kt=oe.textOrientation;kt==="vertical"?(De.writingMode="vertical-rl",De.textOrientation="upright"):kt==="horizontal"&&(De.writingMode="horizontal-tb");const St=r.elementId&&r.elementId.trim()?r.elementId.trim():`text_${re}`,tt=!!(oe.textWave&&oe.textWave.enabled),Pe=!!oe.skewFlowEnabled;if(tt||Pe){const we=r.dynamic&&r.dynamic.enabled&&r.dynamic.objectName&&r.dynamic.propertyPath?{type:"dynamic",obj:r.dynamic.objectName,path:r.dynamic.propertyPath}:{type:"static",text:r.text||""};Be.push(`'${St.replace(/'/g,"\\'")}' : ${JSON.stringify(we)}`);const Se={textWaveEnabled:tt,amplitude:(bt=(ct=oe.textWave)==null?void 0:ct.amplitude)!=null?bt:0,frequency:(sl=(Pt=oe.textWave)==null?void 0:Pt.frequency)!=null?sl:0,phase:(Xt=(qt=oe.textWave)==null?void 0:qt.phase)!=null?Xt:0,skewFlowEnabled:Pe,skewAngle:(ht=oe.skewAngle)!=null?ht:0,textOrientation:oe.textOrientation||"horizontal",fontSize:(al=oe.fontSize)!=null?al:se,letterSpacing:(dl=oe.letterSpacing)!=null?dl:0};if(Ce.push(`'${St.replace(/'/g,"\\'")}' : ${JSON.stringify(Se)}`),r.dynamic&&r.dynamic.enabled&&r.dynamic.objectName&&r.dynamic.propertyPath){const Te=String(r.dynamic.propertyPath),$t=`${r.dynamic.objectName}.${Te}`,Gt=V($t),ft={},el=r.position||(Z?"static":"absolute");return el==="absolute"?(ft.position="absolute",ft.left=`${Math.round(r.left||0)}px`,ft.top=`${Math.round(r.top||0)}px`):el==="relative"&&(ft.position="relative",r.left!==void 0&&(ft.left=`${Math.round(r.left||0)}px`),r.top!==void 0&&(ft.top=`${Math.round(r.top||0)}px`)),ft.zIndex=_e,r.autoSize||(r.width&&(ft.width=`${Math.round(r.width)}px`),r.height&&(ft.height=`${Math.round(r.height)}px`)),Object.assign(ft,De),m.push(`'${Gt.replace(/'/g,"\\'")}' : ${Ut(ft)}`),`<div${Ie}${Ge(r)}${lt} :style="pos['${Gt.replace(/'/g,"\\'")}']" >
        <span v-for="(p,pi) in getTextPieces('${St.replace(/'/g,"\\'")}')" :key="pi" :style="p.style">{{ p.char }}</span>
      </div>`}const rt={},Ft=r.position||(Z?"static":"absolute");return Ft==="absolute"?(rt.position="absolute",rt.left=`${Math.round(r.left||0)}px`,rt.top=`${Math.round(r.top||0)}px`):Ft==="relative"&&(rt.position="relative",r.left!==void 0&&(rt.left=`${Math.round(r.left||0)}px`),r.top!==void 0&&(rt.top=`${Math.round(r.top||0)}px`)),rt.zIndex=_e,r.autoSize||(r.width&&(rt.width=`${Math.round(r.width)}px`),r.height&&(rt.height=`${Math.round(r.height)}px`)),Object.assign(rt,De),m.push(`'${Oe.replace(/'/g,"\\'")}' : ${Ut(rt)}`),`<div${Ie}${Ge(r)}${lt} :style="pos['${Oe.replace(/'/g,"\\'")}']" >
        <span v-for="(p,pi) in getTextPieces('${St.replace(/'/g,"\\'")}')" :key="pi" :style="p.style">{{ p.char }}</span>
      </div>`}if(r.segments&&r.segments.length>0){const we=r.segments.map(Te=>{let $t="";Te.dynamic&&Te.dynamicObj&&Te.dynamicPath?$t=`{{ ${Te.dynamicObj}.${Te.dynamicPath} }}`:$t=kl(Te.text||"");const Gt={};return Te.style&&(Te.style.color&&(Gt.color=Te.style.color),Te.style.fontSize&&(Gt.fontSize=Te.style.fontSize+"px"),Te.style.fontWeight&&(Gt.fontWeight=Te.style.fontWeight),Te.style.fontFamily&&(Gt.fontFamily=Te.style.fontFamily),Te.style.textDecoration&&(Gt.textDecoration=Te.style.textDecoration)),`<span style="${Object.entries(Gt).map(([ft,el])=>`${ft.replace(/[A-Z]/g,yl=>"-"+yl.toLowerCase())}:${el}`).join(";")}">${$t}</span>`}).join(""),Se={},rt=r.position||(Z?"static":"absolute");rt==="absolute"?(Se.position="absolute",Se.left=`${Math.round(r.left||0)}px`,Se.top=`${Math.round(r.top||0)}px`):rt==="relative"&&(Se.position="relative",r.left!==void 0&&(Se.left=`${Math.round(r.left||0)}px`),r.top!==void 0&&(Se.top=`${Math.round(r.top||0)}px`)),Se.zIndex=_e,r.autoSize||(r.width&&(Se.width=`${Math.round(r.width)}px`),r.height&&(Se.height=`${Math.round(r.height)}px`)),Se.boxSizing="border-box",Object.assign(Se,De);const Ft=`seg_${r.id.replace(/-/g,"_")}`;return m.push(`'${Ft}' : ${Ut(Se)}`),`<div${Ie}${Ge(r)}${lt} :style="pos['${Ft}']">${we}</div>`}if(r.dynamic&&r.dynamic.enabled&&r.dynamic.objectName&&r.dynamic.propertyPath){const we=`${r.dynamic.objectName}.${r.dynamic.propertyPath}`,Se=String(r.dynamic.propertyPath),rt=`${r.dynamic.objectName}.${Se}`,Ft=V(rt),Te={},$t=r.position||(Z?"static":"absolute");return $t==="absolute"?(Te.position="absolute",Te.left=`${Math.round(r.left||0)}px`,Te.top=`${Math.round(r.top||0)}px`):$t==="relative"&&(Te.position="relative",r.left!==void 0&&(Te.left=`${Math.round(r.left||0)}px`),r.top!==void 0&&(Te.top=`${Math.round(r.top||0)}px`)),Te.zIndex=_e,r.autoSize||(r.width&&(Te.width=`${Math.round(r.width)}px`),r.height&&(Te.height=`${Math.round(r.height)}px`)),Object.assign(Te,De),m.push(`'${Ft.replace(/'/g,"\\'")}' : ${Ut(Te)}`),`<div${Ie}${Ge(r)}${lt} :style="pos['${Ft.replace(/'/g,"\\'")}']" >{{ ${we} }}</div>`}else{const we=kl(r.text||""),Se={},rt=r.position||(Z?"static":"absolute");return rt==="absolute"?(Se.position="absolute",Se.left=`${Math.round(r.left||0)}px`,Se.top=`${Math.round(r.top||0)}px`):rt==="relative"&&(Se.position="relative",r.left!==void 0&&(Se.left=`${Math.round(r.left||0)}px`),r.top!==void 0&&(Se.top=`${Math.round(r.top||0)}px`)),Se.zIndex=_e,r.autoSize||(r.width&&(Se.width=`${Math.round(r.width)}px`),r.height&&(Se.height=`${Math.round(r.height)}px`)),Object.assign(Se,De),m.push(`'${Oe.replace(/'/g,"\\'")}' : ${Ut(Se)}`),`<div${Ie}${Ge(r)}${lt} :style="pos['${Oe.replace(/'/g,"\\'")}']" >${we}</div>`}}if(r.type==="image"){if(d!=null&&d.imageFileMap&&d.imageFileMap[r.id]){const Oe=d.imageFileMap[r.id],De=r.elementId&&r.elementId.trim()?r.elementId.trim():r.className&&r.className.trim()?r.className.trim():`img_${re}`,kt=V(De),St=r.elementId&&r.elementId.trim()?` id="${kt}"`:"",tt=r.style||{},Pe={},we=r.position||(Z?"static":"absolute");return we==="absolute"?(Pe.position="absolute",Pe.left=`${Math.round(r.left||0)}px`,Pe.top=`${Math.round(r.top||0)}px`):we==="relative"&&(Pe.position="relative",r.left!==void 0&&(Pe.left=`${Math.round(r.left||0)}px`),r.top!==void 0&&(Pe.top=`${Math.round(r.top||0)}px`)),Pe.zIndex=_e,r.autoSize||(r.width&&(Pe.width=`${Math.round(r.width)}px`),r.height&&(Pe.height=`${Math.round(r.height)}px`)),tt.objectFit&&(Pe.objectFit=String(tt.objectFit)),m.push(`'${kt.replace(/'/g,"\\'")}' : ${Ut(Pe)}`),`<img${Ee}${St}${Ge(r)}${lt} src="./imgs/${Oe}" :style="pos['${kt.replace(/'/g,"\\'")}']" alt="" />`}if(d!=null&&d.imageFileNames&&d.imageFileNames[P]){const Oe=d.imageFileNames[P++],De=r.elementId&&r.elementId.trim()?` id="${r.elementId.trim()}"`:"",kt=r.elementId&&r.elementId.trim()?r.elementId.trim():r.className&&r.className.trim()?r.className.trim():`img_${re}`,St=r.style||{},tt={},Pe=r.position||(Z?"static":"absolute");return Pe==="absolute"?(tt.position="absolute",tt.left=`${Math.round(r.left||0)}px`,tt.top=`${Math.round(r.top||0)}px`):Pe==="relative"&&(tt.position="relative",r.left!==void 0&&(tt.left=`${Math.round(r.left||0)}px`),r.top!==void 0&&(tt.top=`${Math.round(r.top||0)}px`)),tt.zIndex=_e,r.autoSize||(r.width&&(tt.width=`${Math.round(r.width)}px`),r.height&&(tt.height=`${Math.round(r.height)}px`)),St.objectFit&&(tt.objectFit=String(St.objectFit)),m.push(`'${kt.replace(/'/g,"\\'")}' : ${Ut(tt)}`),`<img${Ee}${De}${Ge(r)}${lt} src="./imgs/${Oe}" :style="pos['${kt.replace(/'/g,"\\'")}']" alt="" />`}const at=r.elementId&&r.elementId.trim()?r.elementId.trim():`img_${re}`,pt=r.elementId&&r.elementId.trim()?` id="${r.elementId.trim()}"`:"",oe=r.style||{},ze={},xt=r.position||(Z?"static":"absolute");xt==="absolute"?(ze.position="absolute",ze.left=`${Math.round(r.left||0)}px`,ze.top=`${Math.round(r.top||0)}px`):xt==="relative"&&(ze.position="relative",r.left!==void 0&&(ze.left=`${Math.round(r.left||0)}px`),r.top!==void 0&&(ze.top=`${Math.round(r.top||0)}px`)),ze.zIndex=_e,r.autoSize||(r.width&&(ze.width=`${Math.round(r.width)}px`),r.height&&(ze.height=`${Math.round(r.height)}px`)),oe.objectFit&&(ze.objectFit=String(oe.objectFit)),m.push(`'${at.replace(/'/g,"\\'")}' : ${Ut(ze)}`);const Me=!!r.highlightEnabled,vt=String(r.highlightSrc||""),Ie=String(r.src||""),et=Me&&vt?vt:Ie;return`<img${Ee}${pt}${Ge(r)}${lt} src="${et.replace(/"/g,"&quot;")}" :style="pos['${at.replace(/'/g,"\\'")}']" alt="" />`}if(r.type==="chart"){const at=kl(r.text||"chart"),pt=r.elementId&&r.elementId.trim()?r.elementId.trim():`chart_${re}`,oe=V(pt),ze={},xt=r.position||(Z?"static":"absolute");return xt==="absolute"?(ze.position="absolute",ze.left=`${Math.round(r.left||0)}px`,ze.top=`${Math.round(r.top||0)}px`):xt==="relative"&&(ze.position="relative",r.left!==void 0&&(ze.left=`${Math.round(r.left||0)}px`),r.top!==void 0&&(ze.top=`${Math.round(r.top||0)}px`)),ze.zIndex=_e,r.autoSize||(r.width&&(ze.width=`${Math.round(r.width)}px`),r.height&&(ze.height=`${Math.round(r.height)}px`)),m.push(`'${oe.replace(/'/g,"\\'")}' : ${Ut(ze)}`),`<div${Ee}${Ge(r)}${lt} id="${oe}" :style="pos['${oe.replace(/'/g,"\\'")}']">${at}</div>`}if(r.type==="container"){const at=r.comment?`<!-- ${r.comment.replace(/-->/g,"")} -->
      `:"";if(Array.isArray(r.children)){const et=r.children,Oe=r.style||{},De=Oe.display==="flex",kt=et.map((rt,Ft)=>qe(rt,Ft,De)).join(`
        `),St=r.elementId&&r.elementId.trim()?r.elementId.trim():r.className&&r.className.trim()?r.className.trim():`container_${re}`,tt=V(St),Pe=r.elementId&&r.elementId.trim()?` id="${tt}"`:"",we={},Se=r.position||(Z?"static":"absolute");if(Se==="absolute"?(we.position="absolute",we.left=`${Math.round(r.left||0)}px`,we.top=`${Math.round(r.top||0)}px`):Se==="relative"&&(we.position="relative",r.left!==void 0&&(we.left=`${Math.round(r.left||0)}px`),r.top!==void 0&&(we.top=`${Math.round(r.top||0)}px`)),we.zIndex=_e,r.autoSize||(r.width&&(we.width=`${Math.round(r.width)}px`),r.height&&(we.height=`${Math.round(r.height)}px`)),Oe.borderRadius&&(we.borderRadius=Oe.borderRadius),Oe.backgroundColor&&(we.backgroundColor=Oe.backgroundColor),Oe.backgroundGradient&&((ul=Oe.backgroundGradient.colors)!=null&&ul.length)){const rt=Oe.backgroundGradient.angle||0,Ft=Oe.backgroundGradient.colors[0]||"#000000",Te=Oe.backgroundGradient.colors[1]||"#000000";we.backgroundImage=`linear-gradient(${rt}deg, ${Ft}, ${Te})`,we.backgroundSize="cover",we.backgroundRepeat="no-repeat"}return Oe.display&&(we.display=String(Oe.display)),Oe.flexDirection&&(we.flexDirection=String(Oe.flexDirection)),Oe.justifyContent&&(we.justifyContent=String(Oe.justifyContent)),Oe.alignItems&&(we.alignItems=String(Oe.alignItems)),Oe.gap!==void 0&&(we.gap=`${Math.round(Number(Oe.gap))}px`),m.push(`'${tt.replace(/'/g,"\\'")}' : ${Ut(we)}`),`${at}<div${Ee}${Ge(r)}${lt}${Pe} :style="pos['${tt.replace(/'/g,"\\'")}']" >
        ${kt}
      </div>`}const pt=kl(r.text||""),oe=r.elementId&&r.elementId.trim()?r.elementId.trim():r.className&&r.className.trim()?r.className.trim():`container_${re}`,ze=V(oe),xt=r.elementId&&r.elementId.trim()?` id="${ze}"`:"",Me={},vt=r.position||(Z?"static":"absolute");vt==="absolute"?(Me.position="absolute",Me.left=`${Math.round(r.left||0)}px`,Me.top=`${Math.round(r.top||0)}px`):vt==="relative"&&(Me.position="relative",r.left!==void 0&&(Me.left=`${Math.round(r.left||0)}px`),r.top!==void 0&&(Me.top=`${Math.round(r.top||0)}px`)),Me.zIndex=_e,r.autoSize||(r.width&&(Me.width=`${Math.round(r.width)}px`),r.height&&(Me.height=`${Math.round(r.height)}px`));const Ie=r.style||{};if(Ie.borderRadius&&(Me.borderRadius=Ie.borderRadius),Ie.backgroundColor&&(Me.backgroundColor=Ie.backgroundColor),Ie.backgroundGradient&&((Zt=Ie.backgroundGradient.colors)!=null&&Zt.length)){const et=Ie.backgroundGradient.angle||0,Oe=Ie.backgroundGradient.colors[0]||"#000000",De=Ie.backgroundGradient.colors[1]||"#000000";Me.backgroundImage=`linear-gradient(${et}deg, ${Oe}, ${De})`,Me.backgroundSize="cover",Me.backgroundRepeat="no-repeat"}return Ie.display&&(Me.display=String(Ie.display)),Ie.flexDirection&&(Me.flexDirection=String(Ie.flexDirection)),Ie.justifyContent&&(Me.justifyContent=String(Ie.justifyContent)),Ie.alignItems&&(Me.alignItems=String(Ie.alignItems)),Ie.gap!==void 0&&(Me.gap=`${Math.round(Number(Ie.gap))}px`),m.push(`'${ze.replace(/'/g,"\\'")}' : ${Ut(Me)}`),`${at}<div${Ee}${Ge(r)}${lt}${xt} :style="pos['${ze.replace(/'/g,"\\'")}']" >${pt}</div>`}if(r.type==="line"){const at=r.style||{},pt=at.lineColor||"#ffffff",oe=(Qt=at.lineThickness)!=null?Qt:2,ze=at.lineOrientation||"horizontal",xt=at.lineStyle==="dashed",Me=(Wt=at.lineDashLength)!=null?Wt:6,vt=(cl=at.lineDashGap)!=null?cl:4,Ie=Math.max(1,Math.round((pl=r.width)!=null?pl:ze==="horizontal"?200:2)),et=Math.max(1,Math.round((gl=r.height)!=null?gl:ze==="horizontal"?2:200)),Oe=Math.round(et/2),De=Math.round(Ie/2),kt=xt?` stroke-dasharray="${Me} ${vt}"`:"",St=r.elementId&&r.elementId.trim()?r.elementId.trim():r.className&&r.className.trim()?r.className.trim():`line_${re}`,tt=V(St),Pe={},we=r.position||(Z?"static":"absolute");return we==="absolute"?(Pe.position="absolute",Pe.left=`${Math.round(r.left||0)}px`,Pe.top=`${Math.round(r.top||0)}px`):we==="relative"&&(Pe.position="relative",r.left!==void 0&&(Pe.left=`${Math.round(r.left||0)}px`),r.top!==void 0&&(Pe.top=`${Math.round(r.top||0)}px`)),Pe.width=`${Ie}px`,Pe.height=`${et}px`,Pe.zIndex=_e,m.push(`'${tt.replace(/'/g,"\\'")}' : ${Ut(Pe)}`),ze==="horizontal"?`<svg${Ee}${Ge(r)}${lt} viewBox="0 0 ${Ie} ${et}" preserveAspectRatio="none" :style="pos['${tt.replace(/'/g,"\\'")}']"><line x1="0" y1="${Oe}" x2="${Ie}" y2="${Oe}" stroke="${pt}" stroke-width="${oe}"${kt} fill="none" /></svg>`:`<svg${Ee}${Ge(r)}${lt} viewBox="0 0 ${Ie} ${et}" preserveAspectRatio="none" :style="pos['${tt.replace(/'/g,"\\'")}']"><line x1="${De}" y1="0" x2="${De}" y2="${et}" stroke="${pt}" stroke-width="${oe}"${kt} fill="none" /></svg>`}if(r.type==="arc-text"){const at=Math.max(1,Math.round(r.width||1)),pt=Math.max(1,Math.round(r.height||1)),oe=`arc_${r.id.replace(/"/g,"").replace(/'/g,"\\'")}`,ze=Yo(r),xt=Xo(r),Me=Zo(r),vt=r.elementId&&r.elementId.trim()?r.elementId.trim():r.className&&r.className.trim()?r.className.trim():`arc_${re}`,Ie=V(vt),et={},Oe=r.position||"absolute";Oe==="absolute"?(et.position="absolute",et.left=`${Math.round(r.left||0)}px`,et.top=`${Math.round(r.top||0)}px`):Oe==="relative"&&(et.position="relative",r.left!==void 0&&(et.left=`${Math.round(r.left||0)}px`),r.top!==void 0&&(et.top=`${Math.round(r.top||0)}px`)),et.width=`${at}px`,et.height=`${pt}px`,et.zIndex=_e,m.push(`'${Ie.replace(/'/g,"\\'")}' : ${Ut(et)}`);const De=r.dynamic&&r.dynamic.enabled&&r.dynamic.objectName&&r.dynamic.propertyPath?`{{ ${`${r.dynamic.objectName}.${r.dynamic.propertyPath}`} }}`:kl(r.text||"");return`<svg${Ee}${Ge(r)}${lt} viewBox="0 0 ${at} ${pt}" preserveAspectRatio="none" :style="pos['${Ie.replace(/'/g,"\\'")}']">
        <defs>
          <path id="${oe}" d="${Ko(r)}" fill="none" />
        </defs>
        <text style="${ze}">
          <textPath :href="'#${oe}'" startOffset="${xt}" text-anchor="${Me}">${De}</textPath>
        </text>
      </svg>`}const Rt=kl(r.text||"element");return`<div${Ee}${Ge(r)}${lt} style="${Re};z-index:${_e}">${Rt}</div>`}const He=e.map((r,re)=>qe(r,re)).join(`
      `),dt=es(e);function gt(r,re){r.forEach(Z=>{(Z.type==="group"||Z.type==="container")&&Array.isArray(Z.children)?(re(Z),gt(Z.children,re)):re(Z)})}const yt=new Set;gt(e,r=>{(r.type==="text"||r.type==="arc-text")&&r.dynamic&&r.dynamic.enabled&&r.dynamic.objectName&&yt.add(String(r.dynamic.objectName))});const it=Array.from(yt),$=!S||it.length===0?"":it.map(r=>{try{const re=S[r],Z=JSON.stringify(re!=null?re:{},null,2).split(`
`).map((nt,Re)=>Re===0?nt:`    ${nt}`).join(`
`);return`    ${r}: ${Z},`}catch{return`    ${r}: {},`}}).join(`
`),t=(()=>{const r=[];let re=0;return gt(e,Z=>{if(Z.type==="chart"){const nt=Z.elementId&&Z.elementId.trim()?Z.elementId.trim():`chart_${re}`;re++;const Re=Z.chartOption||{};try{r.push(`'${nt.replace(/'/g,"\\'")}' : ${JSON.stringify(Re,null,2)}`)}catch{r.push(`'${nt.replace(/'/g,"\\'")}' : {}`)}}}),`{ ${r.join(", ")} }`})(),pe=(()=>{const r=new Set;return gt(e,re=>{const Z=String(re.hiddenLabel||"").trim(),nt=$e(Z),Re=!!re.hidden;nt&&Re&&r.add(nt)}),Array.from(r).map(re=>`      ${re}: false,`).join(`
`)})(),Qe=(()=>{const r=new Map;function re(nt){nt.forEach(Re=>{const _e=Re.eventBinding;_e&&_e.enabled&&_e.handlerName&&r.set(String(_e.handlerName),String(_e.code||"")),Array.isArray(Re.children)&&re(Re.children)})}re(e);const Z=Array.from(r.entries());return Z.length?Z.map(([nt,Re])=>`${nt}(e) {
${Re}
}`).join(`,
`):""})(),mt=`export default {
    ${m.join(`,
    `)}
  };`,jt=`
  ${Et?`const chartOptions = ${t};`:"const chartOptions = {};"}

  export const ${D}_data = {
    chartOptions,
    ${$?`${$}`:""}
    textSources: { ${Be.join(", ")} },
    textEffects: { ${Ce.join(", ")} },
    elemStyles: { ${ne.join(", ")} },
    ${pe?pe.replace(/\n\s*/g,""):""}
  };
  `;return{indexVue:`<template>
  <div class="${te}" :style="containerStyle">
    ${He}
    <div v-for="(opt, id) in chartOptions" :key="id" :id="id" :style="pos[id]"></div>
  </div>
</template>

<script>
import posEntries from './style/pos.js';
import { ${D}_data } from './data/index.js';
${Et?"import * as echarts from 'echarts';":""}

function parseCss(css) {
  const style = {};
  if (!css) return style;
  css.split(';').forEach(line => {
    const part = line.trim();
    if (!part) return;
    const splitIdx = part.indexOf(':');
    if (splitIdx > 0) {
      const key = part.slice(0, splitIdx).trim();
      const val = part.slice(splitIdx + 1).trim();
      style[key] = val;
    }
  });
  return style;
}

const pos = {};
for (const key in posEntries) {
  pos[key] = parseCss(posEntries[key]);
}

export default {
  name: '${D}',
  data() {
    return {
      config: {
        width: ${a.width},
        height: ${a.height},
        backgroundColor: '${X}',
        backgroundUrl: '${((d==null?void 0:d.backgroundFileName)||Ve).replace(/'/g,"\\'")}',
        globalFontFamily: '${G.replace(/'/g,"\\'")}',
        globalFontSize: ${Math.round(se)},
        globalColor: '${Le}',
      },
      ${d!=null&&d.imageFileNames?`// 使用本地资源路径，动态映射不再需要
      images: {},`:`// 图片 src 动态映射，初始写入 base64（若存在），blob 留空待替换
      images: {},`}
      // 引入分离的样式与数据
      pos,
      ...${D}_data
    };
  },
  computed: {
    containerStyle() {
      const base = {
        position: 'relative',
        width: this.config.width + 'px',
        height: this.config.height + 'px',
        fontFamily: this.config.globalFontFamily,
        fontSize: this.config.globalFontSize + 'px',
        color: this.config.globalColor,
        backgroundColor: this.config.backgroundColor || 'transparent',
        lineHeight: '1.5',
      };
      if (this.config.backgroundUrl) {
        base.backgroundImage = 'url(' + this.bgSrc + ')';
        base.backgroundSize = 'cover';
        base.backgroundPosition = 'center';
        base.backgroundRepeat = 'no-repeat';
      }
      return base;
    },
    bgSrc() {
       return ${je};
    }
  },
  methods: {
    ${Qe?Qe+",":""}
    ${Ce.length?`
    getByPath(obj, path) {
      try {
        const segs = String(path).split('.');
        return segs.reduce((acc, k) => (acc ? acc[k] : undefined), obj);
      } catch(e) {
        return undefined;
      }
    },
    getTextValue(id) {
      const srcMap = this.textSources || {};
      const src = srcMap[id];
      if (!src) return '';
      if (src.type === 'static') return String(src.text || '');
      const root = this[src.obj] || {};
      const v = this.getByPath(root, src.path);
      return v != null ? String(v) : '';
    },
    getTextPieces(id) {
      const text = this.getTextValue(id);
      const effMap = this.textEffects || {};
      const eff = effMap[id] || {};
      const orientation = eff.textOrientation || 'horizontal';
      const fontSize = Number(eff.fontSize || (this.config && this.config.globalFontSize) || 14);
      const letterSpacing = Number(eff.letterSpacing || 0);
      const step = fontSize * 0.6 + letterSpacing;

      const amp = eff.textWaveEnabled ? Number(eff.amplitude || 0) : 0;
      const freq = eff.textWaveEnabled ? Number(eff.frequency || 0) : 0;
      const phase = eff.textWaveEnabled ? Number(eff.phase || 0) : 0;
      const skew = eff.skewFlowEnabled ? Number(eff.skewAngle || 0) : 0;
      
      return String(text).split('').map((char, i) => {
        const offset = i * step;
        const waveY = amp * Math.sin((offset * freq) + phase);
        // 简单模拟布局倾斜：每个字符垂直位移随水平位置线性变化
        // skewAngle 正切值 * offset
        const skewY = skew ? offset * Math.tan(skew * Math.PI / 180) : 0;
        
        const style = {
          display: 'inline-block',
          transform: \`translateY(\${waveY + skewY}px)\`,
          fontSize: fontSize + 'px',
          letterSpacing: letterSpacing + 'px'
        };
        if (orientation === 'vertical') {
          style.writingMode = 'vertical-rl';
          style.textOrientation = 'upright';
        }
        return { char, style: { ...style, whiteSpace: 'pre-wrap' } };
      });
    },
    `:""}
    ${Et?`
    initCharts() {
      this.$nextTick(() => {
        const opts = this.chartOptions || {};
        Object.keys(opts).forEach((id) => {
          const dom = document.getElementById(id);
          if (dom) {
            const chart = echarts.init(dom);
            chart.setOption(opts[id]);
          }
        });
      });
    },
    `:""}
  },
  mounted() {
    ${Et?"this.initCharts();":""}
  }
};
<\/script>

<style scoped>
.${te} { overflow: hidden; }
.${te} * { box-sizing: border-box; }
.${fe} { position:absolute; left:0; top:0; width:100%; height:100%; object-fit:cover; z-index:0; pointer-events:none; }
.${E} { display:flex; align-items:center; justify-content:flex-start; }
.${ie} { display:flex; align-items:center; justify-content:center; }
.${Ae} { display:flex; align-items:center; justify-content:flex-end; }
${Array.from(j.entries()).map(([r,re])=>`.${re}{ font-family:'${r.replace(/'/g,"\\'")}'; }`).join(`
`)}
${Array.from(f.values()).filter(r=>r.className&&r.css).map(r=>`.${r.className} { ${r.css} }`).join(`
`)}
${dt}
</style>
`,files:{"style/pos.js":mt,"data/index.js":jt}}}function ar(g){return g.replace(/[&<>"']/g,a=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"})[a]||a)}function ls(g){var D,P;const a=g.style||{},e=[],d=g.position||"absolute";if(d==="absolute"?(e.push("position:absolute"),e.push(`left:${Math.round(g.left||0)}px`),e.push(`top:${Math.round(g.top||0)}px`)):d==="relative"&&(e.push("position:relative"),g.left!==void 0&&e.push(`left:${Math.round(g.left||0)}px`),g.top!==void 0&&e.push(`top:${Math.round(g.top||0)}px`)),g.autoSize||(g.width&&e.push(`width:${Math.round(g.width)}px`),g.height&&e.push(`height:${Math.round(g.height)}px`)),a.opacity!==void 0&&e.push(`opacity:${a.opacity}`),a.border&&!(g.type==="container"&&a.border==="1px dashed rgba(148,163,184,0.6)")&&e.push(`border:${a.border}`),a.borderRadius&&e.push(`border-radius:${a.borderRadius}`),a.backgroundColor&&e.push(`background-color:${a.backgroundColor}`),a.boxShadow&&e.push(`box-shadow:${a.boxShadow}`),a.display&&e.push(`display:${a.display}`),a.flexDirection&&e.push(`flex-direction:${a.flexDirection}`),a.justifyContent&&e.push(`justify-content:${a.justifyContent}`),a.alignItems&&e.push(`align-items:${a.alignItems}`),a.gap!==void 0&&e.push(`gap:${Math.round(Number(a.gap))}px`),a.backgroundGradient&&((D=a.backgroundGradient.colors)!=null&&D.length)){const te=a.backgroundGradient.angle||0,fe=a.backgroundGradient.colors[0]||"#000000",E=a.backgroundGradient.colors[1]||"#000000";e.push(`background-image:linear-gradient(${te}deg, ${fe}, ${E})`),e.push("background-size:cover"),e.push("background-repeat:no-repeat")}if(g.type==="text"&&(a.fontFamily&&e.push(`font-family:${a.fontFamily}`),a.fontSize!==void 0&&e.push(`font-size:${a.fontSize}px`),a.color&&e.push(`color:${a.color}`),a.fontWeight&&e.push(`font-weight:${a.fontWeight}`),a.letterSpacing!==void 0&&a.letterSpacing!==null&&e.push(`letter-spacing:${a.letterSpacing}px`),a.lineHeight!==void 0&&e.push(`line-height:${a.lineHeight}`),a.fontStyle&&e.push(`font-style:${a.fontStyle}`),a.textAlign&&e.push(`text-align:${a.textAlign}`),a.textDecoration&&e.push(`text-decoration:${a.textDecoration}`),a.textOrientation==="vertical"&&(e.push("writing-mode:vertical-rl"),e.push("text-orientation:upright")),a.textGradient&&((P=a.textGradient.colors)!=null&&P.length))){const te=a.textGradient.angle||0,fe=a.textGradient.colors[0]||"#000000",E=a.textGradient.colors[1]||"#000000";e.push(`background-image:linear-gradient(${te}deg, ${fe}, ${E})`),e.push("-webkit-background-clip:text"),e.push("background-clip:text"),e.push("color:transparent")}g.type==="image"&&a.objectFit&&e.push(`object-fit:${a.objectFit}`);const S=g.eventBinding;return S&&S.enabled&&S.cursor&&e.push(`cursor:${S.cursor}`),e.join(";")}function Ao(g){return String(g).split(";").map(a=>a.trim()).filter(Boolean).map(a=>a.includes("!important")?a:`${a} !important`).join("; ")}function rs(g){return String(g).replace(/\{([^}]*)\}/g,(a,e)=>`{ ${Ao(e)} }`)}function ns(g){const a=[],e=d=>{d.forEach(S=>{if((S.type==="group"||S.type==="container")&&Array.isArray(S.children))e(S.children);else{const D=(S.className||"").trim(),P=S.customClassCss?String(S.customClassCss).trim():"";if(!D||!P)return;/\{[^}]*\}/.test(P)?a.push(rs(P)):a.push(`.${D} { ${Ao(P)} }`)}})};return e(g),a.join(`
`)}function zo(g){const a=String(g||"").trim();if(!a)return"";let e=a.replace(/[^A-Za-z0-9_]/g,"_");return/[A-Za-z_]/.test(e[0]||"")||(e="_"+e),e}function os(g,a){if(!g.hidden)return"";const e=zo(g.hiddenLabel);return e?` ${a!=null&&a.useShow?"v-show":"v-if"}="${e}"`:""}function Eo(g,a,e,d){const S=`lc-${g.replace(/[^A-Za-z0-9_]/g,"_")}-root`;let D=0;const P=e.some(m=>m.type==="chart");function te(m,L){var Le,Et,je,$e,Ge;const V=ls(m),U=m.zIndex||1,q=m.className&&m.className.trim()?` class="${m.className.trim()}"`:"",Ve=os(m,{useShow:(d==null?void 0:d.hideDirective)==="show"}),X=m.eventBinding,G=X&&X.enabled&&X.handlerName?` @click="${String(X.handlerName)}($event)"`:"",se=m.elementId&&m.elementId.trim()?` id="${m.elementId.trim()}"`:"";if((m.type==="group"||m.type==="container")&&Array.isArray(m.children)){const qe=m.children.map((He,dt)=>te(He,dt)).join(`
        `);return`<div${q}${Ve}${G}${se} style="${V};z-index:${U}">
        ${qe}
      </div>`}if(m.type==="text"){const qe=ar(m.text||"");return`<div${q}${Ve}${G} style="${V};z-index:${U}">${qe}</div>`}if(m.type==="image"){const qe=!!m.highlightEnabled,He=String(m.highlightSrc||""),dt=String(m.src||""),gt=qe&&He?He:dt;if(d!=null&&d.imageFileMap&&d.imageFileMap[m.id]){const yt=d.imageFileMap[m.id],it=m.elementId&&m.elementId.trim()?` id="${m.elementId.trim()}"`:"";return`<img${q}${it}${Ve}${G} :src="assetUrl('./imgs/${yt}')" style="${V};z-index:${U}" alt="" />`}if(d!=null&&d.imageFileNames&&d.imageFileNames[D]){const yt=d.imageFileNames[D++],it=m.elementId&&m.elementId.trim()?` id="${m.elementId.trim()}"`:"";return`<img${q}${it}${Ve}${G} :src="assetUrl('./imgs/${yt}')" style="${V};z-index:${U}" alt="" />`}return gt?`<img${q}${se}${Ve}${G} src="${gt.replace(/"/g,"&quot;")}" style="${V};z-index:${U}" alt="" />`:`<div${q}${Ve}${G} style="${V};z-index:${U}"></div>`}if(m.type==="line"){const qe=m.style||{},He=qe.lineColor||"#ffffff",dt=(Le=qe.lineThickness)!=null?Le:2,gt=qe.lineOrientation||"horizontal",yt=qe.lineStyle==="dashed",it=(Et=qe.lineDashLength)!=null?Et:6,$=(je=qe.lineDashGap)!=null?je:4,t=Math.max(1,Math.round(($e=m.width)!=null?$e:gt==="horizontal"?200:2)),pe=Math.max(1,Math.round((Ge=m.height)!=null?Ge:gt==="horizontal"?2:200)),Qe=Math.round(pe/2),mt=Math.round(t/2),jt=yt?` stroke-dasharray="${it} ${$}"`:"";return gt==="horizontal"?`<svg${q}${Ve}${G} viewBox="0 0 ${t} ${pe}" preserveAspectRatio="none" style="${V};z-index:${U}"><line x1="0" y1="${Qe}" x2="${t}" y2="${Qe}" stroke="${He}" stroke-width="${dt}"${jt} fill="none" /></svg>`:`<svg${q}${Ve}${G} viewBox="0 0 ${t} ${pe}" preserveAspectRatio="none" style="${V};z-index:${U}"><line x1="${mt}" y1="0" x2="${mt}" y2="${pe}" stroke="${He}" stroke-width="${dt}"${jt} fill="none" /></svg>`}if(m.type==="chart"){const qe=m.elementId&&m.elementId.trim()?m.elementId.trim():`chart_${L}`,He=ar(m.text||"chart");return`<div${q}${Ve}${G} id="${qe}" style="${V};z-index:${U}">${He}</div>`}return`<div${q}${Ve}${G} style="${V};z-index:${U}">${ar(m.text||"")}</div>`}const fe=e.map((m,L)=>te(m,L)).join(`
      `),E=ns(e),ie=a.backgroundUrl||"",Ae=a.backgroundColor||"transparent",Be=a.globalFontFamily||"",Ce=a.globalFontSize||14,ne=a.globalColor||"#000000",j=(()=>{const m=[];let L=0;return e.forEach(V=>{if(V.type==="chart"){const U=V.elementId&&V.elementId.trim()?V.elementId.trim():`chart_${L}`;L++;const q=V.chartOption||{};try{m.push(`'${U.replace(/'/g,"\\'")}' : ${JSON.stringify(q)}`)}catch{m.push(`'${U.replace(/'/g,"\\'")}' : {}`)}}}),`{ ${m.join(", ")} }`})(),f=(()=>{const m=new Set;return e.forEach(L=>{const V=String(L.hiddenLabel||"").trim(),U=zo(V),q=!!L.hidden;U&&q&&m.add(U)}),Array.from(m).map(L=>`const ${L} = ref(false)`).join(`
`)})();return`
<template>
  <div class="${S}" :style="containerStyle">
    ${fe}
  </div>
</template>

<script setup lang="ts">
import { onMounted, ref, computed } from 'vue'
${P?`import * as echarts from 'echarts'
`:""}
function assetUrl(p: string): string { try { return new URL(p, import.meta.url).href } catch { return p } }
const config = {
  width: ${Math.round(a.width)},
  height: ${Math.round(a.height)},
  backgroundColor: '${Ae.replace(/'/g,"\\'")}',
  globalFontFamily: '${Be.replace(/'/g,"\\'")}',
  globalFontSize: ${Math.round(Ce)},
  globalColor: '${ne}',
}
const backgroundUrl: string = ${d!=null&&d.backgroundFileName?`assetUrl('./imgs/${String(d.backgroundFileName).replace(/'/g,"\\'")}')`:`'${ie.replace(/'/g,"\\'")}'`}
const images: Record<string, string> = {}
${P?`const chartOptions: Record<string, any> = ${j}`:""}
${f?`${f}
`:""}
const containerStyle = computed(() => {
  const base: Record<string, string> = {
    position: 'relative',
    width: config.width + 'px',
    height: config.height + 'px',
    fontFamily: config.globalFontFamily,
    fontSize: config.globalFontSize + 'px',
    color: config.globalColor,
    backgroundColor: (config.backgroundColor || 'transparent') as string,
  }
  if (backgroundUrl) {
    return Object.assign({}, base, {
      backgroundImage: 'url(' + backgroundUrl + ')',
      backgroundSize: 'cover',
      backgroundRepeat: 'no-repeat',
    }) as Record<string, string>
  }
  return base
})
// 事件处理函数
${(()=>{const m=new Map,L=V=>{V.forEach(U=>{const q=U.eventBinding;q&&q.enabled&&q.handlerName&&m.set(String(q.handlerName),String(q.code||"")),Array.isArray(U.children)&&L(U.children)})};return L(e),Array.from(m.entries()).map(([V,U])=>`function ${V}(e: MouseEvent){
${U}
}`).join(`
`)})()}
${P?`onMounted(() => {
  Object.keys(chartOptions || {}).forEach((id) => {
    const el = document.getElementById(id)
    if (el && (echarts as any)) { const inst = (echarts as any).init(el); inst.setOption((chartOptions as any)[id], true) }
  })
})`:""}
<\/script>

<style scoped>
.container { box-sizing: border-box; }
.text-flex-left { display:flex; align-items:center; justify-content:flex-start; }
.text-flex-center { display:flex; align-items:center; justify-content:center; }
.text-flex-right { display:flex; align-items:center; justify-content:flex-end; }
${E}
</style>
`}function Gl(g){return String(g).replace(/[&<>"']/g,a=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"})[a]||a)}function ss(g){const a=g.style||{},e=[];if(e.push("position:absolute"),e.push(`left:${Math.round(g.left||g.x||0)}px`),e.push(`top:${Math.round(g.top||g.y||0)}px`),g.autoSize||(g.width&&e.push(`width:${Math.round(g.width)}px`),g.height&&e.push(`height:${Math.round(g.height)}px`)),a.opacity!==void 0&&e.push(`opacity:${a.opacity}`),a.border&&!(g.type==="container"&&a.border==="1px dashed rgba(148,163,184,0.6)")&&e.push(`border:${a.border}`),a.borderRadius&&e.push(`border-radius:${a.borderRadius}`),a.backgroundColor&&e.push(`background-color:${a.backgroundColor}`),a.boxShadow&&e.push(`box-shadow:${a.boxShadow}`),a.backgroundGradient&&a.backgroundGradient.colors&&a.backgroundGradient.colors.length){const S=a.backgroundGradient.angle||0,D=a.backgroundGradient.colors[0]||"#000000",P=a.backgroundGradient.colors[1]||"#000000";e.push(`background-image:linear-gradient(${S}deg, ${D}, ${P})`),e.push("background-size:cover"),e.push("background-repeat:no-repeat")}if(g.type==="text"&&(a.fontFamily&&e.push(`font-family:${a.fontFamily}`),a.fontSize!==void 0&&e.push(`font-size:${a.fontSize}px`),a.color&&e.push(`color:${a.color}`),a.fontWeight&&e.push(`font-weight:${a.fontWeight}`),a.letterSpacing!==void 0&&a.letterSpacing!==null&&e.push(`letter-spacing:${a.letterSpacing}px`),a.lineHeight!==void 0&&e.push(`line-height:${a.lineHeight}`),a.fontStyle&&e.push(`font-style:${a.fontStyle}`),a.textAlign&&e.push(`text-align:${a.textAlign}`),a.textDecoration&&e.push(`text-decoration:${a.textDecoration}`),a.textOrientation==="vertical"&&(e.push("writing-mode:vertical-rl"),e.push("text-orientation:upright")),a.textGradient&&a.textGradient.colors&&a.textGradient.colors.length)){const S=a.textGradient.angle||0,D=a.textGradient.colors[0]||"#000000",P=a.textGradient.colors[1]||"#000000";e.push(`background-image:linear-gradient(${S}deg, ${D}, ${P})`),e.push("-webkit-background-clip:text"),e.push("background-clip:text"),e.push("color:transparent")}g.type==="image"&&a.objectFit&&e.push(`object-fit:${a.objectFit}`);const d=g.eventBinding;return d&&d.enabled&&d.cursor&&e.push(`cursor:${d.cursor}`),g.hidden&&e.push("display:none"),e.join(";")}function Oo(g){return String(g).split(";").map(a=>a.trim()).filter(Boolean).map(a=>a.includes("!important")?a:`${a} !important`).join("; ")}function as(g){return String(g).replace(/\{([^}]*)\}/g,(a,e)=>`{ ${Oo(e)} }`)}function is(g){const a=[],e=d=>{d.forEach(S=>{if((S.type==="group"||S.type==="container")&&Array.isArray(S.children))e(S.children);else{const D=(S.className||"").trim(),P=S.customClassCss?String(S.customClassCss).trim():"";if(!D||!P)return;/\{[^}]*\}/.test(P)?a.push(as(P)):a.push(`.${D} { ${Oo(P)} }`)}})};return e(g),a.join(`
`)}function ko(g,a,e,d){function S(f){for(const m of f)if((m.type==="group"||m.type==="container")&&Array.isArray(m.children)){if(S(m.children))return!0}else if(m.type==="chart")return!0;return!1}const D=S(e),P=a.backgroundUrl||"",te=d!=null&&d.backgroundFileName?`background-image:url('./imgs/${d.backgroundFileName}');background-size:cover;background-repeat:no-repeat;`:P?`background-image:url('${P}');background-size:cover;background-repeat:no-repeat;`:"";let fe=0;const E={};(function(m){let L=0;const V=U=>{U.forEach(q=>{if((q.type==="group"||q.type==="container")&&Array.isArray(q.children))V(q.children);else if(q.type==="chart"){const Ve=q.elementId&&String(q.elementId).trim()?String(q.elementId).trim():`chart_${L++}`;E[q.id]=Ve}})};V(m)})(e);function ie(f){var X,G,se,Le,Et;const m=ss(f),L=f.zIndex||1,V=f.className&&f.className.trim()?` class="${f.className.trim()}"`:"",U=f.eventBinding,q=U&&U.enabled&&U.handlerName?` onclick="${String(U.handlerName)}(event)"`:"",Ve=f.elementId&&f.elementId.trim()?` id="${f.elementId.trim()}"`:"";if((f.type==="group"||f.type==="container")&&Array.isArray(f.children)&&f.children.length>0){const je=f.children.map($e=>ie($e)).join(`
        `);return`<div${V}${q}${Ve} style="${m};z-index:${L}">
        ${je}
      </div>`}if(f.type==="text"){const je=(f.style||{}).textAlign||"left",$e=je==="center"?"text-flex-center":je==="right"?"text-flex-right":"text-flex-left",Ge=[(f.className||"").trim(),$e].filter(Boolean).join(" ");return`<div${Ge?` class="${Ge}"`:""}${q} style="${m};z-index:${L}">${Gl(f.text||"")}</div>`}if(f.type==="image"){if(d!=null&&d.imageFileMap&&d.imageFileMap[f.id]){const je=d.imageFileMap[f.id];return`<img${V}${q} src="./imgs/${je}" style="${m};z-index:${L}" alt="" />`}if(d!=null&&d.imageFileNames&&d.imageFileNames[fe]){const je=d.imageFileNames[fe++];return`<img${V}${q} src="./imgs/${je}" style="${m};z-index:${L}" alt="" />`}return`<div${V}${q} style="${m};z-index:${L}"></div>`}if(f.type==="line"){const je=f.style||{},$e=je.lineColor||"#ffffff",Ge=(X=je.lineThickness)!=null?X:2,qe=je.lineOrientation||"horizontal",He=je.lineStyle==="dashed",dt=(G=je.lineDashLength)!=null?G:6,gt=(se=je.lineDashGap)!=null?se:4,yt=Math.max(1,Math.round((Le=f.width)!=null?Le:qe==="horizontal"?200:2)),it=Math.max(1,Math.round((Et=f.height)!=null?Et:qe==="horizontal"?2:200)),$=Math.round(it/2),t=Math.round(yt/2),pe=He?` stroke-dasharray="${dt} ${gt}"`:"";return qe==="horizontal"?`<svg${V}${q} viewBox="0 0 ${yt} ${it}" preserveAspectRatio="none" style="${m};z-index:${L}"><line x1="0" y1="${$}" x2="${yt}" y2="${$}" stroke="${$e}" stroke-width="${Ge}"${pe} fill="none" /></svg>`:`<svg${V}${q} viewBox="0 0 ${yt} ${it}" preserveAspectRatio="none" style="${m};z-index:${L}"><line x1="${t}" y1="0" x2="${t}" y2="${it}" stroke="${$e}" stroke-width="${Ge}"${pe} fill="none" /></svg>`}if(f.type==="chart"){const je=E[f.id]||String(f.elementId||"");return`<div${V}${q} id="${je}" style="${m};z-index:${L}">${Gl(f.text||"chart")}</div>`}return f.type==="container"?`<div${V}${q} style="${m};z-index:${L}">${Gl(f.text||"")}</div>`:`<div${V}${q} style="${m};z-index:${L}">${Gl(f.text||"")}</div>`}const Ae=e.map(f=>ie(f)).join(`
      `),Be=is(e),Ce=d!=null&&d.fontFaces&&d.fontFaces.length>0?d.fontFaces.map(f=>`@font-face { font-family: '${String(f.family).replace(/'/g,"\\'")}'; src: url('./fonts/${String(f.file)}'); font-weight: normal; font-style: normal; }`).join(`
`):"";function ne(f,m){f.forEach(L=>{if((L.type==="group"||L.type==="container")&&Array.isArray(L.children))ne(L.children,m);else if(L.type==="chart"){const V=E[L.id]||String(L.elementId||"");try{m.push(`chartOptions['${V.replace(/'/g,"\\'")}'] = ${JSON.stringify(L.chartOption||{})};`)}catch{m.push(`chartOptions['${V.replace(/'/g,"\\'")}'] = {};`)}}})}const j=D?`
    (function(){
      var chartOptions = {};
      ${(()=>{const f=[];return ne(e,f),f.join(`
      `)})()}
      Object.keys(chartOptions).forEach(function(id){
        var el = document.getElementById(id);
        if (el && window.echarts) { var inst = window.echarts.init(el); inst.setOption(chartOptions[id], true); }
      });
    })();
  `:"";return`<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<title>${Gl(g)}</title>
<style>
.container { position:relative; width:${Math.round(a.width)}px; height:${Math.round(a.height)}px; font-family:${String(a.globalFontFamily||"").replace(/'/g,"\\'")}; font-size:${Math.round(a.globalFontSize)}px; color:${String(a.globalColor)}; background-color:${String(a.backgroundColor||"transparent")}; ${te} }
.text-flex-left { display:flex; align-items:center; justify-content:flex-start; }
.text-flex-center { display:flex; align-items:center; justify-content:center; }
.text-flex-right { display:flex; align-items:center; justify-content:flex-end; }
${Ce}
${Be}
</style>
${D?'<script src="https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"><\/script>':""}
</head>
<body>
<div class="container">
  ${Ae}
</div>
<script>
${(()=>{const f=new Map,m=L=>{L.forEach(V=>{const U=V.eventBinding;U&&U.enabled&&U.handlerName&&f.set(String(U.handlerName),String(U.code||"")),Array.isArray(V.children)&&m(V.children)})};return m(e),Array.from(f.entries()).map(([L,V])=>`function ${L}(event){
${V}
}`).join(`
`)})()}
${j}
<\/script>
</body>
</html>`}function rr(g){return g.replace(/[&<>"']/g,a=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"})[a]||a)}function So(g){var d,S;const a=g.style||{},e=[];if(e.push("position:absolute"),e.push(`left:${Math.round(g.left||0)}px`),e.push(`top:${Math.round(g.top||0)}px`),g.autoSize||(g.width&&e.push(`width:${Math.round(g.width)}px`),g.height&&e.push(`height:${Math.round(g.height)}px`)),a.opacity!==void 0&&e.push(`opacity:${a.opacity}`),a.border&&!(g.type==="container"&&a.border==="1px dashed rgba(148,163,184,0.6)")&&e.push(`border:${a.border}`),a.borderRadius&&e.push(`border-radius:${a.borderRadius}`),a.backgroundColor&&e.push(`background-color:${a.backgroundColor}`),a.boxShadow&&e.push(`box-shadow:${a.boxShadow}`),a.backgroundGradient&&((d=a.backgroundGradient.colors)!=null&&d.length)){const D=a.backgroundGradient.angle||0,P=a.backgroundGradient.colors[0]||"#000000",te=a.backgroundGradient.colors[1]||"#000000";e.push(`background-image:linear-gradient(${D}deg, ${P}, ${te})`),e.push("background-size:cover"),e.push("background-repeat:no-repeat")}if(g.type==="text"&&(a.fontFamily&&e.push(`font-family:${a.fontFamily}`),a.fontSize!==void 0&&e.push(`font-size:${a.fontSize}px`),a.color&&e.push(`color:${a.color}`),a.fontWeight&&e.push(`font-weight:${a.fontWeight}`),a.letterSpacing!==void 0&&a.letterSpacing!==null&&e.push(`letter-spacing:${a.letterSpacing}px`),a.lineHeight!==void 0&&e.push(`line-height:${a.lineHeight}`),a.fontStyle&&e.push(`font-style:${a.fontStyle}`),a.textAlign&&e.push(`text-align:${a.textAlign}`),a.textDecoration&&e.push(`text-decoration:${a.textDecoration}`),a.textOrientation==="vertical"&&(e.push("writing-mode:vertical-rl"),e.push("text-orientation:upright")),a.textGradient&&((S=a.textGradient.colors)!=null&&S.length))){const D=a.textGradient.angle||0,P=a.textGradient.colors[0]||"#000000",te=a.textGradient.colors[1]||"#000000";e.push(`background-image:linear-gradient(${D}deg, ${P}, ${te})`),e.push("-webkit-background-clip:text"),e.push("background-clip:text"),e.push("color:transparent")}return g.type==="image"&&a.objectFit&&e.push(`object-fit:${a.objectFit}`),g.hidden&&e.push("display:none"),e.join(";")}function Do(g){return String(g).split(";").map(a=>a.trim()).filter(Boolean).map(a=>a.includes("!important")?a:`${a} !important`).join("; ")}function ds(g){return String(g).replace(/\{([^}]*)\}/g,(a,e)=>`{ ${Do(e)} }`)}function us(g){const a=[],e=d=>{d.forEach(S=>{if((S.type==="group"||S.type==="container")&&Array.isArray(S.children))e(S.children);else{const D=(S.className||"").trim(),P=S.customClassCss?String(S.customClassCss).trim():"";if(!D||!P)return;/\{[^}]*\}/.test(P)?a.push(ds(P)):a.push(`.${D} { ${Do(P)} }`)}})};return e(g),a.join(`
`)}function Co(g,a,e,d){const S=g.replace(/[^A-Za-z0-9_]/g,"_"),D=`lc-${S}-root`,P=`lc-${S}-flex-left`,te=`lc-${S}-flex-center`,fe=`lc-${S}-flex-right`,E=e.some(f=>f.type==="chart");let ie=0;const Ae=e.map((f,m)=>{var q,Ve,X,G,se;const L=So(f),V=f.zIndex||1,U=f.className&&f.className.trim()?` class="${f.className.trim()}"`:"";if((f.type==="group"||f.type==="container")&&Array.isArray(f.children)){const Le=f.children.map(je=>{const $e=So(je),Ge=je.zIndex||1,qe=je.className&&je.className.trim()?` class="${je.className.trim()}"`:"",He=je.elementId&&je.elementId.trim()?` id="${je.elementId.trim()}"`:"";if(je.type==="image"){if(d!=null&&d.imageFileMap&&d.imageFileMap[je.id]){const dt=d.imageFileMap[je.id];return`<img${qe}${He} src="/imgs/${dt}" style="${$e};z-index:${Ge}" alt="" />`}if(d!=null&&d.imageFileNames&&d.imageFileNames[ie]){const dt=d.imageFileNames[ie++];return`<img${qe}${He} src="/imgs/${dt}" style="${$e};z-index:${Ge}" alt="" />`}}return`<div${qe}${He} style="${$e};z-index:${Ge}">${rr(je.text||"")}</div>`}).join(`
        `),Et=f.elementId&&f.elementId.trim()?` id="${f.elementId.trim()}"`:"";return`<div${U}${Et} style="${L};z-index:${V}">${Le}</div>`}if(f.type==="text")return`<div${U} style="${L};z-index:${V}">${rr(f.text||"")}</div>`;if(f.type==="image"){if(d!=null&&d.imageFileMap&&d.imageFileMap[f.id]){const Le=d.imageFileMap[f.id];return`<img${U} src="/imgs/${Le}" style="${L};z-index:${V}" alt="" />`}if(d!=null&&d.imageFileNames&&d.imageFileNames[ie]){const Le=d.imageFileNames[ie++];return`<img${U} src="/imgs/${Le}" style="${L};z-index:${V}" alt="" />`}return`<div${U} style="${L};z-index:${V}"></div>`}if(f.type==="line"){const Le=f.style||{},Et=Le.lineColor||"#ffffff",je=(q=Le.lineThickness)!=null?q:2,$e=Le.lineOrientation||"horizontal",Ge=Le.lineStyle==="dashed",qe=(Ve=Le.lineDashLength)!=null?Ve:6,He=(X=Le.lineDashGap)!=null?X:4,dt=Math.max(1,Math.round((G=f.width)!=null?G:$e==="horizontal"?200:2)),gt=Math.max(1,Math.round((se=f.height)!=null?se:$e==="horizontal"?2:200)),yt=Math.round(gt/2),it=Math.round(dt/2),$=Ge?` stroke-dasharray="${qe} ${He}"`:"";return $e==="horizontal"?`<svg${U} viewBox="0 0 ${dt} ${gt}" preserveAspectRatio="none" style="${L};z-index:${V}"><line x1="0" y1="${yt}" x2="${dt}" y2="${yt}" stroke="${Et}" stroke-width="${je}"${$} fill="none" /></svg>`:`<svg${U} viewBox="0 0 ${dt} ${gt}" preserveAspectRatio="none" style="${L};z-index:${V}"><line x1="${it}" y1="0" x2="${it}" y2="${gt}" stroke="${Et}" stroke-width="${je}"${$} fill="none" /></svg>`}if(f.type==="chart"){const Le=f.elementId&&f.elementId.trim()?f.elementId.trim():`chart_${m}`;return`<div${U} id="${Le}" style="${L};z-index:${V}">${rr(f.text||"chart")}</div>`}return`<div${U} style="${L};z-index:${V}">${rr(f.text||"")}</div>`}).join(`
      `),Be=us(e),Ce=d!=null&&d.fontFaces&&d.fontFaces.length>0?d.fontFaces.map(f=>`@font-face { font-family: '${f.family.replace(/'/g,"\\'")}'; src: url('/fonts/${f.file}'); font-weight: normal; font-style: normal; }`).join(`
`):"",ne=(()=>{const f=[];return e.forEach((m,L)=>{if(m.type==="chart"){const V=m.elementId&&m.elementId.trim()?m.elementId.trim():`chart_${L}`,U=m.chartOption||{};try{f.push(`'${V.replace(/'/g,"\\'")}' : ${JSON.stringify(U)}`)}catch{f.push(`'${V.replace(/'/g,"\\'")}' : {}`)}}}),`{ ${f.join(", ")} }`})(),j=d!=null&&d.backgroundFileName?`'/imgs/${String(d.backgroundFileName).replace(/'/g,"\\'")}'`:`'${(a.backgroundUrl||"").replace(/'/g,"\\'")}'`;return`import React, { useEffect } from 'react';
${E?`import * as echarts from 'echarts';
`:""}
export default function ${g.replace(/[^A-Za-z0-9_]/g,"_")}() {
  const config = { width: ${Math.round(a.width)}, height: ${Math.round(a.height)}, backgroundColor: '${(a.backgroundColor||"transparent").replace(/'/g,"\\'")}', globalFontFamily: '${(a.globalFontFamily||"").replace(/'/g,"\\'")}', globalFontSize: ${Math.round(a.globalFontSize)}, globalColor: '${a.globalColor}' };
  const backgroundUrl = ${j};
  ${E?`const chartOptions = ${ne};
  useEffect(() => {
    Object.keys(chartOptions || {}).forEach((id) => {
      const el = document.getElementById(id);
      if (el) { const inst = echarts.init(el); inst.setOption(chartOptions[id], true); }
    });
  }, []);
`:""}  const containerStyle = { position:'relative', width: config.width + 'px', height: config.height + 'px', fontFamily: config.globalFontFamily, fontSize: config.globalFontSize + 'px', color: config.globalColor, backgroundColor: config.backgroundColor, ...(backgroundUrl ? { backgroundImage: 'url(' + backgroundUrl + ')', backgroundSize: 'cover', backgroundRepeat: 'no-repeat' } : {}) };
  return (
    <div className="${D}" style={containerStyle}>
      <style>{\`.${P}{display:flex;align-items:center;justify-content:flex-start}.${te}{display:flex;align-items:center;justify-content:center}.${fe}{display:flex;align-items:center;justify-content:flex-end${Ce?"\\n"+Ce:""}${Be?"\\n"+Be:""}\`}</style>
      <div dangerouslySetInnerHTML={{ __html: \`${Ae.replace(/`/g,"\\`")}\` }} />
    </div>
  );
}
`}var Mo=No(Vo()),cs=["placeholder"],ps={key:0,class:"absolute z-10 bg-gray-900 border border-gray-700 rounded w-full mt-1 max-h-40 overflow-auto shadow custom-scrollbar"},gs=["onMousedown"],fs={key:0,class:"px-2 py-2 text-xs text-gray-400"},ys=ol({__name:"SearchableSelect",props:{modelValue:{},options:{},placeholder:{},numeric:{type:Boolean}},emits:["update:modelValue"],setup(g,{emit:a}){const e=g,d=a,S=me(!1),D=me(""),P=me(null),te=me("");let fe=null;const E=me(!1);Yt(()=>e.modelValue,U=>{U==null?D.value="":D.value=String(U)},{immediate:!0});const ie=st(()=>e.options.map(U=>String(U))),Ae=st(()=>{const U=te.value.trim().toLowerCase();return U?ie.value.filter(q=>q.toLowerCase().includes(U)):ie.value});function Be(U){D.value=U;const q=e.numeric?Number(U):U;d("update:modelValue",q),S.value=!1}function Ce(){const U=D.value.trim();if(!U){d("update:modelValue",(e.numeric,null)),S.value=!1;return}const q=e.numeric?Number(U):U;d("update:modelValue",q),S.value=!1}function ne(){E.value=!1,S.value=!0,m(D.value)}function j(){}function f(U){U.key==="Enter"&&Ce()}function m(U){fe&&window.clearTimeout(fe),fe=window.setTimeout(()=>{te.value=U},180)}function L(){E.value=!0,S.value=!0,m(D.value)}function V(U){P.value&&(P.value.contains(U.target)||(S.value=!1))}return dr(()=>{window.addEventListener("click",V),te.value=D.value}),ur(()=>{window.removeEventListener("click",V),fe&&window.clearTimeout(fe)}),(U,q)=>(C(),I("div",{class:"relative",ref_key:"root",ref:P},[ce(l("input",{class:"border border-gray-700 bg-gray-900 text-gray-100 rounded w-full px-2 py-1",placeholder:g.placeholder||"搜索选择或直接输入","onUpdate:modelValue":q[0]||(q[0]=Ve=>D.value=Ve),onInput:L,onFocus:ne,onBlur:j,onKeydown:f},null,40,cs),[[ke,D.value]]),S.value?(C(),I("div",ps,[(C(!0),I(Vt,null,Jt(Ae.value,Ve=>(C(),I("div",{key:Ve,class:"px-2 py-1 hover:bg-gray-700 cursor-pointer text-sm text-gray-100",onMousedown:cr(X=>Be(Ve),["prevent"])},ut(Ve),41,gs))),128)),Ae.value.length===0?(C(),I("div",fs,"无匹配项，回车使用当前输入")):Y("",!0)])):Y("",!0)],512))}}),Tt=ys,bs={class:"space-y-3"},xs={class:"flex items-center justify-between"},ms={class:"inline-flex items-center cursor-pointer"},hs={class:"flex items-center justify-between"},vs={class:"inline-flex items-center cursor-pointer"},$s=ol({__name:"CanvasSettingsPanel",props:{spacingEnabled:{type:Boolean},alignmentEnabled:{type:Boolean}},emits:["update:spacingEnabled","update:alignmentEnabled"],setup(g,{emit:a}){const e=g,d=a,S=st({get:()=>e.spacingEnabled,set:P=>d("update:spacingEnabled",P)}),D=st({get:()=>e.alignmentEnabled,set:P=>d("update:alignmentEnabled",P)});return(P,te)=>(C(),I("div",bs,[te[6]||(te[6]=l("h3",{class:"text-sm font-medium text-cyan-300 border-b border-cyan-500/30 pb-1"},"辅助间距",-1)),l("div",xs,[te[3]||(te[3]=l("label",{class:"text-xs text-gray-400"},"显示间距标注",-1)),l("label",ms,[ce(l("input",{type:"checkbox",class:"sr-only peer","onUpdate:modelValue":te[0]||(te[0]=fe=>S.value=fe)},null,512),[[Ll,S.value]]),te[2]||(te[2]=l("div",{class:"relative w-12 h-6 rounded-full bg-gray-700/60 transition-all duration-200 shadow-inner peer-checked:bg-gradient-to-r peer-checked:from-cyan-600 peer-checked:to-blue-600"},[l("div",{class:"absolute left-0.5 top-0.5 w-5 h-5 bg-white rounded-full shadow transform transition-transform duration-200 peer-checked:translate-x-6"})],-1)),l("span",{class:Ne(["ml-3 text-xs",S.value?"text-cyan-300":"text-gray-300"])},ut(S.value?"已开启":"已关闭"),3)])]),l("div",hs,[te[5]||(te[5]=l("label",{class:"text-xs text-gray-400"},"显示对齐参考线",-1)),l("label",vs,[ce(l("input",{type:"checkbox",class:"sr-only peer","onUpdate:modelValue":te[1]||(te[1]=fe=>D.value=fe)},null,512),[[Ll,D.value]]),te[4]||(te[4]=l("div",{class:"relative w-12 h-6 rounded-full bg-gray-700/60 transition-all duration-200 shadow-inner peer-checked:bg-gradient-to-r peer-checked:from-cyan-600 peer-checked:to-blue-600"},[l("div",{class:"absolute left-0.5 top-0.5 w-5 h-5 bg-white rounded-full shadow transform transition-transform duration-200 peer-checked:translate-x-6"})],-1)),l("span",{class:Ne(["ml-3 text-xs",D.value?"text-cyan-300":"text-gray-300"])},ut(D.value?"已开启":"已关闭"),3)])])]))}}),ws=$s,Es={class:"space-y-3"},ks={key:0,class:"text-sm text-gray-400"},Ss={key:1,class:"space-y-2"},Cs=ol({__name:"LayersList",props:{elements:{},selectedId:{}},emits:["select","reorderTop"],setup(g,{emit:a}){const e=g,d=a,S=st(()=>e.elements),D=me({});function P(ne){D.value[ne]=!D.value[ne]}function te(ne){const j=ne.children;return Array.isArray(j)&&j.length>0}function fe(ne){const j=ne.children;return Array.isArray(j)?j:[]}const E=me(null),ie=me(null);function Ae(ne){const j=(ne.elementId||"").trim(),f=(ne.className||"").trim(),m=(ne.text||"").trim();return j||f||m||ne.id}function Be(ne){const j=String(ne.type||"").toLowerCase();return j==="text"?{label:"文本",cls:"bg-blue-600/30 text-blue-200"}:j==="arc-text"?{label:"环绕",cls:"bg-cyan-600/30 text-cyan-200"}:j==="image"?{label:"图片",cls:"bg-emerald-600/30 text-emerald-200"}:j==="chart"?{label:"图表",cls:"bg-orange-600/30 text-orange-200"}:j==="line"?{label:"线条",cls:"bg-slate-600/30 text-slate-200"}:j==="container"?{label:"容器",cls:"bg-cyan-600/30 text-cyan-200"}:j==="group"?{label:"分组",cls:"bg-purple-600/30 text-purple-200"}:{label:"元素",cls:"bg-gray-600/30 text-gray-200"}}const Ce=ol({name:"LayerNode",props:{node:{type:Object,required:!0},selectedId:{type:String,default:null},depth:{type:Number,default:0},index:{type:Number,default:-1}},emits:["select","reorderTop"],setup(ne,{emit:j}){return()=>{const f=ne.node,m=ne.depth===0,L=f.id===ne.selectedId,V=Be(f),U=nl("div",{class:"flex items-center gap-2"},[m&&ne.index>=0?nl("span",{class:"px-1.5 py-0.5 text-[10px] rounded bg-cyan-600/30 text-cyan-200"},String(ne.index+1)):null,te(f)?nl("button",{class:"px-2 py-1 text-xs bg-gray-700/60 hover:bg-gray-600/60 rounded text-gray-200",onClick:X=>{X.stopPropagation(),P(f.id)},title:D.value[f.id]?"收起":"展开"},D.value[f.id]?"▼":"▶"):null,nl("span",{class:`px-1.5 py-0.5 text-[10px] rounded ${V.cls}`},V.label),nl("span",{class:"text-left text-sm text-gray-100 truncate whitespace-nowrap max-w-[180px]",title:Ae(f)},Ae(f))]),q=nl("div",{class:["bg-gray-800/60 border border-cyan-500/20 rounded-lg px-3 py-2 cursor-grab hover:bg-gray-700/60 transition-colors",L?"ring-2 ring-cyan-400/40 bg-gray-700/70":"",m&&ie.value===ne.index?"border-purple-400":"",ne.depth>0?"ml-3":""].filter(Boolean).join(" "),onClick:()=>j("select",f.id),draggable:m?!0:void 0,onDragstart:X=>{m&&(E.value=ne.index,X.target.classList.add("cursor-grabbing"))},onDragover:X=>{m&&(X.preventDefault(),ie.value=ne.index)},onDragenter:()=>{m&&(ie.value=ne.index)},onDrop:X=>{if(!m)return;X.preventDefault();const G=E.value,se=ne.index;E.value=null,ie.value=null,typeof G=="number"&&typeof se=="number"&&G!==se&&j("reorderTop",{from:G,to:se})},onDragend:X=>{E.value=null,ie.value=null,X.target.classList.remove("cursor-grabbing")}},[U,null]),Ve=D.value[f.id]&&te(f)?nl("div",{class:"mt-2 space-y-2 pl-3"},[...fe(f)].map(X=>nl(Ce,{node:X,selectedId:ne.selectedId,depth:ne.depth+1,index:-1,onSelect:G=>j("select",G)}))):null;return nl("div",{},[q,Ve])}}});return(ne,j)=>(C(),I("div",Es,[j[2]||(j[2]=l("div",{class:"text-xs text-gray-400"},"所有元素按层叠从上到下显示，支持展开分组/容器",-1)),S.value.length===0?(C(),I("div",ks,"暂无元素")):(C(),I("div",Ss,[(C(!0),I(Vt,null,Jt(S.value,(f,m)=>(C(),or(jo(Ce),{key:f.id,node:f,selectedId:g.selectedId,depth:0,index:m,onSelect:j[0]||(j[0]=L=>d("select",L)),onReorderTop:j[1]||(j[1]=L=>d("reorderTop",L))},null,8,["node","selectedId","index"]))),128))]))]))}}),Ms=Cs,Is={class:"w-80 min-w-[300px] bg-gray-900/80 backdrop-blur-sm border border-cyan-500/30 rounded-xl shadow-2xl shadow-cyan-500/20 flex flex-col"},Ns={class:"p-4 space-y-4 overflow-y-auto flex-1 custom-scrollbar"},js={class:"flex items-center gap-2"},Fs={key:0,class:"space-y-2"},As={key:1,class:"space-y-2"},zs={class:"grid grid-cols-2 gap-2"},Os={key:2,class:"space-y-2"},Ds={class:"flex gap-2"},Bs={key:3,class:"space-y-2"},Gs={class:"flex gap-2"},Ts=["value"],Ls={key:4,class:"space-y-3"},Us={class:"space-y-2"},Vs={class:"space-y-2"},Rs={class:"space-y-2"},Ps={key:6,class:"space-y-2 pt-4 border-t border-cyan-500/30"},Ws={class:"relative"},Hs={key:0,class:"fixed inset-0 z-50 flex items-center justify-center"},_s={class:"relative w-[520px] max-w-[90vw] p-4 bg-gray-900/95 backdrop-blur-md border border-emerald-500/40 rounded-xl shadow-2xl"},Js={class:"flex items-center justify-between mb-3"},qs={class:"grid grid-cols-2 gap-2"},Ys={key:7,class:"space-y-3"},Ks=ol({__name:"CanvasSidebar",props:{exportName:{},config:{},fontLibrary:{},spacingEnabled:{type:Boolean},alignmentEnabled:{type:Boolean},elements:{},selectedId:{}},emits:["update:exportName","update:configWidth","update:configHeight","update:backgroundColor","update:globalFontFamily","update:globalFontSize","update:globalColor","update:spacingEnabled","update:alignmentEnabled","backgroundFileChange","openPreview","downloadByFormat","downloadAllFormats","resetCanvas","selectElement","moveElementUp","moveElementDown","moveElementTop","moveElementBottom","reorderTopElements"],setup(g,{emit:a}){const e=g,d=a,S=st({get:()=>e.exportName,set:X=>d("update:exportName",X)}),D=st({get:()=>e.config.width,set:X=>d("update:configWidth",X)}),P=st({get:()=>e.config.height,set:X=>d("update:configHeight",X)}),te=st({get:()=>e.config.backgroundColor||"",set:X=>d("update:backgroundColor",X)}),fe=st({get:()=>e.config.globalFontFamily||"",set:X=>d("update:globalFontFamily",X)}),E=st({get:()=>e.config.globalFontSize||14,set:X=>d("update:globalFontSize",X)}),ie=st({get:()=>e.config.globalColor||"#ffffff",set:X=>d("update:globalColor",X)}),Ae=st({get:()=>e.spacingEnabled,set:X=>d("update:spacingEnabled",X)}),Be=st({get:()=>e.alignmentEnabled,set:X=>d("update:alignmentEnabled",X)});function Ce(X){try{return String(X||"#000000")}catch{return"#000000"}}const ne=st({get:()=>j.value,set:X=>j.value=X}),j=me(!1),f=me("settings");function m(X){d("backgroundFileChange",X)}function L(){d("openPreview")}function V(){j.value=!j.value}function U(X){d("downloadByFormat",X),j.value=!1}function q(){d("downloadAllFormats"),j.value=!1}function Ve(){d("resetCanvas")}return(X,G)=>(C(),I("div",Is,[G[31]||(G[31]=l("div",{class:"p-4 border-b border-cyan-500/30 bg-gradient-to-r from-cyan-600/20 to-blue-600/20 flex-shrink-0"},[l("h2",{class:"text-lg font-bold text-cyan-300 flex items-center gap-2"},[l("span",{class:"w-2 h-2 bg-cyan-400 rounded-full animate-pulse"}),Tl(" 画布设置 ")])],-1)),l("div",Ns,[l("div",js,[l("button",{class:Ne(["px-3 py-1 text-xs rounded bg-gradient-to-r from-cyan-600 to-blue-600 text-white",f.value==="settings"?"":"opacity-50"]),onClick:G[0]||(G[0]=se=>f.value="settings")},"设置",2),l("button",{class:Ne(["px-3 py-1 text-xs rounded bg-gradient-to-r from-purple-600 to-pink-600 text-white",f.value==="layers"?"":"opacity-50"]),onClick:G[1]||(G[1]=se=>f.value="layers")},"容器层级",2)]),f.value==="settings"?(C(),I("div",Fs,[G[21]||(G[21]=l("label",{class:"block text-sm font-medium text-cyan-300"},"组件名称",-1)),ce(l("input",{"onUpdate:modelValue":G[2]||(G[2]=se=>S.value=se),class:"w-full px-3 py-2 bg-gray-800/50 border border-cyan-500/30 rounded-lg text-gray-100 placeholder-gray-400 focus:border-cyan-400 focus:ring-1 focus:ring-cyan-400 focus:outline-none transition-all duration-200",placeholder:"GeneratedComponent"},null,512),[[ke,S.value]])])):Y("",!0),f.value==="settings"?(C(),I("div",As,[G[22]||(G[22]=l("label",{class:"block text-sm font-medium text-cyan-300"},"画布尺寸",-1)),l("div",zs,[ce(l("input",{"onUpdate:modelValue":G[3]||(G[3]=se=>D.value=se),type:"number",class:"px-3 py-2 bg-gray-800/50 border border-cyan-500/30 rounded-lg text-gray-100 focus:border-cyan-400 focus:ring-1 focus:ring-cyan-400 focus:outline-none transition-all duration-200",placeholder:"宽度"},null,512),[[ke,D.value,void 0,{number:!0}]]),ce(l("input",{"onUpdate:modelValue":G[4]||(G[4]=se=>P.value=se),type:"number",class:"px-3 py-2 bg-gray-800/50 border border-cyan-500/30 rounded-lg text-gray-100 focus:border-cyan-400 focus:ring-1 focus:ring-cyan-400 focus:outline-none transition-all duration-200",placeholder:"高度"},null,512),[[ke,P.value,void 0,{number:!0}]])])])):Y("",!0),f.value==="settings"?(C(),I("div",Os,[G[23]||(G[23]=l("label",{class:"block text-sm font-medium text-cyan-300"},"背景图片",-1)),l("div",Ds,[l("input",{type:"file",onChange:m,accept:"image/*",class:"flex-1 text-xs text-gray-300 file:mr-2 file:py-1 file:px-2 file:rounded file:border-0 file:text-xs file:bg-cyan-600 file:text-white hover:file:bg-cyan-500 file:cursor-pointer"},null,32)])])):Y("",!0),f.value==="settings"?(C(),I("div",Bs,[G[24]||(G[24]=l("label",{class:"block text-sm font-medium text-cyan-300"},"背景颜色",-1)),l("div",Gs,[l("input",{value:Ce(te.value),type:"color",onInput:G[5]||(G[5]=se=>d("update:backgroundColor",se.target.value)),class:"w-16 h-8 bg-gray-800/50 border border-cyan-500/30 rounded cursor-pointer"},null,40,Ts),ce(l("input",{"onUpdate:modelValue":G[6]||(G[6]=se=>te.value=se),type:"text",class:"flex-1 px-3 py-2 bg-gray-800/50 border border-cyan-500/30 rounded-lg text-gray-100 placeholder-gray-400 focus:border-cyan-400 focus:ring-1 focus:ring-cyan-400 focus:outline-none transition-all duration-200",placeholder:"#000000 或 rgba(...)"},null,512),[[ke,te.value]])])])):Y("",!0),f.value==="settings"?(C(),I("div",Ls,[G[28]||(G[28]=l("h3",{class:"text-sm font-medium text-cyan-300 border-b border-cyan-500/30 pb-1"},"全局字体设置",-1)),l("div",Us,[G[25]||(G[25]=l("label",{class:"block text-xs text-gray-400"},"字体族",-1)),wt(Tt,{options:g.fontLibrary,modelValue:fe.value,"onUpdate:modelValue":G[7]||(G[7]=se=>fe.value=se),placeholder:"选择字体"},null,8,["options","modelValue"])]),l("div",Vs,[G[26]||(G[26]=l("label",{class:"block text-xs text-gray-400"},"字号 (px)",-1)),ce(l("input",{"onUpdate:modelValue":G[8]||(G[8]=se=>E.value=se),type:"number",class:"w-full px-2 py-1 bg-gray-800/50 border border-cyan-500/30 rounded text-gray-100 text-sm focus:border-cyan-400 focus:ring-1 focus:ring-cyan-400 focus:outline-none transition-all duration-200"},null,512),[[ke,E.value,void 0,{number:!0}]])]),l("div",Rs,[G[27]||(G[27]=l("label",{class:"block text-xs text-gray-400"},"颜色",-1)),ce(l("input",{"onUpdate:modelValue":G[9]||(G[9]=se=>ie.value=se),type:"color",class:"w-full h-8 bg-gray-800/50 border border-cyan-500/30 rounded cursor-pointer"},null,512),[[ke,ie.value]])])])):Y("",!0),f.value==="settings"?(C(),or(ws,{key:5,spacingEnabled:Ae.value,alignmentEnabled:Be.value,"onUpdate:spacingEnabled":G[10]||(G[10]=se=>Ae.value=se),"onUpdate:alignmentEnabled":G[11]||(G[11]=se=>Be.value=se)},null,8,["spacingEnabled","alignmentEnabled"])):Y("",!0),f.value==="settings"?(C(),I("div",Ps,[l("button",{onClick:L,class:"w-full px-4 py-2 bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-500 hover:to-blue-500 text-white rounded-lg font-medium transition-all duration-200 transform hover:scale-105 shadow-lg shadow-cyan-500/25"},"预览（新窗口）"),l("div",Ws,[l("button",{onClick:V,class:"w-full px-4 py-2 bg-gradient-to-r from-emerald-600 to-cyan-600 hover:from-emerald-500 hover:to-cyan-500 text-white rounded-lg font-medium transition-all duration-200 transform hover:scale-105 shadow-lg shadow-emerald-500/25"},"导出"),ne.value?(C(),I("div",Hs,[l("div",{class:"absolute inset-0 bg-black/60",onClick:G[12]||(G[12]=se=>ne.value=!1)}),l("div",_s,[l("div",Js,[G[29]||(G[29]=l("h3",{class:"text-sm font-medium text-emerald-300"},"选择导出格式",-1)),l("button",{class:"px-2 py-1 text-xs bg-gray-700/60 hover:bg-gray-600/60 rounded text-gray-200",onClick:G[13]||(G[13]=se=>ne.value=!1)},"关闭")]),l("div",qs,[l("button",{onClick:G[14]||(G[14]=se=>U("vue2")),class:"px-3 py-2 text-xs bg-gradient-to-r from-emerald-600 to-cyan-600 hover:from-emerald-500 hover:to-cyan-500 text-white rounded"},"Vue2 组件"),l("button",{onClick:G[15]||(G[15]=se=>U("vue3")),class:"px-3 py-2 text-xs bg-gradient-to-r from-teal-600 to-cyan-600 hover:from-teal-500 hover:to-cyan-500 text-white rounded"},"Vue3 组件"),l("button",{onClick:G[16]||(G[16]=se=>U("react")),class:"px-3 py-2 text-xs bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-500 hover:to-purple-500 text-white rounded"},"React 组件"),l("button",{onClick:G[17]||(G[17]=se=>U("html")),class:"px-3 py-2 text-xs bg-gradient-to-r from-slate-600 to-gray-700 hover:from-slate-500 hover:to-gray-600 text-white rounded"},"纯 HTML 页面"),l("button",{onClick:G[18]||(G[18]=se=>q()),class:"px-3 py-2 text-xs bg-gradient-to-r from-emerald-600 to-teal-600 hover:from-emerald-500 hover:to-teal-500 text-white rounded col-span-2"},"一键导出（全部）")])])])):Y("",!0)]),l("button",{onClick:Ve,class:"w-full px-4 py-2 bg-gradient-to-r from-red-600 to-pink-600 hover:from-red-500 hover:to-pink-500 text-white rounded-lg font-medium transition-all duration-200 transform hover:scale-105 shadow-lg shadow-red-500/25"},"清空画布")])):Y("",!0),f.value==="layers"?(C(),I("div",Ys,[G[30]||(G[30]=l("h3",{class:"text-sm font-medium text-purple-300 border-b border-purple-500/30 pb-1"},"容器层级",-1)),wt(Ms,{elements:e.elements||[],selectedId:e.selectedId||null,onSelect:G[19]||(G[19]=se=>d("selectElement",se)),onReorderTop:G[20]||(G[20]=se=>d("reorderTopElements",se))},null,8,["elements","selectedId"])])):Y("",!0)])]))}}),Xs=Ks,Io=No(Wo()),Zs={class:"relative w-full"},Qs=ol({__name:"CssEditor",props:{modelValue:{},height:{},debounceMs:{}},emits:["update:modelValue"],setup(g,{emit:a}){const e=g,d=a,S=me(e.modelValue||"");let D=null;const P=typeof e.debounceMs=="number"?Math.max(0,e.debounceMs):250;Yt(()=>e.modelValue,Ae=>{D&&(clearTimeout(D),D=null);const Be=Ae||"";Be!==S.value&&(S.value=Be)}),Yt(S,Ae=>{D&&clearTimeout(D),D=window.setTimeout(()=>{d("update:modelValue",Ae),D=null},P)}),ur(()=>{D&&(clearTimeout(D),D=null)});function te(){const Ae=S.value||"";if(navigator.clipboard&&typeof navigator.clipboard.writeText=="function")navigator.clipboard.writeText(Ae).catch(()=>{try{const Be=document.createElement("textarea");Be.value=Ae,document.body.appendChild(Be),Be.select(),document.execCommand("copy"),document.body.removeChild(Be)}catch{}});else try{const Be=document.createElement("textarea");Be.value=Ae,document.body.appendChild(Be),Be.select(),document.execCommand("copy"),document.body.removeChild(Be)}catch{}}function fe(){D&&(clearTimeout(D),D=null),S.value="",d("update:modelValue","")}const E=[Go,To(),Uo],ie=st(()=>{var Ae;return(Ae=e.height)!=null?Ae:"180px"});return(Ae,Be)=>(C(),I("div",Zs,[l("div",{class:"absolute right-2 top-2 z-10 flex gap-2"},[l("button",{type:"button",class:"px-2 py-1 text-xs bg-gray-700/70 hover:bg-gray-700 text-gray-100 rounded",onClick:te},"复制"),l("button",{type:"button",class:"px-2 py-1 text-xs bg-red-600/70 hover:bg-red-600 text-white rounded",onClick:fe},"清空")]),wt(jo(Lo),{modelValue:S.value,"onUpdate:modelValue":Be[0]||(Be[0]=Ce=>S.value=Ce),extensions:E,style:Bt({height:ie.value,width:"100%"}),class:"w-full rounded border border-purple-500/30 bg-gray-800/50"},null,8,["modelValue","style"])]))}}),ea=pr(Qs,[["__scopeId","data-v-c1c6cbbe"]]);function ta(g,a,e,d,S,D){g&&(g.style=g.style||{},g.style.boxShadow=`${a}px ${e}px ${d}px ${S}px ${D}`)}function la(g){g.style=g.style||{},g.style.textGradient=g.style.textGradient||{colors:["#00A3FF","#ffffff"],angle:0}}function ra(g){g.style=g.style||{},g.style.backgroundGradient=g.style.backgroundGradient||{colors:["#00A3FF","#ffffff"],angle:90}}function na(g,a){var ie,Ae,Be;const e=(ie=a==null?void 0:a.maxDepth)!=null?ie:6,d=(Ae=a==null?void 0:a.maxEntries)!=null?Ae:400,S=(Be=a==null?void 0:a.includeIntermediate)!=null?Be:!1,D=[],P=new WeakSet;function te(Ce){return Object.prototype.toString.call(Ce)==="[object Object]"}function fe(Ce){D.length<d&&D.push(Ce)}function E(Ce,ne,j){if(!(j>e)&&Ce!=null){if(typeof Ce!="object"){fe(ne);return}if(!P.has(Ce)){if(P.add(Ce),Array.isArray(Ce)){fe(ne);const f=Math.min(Ce.length,20);for(let m=0;m<f;m++)E(Ce[m],`${ne}[${m}]`,j+1);return}if(te(Ce)){S&&fe(ne);const f=Object.keys(Ce).slice(0,50);for(const m of f)E(Ce[m],ne?`${ne}.${m}`:m,j+1);return}fe(ne)}}}return E(g,"",0),D.filter(Boolean)}function Bo(g,a){try{if(!g||!a)return"";const e=a.replace(/\[(\d+)\]/g,".$1").replace(/\['([^']+)'\]/g,".$1").replace(/\["([^\"]+)"\]/g,".$1").split(".").filter(Boolean);let d=g;for(const S of e){if(d==null)return"";d=d[S]}return typeof d=="object"?JSON.stringify(d):d!=null?d:""}catch{return""}}function oa(g,a){var S;if(!a||!((S=a.dynamic)!=null&&S.enabled)||!a.dynamic.objectName||!a.dynamic.propertyPath)return"";const e=a.dynamic,d=g[e.objectName];return String(Bo(d,e.propertyPath))}var sa={class:"w-80 min-w-[300px] bg-gray-900/80 backdrop-blur-sm border border-purple-500/30 rounded-xl shadow-2xl shadow-purple-500/20 flex flex-col"},aa={key:0,class:"p-4 space-y-4 overflow-y-auto flex-1 custom-scrollbar"},ia={class:"space-y-3"},da={class:"grid grid-cols-2 gap-2"},ua={class:"col-span-2"},ca={key:0,class:"space-y-3"},pa={class:"text-[10px] text-gray-400 mb-1"},ga={class:"grid grid-cols-4 gap-2"},fa={key:1,class:"space-y-3"},ya={class:"text-[10px] text-gray-400 mb-1"},ba={class:"grid grid-cols-2 gap-2"},xa={class:"col-span-2"},ma={class:"flex gap-2"},ha=["value"],va={key:2,class:"space-y-3"},$a={class:"space-y-2 bg-gray-800/30 p-2 rounded"},wa={class:"flex items-center justify-between"},Ea=["checked"],ka=["value"],Sa={class:"space-y-2 bg-gray-800/30 p-2 rounded"},Ca={class:"space-y-2"},Ma={class:"flex gap-1"},Ia=["value"],Na={class:"flex gap-1"},ja=["value"],Fa={class:"grid grid-cols-2 gap-2"},Aa={class:"flex gap-1"},za=["value"],Oa={class:"flex gap-1"},Da=["value"],Ba={class:"space-y-2 bg-gray-800/30 p-2 rounded"},Ga={class:"grid grid-cols-2 gap-2"},Ta={class:"flex items-center gap-1"},La=["value"],Ua=["value"],Va=["value"],Ra=["value"],Pa=["value"],Wa=["value"],Ha={class:"space-y-2"},_a={class:"flex items-center justify-between border-b border-gray-700 pb-1"},Ja={class:"flex justify-between mb-1"},qa={class:"text-[10px] text-gray-500"},Ya=["onClick"],Ka={class:"space-y-1"},Xa={class:"flex gap-1"},Za=["value","onInput"],Qa=["onClick"],ei=["value","onInput"],ti={class:"w-96 bg-gray-900 border border-purple-500/30 rounded-lg shadow-2xl p-4 flex flex-col max-h-[80vh]"},li={class:"flex justify-between items-center mb-4 border-b border-gray-700 pb-2"},ri={key:0,class:"flex-1 overflow-y-auto custom-scrollbar p-1"},ni={class:"grid grid-cols-4 gap-2"},oi=["onClick"],si=["src","alt"],ai={key:1,class:"flex-1 flex items-center justify-center text-gray-500 text-xs"},ii={key:4,class:"space-y-3"},di={class:"space-y-2"},ui={class:"grid grid-cols-2 gap-2"},ci={class:"grid grid-cols-2 gap-2"},pi={class:"grid grid-cols-2 gap-2"},gi=["value"],fi=["value"],yi={class:"space-y-2"},bi={class:"flex gap-1"},xi=["value"],mi=["value"],hi={class:"space-y-2"},vi={class:"grid grid-cols-3 gap-1"},$i={class:"space-y-2"},wi={class:"grid grid-cols-2 gap-2"},Ei=["value"],ki=["value"],Si=["value"],Ci=["value"],Mi={class:"grid grid-cols-4 gap-1"},Ii={class:"space-y-3"},Ni={class:"flex items-center justify-between"},ji={class:"inline-flex items-center cursor-pointer"},Fi={key:0,class:"grid grid-cols-2 gap-2"},Ai={key:1},zi={class:"space-y-3"},Oi={class:"space-y-2"},Di={class:"flex items-center justify-between"},Bi={key:0},Gi={class:"flex gap-2"},Ti={key:1},Li={key:2},Ui={key:3,class:"space-y-2 pt-2 border-t border-purple-500/20"},Vi={class:"flex items-center justify-between"},Ri={class:"inline-flex items-center cursor-pointer"},Pi=["checked"],Wi={key:0,class:"space-y-1"},Hi=["value"],_i={key:5,class:"space-y-3"},Ji={class:"flex items-center gap-2"},qi=["value"],Yi=["value"],Ki={class:"space-y-2"},Xi={class:"flex items-center justify-between"},Zi={class:"flex items-center gap-1 text-xs text-gray-300"},Qi=["checked"],ed={key:0,class:"grid grid-cols-3 gap-2 items-end"},td={class:"flex items-center gap-2"},ld=["value"],rd=["value"],nd={class:"flex items-center gap-2"},od=["value"],sd=["value"],ad={class:"space-y-1"},id=["value"],dd=["value"],ud={class:"space-y-2"},cd={class:"flex items-center justify-between"},pd={class:"flex items-center gap-1 text-xs text-gray-300"},gd=["checked"],fd={key:0,class:"space-y-1"},yd={class:"flex items-center gap-2"},bd={key:0,class:"space-y-1"},xd=["value"],md=["value"],hd={key:1,class:"space-y-1"},vd=["value"],$d={class:"flex items-center gap-1"},wd=["value"],Ed={class:"space-y-2"},kd={class:"flex items-center justify-between"},Sd={class:"flex items-center gap-1 text-xs text-gray-300"},Cd=["checked"],Md={key:0,class:"space-y-2"},Id=["value"],Nd={class:"space-y-1"},jd={class:"flex items-center gap-2"},Fd=["value"],Ad=["value"],zd={class:"space-y-1"},Od={class:"flex items-center gap-2"},Dd=["value"],Bd=["value"],Gd={class:"space-y-1"},Td={class:"flex items-center gap-2"},Ld=["value"],Ud=["value"],Vd={class:"space-y-1"},Rd={class:"flex items-center gap-2"},Pd=["value"],Wd=["value"],Hd={class:"space-y-1"},_d={key:0,class:"flex items-center gap-2"},Jd=["value"],qd=["value"],Yd={key:6,class:"space-y-3"},Kd={class:"flex items-center gap-2"},Xd={key:0,class:"space-y-2"},Zd=["value"],Qd={class:"grid grid-cols-2 gap-2"},eu=["value"],tu=["value"],lu={key:0,class:"grid grid-cols-2 gap-2"},ru=["value"],nu=["value"],ou={key:1,class:"grid grid-cols-2 gap-2"},su={key:2,class:"grid grid-cols-3 gap-2 items-end"},au={key:1},iu={class:"flex items-center justify-between mt-2"},du={key:0,class:"text-xs text-red-400"},uu={key:7,class:"space-y-3"},cu={class:"space-y-2"},pu={class:"flex gap-1"},gu=["value"],fu=["value"],yu={class:"grid grid-cols-2 gap-2"},bu={class:"grid grid-cols-2 gap-1"},xu=["value"],mu={class:"grid grid-cols-2 gap-2"},hu=["value"],vu={key:0},$u=["value"],wu={key:0,class:"grid grid-cols-2 gap-2"},Eu=["value"],ku={key:8,class:"space-y-3"},Su={class:"flex items-center justify-between mb-2"},Cu={class:"flex bg-gray-800/50 rounded p-0.5 border border-purple-500/30"},Mu={key:0,class:"space-y-2"},Iu={class:"space-y-2 mt-2"},Nu={class:"flex items-center gap-2"},ju=["checked"],Fu={key:0,class:"space-y-2 p-2 bg-gray-800/30 rounded"},Au={class:"text-xs text-gray-400"},zu={key:1,class:"space-y-2"},Ou={class:"flex items-center justify-between mb-1"},Du={class:"text-[10px] text-gray-500"},Bu=["onClick"],Gu={class:"mb-2"},Tu={class:"flex items-center gap-2 mb-1"},Lu={class:"inline-flex items-center cursor-pointer"},Uu=["onUpdate:modelValue"],Vu={key:0},Ru=["onUpdate:modelValue"],Pu={key:1,class:"space-y-1"},Wu=["onUpdate:modelValue"],Hu=["onUpdate:modelValue"],_u={class:"text-[10px] text-gray-500"},Ju={class:"space-y-2 mt-2 border-t border-gray-700/50 pt-2"},qu={class:"flex items-center gap-2"},Yu=["value","onInput"],Ku=["value","onInput"],Xu={class:"grid grid-cols-2 gap-2"},Zu=["value","onChange"],Qu=["value"],ec=["value","onInput"],tc=["value","onChange"],lc={class:"space-y-2"},rc={class:"grid grid-cols-2 gap-1"},nc={class:"grid grid-cols-2 gap-2"},oc={class:"grid grid-cols-2 gap-2"},sc={class:"grid grid-cols-2 gap-2"},ac=["value"],ic=["value"],dc={class:"space-y-2"},uc=["value"],cc={class:"space-y-2"},pc={class:"flex gap-1"},gc=["value","disabled"],fc=["value","disabled"],yc={key:0,class:"text-xs text-yellow-400 mt-1"},bc={class:"space-y-2"},xc={class:"flex gap-1"},mc=["value"],hc=["value"],vc={class:"space-y-2"},$c={class:"grid grid-cols-4 gap-1"},wc={class:"space-y-2"},Ec={class:"grid grid-cols-2 gap-1"},kc={class:"space-y-2"},Sc={class:"flex items-center gap-2"},Cc={class:"flex items-center gap-2 mt-1"},Mc={class:"space-y-2"},Ic={class:"flex items-center justify-between"},Nc={class:"flex gap-1"},jc={key:0,class:"grid grid-cols-3 gap-2 items-center"},Fc={class:"col-span-1"},Ac={class:"col-span-1"},zc={class:"col-span-1"},Oc={class:"space-y-2"},Dc={class:"grid grid-cols-3 gap-1"},Bc={class:"space-y-2"},Gc={class:"flex items-center justify-between"},Tc={class:"flex gap-1"},Lc={key:0,class:"space-y-2 p-2 bg-gray-800/30 rounded"},Uc={class:"grid grid-cols-2 gap-2"},Vc={class:"flex gap-1"},Rc={class:"flex gap-1"},Pc={class:"block text-xs text-gray-400 mb-1"},Wc={class:"space-y-2"},Hc={class:"flex items-center justify-between"},_c={class:"flex gap-1"},Jc={key:0,class:"space-y-2 p-2 bg-gray-800/30 rounded"},qc={class:"grid grid-cols-2 gap-2"},Yc={class:"flex gap-1"},Kc={class:"flex gap-1"},Xc={class:"block text-xs text-gray-400 mb-1"},Zc={key:9,class:"space-y-3"},Qc={class:"space-y-2"},e0={class:"space-y-2"},t0={class:"max-h-32 overflow-y-auto custom-scrollbar bg-gray-800/30 rounded p-2"},l0={class:"grid grid-cols-4 gap-2"},r0=["onClick"],n0=["src","alt"],o0={class:"space-y-2"},s0={class:"grid grid-cols-2 gap-2"},a0={key:0,class:"space-y-2"},i0={class:"max-h-32 overflow-y-auto custom-scrollbar bg-gray-800/30 rounded p-2"},d0={class:"grid grid-cols-4 gap-2"},u0=["onClick"],c0=["src","alt"],p0={key:0,class:"text-xs text-gray-500 text-center py-2"},g0={class:"space-y-2"},f0={class:"grid grid-cols-2 gap-2"},y0={class:"grid grid-cols-3 gap-2"},b0={class:"space-y-2"},x0={class:"pt-4 border-t border-purple-500/30 space-y-2"},m0={key:1,class:"p-4 text-center text-gray-400 flex-1 flex flex-col justify-center"},h0={},v0=ol({...h0,__name:"ElementSettingsPanel",props:{selectedEl:{},config:{},fontLibrary:{},fontSizeLibrary:{},fontWeightOptions:{},fontStyleOptions:{},databaseObjects:{},dbMap:{},iconLibrary:{},defaultChartOption:{type:Function},safeHex:{type:Function},initCustomClassSkeleton:{type:Function},refreshAllCustomClassCss:{type:Function},removeCustomClassCssForElement:{type:Function},getIconDataUrlById:{type:Function},selectedParentIsFlex:{type:Boolean}},emits:["duplicateSelected","removeSelected","saveSelectedAsComponent","positionChanged"],setup(g,{emit:a}){const e=g,d=a,S=me(!1),D=me(null);function P($){D.value=$,S.value=!0}function te($){if(!e.selectedEl||!D.value)return;const t=D.value;if(t.type==="carousel-highlight")e.selectedEl.carouselConfig&&(e.selectedEl.carouselConfig.frameHighlight=$.url);else if(t.type==="carousel-normal")e.selectedEl.carouselConfig&&(e.selectedEl.carouselConfig.frameNormal=$.url);else if(t.type==="carousel-left")e.selectedEl.carouselConfig&&(e.selectedEl.carouselConfig.arrowLeft=$.url);else if(t.type==="carousel-right")e.selectedEl.carouselConfig&&(e.selectedEl.carouselConfig.arrowRight=$.url);else if(t.type==="carousel-slide"&&t.slideIndex!==void 0&&e.selectedEl.slides&&e.selectedEl.slides[t.slideIndex]){const pe=e.selectedEl.slides[t.slideIndex];pe&&(pe.src=$.url)}S.value=!1,D.value=null}const fe=me("visual"),E=me(""),ie=me("");Yt(()=>{var $;return($=e.selectedEl)==null?void 0:$.id},()=>{var t;const $=e.selectedEl;$&&$.type==="chart"&&(fe.value="visual",ie.value="",E.value=JSON.stringify((t=$.chartOption)!=null?t:e.defaultChartOption($.chartType||"line"),null,2))});const Ae=st(()=>{var pe,Qe;const $=(Qe=(pe=e.selectedEl)==null?void 0:pe.dynamic)==null?void 0:Qe.objectName;if(!$)return[];const t=e.dbMap[$];try{return na(t,{maxDepth:6,maxEntries:400})}catch{return[]}});function Be($){return oa(e.dbMap,$)}function Ce($){const t=e.selectedEl;t&&($===void 0?delete t.position:t.position=$,d("positionChanged"))}function ne($){return typeof $=="string"&&$.trim().endsWith("%")?"%":"px"}function j($){if($==null)return 0;if(typeof $=="number")return $;const t=String($).trim();if(t.endsWith("%")){const Qe=Number(t.replace("%",""));return Number.isFinite(Qe)?Qe:0}const pe=Number(t.replace("px",""));return Number.isFinite(pe)?pe:0}function f($,t){const pe=e.selectedEl;pe&&(pe.style=pe.style||{},pe.style.borderRadius=`${$}${t}`)}function m($){const t={x:0,y:8,blur:24,spread:0,color:"#000000"};if(!$||!$.trim())return t;const pe=$.split(/\s+/).filter(Boolean);if(pe.length<3)return t;const Qe=pe.slice(0,4).map(nt=>Number(String(nt).replace("px",""))),mt=pe.slice(4).join(" ")||t.color,[jt=NaN,r=NaN,re=NaN,Z=NaN]=Qe;return{x:Number.isFinite(jt)?jt:t.x,y:Number.isFinite(r)?r:t.y,blur:Number.isFinite(re)?re:t.blur,spread:Number.isFinite(Z)?Z:t.spread,color:mt}}function L($,t,pe,Qe,mt){ta(e.selectedEl,$,t,pe,Qe,mt)}function V($){la($)}function U($){ra($)}function q(){ie.value="";try{const $=JSON.parse(E.value);e.selectedEl&&e.selectedEl.type==="chart"&&(e.selectedEl.chartOption=$)}catch($){ie.value=`JSON 解析失败：${($==null?void 0:$.message)||String($)}`}}function Ve($,t){if(!e.selectedEl||e.selectedEl.type!=="chart"||!e.selectedEl.chartOption)return;const pe=e.selectedEl.chartOption,Qe=pe.series||[],mt={type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:$},{offset:1,color:t}],global:!1};Qe.forEach(jt=>{jt.type==="bar"&&(jt.itemStyle=jt.itemStyle||{},jt.itemStyle.color=mt)}),E.value=JSON.stringify(pe,null,2)}function X(){const $=e.selectedEl;return!$||$.type!=="chart"?null:($.chartOption||($.chartOption=e.defaultChartOption($.chartType||"line")),$.chartOption)}function G($){const t=X();t&&(t.title=t.title||{},t.title.text=$,E.value=JSON.stringify(t,null,2))}function se($){const t=X();t&&(t.color=$.split(",").map(pe=>pe.trim()).filter(Boolean),E.value=JSON.stringify(t,null,2))}function Le($){const t=X();t&&(t.legend=t.legend||{},t.legend.show=$==="1",E.value=JSON.stringify(t,null,2))}function Et($){var pe;const t=(pe=$.target.files)==null?void 0:pe[0];if(t&&e.selectedEl){const Qe=new FileReader;Qe.onload=()=>{e.selectedEl&&(e.selectedEl.src=String(Qe.result),e.selectedEl.iconId=void 0)},Qe.readAsDataURL(t)}}async function je($){const t=e.selectedEl;if(!t||t.type!=="image")return;const pe=await e.getIconDataUrlById($.id);if(!pe)return;t.src=pe,t.iconId=$.id;const Qe=new Image;Qe.onload=()=>{e.selectedEl&&e.selectedEl.id===t.id&&(e.selectedEl.width=Qe.naturalWidth,e.selectedEl.height=Qe.naturalHeight)},Qe.src=pe}function $e(){const $=e.selectedEl;if(!$||$.type!=="image"||!$.src)return;$.autoSize=!0;const t=new Image;t.onload=()=>{e.selectedEl&&e.selectedEl.id===$.id&&(e.selectedEl.width=t.naturalWidth,e.selectedEl.height=t.naturalHeight)},t.src=$.src}function Ge(){e.selectedEl&&(e.selectedEl.autoSize=!1)}function qe($){const t=e.selectedEl;!t||t.type!=="image"||(t.highlightSrc=$.url,t.highlightIconId=$.id,t.highlightEnabled=!0)}const He=st({get(){const $=e.selectedEl;return!!($&&$.eventBinding&&$.eventBinding.enabled)},set($){const t=e.selectedEl;t&&(t.eventBinding=t.eventBinding||{enabled:!1,cursor:"pointer",handlerName:"handleClick",code:""},t.eventBinding.enabled=$,(t.eventBinding.handlerName==null||String(t.eventBinding.handlerName).trim()==="")&&(t.eventBinding.handlerName="handleClick"),(t.eventBinding.cursor==null||String(t.eventBinding.cursor).trim()==="")&&(t.eventBinding.cursor="pointer"),t.eventBinding.code==null&&(t.eventBinding.code=""))}}),dt=st({get(){var $,t;return(t=($=e.selectedEl)==null?void 0:$.eventBinding)==null?void 0:t.cursor},set($){const t=e.selectedEl;t&&(t.eventBinding=t.eventBinding||{enabled:!0,cursor:"pointer",handlerName:"handleClick",code:""},t.eventBinding.cursor=$)}}),gt=st({get(){var $,t;return(t=($=e.selectedEl)==null?void 0:$.eventBinding)==null?void 0:t.handlerName},set($){const t=e.selectedEl;t&&(t.eventBinding=t.eventBinding||{enabled:!0,cursor:"pointer",handlerName:"handleClick",code:""},t.eventBinding.handlerName=$)}}),yt=st({get(){var $,t;return(t=($=e.selectedEl)==null?void 0:$.eventBinding)==null?void 0:t.code},set($){const t=e.selectedEl;t&&(t.eventBinding=t.eventBinding||{enabled:!0,cursor:"pointer",handlerName:"handleClick",code:""},t.eventBinding.code=$)}});function it($){if(!$.dynamic||!$.dynamicObj||!$.dynamicPath)return $.text||"";if(!e.dbMap)return"(No DB)";const t=e.dbMap[$.dynamicObj];if(!t)return"(对象不存在)";const pe=Bo(t,$.dynamicPath);return pe==null||pe===""?"(空)":String(pe)}return($,t)=>{var pe,Qe,mt,jt,r,re,Z,nt,Re,_e,Ee,ue,lt,Rt,Lt,Kt,rl,ct,bt,Pt,sl,qt,Xt,ht,al,dl,ul,Zt,Qt,Wt,cl,pl,gl,at,pt,oe,ze,xt,Me,vt,Ie,et,Oe,De,kt,St,tt,Pe,we,Se,rt,Ft,Te,$t,Gt,ft,el,yl,Ul,Vl,Ct,il,Rl,Pl,Sl,Cl,Ml,Wl,fl,bl,xl,ml,Il,Nl,Hl,jl,tl,Ot,_l,Jl,ql,Yl,Kl,Xl,Fl,hl,vl,Al,$l,wl,Zl,Ht,zl,Ql,Ol,Dl,er,Bl,n,o,i,u,b,x,F,N,A,z,c,p,T,H,ae,he,Fe,de,ve,Q,ee,R,le,We,y,h,W,O,B,K,M,_,v,J,ye,be,Ue,Je,ot,At,Nt,Dt,Mt,_t,zt,ll,El,tr,gr,fr,yr,br,xr,mr,hr,vr,$r,wr,Er,kr,Sr,Cr,Mr,Ir,Nr,jr,Fr,Ar,zr,Or,Dr,Br,Gr,Tr,Lr,Ur,Vr,Rr,Pr,Wr,Hr,_r,Jr,qr,Yr,Kr,Xr,Zr,Qr,en,tn,ln,rn,nn,on,sn,an,dn,un,cn,pn,gn,fn,yn,bn,xn,mn,hn,vn,$n,wn,En,kn,Sn,Cn,Mn,In,Nn,jn,Fn,An,zn,On,Dn,Bn,Gn,Tn,Ln,Un,Vn,Rn,Pn,Wn,Hn,_n,Jn,qn,Yn,Kn,Xn,Zn,Qn,eo,to,lo,ro,no,oo,so,ao,io,uo,co,po,go,fo,yo,bo,xo,mo,ho;return C(),I("div",sa,[t[343]||(t[343]=l("div",{class:"p-4 border-b border-purple-500/30 bg-gradient-to-r from-purple-600/20 to-pink-600/20 flex-shrink-0"},[l("h2",{class:"text-lg font-bold text-purple-300 flex items-center gap-2"},[l("span",{class:"w-2 h-2 bg-purple-400 rounded-full animate-pulse"}),Tl(" 元素设置 ")])],-1)),e.selectedEl?(C(),I("div",aa,[l("div",ia,[t[183]||(t[183]=l("h3",{class:"text-sm font-medium text-purple-300 border-b border-purple-500/30 pb-1"},"位置和尺寸",-1)),l("div",da,[l("div",null,[t[178]||(t[178]=l("label",{class:"block text-xs text-gray-400 mb-1"},"X",-1)),ce(l("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>e.selectedEl.left=s),type:"number",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,512),[[ke,e.selectedEl.left,void 0,{number:!0}]])]),l("div",null,[t[179]||(t[179]=l("label",{class:"block text-xs text-gray-400 mb-1"},"Y",-1)),ce(l("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>e.selectedEl.top=s),type:"number",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,512),[[ke,e.selectedEl.top,void 0,{number:!0}]])]),l("div",null,[t[180]||(t[180]=l("label",{class:"block text-xs text-gray-400 mb-1"},"宽度",-1)),ce(l("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>e.selectedEl.width=s),type:"number",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,512),[[ke,e.selectedEl.width,void 0,{number:!0}]])]),l("div",null,[t[181]||(t[181]=l("label",{class:"block text-xs text-gray-400 mb-1"},"高度",-1)),ce(l("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>e.selectedEl.height=s),type:"number",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,512),[[ke,e.selectedEl.height,void 0,{number:!0}]])]),l("div",ua,[t[182]||(t[182]=l("label",{class:"block text-xs text-gray-400 mb-1"},"层级（z-index）",-1)),ce(l("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>e.selectedEl.zIndex=s),type:"number",min:"0",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,512),[[ke,e.selectedEl.zIndex,void 0,{number:!0}]])])])]),e.selectedEl?(C(),I("div",ca,[t[184]||(t[184]=l("h3",{class:"text-sm font-medium text-purple-300 border-b border-purple-500/30 pb-1"},"定位模式",-1)),l("div",pa," 父容器布局："+ut(e.selectedParentIsFlex?"Flex":"非 Flex"),1),l("div",ga,[l("button",{onClick:t[5]||(t[5]=()=>Ce(void 0)),class:Ne(["px-2 py-1 text-xs rounded transition-colors duration-200",e.selectedEl.position?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-purple-600 text-white"])},"自动",2),l("button",{onClick:t[6]||(t[6]=()=>Ce("absolute")),class:Ne(["px-2 py-1 text-xs rounded transition-colors duration-200",e.selectedEl.position==="absolute"?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"])},"绝对",2),l("button",{onClick:t[7]||(t[7]=()=>Ce("relative")),class:Ne(["px-2 py-1 text-xs rounded transition-colors duration-200",e.selectedEl.position==="relative"?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"])},"相对",2),l("button",{onClick:t[8]||(t[8]=()=>Ce("static")),class:Ne(["px-2 py-1 text-xs rounded transition-colors duration-200",e.selectedEl.position==="static"?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"])},"静态",2)]),t[185]||(t[185]=l("div",{class:"text-[10px] text-gray-400"}," 规则：自动模式下，父容器为Flex时默认“静态”，否则默认“绝对”；选择“静态”可参与流式排版。 ",-1))])):Y("",!0),e.selectedEl&&e.selectedEl.type==="container"?(C(),I("div",fa,[t[191]||(t[191]=l("h3",{class:"text-sm font-medium text-purple-300 border-b border-purple-500/30 pb-1"},"容器布局",-1)),l("div",ya," 当前容器布局："+ut((((pe=e.selectedEl.style)==null?void 0:pe.display)||"无")==="flex"?"Flex":"Block/无"),1),l("div",ba,[l("div",xa,[t[186]||(t[186]=l("label",{class:"block text-xs text-gray-400 mb-1"},"布局模式",-1)),l("div",ma,[l("button",{onClick:t[9]||(t[9]=()=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.display="block")}),class:Ne(["px-2 py-1 text-xs rounded transition-colors duration-200",(((Qe=e.selectedEl.style)==null?void 0:Qe.display)||"block")==="block"?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"])},"Block",2),l("button",{onClick:t[10]||(t[10]=()=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.display="flex")}),class:Ne(["px-2 py-1 text-xs rounded transition-colors duration-200",(((mt=e.selectedEl.style)==null?void 0:mt.display)||"block")==="flex"?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"])},"Flex",2)])]),l("div",null,[t[187]||(t[187]=l("label",{class:"block text-xs text-gray-400 mb-1"},"方向",-1)),wt(Tt,{options:["row","column"],modelValue:((jt=e.selectedEl.style)==null?void 0:jt.flexDirection)||"row","onUpdate:modelValue":t[11]||(t[11]=s=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.flexDirection=s)})},null,8,["modelValue"])]),l("div",null,[t[188]||(t[188]=l("label",{class:"block text-xs text-gray-400 mb-1"},"纵向对齐（alignItems）",-1)),wt(Tt,{options:["stretch","flex-start","center","flex-end","baseline"],modelValue:((r=e.selectedEl.style)==null?void 0:r.alignItems)||"center","onUpdate:modelValue":t[12]||(t[12]=s=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.alignItems=s)})},null,8,["modelValue"])]),l("div",null,[t[189]||(t[189]=l("label",{class:"block text-xs text-gray-400 mb-1"},"横向分布（justifyContent）",-1)),wt(Tt,{options:["flex-start","center","flex-end","space-between","space-around"],modelValue:((re=e.selectedEl.style)==null?void 0:re.justifyContent)||"flex-start","onUpdate:modelValue":t[13]||(t[13]=s=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.justifyContent=s)})},null,8,["modelValue"])]),l("div",null,[t[190]||(t[190]=l("label",{class:"block text-xs text-gray-400 mb-1"},"间距（gap，px）",-1)),l("input",{value:(nt=(Z=e.selectedEl.style)==null?void 0:Z.gap)!=null?nt:0,onInput:t[14]||(t[14]=s=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.gap=Number(s.target.value))}),type:"number",min:"0",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,40,ha)])])])):Y("",!0),e.selectedEl&&e.selectedEl.type==="carousel"?(C(),I("div",va,[t[208]||(t[208]=l("h3",{class:"text-sm font-medium text-purple-300 border-b border-purple-500/30 pb-1"},"轮播图设置",-1)),l("div",$a,[t[194]||(t[194]=l("label",{class:"block text-xs text-gray-400 font-bold mb-1"},"全局配置",-1)),l("div",wa,[t[192]||(t[192]=l("span",{class:"text-xs text-gray-400"},"自动播放",-1)),l("input",{type:"checkbox",checked:(Re=e.selectedEl.carouselConfig)==null?void 0:Re.autoplay,onChange:t[15]||(t[15]=s=>{e.selectedEl&&e.selectedEl.carouselConfig&&(e.selectedEl.carouselConfig.autoplay=s.target.checked)}),class:"rounded accent-purple-600"},null,40,Ea)]),l("div",null,[t[193]||(t[193]=l("label",{class:"block text-xs text-gray-400 mb-1"},"切换间隔 (ms)",-1)),l("input",{type:"number",value:((_e=e.selectedEl.carouselConfig)==null?void 0:_e.interval)||3e3,onInput:t[16]||(t[16]=s=>{e.selectedEl&&e.selectedEl.carouselConfig&&(e.selectedEl.carouselConfig.interval=Number(s.target.value))}),class:"w-full px-2 py-1 bg-gray-900/50 border border-gray-600 rounded text-xs"},null,40,ka)])]),l("div",Sa,[t[199]||(t[199]=l("label",{class:"block text-xs text-gray-400 font-bold mb-1"},"样式图片",-1)),l("div",Ca,[l("div",null,[t[195]||(t[195]=l("label",{class:"block text-[10px] text-gray-500 mb-1"},"高亮边框 (Frame Highlight)",-1)),l("div",Ma,[l("input",{type:"text",value:((Ee=e.selectedEl.carouselConfig)==null?void 0:Ee.frameHighlight)||"",onInput:t[17]||(t[17]=s=>{e.selectedEl&&e.selectedEl.carouselConfig&&(e.selectedEl.carouselConfig.frameHighlight=s.target.value)}),placeholder:"图片URL",class:"flex-1 px-2 py-1 bg-gray-900/50 border border-gray-600 rounded text-xs"},null,40,Ia),l("button",{onClick:t[18]||(t[18]=s=>P({type:"carousel-highlight"})),class:"px-2 py-1 bg-gray-700 hover:bg-gray-600 text-gray-300 rounded text-xs"},"选择")])]),l("div",null,[t[196]||(t[196]=l("label",{class:"block text-[10px] text-gray-500 mb-1"},"背景边框 (Frame Normal)",-1)),l("div",Na,[l("input",{type:"text",value:((ue=e.selectedEl.carouselConfig)==null?void 0:ue.frameNormal)||"",onInput:t[19]||(t[19]=s=>{e.selectedEl&&e.selectedEl.carouselConfig&&(e.selectedEl.carouselConfig.frameNormal=s.target.value)}),placeholder:"图片URL",class:"flex-1 px-2 py-1 bg-gray-900/50 border border-gray-600 rounded text-xs"},null,40,ja),l("button",{onClick:t[20]||(t[20]=s=>P({type:"carousel-normal"})),class:"px-2 py-1 bg-gray-700 hover:bg-gray-600 text-gray-300 rounded text-xs"},"选择")])]),l("div",Fa,[l("div",null,[t[197]||(t[197]=l("label",{class:"block text-[10px] text-gray-500 mb-1"},"左箭头",-1)),l("div",Aa,[l("input",{type:"text",value:((lt=e.selectedEl.carouselConfig)==null?void 0:lt.arrowLeft)||"",onInput:t[21]||(t[21]=s=>{e.selectedEl&&e.selectedEl.carouselConfig&&(e.selectedEl.carouselConfig.arrowLeft=s.target.value)}),placeholder:"URL",class:"flex-1 px-2 py-1 bg-gray-900/50 border border-gray-600 rounded text-xs"},null,40,za),l("button",{onClick:t[22]||(t[22]=s=>P({type:"carousel-left"})),class:"px-2 py-1 bg-gray-700 hover:bg-gray-600 text-gray-300 rounded text-xs"},"选")])]),l("div",null,[t[198]||(t[198]=l("label",{class:"block text-[10px] text-gray-500 mb-1"},"右箭头",-1)),l("div",Oa,[l("input",{type:"text",value:((Rt=e.selectedEl.carouselConfig)==null?void 0:Rt.arrowRight)||"",onInput:t[23]||(t[23]=s=>{e.selectedEl&&e.selectedEl.carouselConfig&&(e.selectedEl.carouselConfig.arrowRight=s.target.value)}),placeholder:"URL",class:"flex-1 px-2 py-1 bg-gray-900/50 border border-gray-600 rounded text-xs"},null,40,Da),l("button",{onClick:t[24]||(t[24]=s=>P({type:"carousel-right"})),class:"px-2 py-1 bg-gray-700 hover:bg-gray-600 text-gray-300 rounded text-xs"},"选")])])])])]),l("div",Ba,[t[206]||(t[206]=l("label",{class:"block text-xs text-gray-400 font-bold mb-1"},"文字样式",-1)),l("div",Ga,[l("div",null,[t[200]||(t[200]=l("label",{class:"block text-[10px] text-gray-500 mb-1"},"颜色",-1)),l("div",Ta,[l("input",{type:"color",value:((Kt=(Lt=e.selectedEl.carouselConfig)==null?void 0:Lt.textStyle)==null?void 0:Kt.color)||"#ffffff",onInput:t[25]||(t[25]=s=>{var k,w;(w=(k=e.selectedEl)==null?void 0:k.carouselConfig)!=null&&w.textStyle&&(e.selectedEl.carouselConfig.textStyle.color=s.target.value)}),class:"w-5 h-5 p-0 border-0 rounded cursor-pointer"},null,40,La),l("input",{type:"text",value:(ct=(rl=e.selectedEl.carouselConfig)==null?void 0:rl.textStyle)==null?void 0:ct.color,onInput:t[26]||(t[26]=s=>{var k,w;(w=(k=e.selectedEl)==null?void 0:k.carouselConfig)!=null&&w.textStyle&&(e.selectedEl.carouselConfig.textStyle.color=s.target.value)}),class:"w-full px-1 py-0.5 bg-gray-900/50 border border-gray-600 rounded text-[10px] font-mono"},null,40,Ua)])]),l("div",null,[t[201]||(t[201]=l("label",{class:"block text-[10px] text-gray-500 mb-1"},"字号",-1)),l("input",{type:"number",value:((Pt=(bt=e.selectedEl.carouselConfig)==null?void 0:bt.textStyle)==null?void 0:Pt.fontSize)||14,onInput:t[27]||(t[27]=s=>{var k,w;(w=(k=e.selectedEl)==null?void 0:k.carouselConfig)!=null&&w.textStyle&&(e.selectedEl.carouselConfig.textStyle.fontSize=Number(s.target.value))}),class:"w-full px-2 py-1 bg-gray-900/50 border border-gray-600 rounded text-xs"},null,40,Va)]),l("div",null,[t[203]||(t[203]=l("label",{class:"block text-[10px] text-gray-500 mb-1"},"字体",-1)),l("select",{value:((qt=(sl=e.selectedEl.carouselConfig)==null?void 0:sl.textStyle)==null?void 0:qt.fontFamily)||"",onChange:t[28]||(t[28]=s=>{var k,w;(w=(k=e.selectedEl)==null?void 0:k.carouselConfig)!=null&&w.textStyle&&(e.selectedEl.carouselConfig.textStyle.fontFamily=s.target.value)}),class:"w-full px-1 py-1 bg-gray-900/50 border border-gray-600 rounded text-xs"},[t[202]||(t[202]=l("option",{value:""},"默认",-1)),(C(!0),I(Vt,null,Jt(e.fontLibrary,s=>(C(),I("option",{key:s,value:s},ut(s),9,Pa))),128))],40,Ra)]),l("div",null,[t[205]||(t[205]=l("label",{class:"block text-[10px] text-gray-500 mb-1"},"粗细",-1)),l("select",{value:((ht=(Xt=e.selectedEl.carouselConfig)==null?void 0:Xt.textStyle)==null?void 0:ht.fontWeight)||"",onChange:t[29]||(t[29]=s=>{var k,w;(w=(k=e.selectedEl)==null?void 0:k.carouselConfig)!=null&&w.textStyle&&(e.selectedEl.carouselConfig.textStyle.fontWeight=s.target.value)}),class:"w-full px-1 py-1 bg-gray-900/50 border border-gray-600 rounded text-xs"},[...t[204]||(t[204]=[l("option",{value:"normal"},"常规",-1),l("option",{value:"bold"},"加粗",-1)])],40,Wa)])])]),l("div",Ha,[l("div",_a,[t[207]||(t[207]=l("span",{class:"text-xs text-gray-400 font-bold"},"内容列表",-1)),l("button",{onClick:t[30]||(t[30]=s=>{var k;return(k=e.selectedEl.slides)==null?void 0:k.push({id:Date.now().toString(),src:"",text:"新图片"})}),class:"text-xs text-purple-400 hover:text-purple-300"},"+ 添加")]),(C(!0),I(Vt,null,Jt(e.selectedEl.slides,(s,k)=>(C(),I("div",{key:s.id,class:"bg-gray-800/50 p-2 rounded border border-gray-700"},[l("div",Ja,[l("span",qa,"Slide "+ut(k+1),1),l("button",{onClick:w=>{var ge;return(ge=e.selectedEl.slides)==null?void 0:ge.splice(k,1)},class:"text-[10px] text-red-400 hover:text-red-300"},"删除",8,Ya)]),l("div",Ka,[l("div",Xa,[l("input",{value:s.src,onInput:w=>s.src=w.target.value,placeholder:"图片 URL",class:"flex-1 px-2 py-1 bg-gray-900/50 border border-gray-600 rounded text-xs"},null,40,Za),l("button",{onClick:w=>P({type:"carousel-slide",slideIndex:k}),class:"px-2 py-1 bg-gray-700 hover:bg-gray-600 text-gray-300 rounded text-xs"},"选",8,Qa)]),l("input",{value:s.text,onInput:w=>s.text=w.target.value,placeholder:"描述文字",class:"w-full px-2 py-1 bg-gray-900/50 border border-gray-600 rounded text-xs"},null,40,ei)])]))),128))])])):Y("",!0),S.value?(C(),I("div",{key:3,class:"fixed inset-0 z-[9999] flex items-center justify-center bg-black/50 backdrop-blur-sm",onClick:t[32]||(t[32]=cr(s=>S.value=!1,["self"]))},[l("div",ti,[l("div",li,[t[209]||(t[209]=l("h3",{class:"text-sm font-bold text-white"},"选择图片/图标",-1)),l("button",{onClick:t[31]||(t[31]=s=>S.value=!1),class:"text-gray-400 hover:text-white"},"✕")]),e.iconLibrary.length>0?(C(),I("div",ri,[l("div",ni,[(C(!0),I(Vt,null,Jt(e.iconLibrary,s=>(C(),I("div",{key:s.id,onClick:k=>te(s),class:"aspect-square bg-gray-800 rounded cursor-pointer hover:bg-gray-700 hover:border-purple-500 border border-transparent flex items-center justify-center p-2 transition-all"},[l("img",{src:s.url,alt:s.name,class:"max-w-full max-h-full object-contain"},null,8,si)],8,oi))),128))])])):(C(),I("div",ai," 暂无可用图标，请在图标库上传 ")),t[210]||(t[210]=l("div",{class:"mt-4 pt-2 border-t border-gray-700"},[l("p",{class:"text-[10px] text-gray-400"},"提示：可在左侧“图标库”中上传更多图片素材。")],-1))])])):Y("",!0),e.selectedEl&&e.selectedEl.type==="arc-text"?(C(),I("div",ii,[t[226]||(t[226]=l("h3",{class:"text-sm font-medium text-purple-300 border-b border-purple-500/30 pb-1"},"环绕文字设置",-1)),l("div",di,[t[211]||(t[211]=l("label",{class:"block text-xs text-gray-400 mb-1"},"内容",-1)),ce(l("textarea",{"onUpdate:modelValue":t[33]||(t[33]=s=>e.selectedEl.text=s),class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200 resize-none",rows:"2"},null,512),[[ke,e.selectedEl.text]])]),l("div",ui,[l("div",null,[t[212]||(t[212]=l("label",{class:"block text-xs text-gray-400 mb-1"},"字号",-1)),wt(Tt,{options:e.fontSizeLibrary,modelValue:((al=e.selectedEl.style)==null?void 0:al.fontSize)||e.config.globalFontSize,"onUpdate:modelValue":t[34]||(t[34]=s=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.fontSize=s)}),numeric:!0},null,8,["options","modelValue"])]),l("div",null,[t[213]||(t[213]=l("label",{class:"block text-xs text-gray-400 mb-1"},"字体",-1)),wt(Tt,{options:e.fontLibrary,modelValue:((dl=e.selectedEl.style)==null?void 0:dl.fontFamily)||e.config.globalFontFamily,"onUpdate:modelValue":t[35]||(t[35]=s=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.fontFamily=s)})},null,8,["options","modelValue"])])]),l("div",ci,[l("div",null,[t[214]||(t[214]=l("label",{class:"block text-xs text-gray-400 mb-1"},"粗细",-1)),wt(Tt,{options:e.fontWeightOptions,modelValue:((ul=e.selectedEl.style)==null?void 0:ul.fontWeight)||"400","onUpdate:modelValue":t[36]||(t[36]=s=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.fontWeight=s)})},null,8,["options","modelValue"])]),l("div",null,[t[215]||(t[215]=l("label",{class:"block text-xs text-gray-400 mb-1"},"样式",-1)),wt(Tt,{options:e.fontStyleOptions,modelValue:((Zt=e.selectedEl.style)==null?void 0:Zt.fontStyle)||"normal","onUpdate:modelValue":t[37]||(t[37]=s=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.fontStyle=s)})},null,8,["options","modelValue"])])]),l("div",pi,[l("div",null,[t[216]||(t[216]=l("label",{class:"block text-xs text-gray-400 mb-1"},"字间距",-1)),l("input",{value:(Wt=(Qt=e.selectedEl.style)==null?void 0:Qt.letterSpacing)!=null?Wt:0,onInput:t[38]||(t[38]=s=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.letterSpacing=Number(s.target.value))}),type:"number",step:"0.1",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,40,gi)]),l("div",null,[t[217]||(t[217]=l("label",{class:"block text-xs text-gray-400 mb-1"},"行高",-1)),l("input",{value:(pl=(cl=e.selectedEl.style)==null?void 0:cl.lineHeight)!=null?pl:1.5,onInput:t[39]||(t[39]=s=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.lineHeight=Number(s.target.value))}),type:"number",step:"0.1",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,40,fi)])]),l("div",yi,[t[218]||(t[218]=l("label",{class:"block text-xs text-gray-400 mb-1"},"颜色",-1)),l("div",bi,[l("input",{value:((at=(gl=e.selectedEl)==null?void 0:gl.style)==null?void 0:at.color)||e.config.globalColor,onInput:t[40]||(t[40]=s=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.color=s.target.value)}),type:"color",class:"w-8 h-6 bg-gray-800/50 border border-purple-500/30 rounded cursor-pointer"},null,40,xi),l("input",{value:(ze=(oe=(pt=e.selectedEl)==null?void 0:pt.style)==null?void 0:oe.color)!=null?ze:e.config.globalColor,onInput:t[41]||(t[41]=s=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.color=s.target.value)}),type:"text",class:"flex-1 px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-xs focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200",placeholder:"#FFFFFF"},null,40,mi)])]),l("div",hi,[t[219]||(t[219]=l("label",{class:"block text-xs text-gray-400 mb-1"},"对齐方式",-1)),l("div",vi,[l("button",{onClick:t[42]||(t[42]=()=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.textAlign="left")}),class:Ne(["px-2 py-1 text-xs rounded transition-colors duration-200",(((xt=e.selectedEl.style)==null?void 0:xt.textAlign)||"center")==="left"?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"])},"左",2),l("button",{onClick:t[43]||(t[43]=()=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.textAlign="center")}),class:Ne(["px-2 py-1 text-xs rounded transition-colors duration-200",(((Me=e.selectedEl.style)==null?void 0:Me.textAlign)||"center")==="center"?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"])},"中",2),l("button",{onClick:t[44]||(t[44]=()=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.textAlign="right")}),class:Ne(["px-2 py-1 text-xs rounded transition-colors duration-200",(((vt=e.selectedEl.style)==null?void 0:vt.textAlign)||"center")==="right"?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"])},"右",2)])]),l("div",$i,[t[225]||(t[225]=l("label",{class:"block text-xs text-gray-400 mb-1"},"圆弧参数",-1)),l("div",wi,[l("div",null,[t[220]||(t[220]=l("label",{class:"block text-xs text-gray-400 mb-1"},"半径(px)",-1)),l("input",{value:(De=(Oe=(et=(Ie=e.selectedEl)==null?void 0:Ie.style)==null?void 0:et.arcText)==null?void 0:Oe.radius)!=null?De:Math.min(e.selectedEl.width||0,e.selectedEl.height||0)/2,onInput:t[45]||(t[45]=s=>{if(e.selectedEl){const k=Number(s.target.value)||0;e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.arcText=e.selectedEl.style.arcText||{},e.selectedEl.style.arcText.radius=k}}),type:"number",min:"1",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,40,Ei)]),l("div",null,[t[221]||(t[221]=l("label",{class:"block text-xs text-gray-400 mb-1"},"起始角(°)",-1)),l("input",{value:(Pe=(tt=(St=(kt=e.selectedEl)==null?void 0:kt.style)==null?void 0:St.arcText)==null?void 0:tt.startAngle)!=null?Pe:0,onInput:t[46]||(t[46]=s=>{if(e.selectedEl){const k=Number(s.target.value)||0;e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.arcText=e.selectedEl.style.arcText||{},e.selectedEl.style.arcText.startAngle=k}}),type:"number",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,40,ki)]),l("div",null,[t[222]||(t[222]=l("label",{class:"block text-xs text-gray-400 mb-1"},"扫过角(°)",-1)),l("input",{value:(Ft=(rt=(Se=(we=e.selectedEl)==null?void 0:we.style)==null?void 0:Se.arcText)==null?void 0:rt.sweepAngle)!=null?Ft:180,onInput:t[47]||(t[47]=s=>{if(e.selectedEl){const k=Number(s.target.value)||0;e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.arcText=e.selectedEl.style.arcText||{},e.selectedEl.style.arcText.sweepAngle=k}}),type:"number",min:"0",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,40,Si)]),l("div",null,[t[224]||(t[224]=l("label",{class:"block text-xs text-gray-400 mb-1"},"顺时针",-1)),l("select",{value:(ft=(Gt=($t=(Te=e.selectedEl)==null?void 0:Te.style)==null?void 0:$t.arcText)==null?void 0:Gt.clockwise)==null||ft?"1":"0",onChange:t[48]||(t[48]=s=>{if(e.selectedEl){const k=s.target.value==="1";e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.arcText=e.selectedEl.style.arcText||{},e.selectedEl.style.arcText.clockwise=k}}),class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm"},[...t[223]||(t[223]=[l("option",{value:"1"},"是",-1),l("option",{value:"0"},"否",-1)])],40,Ci)])]),l("div",Mi,[l("button",{onClick:t[49]||(t[49]=()=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.arcText=e.selectedEl.style.arcText||{},e.selectedEl.style.arcText.startAngle=180,e.selectedEl.style.arcText.sweepAngle=180,e.selectedEl.style.arcText.clockwise=!0)}),class:Ne(["px-2 py-1 text-xs rounded transition-colors duration-200","bg-gray-700 text-gray-300 hover:bg-gray-600"])},"上"),l("button",{onClick:t[50]||(t[50]=()=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.arcText=e.selectedEl.style.arcText||{},e.selectedEl.style.arcText.startAngle=0,e.selectedEl.style.arcText.sweepAngle=180,e.selectedEl.style.arcText.clockwise=!0)}),class:Ne(["px-2 py-1 text-xs rounded transition-colors duration-200","bg-gray-700 text-gray-300 hover:bg-gray-600"])},"下"),l("button",{onClick:t[51]||(t[51]=()=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.arcText=e.selectedEl.style.arcText||{},e.selectedEl.style.arcText.startAngle=90,e.selectedEl.style.arcText.sweepAngle=180,e.selectedEl.style.arcText.clockwise=!0)}),class:Ne(["px-2 py-1 text-xs rounded transition-colors duration-200","bg-gray-700 text-gray-300 hover:bg-gray-600"])},"左"),l("button",{onClick:t[52]||(t[52]=()=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.arcText=e.selectedEl.style.arcText||{},e.selectedEl.style.arcText.startAngle=270,e.selectedEl.style.arcText.sweepAngle=180,e.selectedEl.style.arcText.clockwise=!0)}),class:Ne(["px-2 py-1 text-xs rounded transition-colors duration-200","bg-gray-700 text-gray-300 hover:bg-gray-600"])},"右")])])])):Y("",!0),l("div",Ii,[t[233]||(t[233]=l("h3",{class:"text-sm font-medium text-purple-300 border-b border-purple-500/30 pb-1"},"事件绑定",-1)),l("div",Ni,[t[228]||(t[228]=l("label",{class:"text-xs text-gray-400"},"开启事件绑定",-1)),l("label",ji,[ce(l("input",{type:"checkbox",class:"sr-only peer","onUpdate:modelValue":t[53]||(t[53]=s=>He.value=s)},null,512),[[Ll,He.value]]),t[227]||(t[227]=l("div",{class:"relative w-12 h-6 rounded-full bg-gray-700/60 transition-all duration-200 shadow-inner peer-checked:bg-gradient-to-r peer-checked:from-cyan-600 peer-checked:to-blue-600"},[l("div",{class:"absolute left-0.5 top-0.5 w-5 h-5 bg-white rounded-full shadow transform transition-transform duration-200 peer-checked:translate-x-6"})],-1)),l("span",{class:Ne(["ml-3 text-xs",He.value?"text-cyan-300":"text-gray-300"])},ut(He.value?"已开启":"已关闭"),3)])]),He.value?(C(),I("div",Fi,[l("div",null,[t[230]||(t[230]=l("label",{class:"block text-xs text-gray-400 mb-1"},"Cursor",-1)),ce(l("select",{"onUpdate:modelValue":t[54]||(t[54]=s=>dt.value=s),class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm"},[...t[229]||(t[229]=[nr('<option value="pointer" data-v-3aa712a7>pointer</option><option value="default" data-v-3aa712a7>default</option><option value="move" data-v-3aa712a7>move</option><option value="crosshair" data-v-3aa712a7>crosshair</option><option value="grab" data-v-3aa712a7>grab</option>',5)])],512),[[$o,dt.value]])]),l("div",null,[t[231]||(t[231]=l("label",{class:"block text-xs text-gray-400 mb-1"},"函数名",-1)),ce(l("input",{"onUpdate:modelValue":t[55]||(t[55]=s=>gt.value=s),type:"text",placeholder:"handleClick",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm"},null,512),[[ke,gt.value]])])])):Y("",!0),He.value?(C(),I("div",Ai,[t[232]||(t[232]=l("label",{class:"block text-xs text-gray-400 mb-1"},"事件代码",-1)),ce(l("textarea",{"onUpdate:modelValue":t[56]||(t[56]=s=>yt.value=s),rows:"6",placeholder:"function body...",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm"},null,512),[[ke,yt.value]])])):Y("",!0)]),l("div",zi,[t[243]||(t[243]=l("h3",{class:"text-sm font-medium text-purple-300 border-b border-purple-500/30 pb-1"},"元素属性",-1)),l("div",Oi,[l("div",Di,[t[234]||(t[234]=l("label",{class:"text-xs text-gray-400"},"启用 Class 样式",-1)),ce(l("input",{type:"checkbox","onUpdate:modelValue":t[57]||(t[57]=s=>e.selectedEl.enableClassStyle=s),onChange:t[58]||(t[58]=s=>{e.selectedEl&&s.target.checked?(e.initCustomClassSkeleton(e.selectedEl),e.refreshAllCustomClassCss()):e.selectedEl&&!s.target.checked&&e.removeCustomClassCssForElement(e.selectedEl.id)}),class:"rounded border-purple-500/30 text-purple-400 focus:ring-purple-400"},null,544),[[Ll,e.selectedEl.enableClassStyle]])]),(el=e.selectedEl)!=null&&el.enableClassStyle?(C(),I("div",Bi,[t[235]||(t[235]=l("label",{class:"block text-xs text-gray-400 mb-1"},"CSS Class",-1)),l("div",Gi,[ce(l("input",{"onUpdate:modelValue":t[59]||(t[59]=s=>e.selectedEl.className=s),type:"text",placeholder:"自动生成唯一类名，可修改",class:"flex-1 px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,512),[[ke,e.selectedEl.className]]),l("button",{type:"button",onClick:t[60]||(t[60]=()=>{e.selectedEl&&(e.selectedEl.className=`cls-${String(e.selectedEl.id).slice(0,8)}`,e.initCustomClassSkeleton(e.selectedEl),e.refreshAllCustomClassCss())}),class:"px-2 py-1 text-xs bg-purple-600/60 hover:bg-purple-600 rounded text-white"},"生成默认")])])):Y("",!0),(yl=e.selectedEl)!=null&&yl.enableClassStyle?(C(),I("div",Ti,[t[236]||(t[236]=l("label",{class:"block text-xs text-gray-400 mb-1"},"自定义样式（CSS 声明）",-1)),wt(ea,{modelValue:String((Ul=e.selectedEl.customClassCss)!=null?Ul:""),"onUpdate:modelValue":t[61]||(t[61]=s=>{e.selectedEl.customClassCss=s,e.refreshAllCustomClassCss()}),height:"180px"},null,8,["modelValue"]),t[237]||(t[237]=l("p",{class:"text-[11px] text-gray-500 mt-1"},"提示：已为当前类名生成 .className { } 模板；也可直接填写声明，系统会自动包裹并追加 !important。",-1))])):Y("",!0),e.selectedEl&&(e.selectedEl.type==="chart"||e.selectedEl.type==="container")?(C(),I("div",Li,[t[238]||(t[238]=l("label",{class:"block text-xs text-gray-400 mb-1"},"元素ID",-1)),ce(l("input",{"onUpdate:modelValue":t[62]||(t[62]=s=>e.selectedEl.elementId=s),type:"text",placeholder:"输入元素ID",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,512),[[ke,e.selectedEl.elementId]])])):Y("",!0),e.selectedEl?(C(),I("div",Ui,[t[242]||(t[242]=l("h3",{class:"text-sm font-medium text-purple-300"},"显示与隐藏",-1)),l("div",Vi,[t[240]||(t[240]=l("label",{class:"text-xs text-gray-400"},"隐藏该元素",-1)),l("label",Ri,[l("input",{type:"checkbox",class:"sr-only peer",checked:!!e.selectedEl.hidden,onChange:t[63]||(t[63]=s=>{const k=s.target.checked;e.selectedEl&&(e.selectedEl.hidden=k,k&&!e.selectedEl.hiddenLabel&&(e.selectedEl.hiddenLabel=`hidden-${String(e.selectedEl.id).slice(0,8)}`))})},null,40,Pi),t[239]||(t[239]=l("div",{class:"relative w-12 h-6 rounded-full bg-gray-700/60 transition-all duration-200 shadow-inner peer-checked:bg-gradient-to-r peer-checked:from-purple-600 peer-checked:to-pink-600"},[l("div",{class:"absolute left-0.5 top-0.5 w-5 h-5 bg-white rounded-full shadow transform transition-transform duration-200 peer-checked:translate-x-6"})],-1)),l("span",{class:Ne(["ml-3 text-xs",e.selectedEl.hidden?"text-purple-300":"text-gray-300"])},ut(e.selectedEl.hidden?"已隐藏":"显示中"),3)])]),e.selectedEl.hidden?(C(),I("div",Wi,[t[241]||(t[241]=l("label",{class:"block text-xs text-gray-400"},"隐藏标识",-1)),l("input",{type:"text",value:e.selectedEl.hiddenLabel||"",onInput:t[64]||(t[64]=s=>{e.selectedEl&&(e.selectedEl.hiddenLabel=s.target.value)}),class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1",placeholder:"hidden-xxxx"},null,40,Hi)])):Y("",!0)])):Y("",!0)])]),e.selectedEl&&e.selectedEl.type==="container"?(C(),I("div",_i,[t[265]||(t[265]=l("h3",{class:"text-sm font-medium text-purple-300 border-b border-purple-500/30 pb-1"},"容器样式",-1)),l("div",null,[t[244]||(t[244]=l("label",{class:"block text-xs text-gray-400 mb-1"},"背景色（HEX）",-1)),l("div",Ji,[l("input",{type:"color",value:((Ct=(Vl=e.selectedEl)==null?void 0:Vl.style)==null?void 0:Ct.backgroundColor)||"#000000",onInput:t[65]||(t[65]=s=>{const k=s.target.value;e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.backgroundColor=k)}),class:"w-10 h-8 bg-gray-800/50 border border-purple-500/30 rounded"},null,40,qi),l("input",{type:"text",value:((Rl=(il=e.selectedEl)==null?void 0:il.style)==null?void 0:Rl.backgroundColor)||"",placeholder:"#1e293b 或 transparent",onInput:t[66]||(t[66]=s=>{const k=s.target.value.trim();e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.backgroundColor=k)}),class:"flex-1 px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,40,Yi)]),t[245]||(t[245]=l("p",{class:"text-[11px] text-gray-500 mt-1"},"支持 #RGB/#RRGGBB 或 CSS 颜色名；启用渐变时该颜色被覆盖。",-1))]),l("div",null,[t[246]||(t[246]=l("label",{class:"block text-xs text-gray-400 mb-1"},"容器注释（导出可见）",-1)),ce(l("textarea",{"onUpdate:modelValue":t[67]||(t[67]=s=>e.selectedEl.comment=s),rows:"2",placeholder:"输入注释，方便代码维护...",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,512),[[ke,e.selectedEl.comment]])]),l("div",Ki,[l("div",Xi,[t[248]||(t[248]=l("label",{class:"block text-xs text-gray-400 mb-1"},"渐变背景",-1)),l("label",Zi,[l("input",{type:"checkbox",checked:!!((Sl=(Pl=e.selectedEl)==null?void 0:Pl.style)!=null&&Sl.backgroundGradient),onChange:t[68]||(t[68]=s=>{const k=s.target.checked;e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},k?e.selectedEl.style.backgroundGradient||(e.selectedEl.style.backgroundGradient={colors:["#42b883","#0ea5e9"],angle:90}):delete e.selectedEl.style.backgroundGradient)})},null,40,Qi),t[247]||(t[247]=Tl(" 启用 ",-1))])]),(Ml=(Cl=e.selectedEl)==null?void 0:Cl.style)!=null&&Ml.backgroundGradient?(C(),I("div",ed,[l("div",null,[t[249]||(t[249]=l("label",{class:"block text-[11px] text-gray-400 mb-1"},"起始色（HEX）",-1)),l("div",td,[l("input",{type:"color",value:((xl=(bl=(fl=(Wl=e.selectedEl)==null?void 0:Wl.style)==null?void 0:fl.backgroundGradient)==null?void 0:bl.colors)==null?void 0:xl[0])||"#42b883",onInput:t[69]||(t[69]=s=>{var ge;const k=s.target.value;if(!e.selectedEl)return;e.selectedEl.style=e.selectedEl.style||{};const w=e.selectedEl.style.backgroundGradient||{colors:["","#"],angle:90};w.colors=(ge=w.colors)!=null&&ge.length?w.colors:["","#"],w.colors[0]=k,e.selectedEl.style.backgroundGradient=w}),class:"w-10 h-8 bg-gray-800/50 border border-purple-500/30 rounded"},null,40,ld),l("input",{type:"text",value:((Hl=(Nl=(Il=(ml=e.selectedEl)==null?void 0:ml.style)==null?void 0:Il.backgroundGradient)==null?void 0:Nl.colors)==null?void 0:Hl[0])||"",placeholder:"#42b883",onInput:t[70]||(t[70]=s=>{var ge;const k=s.target.value.trim();if(!e.selectedEl)return;e.selectedEl.style=e.selectedEl.style||{};const w=e.selectedEl.style.backgroundGradient||{colors:["","#"],angle:90};w.colors=(ge=w.colors)!=null&&ge.length?w.colors:["","#"],w.colors[0]=k,e.selectedEl.style.backgroundGradient=w}),class:"flex-1 px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-xs"},null,40,rd)])]),l("div",null,[t[250]||(t[250]=l("label",{class:"block text-[11px] text-gray-400 mb-1"},"结束色（HEX）",-1)),l("div",nd,[l("input",{type:"color",value:((_l=(Ot=(tl=(jl=e.selectedEl)==null?void 0:jl.style)==null?void 0:tl.backgroundGradient)==null?void 0:Ot.colors)==null?void 0:_l[1])||"#0ea5e9",onInput:t[71]||(t[71]=s=>{var ge;const k=s.target.value;if(!e.selectedEl)return;e.selectedEl.style=e.selectedEl.style||{};const w=e.selectedEl.style.backgroundGradient||{colors:["","#"],angle:90};w.colors=(ge=w.colors)!=null&&ge.length?w.colors:["","#"],w.colors[1]=k,e.selectedEl.style.backgroundGradient=w}),class:"w-10 h-8 bg-gray-800/50 border border-purple-500/30 rounded"},null,40,od),l("input",{type:"text",value:((Kl=(Yl=(ql=(Jl=e.selectedEl)==null?void 0:Jl.style)==null?void 0:ql.backgroundGradient)==null?void 0:Yl.colors)==null?void 0:Kl[1])||"",placeholder:"#0ea5e9",onInput:t[72]||(t[72]=s=>{var ge;const k=s.target.value.trim();if(!e.selectedEl)return;e.selectedEl.style=e.selectedEl.style||{};const w=e.selectedEl.style.backgroundGradient||{colors:["","#"],angle:90};w.colors=(ge=w.colors)!=null&&ge.length?w.colors:["","#"],w.colors[1]=k,e.selectedEl.style.backgroundGradient=w}),class:"flex-1 px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-xs"},null,40,sd)])]),l("div",ad,[t[251]||(t[251]=l("label",{class:"block text-[11px] text-gray-400"},"角度（0-360）",-1)),l("input",{type:"range",min:"0",max:"360",step:"1",value:(vl=(hl=(Fl=(Xl=e.selectedEl)==null?void 0:Xl.style)==null?void 0:Fl.backgroundGradient)==null?void 0:hl.angle)!=null?vl:90,onInput:t[73]||(t[73]=s=>{const k=Number(s.target.value)||0;if(!e.selectedEl)return;e.selectedEl.style=e.selectedEl.style||{};const w=e.selectedEl.style.backgroundGradient||{colors:["","#"],angle:90};w.angle=k,e.selectedEl.style.backgroundGradient=w}),class:"w-full"},null,40,id),l("input",{type:"number",value:(Zl=(wl=($l=(Al=e.selectedEl)==null?void 0:Al.style)==null?void 0:$l.backgroundGradient)==null?void 0:wl.angle)!=null?Zl:90,onInput:t[74]||(t[74]=s=>{const k=Number(s.target.value)||0;if(!e.selectedEl)return;e.selectedEl.style=e.selectedEl.style||{};const w=e.selectedEl.style.backgroundGradient||{colors:["","#"],angle:90};w.angle=k,e.selectedEl.style.backgroundGradient=w}),class:"w-24 px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-xs"},null,40,dd)])])):Y("",!0),t[252]||(t[252]=l("p",{class:"text-[11px] text-gray-500"},"提示：仅在启用后显示渐变设置；未启用时使用背景色。",-1))]),l("div",ud,[l("div",cd,[t[254]||(t[254]=l("label",{class:"block text-xs text-gray-400"},"圆角",-1)),l("label",pd,[l("input",{type:"checkbox",checked:!!((zl=(Ht=e.selectedEl)==null?void 0:Ht.style)!=null&&zl.borderRadius)&&j((Ol=(Ql=e.selectedEl)==null?void 0:Ql.style)==null?void 0:Ol.borderRadius)>0,onChange:t[75]||(t[75]=s=>{const k=s.target.checked;e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},k?e.selectedEl.style.borderRadius||(e.selectedEl.style.borderRadius="8px"):e.selectedEl.style.borderRadius="0")})},null,40,gd),t[253]||(t[253]=Tl(" 启用 ",-1))])]),(er=(Dl=e.selectedEl)==null?void 0:Dl.style)!=null&&er.borderRadius&&j((n=(Bl=e.selectedEl)==null?void 0:Bl.style)==null?void 0:n.borderRadius)>=0?(C(),I("div",fd,[l("div",yd,[t[255]||(t[255]=l("span",{class:"text-[11px] text-gray-400"},"单位",-1)),l("button",{type:"button",class:Ne(["px-2 py-0.5 rounded text-[11px]",ne((i=(o=e.selectedEl)==null?void 0:o.style)==null?void 0:i.borderRadius)==="px"?"bg-purple-600/60":"bg-gray-700"]),onClick:t[76]||(t[76]=()=>{var k,w;const s=j((w=(k=e.selectedEl)==null?void 0:k.style)==null?void 0:w.borderRadius);f(s,"px")})},"px",2),l("button",{type:"button",class:Ne(["px-2 py-0.5 rounded text-[11px]",ne((b=(u=e.selectedEl)==null?void 0:u.style)==null?void 0:b.borderRadius)==="%"?"bg-purple-600/60":"bg-gray-700"]),onClick:t[77]||(t[77]=()=>{var k,w;const s=j((w=(k=e.selectedEl)==null?void 0:k.style)==null?void 0:w.borderRadius);f(s,"%")})},"%",2)]),ne((F=(x=e.selectedEl)==null?void 0:x.style)==null?void 0:F.borderRadius)==="px"?(C(),I("div",bd,[l("input",{type:"range",min:"0",max:"64",step:"1",value:j((A=(N=e.selectedEl)==null?void 0:N.style)==null?void 0:A.borderRadius),onInput:t[78]||(t[78]=s=>{const k=Number(s.target.value)||0;f(k,"px")}),class:"w-full"},null,40,xd),l("input",{type:"number",value:j((c=(z=e.selectedEl)==null?void 0:z.style)==null?void 0:c.borderRadius),onInput:t[79]||(t[79]=s=>{const k=Number(s.target.value)||0;f(k,"px")}),class:"w-24 px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm"},null,40,md)])):(C(),I("div",hd,[l("input",{type:"range",min:"0",max:"100",step:"1",value:j((T=(p=e.selectedEl)==null?void 0:p.style)==null?void 0:T.borderRadius),onInput:t[80]||(t[80]=s=>{const k=Number(s.target.value)||0;f(k,"%")}),class:"w-full"},null,40,vd),l("div",$d,[l("input",{type:"number",value:j((ae=(H=e.selectedEl)==null?void 0:H.style)==null?void 0:ae.borderRadius),onInput:t[81]||(t[81]=s=>{const k=Number(s.target.value)||0;f(k,"%")}),class:"w-20 px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm"},null,40,wd),t[256]||(t[256]=l("span",{class:"text-xs text-gray-400"},"%",-1))])]))])):Y("",!0)]),l("div",Ed,[l("div",kd,[t[258]||(t[258]=l("label",{class:"block text-xs text-gray-400"},"阴影（box-shadow）",-1)),l("label",Sd,[l("input",{type:"checkbox",checked:!!((Fe=(he=e.selectedEl)==null?void 0:he.style)!=null&&Fe.boxShadow),onChange:t[82]||(t[82]=s=>{const k=s.target.checked;e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},k?e.selectedEl.style.boxShadow||(e.selectedEl.style.boxShadow="0 8px 24px rgba(0,0,0,0.25)"):delete e.selectedEl.style.boxShadow)})},null,40,Cd),t[257]||(t[257]=Tl(" 启用 ",-1))])]),(ve=(de=e.selectedEl)==null?void 0:de.style)!=null&&ve.boxShadow?(C(),I("div",Md,[l("input",{type:"text",value:((ee=(Q=e.selectedEl)==null?void 0:Q.style)==null?void 0:ee.boxShadow)||"",placeholder:"例如: 0 8px 24px rgba(0,0,0,0.25)",onInput:t[83]||(t[83]=s=>{const k=s.target.value;e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.boxShadow=k)}),class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm"},null,40,Id),l("div",Nd,[t[259]||(t[259]=l("label",{class:"block text-[11px] text-gray-400"},"X 偏移",-1)),l("div",jd,[l("input",{type:"range",min:"-64",max:"64",step:"1",value:m((le=(R=e.selectedEl)==null?void 0:R.style)==null?void 0:le.boxShadow).x,onInput:t[84]||(t[84]=s=>{var ge,Ye,Ke,Xe,xe,Ze;const k=Number(s.target.value)||0,w=m((Ye=(ge=e.selectedEl)==null?void 0:ge.style)==null?void 0:Ye.boxShadow);L(k!=null?k:0,(Ke=w.y)!=null?Ke:0,(Xe=w.blur)!=null?Xe:0,(xe=w.spread)!=null?xe:0,(Ze=w.color)!=null?Ze:"#000000")}),class:"flex-1"},null,40,Fd),l("input",{type:"number",value:m((y=(We=e.selectedEl)==null?void 0:We.style)==null?void 0:y.boxShadow).x,onInput:t[85]||(t[85]=s=>{var ge,Ye,Ke,Xe,xe,Ze;const k=Number(s.target.value)||0,w=m((Ye=(ge=e.selectedEl)==null?void 0:ge.style)==null?void 0:Ye.boxShadow);L(k!=null?k:0,(Ke=w.y)!=null?Ke:0,(Xe=w.blur)!=null?Xe:0,(xe=w.spread)!=null?xe:0,(Ze=w.color)!=null?Ze:"#000000")}),class:"w-20 px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-xs"},null,40,Ad)])]),l("div",zd,[t[260]||(t[260]=l("label",{class:"block text-[11px] text-gray-400"},"Y 偏移",-1)),l("div",Od,[l("input",{type:"range",min:"-64",max:"64",step:"1",value:m((W=(h=e.selectedEl)==null?void 0:h.style)==null?void 0:W.boxShadow).y,onInput:t[86]||(t[86]=s=>{var ge,Ye,Ke,Xe,xe,Ze;const k=Number(s.target.value)||0,w=m((Ye=(ge=e.selectedEl)==null?void 0:ge.style)==null?void 0:Ye.boxShadow);L((Ke=w.x)!=null?Ke:0,k!=null?k:0,(Xe=w.blur)!=null?Xe:0,(xe=w.spread)!=null?xe:0,(Ze=w.color)!=null?Ze:"#000000")}),class:"flex-1"},null,40,Dd),l("input",{type:"number",value:m((B=(O=e.selectedEl)==null?void 0:O.style)==null?void 0:B.boxShadow).y,onInput:t[87]||(t[87]=s=>{var ge,Ye,Ke,Xe,xe,Ze;const k=Number(s.target.value)||0,w=m((Ye=(ge=e.selectedEl)==null?void 0:ge.style)==null?void 0:Ye.boxShadow);L((Ke=w.x)!=null?Ke:0,k!=null?k:0,(Xe=w.blur)!=null?Xe:0,(xe=w.spread)!=null?xe:0,(Ze=w.color)!=null?Ze:"#000000")}),class:"w-20 px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-xs"},null,40,Bd)])]),l("div",Gd,[t[261]||(t[261]=l("label",{class:"block text-[11px] text-gray-400"},"模糊",-1)),l("div",Td,[l("input",{type:"range",min:"0",max:"128",step:"1",value:m((M=(K=e.selectedEl)==null?void 0:K.style)==null?void 0:M.boxShadow).blur,onInput:t[88]||(t[88]=s=>{var ge,Ye,Ke,Xe,xe,Ze;const k=Number(s.target.value)||0,w=m((Ye=(ge=e.selectedEl)==null?void 0:ge.style)==null?void 0:Ye.boxShadow);L((Ke=w.x)!=null?Ke:0,(Xe=w.y)!=null?Xe:0,k!=null?k:0,(xe=w.spread)!=null?xe:0,(Ze=w.color)!=null?Ze:"#000000")}),class:"flex-1"},null,40,Ld),l("input",{type:"number",value:m((v=(_=e.selectedEl)==null?void 0:_.style)==null?void 0:v.boxShadow).blur,onInput:t[89]||(t[89]=s=>{var ge,Ye,Ke,Xe,xe,Ze;const k=Number(s.target.value)||0,w=m((Ye=(ge=e.selectedEl)==null?void 0:ge.style)==null?void 0:Ye.boxShadow);L((Ke=w.x)!=null?Ke:0,(Xe=w.y)!=null?Xe:0,k!=null?k:0,(xe=w.spread)!=null?xe:0,(Ze=w.color)!=null?Ze:"#000000")}),class:"w-20 px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-xs"},null,40,Ud)])]),l("div",Vd,[t[262]||(t[262]=l("label",{class:"block text-[11px] text-gray-400"},"扩散",-1)),l("div",Rd,[l("input",{type:"range",min:"-64",max:"64",step:"1",value:m((ye=(J=e.selectedEl)==null?void 0:J.style)==null?void 0:ye.boxShadow).spread,onInput:t[90]||(t[90]=s=>{var ge,Ye,Ke,Xe,xe,Ze;const k=Number(s.target.value)||0,w=m((Ye=(ge=e.selectedEl)==null?void 0:ge.style)==null?void 0:Ye.boxShadow);L((Ke=w.x)!=null?Ke:0,(Xe=w.y)!=null?Xe:0,(xe=w.blur)!=null?xe:0,k!=null?k:0,(Ze=w.color)!=null?Ze:"#000000")}),class:"flex-1"},null,40,Pd),l("input",{type:"number",value:m((Ue=(be=e.selectedEl)==null?void 0:be.style)==null?void 0:Ue.boxShadow).spread,onInput:t[91]||(t[91]=s=>{var ge,Ye,Ke,Xe,xe,Ze;const k=Number(s.target.value)||0,w=m((Ye=(ge=e.selectedEl)==null?void 0:ge.style)==null?void 0:Ye.boxShadow);L((Ke=w.x)!=null?Ke:0,(Xe=w.y)!=null?Xe:0,(xe=w.blur)!=null?xe:0,k!=null?k:0,(Ze=w.color)!=null?Ze:"#000000")}),class:"w-20 px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-xs"},null,40,Wd)])])])):Y("",!0),l("div",Hd,[t[263]||(t[263]=l("label",{class:"block text-[11px] text-gray-400"},"阴影颜色",-1)),(ot=(Je=e.selectedEl)==null?void 0:Je.style)!=null&&ot.boxShadow?(C(),I("div",_d,[l("input",{type:"color",value:m((Nt=(At=e.selectedEl)==null?void 0:At.style)==null?void 0:Nt.boxShadow).color||"#000000",onInput:t[92]||(t[92]=s=>{var ge,Ye,Ke,Xe,xe,Ze;const k=s.target.value,w=m((Ye=(ge=e.selectedEl)==null?void 0:ge.style)==null?void 0:Ye.boxShadow);L((Ke=w.x)!=null?Ke:0,(Xe=w.y)!=null?Xe:0,(xe=w.blur)!=null?xe:0,(Ze=w.spread)!=null?Ze:0,k||"#000000")}),class:"w-10 h-8 bg-gray-800/50 border border-purple-500/30 rounded"},null,40,Jd),l("input",{type:"text",value:m((Mt=(Dt=e.selectedEl)==null?void 0:Dt.style)==null?void 0:Mt.boxShadow).color||"",placeholder:"#000000 或 rgba(...)",onInput:t[93]||(t[93]=s=>{var ge,Ye,Ke,Xe,xe,Ze;const k=s.target.value.trim(),w=m((Ye=(ge=e.selectedEl)==null?void 0:ge.style)==null?void 0:Ye.boxShadow);L((Ke=w.x)!=null?Ke:0,(Xe=w.y)!=null?Xe:0,(xe=w.blur)!=null?xe:0,(Ze=w.spread)!=null?Ze:0,k||"#000000")}),class:"flex-1 px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm"},null,40,qd)])):Y("",!0)]),t[264]||(t[264]=l("p",{class:"text-[11px] text-gray-500"},"支持滑动或数字输入；颜色可选色块与 HEX 文本。",-1))])])):Y("",!0),e.selectedEl&&e.selectedEl.type==="chart"?(C(),I("div",Yd,[t[280]||(t[280]=l("h3",{class:"text-sm font-medium text-purple-300 border-b border-purple-500/30 pb-1"},"图表配置",-1)),l("div",Kd,[l("button",{onClick:t[94]||(t[94]=s=>fe.value="visual"),class:Ne(["px-3 py-1 rounded text-sm",fe.value==="visual"?"bg-purple-600/60":"bg-gray-700"])},"可视化",2),l("button",{onClick:t[95]||(t[95]=s=>fe.value="json"),class:Ne(["px-3 py-1 rounded text-sm",fe.value==="json"?"bg-purple-600/60":"bg-gray-700"])},"JSON",2)]),fe.value==="visual"?(C(),I("div",Xd,[l("div",null,[t[266]||(t[266]=l("label",{class:"block text-xs text-gray-400 mb-1"},"图表类型",-1)),wt(Tt,{options:["line","bar","pie","mix"],modelValue:e.selectedEl.chartType||"line","onUpdate:modelValue":t[96]||(t[96]=s=>{e.selectedEl&&(e.selectedEl.chartType=s,e.selectedEl.chartOption=e.defaultChartOption(s),E.value=JSON.stringify(e.selectedEl.chartOption,null,2))})},null,8,["modelValue"])]),l("div",null,[t[267]||(t[267]=l("label",{class:"block text-xs text-gray-400 mb-1"},"标题",-1)),l("input",{value:((ll=(zt=(_t=e.selectedEl)==null?void 0:_t.chartOption)==null?void 0:zt.title)==null?void 0:ll.text)||"",onInput:t[97]||(t[97]=s=>G(s.target.value)),type:"text",placeholder:"输入图表标题",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm"},null,40,Zd)]),l("div",Qd,[l("div",null,[t[268]||(t[268]=l("label",{class:"block text-xs text-gray-400 mb-1"},"颜色列表（逗号分隔）",-1)),l("input",{value:((gr=(tr=(El=e.selectedEl)==null?void 0:El.chartOption)==null?void 0:tr.color)==null?void 0:gr.join(","))||"",onInput:t[98]||(t[98]=s=>se(s.target.value)),type:"text",placeholder:"#42b883,#ff9800",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm"},null,40,eu)]),l("div",null,[t[270]||(t[270]=l("label",{class:"block text-xs text-gray-400 mb-1"},"显示图例",-1)),l("select",{value:(xr=(br=(yr=(fr=e.selectedEl)==null?void 0:fr.chartOption)==null?void 0:yr.legend)==null?void 0:br.show)==null||xr?"1":"0",onChange:t[99]||(t[99]=s=>Le(s.target.value)),class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm"},[...t[269]||(t[269]=[l("option",{value:"1"},"显示",-1),l("option",{value:"0"},"隐藏",-1)])],40,tu)])]),e.selectedEl&&e.selectedEl.chartType!=="pie"?(C(),I("div",lu,[l("div",null,[t[271]||(t[271]=l("label",{class:"block text-xs text-gray-400 mb-1"},"Y轴最小值",-1)),l("input",{value:Array.isArray((hr=(mr=e.selectedEl)==null?void 0:mr.chartOption)==null?void 0:hr.yAxis)?(kr=(Er=(wr=($r=(vr=e.selectedEl)==null?void 0:vr.chartOption)==null?void 0:$r.yAxis)==null?void 0:wr[0])==null?void 0:Er.min)!=null?kr:"":(Ir=(Mr=(Cr=(Sr=e.selectedEl)==null?void 0:Sr.chartOption)==null?void 0:Cr.yAxis)==null?void 0:Mr.min)!=null?Ir:"",onInput:t[100]||(t[100]=s=>{const k=s.target.value;if(!e.selectedEl)return;e.selectedEl.chartOption||(e.selectedEl.chartOption=e.defaultChartOption(e.selectedEl.chartType||"line"));const w=e.selectedEl.chartOption.yAxis,ge=k===""?null:Number(k);Array.isArray(w)?(w[0]=w[0]||{},w[0].min=ge):(e.selectedEl.chartOption.yAxis=w||{},e.selectedEl.chartOption.yAxis.min=ge),E.value=JSON.stringify(e.selectedEl.chartOption,null,2)}),type:"number",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm"},null,40,ru)]),l("div",null,[t[272]||(t[272]=l("label",{class:"block text-xs text-gray-400 mb-1"},"Y轴最大值",-1)),l("input",{value:Array.isArray((jr=(Nr=e.selectedEl)==null?void 0:Nr.chartOption)==null?void 0:jr.yAxis)?(Dr=(Or=(zr=(Ar=(Fr=e.selectedEl)==null?void 0:Fr.chartOption)==null?void 0:Ar.yAxis)==null?void 0:zr[0])==null?void 0:Or.max)!=null?Dr:"":(Lr=(Tr=(Gr=(Br=e.selectedEl)==null?void 0:Br.chartOption)==null?void 0:Gr.yAxis)==null?void 0:Tr.max)!=null?Lr:"",onInput:t[101]||(t[101]=s=>{const k=s.target.value;if(!e.selectedEl)return;e.selectedEl.chartOption||(e.selectedEl.chartOption=e.defaultChartOption(e.selectedEl.chartType||"line"));const w=e.selectedEl.chartOption.yAxis,ge=k===""?null:Number(k);Array.isArray(w)?(w[0]=w[0]||{},w[0].max=ge):(e.selectedEl.chartOption.yAxis=w||{},e.selectedEl.chartOption.yAxis.max=ge),E.value=JSON.stringify(e.selectedEl.chartOption,null,2)}),type:"number",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm"},null,40,nu)])])):Y("",!0),e.selectedEl&&(e.selectedEl.chartType==="line"||e.selectedEl.chartType==="mix")?(C(),I("div",ou,[l("div",null,[t[274]||(t[274]=l("label",{class:"block text-xs text-gray-400 mb-1"},"折线平滑",-1)),l("select",{value:"1",onChange:t[102]||(t[102]=s=>{const k=s.target.value==="1";e.selectedEl&&e.selectedEl.chartOption&&((e.selectedEl.chartOption.series||[]).forEach(w=>{w.type==="line"&&(w.smooth=k)}),E.value=JSON.stringify(e.selectedEl.chartOption,null,2))}),class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm"},[...t[273]||(t[273]=[l("option",{value:"1"},"平滑",-1),l("option",{value:"0"},"不平滑",-1)])],32)]),l("div",null,[t[275]||(t[275]=l("label",{class:"block text-xs text-gray-400 mb-1"},"线宽",-1)),l("input",{value:2,onInput:t[103]||(t[103]=s=>{const k=Number(s.target.value)||2;e.selectedEl&&e.selectedEl.chartOption&&((e.selectedEl.chartOption.series||[]).forEach(w=>{w.type==="line"&&(w.lineStyle=w.lineStyle||{},w.lineStyle.width=k)}),E.value=JSON.stringify(e.selectedEl.chartOption,null,2))}),type:"number",min:"1",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm"},null,32)])])):Y("",!0),e.selectedEl&&(e.selectedEl.chartType==="bar"||e.selectedEl.chartType==="mix")?(C(),I("div",su,[l("div",null,[t[276]||(t[276]=l("label",{class:"block text-xs text-gray-400 mb-1"},"柱状渐变起始色",-1)),l("input",{type:"color",value:"#42b883",onInput:t[104]||(t[104]=s=>{const k=s.target.value;Ve(k,"#0ea5e9")}),class:"w-full h-8 bg-gray-800/50 border border-purple-500/30 rounded"},null,32)]),l("div",null,[t[277]||(t[277]=l("label",{class:"block text-xs text-gray-400 mb-1"},"柱状渐变结束色",-1)),l("input",{type:"color",value:"#0ea5e9",onInput:t[105]||(t[105]=s=>{const k=s.target.value;Ve("#42b883",k)}),class:"w-full h-8 bg-gray-800/50 border border-purple-500/30 rounded"},null,32)]),l("div",null,[t[278]||(t[278]=l("label",{class:"block text-xs text-gray-400 mb-1"},"圆角",-1)),l("input",{value:4,onInput:t[106]||(t[106]=s=>{const k=Number(s.target.value)||0;e.selectedEl&&e.selectedEl.chartOption&&((e.selectedEl.chartOption.series||[]).forEach(w=>{w.type==="bar"&&(w.itemStyle=w.itemStyle||{},w.itemStyle.borderRadius=[k,k,0,0])}),E.value=JSON.stringify(e.selectedEl.chartOption,null,2))}),type:"number",min:"0",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm"},null,32)])])):Y("",!0)])):(C(),I("div",au,[t[279]||(t[279]=l("label",{class:"block text-xs text-gray-400 mb-1"},"ECharts Option JSON",-1)),ce(l("textarea",{"onUpdate:modelValue":t[107]||(t[107]=s=>E.value=s),rows:"10",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-xs font-mono"},null,512),[[ke,E.value]]),l("div",iu,[l("button",{onClick:t[108]||(t[108]=s=>q()),class:"px-3 py-1 bg-emerald-600 rounded text-sm"},"应用配置"),ie.value?(C(),I("div",du,ut(ie.value),1)):Y("",!0)])]))])):Y("",!0),e.selectedEl&&e.selectedEl.type==="line"?(C(),I("div",uu,[t[288]||(t[288]=l("h3",{class:"text-sm font-medium text-purple-300 border-b border-purple-500/30 pb-1"},"线条设置",-1)),l("div",cu,[t[281]||(t[281]=l("label",{class:"block text-xs text-gray-400 mb-1"},"颜色",-1)),l("div",pu,[l("input",{value:e.safeHex(((Vr=(Ur=e.selectedEl)==null?void 0:Ur.style)==null?void 0:Vr.lineColor)||""),onInput:t[109]||(t[109]=s=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.lineColor=s.target.value)}),type:"color",class:"w-8 h-6 bg-gray-800/50 border border-purple-500/30 rounded cursor-pointer"},null,40,gu),l("input",{value:(Wr=(Pr=(Rr=e.selectedEl)==null?void 0:Rr.style)==null?void 0:Pr.lineColor)!=null?Wr:"#ffffff",onInput:t[110]||(t[110]=s=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.lineColor=s.target.value)}),type:"text",class:"flex-1 px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-xs focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200",placeholder:"#ffffff"},null,40,fu)])]),l("div",yu,[l("div",null,[t[282]||(t[282]=l("label",{class:"block text-xs text-gray-400 mb-1"},"方向",-1)),l("div",bu,[l("button",{onClick:t[111]||(t[111]=()=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.lineOrientation="horizontal")}),class:Ne(["px-2 py-1 text-xs rounded transition-colors duration-200",(((_r=(Hr=e.selectedEl)==null?void 0:Hr.style)==null?void 0:_r.lineOrientation)||"horizontal")==="horizontal"?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"])},"横向",2),l("button",{onClick:t[112]||(t[112]=()=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.lineOrientation="vertical")}),class:Ne(["px-2 py-1 text-xs rounded transition-colors duration-200",(((qr=(Jr=e.selectedEl)==null?void 0:Jr.style)==null?void 0:qr.lineOrientation)||"horizontal")==="vertical"?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"])},"纵向",2)])]),l("div",null,[t[283]||(t[283]=l("label",{class:"block text-xs text-gray-400 mb-1"},"粗细(px)",-1)),l("input",{value:(Xr=(Kr=(Yr=e.selectedEl)==null?void 0:Yr.style)==null?void 0:Kr.lineThickness)!=null?Xr:2,onInput:t[113]||(t[113]=s=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.lineThickness=Number(s.target.value))}),type:"number",min:"1",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,40,xu)])]),l("div",mu,[l("div",null,[t[285]||(t[285]=l("label",{class:"block text-xs text-gray-400 mb-1"},"样式",-1)),l("select",{value:((Qr=(Zr=e.selectedEl)==null?void 0:Zr.style)==null?void 0:Qr.lineStyle)||"solid",onChange:t[114]||(t[114]=s=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.lineStyle=s.target.value)}),class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},[...t[284]||(t[284]=[l("option",{value:"solid"},"实线",-1),l("option",{value:"dashed"},"虚线",-1)])],40,hu)]),((tn=(en=e.selectedEl)==null?void 0:en.style)==null?void 0:tn.lineStyle)==="dashed"?(C(),I("div",vu,[t[286]||(t[286]=l("label",{class:"block text-xs text-gray-400 mb-1"},"虚线长度(px)",-1)),l("input",{value:(nn=(rn=(ln=e.selectedEl)==null?void 0:ln.style)==null?void 0:rn.lineDashLength)!=null?nn:6,onInput:t[115]||(t[115]=s=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.lineDashLength=Number(s.target.value))}),type:"number",min:"1",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,40,$u)])):Y("",!0)]),((sn=(on=e.selectedEl)==null?void 0:on.style)==null?void 0:sn.lineStyle)==="dashed"?(C(),I("div",wu,[l("div",null,[t[287]||(t[287]=l("label",{class:"block text-xs text-gray-400 mb-1"},"虚线间距(px)",-1)),l("input",{value:(un=(dn=(an=e.selectedEl)==null?void 0:an.style)==null?void 0:dn.lineDashGap)!=null?un:4,onInput:t[116]||(t[116]=s=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.lineDashGap=Number(s.target.value))}),type:"number",min:"0",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,40,Eu)])])):Y("",!0)])):Y("",!0),e.selectedEl&&e.selectedEl.type==="text"?(C(),I("div",ku,[t[330]||(t[330]=l("h3",{class:"text-sm font-medium text-purple-300 border-b border-purple-500/30 pb-1"},"文本内容",-1)),l("div",Su,[t[289]||(t[289]=l("span",{class:"text-xs text-gray-400"},"模式",-1)),l("div",Cu,[l("button",{onClick:t[117]||(t[117]=()=>{e.selectedEl&&e.selectedEl.segments&&delete e.selectedEl.segments}),class:Ne(["px-2 py-0.5 text-[10px] rounded transition-colors",e.selectedEl.segments?"text-gray-400 hover:text-gray-200":"bg-purple-600 text-white"])},"普通",2),l("button",{onClick:t[118]||(t[118]=()=>{e.selectedEl&&(e.selectedEl.segments=e.selectedEl.segments||[{id:Date.now().toString(),text:e.selectedEl.text||"文本",style:{}}])}),class:Ne(["px-2 py-0.5 text-[10px] rounded transition-colors",e.selectedEl.segments?"bg-purple-600 text-white":"text-gray-400 hover:text-gray-200"])},"多段",2)])]),e.selectedEl.segments?(C(),I("div",zu,[(C(!0),I(Vt,null,Jt(e.selectedEl.segments,(s,k)=>{var w,ge,Ye,Ke,Xe;return C(),I("div",{key:s.id,class:"bg-gray-800/30 p-2 rounded border border-gray-700"},[l("div",Ou,[l("span",Du,"片段 "+ut(k+1),1),l("button",{onClick:xe=>{var Ze;return(Ze=e.selectedEl.segments)==null?void 0:Ze.splice(k,1)},class:"text-red-400 hover:text-red-300 text-[10px]"},"删除",8,Bu)]),l("div",Gu,[l("div",Tu,[l("label",Lu,[ce(l("input",{type:"checkbox","onUpdate:modelValue":xe=>s.dynamic=xe,class:"sr-only peer"},null,8,Uu),[[Ll,s.dynamic]]),t[294]||(t[294]=l("div",{class:"w-7 h-4 bg-gray-700 rounded-full peer-checked:bg-purple-600 relative"},[l("div",{class:"absolute left-0.5 top-0.5 w-3 h-3 bg-white rounded-full transition-transform peer-checked:translate-x-3"})],-1)),t[295]||(t[295]=l("span",{class:"ml-1 text-[10px] text-gray-400"},"动态",-1))])]),s.dynamic?(C(),I("div",Pu,[ce(l("input",{"onUpdate:modelValue":xe=>s.dynamicObj=xe,class:"w-full px-2 py-1 bg-gray-900/50 border border-gray-600 rounded text-gray-100 text-xs",placeholder:"对象名 (如 data)"},null,8,Wu),[[ke,s.dynamicObj]]),ce(l("input",{"onUpdate:modelValue":xe=>s.dynamicPath=xe,class:"w-full px-2 py-1 bg-gray-900/50 border border-gray-600 rounded text-gray-100 text-xs",placeholder:"属性路径 (如 user.name)"},null,8,Hu),[[ke,s.dynamicPath]]),l("div",_u,"预览值: "+ut(it(s)),1)])):(C(),I("div",Vu,[ce(l("input",{"onUpdate:modelValue":xe=>s.text=xe,class:"w-full px-2 py-1 bg-gray-900/50 border border-gray-600 rounded text-gray-100 text-xs",placeholder:"文本内容"},null,8,Ru),[[ke,s.text]])]))]),l("div",Ju,[l("div",null,[t[296]||(t[296]=l("label",{class:"block text-[10px] text-gray-400 mb-1"},"颜色 (Hex)",-1)),l("div",qu,[l("input",{type:"color",value:((w=s.style)==null?void 0:w.color)||"#ffffff",onInput:xe=>{s.style=s.style||{},s.style.color=xe.target.value},class:"w-6 h-6 p-0 border-0 rounded cursor-pointer shrink-0"},null,40,Yu),l("input",{type:"text",value:(ge=s.style)==null?void 0:ge.color,onInput:xe=>{s.style=s.style||{},s.style.color=xe.target.value},class:"w-full px-2 py-1 bg-gray-900/50 border border-gray-600 rounded text-xs font-mono uppercase",placeholder:"#FFFFFF"},null,40,Ku)])]),l("div",Xu,[l("div",null,[t[298]||(t[298]=l("label",{class:"block text-[10px] text-gray-400 mb-1"},"字体",-1)),l("select",{value:((Ye=s.style)==null?void 0:Ye.fontFamily)||"",onChange:xe=>{s.style=s.style||{},s.style.fontFamily=xe.target.value},class:"w-full px-1 py-1 bg-gray-900/50 border border-gray-600 rounded text-xs"},[t[297]||(t[297]=l("option",{value:""},"默认",-1)),(C(!0),I(Vt,null,Jt(e.fontLibrary,xe=>(C(),I("option",{key:xe,value:xe},ut(xe),9,Qu))),128))],40,Zu)]),l("div",null,[t[299]||(t[299]=l("label",{class:"block text-[10px] text-gray-400 mb-1"},"字号",-1)),l("input",{type:"number",value:(Ke=s.style)==null?void 0:Ke.fontSize,onInput:xe=>{s.style=s.style||{},s.style.fontSize=Number(xe.target.value)},class:"w-full px-2 py-1 bg-gray-900/50 border border-gray-600 rounded text-xs",placeholder:"默认"},null,40,ec)]),l("div",null,[t[301]||(t[301]=l("label",{class:"block text-[10px] text-gray-400 mb-1"},"粗细",-1)),l("select",{value:((Xe=s.style)==null?void 0:Xe.fontWeight)||"",onChange:xe=>{s.style=s.style||{},s.style.fontWeight=xe.target.value},class:"w-full px-1 py-1 bg-gray-900/50 border border-gray-600 rounded text-xs"},[...t[300]||(t[300]=[l("option",{value:""},"默认",-1),l("option",{value:"400"},"常规",-1),l("option",{value:"700"},"加粗",-1)])],40,tc)])])])])}),128)),l("button",{onClick:t[123]||(t[123]=s=>{var k;return(k=e.selectedEl.segments)==null?void 0:k.push({id:Date.now().toString(),text:"新片段",style:{}})}),class:"w-full py-1 text-xs border border-dashed border-gray-600 text-gray-400 rounded hover:border-purple-500 hover:text-purple-400 transition-colors"},"+ 添加片段")])):(C(),I("div",Mu,[ce(l("textarea",{"onUpdate:modelValue":t[119]||(t[119]=s=>e.selectedEl.text=s),class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200 resize-none",rows:"3"},null,512),[[ke,e.selectedEl.text]]),l("div",Iu,[t[293]||(t[293]=l("label",{class:"block text-xs text-gray-400 mb-1"},"动态值",-1)),l("div",Nu,[l("input",{type:"checkbox",checked:!!((pn=(cn=e.selectedEl)==null?void 0:cn.dynamic)!=null&&pn.enabled),onChange:t[120]||(t[120]=s=>{e.selectedEl&&(e.selectedEl.dynamic=e.selectedEl.dynamic||{enabled:!1,objectName:"",propertyPath:""},e.selectedEl.dynamic.enabled=s.target.checked)}),class:"rounded accent-purple-600"},null,40,ju),t[290]||(t[290]=l("span",{class:"text-xs text-gray-400"},"启用后从数据库对象绑定",-1))]),(fn=(gn=e.selectedEl)==null?void 0:gn.dynamic)!=null&&fn.enabled?(C(),I("div",Fu,[l("div",null,[t[291]||(t[291]=l("label",{class:"block text-xs text-gray-400 mb-1"},"选择对象",-1)),wt(Tt,{options:e.databaseObjects.map(s=>s.name),modelValue:((bn=(yn=e.selectedEl)==null?void 0:yn.dynamic)==null?void 0:bn.objectName)||"","onUpdate:modelValue":t[121]||(t[121]=s=>{e.selectedEl&&(e.selectedEl.dynamic=e.selectedEl.dynamic||{enabled:!0,objectName:"",propertyPath:""},e.selectedEl.dynamic.objectName=String(s||""))})},null,8,["options","modelValue"])]),l("div",null,[t[292]||(t[292]=l("label",{class:"block text-xs text-gray-400 mb-1"},"属性路径",-1)),wt(Tt,{options:Ae.value,modelValue:((mn=(xn=e.selectedEl)==null?void 0:xn.dynamic)==null?void 0:mn.propertyPath)||"","onUpdate:modelValue":t[122]||(t[122]=s=>{e.selectedEl&&(e.selectedEl.dynamic=e.selectedEl.dynamic||{enabled:!0,objectName:"",propertyPath:""},e.selectedEl.dynamic.propertyPath=String(s||""))})},null,8,["options","modelValue"])]),l("div",Au,"预览值: "+ut(Be(e.selectedEl)),1)])):Y("",!0)])])),l("div",lc,[t[302]||(t[302]=l("label",{class:"block text-xs text-gray-400 mb-1"},"尺寸模式",-1)),l("div",rc,[l("button",{onClick:t[124]||(t[124]=()=>{const s=e.selectedEl;!s||s.type!=="text"||(s.autoSize=!0)}),class:Ne(["px-2 py-1 text-xs rounded transition-colors duration-200",e.selectedEl.autoSize!==!1?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"])},"自适应",2),l("button",{onClick:t[125]||(t[125]=()=>{const s=e.selectedEl;!s||s.type!=="text"||(s.autoSize=!1)}),class:Ne(["px-2 py-1 text-xs rounded transition-colors duration-200",e.selectedEl.autoSize===!1?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"])},"固定尺寸",2)])]),l("div",nc,[l("div",null,[t[303]||(t[303]=l("label",{class:"block text-xs text-gray-400 mb-1"},"字号",-1)),wt(Tt,{options:e.fontSizeLibrary,modelValue:((hn=e.selectedEl.style)==null?void 0:hn.fontSize)||14,"onUpdate:modelValue":t[126]||(t[126]=s=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.fontSize=s)}),numeric:!0},null,8,["options","modelValue"])]),l("div",null,[t[304]||(t[304]=l("label",{class:"block text-xs text-gray-400 mb-1"},"字体",-1)),wt(Tt,{options:e.fontLibrary,modelValue:((vn=e.selectedEl.style)==null?void 0:vn.fontFamily)||e.config.globalFontFamily,"onUpdate:modelValue":t[127]||(t[127]=s=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.fontFamily=s)})},null,8,["options","modelValue"])])]),l("div",oc,[l("div",null,[t[305]||(t[305]=l("label",{class:"block text-xs text-gray-400 mb-1"},"粗细",-1)),wt(Tt,{options:e.fontWeightOptions,modelValue:(($n=e.selectedEl.style)==null?void 0:$n.fontWeight)||"400","onUpdate:modelValue":t[128]||(t[128]=s=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.fontWeight=s)})},null,8,["options","modelValue"])]),l("div",null,[t[306]||(t[306]=l("label",{class:"block text-xs text-gray-400 mb-1"},"样式",-1)),wt(Tt,{options:e.fontStyleOptions,modelValue:((wn=e.selectedEl.style)==null?void 0:wn.fontStyle)||"normal","onUpdate:modelValue":t[129]||(t[129]=s=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.fontStyle=s)})},null,8,["options","modelValue"])])]),l("div",sc,[l("div",null,[t[307]||(t[307]=l("label",{class:"block text-xs text-gray-400 mb-1"},"字间距",-1)),l("input",{value:((En=e.selectedEl.style)==null?void 0:En.letterSpacing)||0,onInput:t[130]||(t[130]=s=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.letterSpacing=Number(s.target.value))}),type:"number",step:"0.1",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,40,ac)]),l("div",null,[t[308]||(t[308]=l("label",{class:"block text-xs text-gray-400 mb-1"},"行高",-1)),l("input",{value:((kn=e.selectedEl.style)==null?void 0:kn.lineHeight)||1.5,onInput:t[131]||(t[131]=s=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.lineHeight=Number(s.target.value))}),type:"number",step:"0.1",min:"0.5",max:"3",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,40,ic)])]),l("div",dc,[t[309]||(t[309]=l("label",{class:"block text-xs text-gray-400 mb-1"},"缩进",-1)),l("input",{value:((Sn=e.selectedEl.style)==null?void 0:Sn.textIndent)||"",onInput:t[132]||(t[132]=s=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.textIndent=s.target.value)}),type:"text",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200",placeholder:"例如: 2em 或 24px"},null,40,uc)]),l("div",cc,[t[310]||(t[310]=l("label",{class:"block text-xs text-gray-400 mb-1"},"颜色",-1)),l("div",pc,[l("input",{value:(Mn=(Cn=e.selectedEl)==null?void 0:Cn.style)!=null&&Mn.textGradient?"#000000":((Nn=(In=e.selectedEl)==null?void 0:In.style)==null?void 0:Nn.color)||e.config.globalColor,onInput:t[133]||(t[133]=s=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.color=s.target.value)}),type:"color",disabled:!!((Fn=(jn=e.selectedEl)==null?void 0:jn.style)!=null&&Fn.textGradient),class:"w-8 h-6 bg-gray-800/50 border border-purple-500/30 rounded cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed"},null,40,gc),l("input",{value:(zn=(An=e.selectedEl)==null?void 0:An.style)!=null&&zn.textGradient?"transparent":(Bn=(Dn=(On=e.selectedEl)==null?void 0:On.style)==null?void 0:Dn.color)!=null?Bn:e.config.globalColor,onInput:t[134]||(t[134]=s=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.color=s.target.value)}),type:"text",disabled:!!((Tn=(Gn=e.selectedEl)==null?void 0:Gn.style)!=null&&Tn.textGradient),class:"flex-1 px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-xs focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",placeholder:"#000000"},null,40,fc)]),(Un=(Ln=e.selectedEl)==null?void 0:Ln.style)!=null&&Un.textGradient?(C(),I("div",yc,"文字渐变启用时，文字颜色自动设为透明")):Y("",!0)]),l("div",bc,[t[311]||(t[311]=l("label",{class:"block text-xs text-gray-400 mb-1"},"背景色",-1)),l("div",xc,[l("input",{value:e.safeHex(((Rn=(Vn=e.selectedEl)==null?void 0:Vn.style)==null?void 0:Rn.backgroundColor)||""),onInput:t[135]||(t[135]=s=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.backgroundColor=s.target.value)}),type:"color",class:"w-8 h-6 bg-gray-800/50 border border-purple-500/30 rounded cursor-pointer"},null,40,mc),l("input",{value:(Hn=(Wn=(Pn=e.selectedEl)==null?void 0:Pn.style)==null?void 0:Wn.backgroundColor)!=null?Hn:"transparent",onInput:t[136]||(t[136]=s=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.backgroundColor=s.target.value)}),type:"text",class:"flex-1 px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-xs focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200",placeholder:"transparent"},null,40,hc)])]),l("div",vc,[t[312]||(t[312]=l("label",{class:"block text-xs text-gray-400 mb-1"},"文本对齐",-1)),l("div",$c,[l("button",{onClick:t[137]||(t[137]=()=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.textAlign="left")}),class:Ne(["px-2 py-1 text-xs rounded transition-colors duration-200",(((_n=e.selectedEl.style)==null?void 0:_n.textAlign)||"left")==="left"?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"])},"左对齐",2),l("button",{onClick:t[138]||(t[138]=()=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.textAlign="center")}),class:Ne(["px-2 py-1 text-xs rounded transition-colors duration-200",(((Jn=e.selectedEl.style)==null?void 0:Jn.textAlign)||"left")==="center"?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"])},"居中",2),l("button",{onClick:t[139]||(t[139]=()=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.textAlign="right")}),class:Ne(["px-2 py-1 text-xs rounded transition-colors duration-200",(((qn=e.selectedEl.style)==null?void 0:qn.textAlign)||"left")==="right"?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"])},"右对齐",2),l("button",{onClick:t[140]||(t[140]=()=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.textAlign="justify")}),class:Ne(["px-2 py-1 text-xs rounded transition-colors duration-200",(((Yn=e.selectedEl.style)==null?void 0:Yn.textAlign)||"left")==="justify"?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"])},"两端",2)])]),l("div",wc,[t[313]||(t[313]=l("label",{class:"block text-xs text-gray-400 mb-1"},"文本方向",-1)),l("div",Ec,[l("button",{onClick:t[141]||(t[141]=()=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.textOrientation="horizontal")}),class:Ne(["px-2 py-1 text-xs rounded transition-colors duration-200",(((Xn=(Kn=e.selectedEl)==null?void 0:Kn.style)==null?void 0:Xn.textOrientation)||"horizontal")==="horizontal"?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"])},"横向",2),l("button",{onClick:t[142]||(t[142]=()=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.textOrientation="vertical")}),class:Ne(["px-2 py-1 text-xs rounded transition-colors duration-200",(((Qn=(Zn=e.selectedEl)==null?void 0:Zn.style)==null?void 0:Qn.textOrientation)||"horizontal")==="vertical"?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"])},"纵向",2)]),t[314]||(t[314]=l("p",{class:"text-[11px] text-gray-400"},"纵向使用 CSS writing-mode 展示，适合竖排文本。",-1))]),l("div",kc,[t[316]||(t[316]=l("label",{class:"block text-xs text-gray-400 mb-1"},"布局倾斜",-1)),l("div",Sc,[ce(l("input",{"onUpdate:modelValue":t[143]||(t[143]=s=>e.selectedEl.style.skewAngle=s),type:"range",min:"-45",max:"45",class:"flex-1"},null,512),[[ke,e.selectedEl.style.skewAngle,void 0,{number:!0}]]),ce(l("input",{"onUpdate:modelValue":t[144]||(t[144]=s=>e.selectedEl.style.skewAngle=s),type:"number",min:"-45",max:"45",class:"w-16 px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-xs focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,512),[[ke,e.selectedEl.style.skewAngle,void 0,{number:!0}]])]),l("div",Cc,[t[315]||(t[315]=l("label",{class:"text-xs text-gray-400"},"布局倾斜跟随",-1)),l("button",{onClick:t[145]||(t[145]=()=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.skewFlowEnabled=!0)}),class:Ne(["px-2 py-1 text-xs rounded transition-colors duration-200",(to=(eo=e.selectedEl)==null?void 0:eo.style)!=null&&to.skewFlowEnabled?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"])},"开",2),l("button",{onClick:t[146]||(t[146]=()=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.skewFlowEnabled=!1)}),class:Ne(["px-2 py-1 text-xs rounded transition-colors duration-200",(ro=(lo=e.selectedEl)==null?void 0:lo.style)!=null&&ro.skewFlowEnabled?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-purple-600 text-white"])},"关",2)]),t[317]||(t[317]=l("p",{class:"text-[11px] text-gray-400"},"调整整体容器的 X 轴倾斜角度（-45° ~ 45°）。启用“跟随”后，文本布局按父视图倾斜线性排布，字符保持正立，可与波形叠加。",-1))]),l("div",Mc,[l("div",Ic,[t[318]||(t[318]=l("label",{class:"text-xs text-gray-400"},"文本波形",-1)),l("div",Nc,[(so=(oo=(no=e.selectedEl)==null?void 0:no.style)==null?void 0:oo.textWave)!=null&&so.enabled?(C(),I("button",{key:1,onClick:t[148]||(t[148]=()=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.textWave={enabled:!1})}),class:"px-2 py-1 bg-red-600/30 hover:bg-red-600/50 text-red-300 rounded text-xs transition-colors duration-200"},"关闭")):(C(),I("button",{key:0,onClick:t[147]||(t[147]=()=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.textWave={enabled:!0,amplitude:8,frequency:.5,phase:0})}),class:"px-2 py-1 bg-purple-600/30 hover:bg-purple-600/50 text-purple-300 rounded text-xs transition-colors duration-200"},"启用"))])]),(uo=(io=(ao=e.selectedEl)==null?void 0:ao.style)==null?void 0:io.textWave)!=null&&uo.enabled?(C(),I("div",jc,[l("div",Fc,[t[319]||(t[319]=l("label",{class:"block text-xs text-gray-400 mb-1"},"幅度(px)",-1)),ce(l("input",{"onUpdate:modelValue":t[149]||(t[149]=s=>e.selectedEl.style.textWave.amplitude=s),type:"number",min:"0",max:"100",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-xs focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,512),[[ke,e.selectedEl.style.textWave.amplitude,void 0,{number:!0}]])]),l("div",Ac,[t[320]||(t[320]=l("label",{class:"block text-xs text-gray-400 mb-1"},"频率(rad/字)",-1)),ce(l("input",{"onUpdate:modelValue":t[150]||(t[150]=s=>e.selectedEl.style.textWave.frequency=s),type:"number",step:"0.1",min:"0.1",max:"10",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-xs focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,512),[[ke,e.selectedEl.style.textWave.frequency,void 0,{number:!0}]])]),l("div",zc,[t[321]||(t[321]=l("label",{class:"block text-xs text-gray-400 mb-1"},"相位(rad)",-1)),ce(l("input",{"onUpdate:modelValue":t[151]||(t[151]=s=>e.selectedEl.style.textWave.phase=s),type:"number",step:"0.1",min:"-100",max:"100",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-xs focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,512),[[ke,e.selectedEl.style.textWave.phase,void 0,{number:!0}]])])])):Y("",!0),t[322]||(t[322]=l("p",{class:"text-[11px] text-gray-400"},"每个字符沿 Y 轴按正弦位移，字符保持正立。",-1))]),l("div",Oc,[t[323]||(t[323]=l("label",{class:"block text-xs text-gray-400 mb-1"},"文本装饰",-1)),l("div",Dc,[l("button",{onClick:t[152]||(t[152]=()=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.textDecoration=e.selectedEl.style.textDecoration==="underline"?"none":"underline")}),class:Ne(["px-2 py-1 text-xs rounded transition-colors duration-200",(((co=e.selectedEl.style)==null?void 0:co.textDecoration)||"none")==="underline"?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"])},"下划线",2),l("button",{onClick:t[153]||(t[153]=()=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.textDecoration=e.selectedEl.style.textDecoration==="line-through"?"none":"line-through")}),class:Ne(["px-2 py-1 text-xs rounded transition-colors duration-200",(((po=e.selectedEl.style)==null?void 0:po.textDecoration)||"none")==="line-through"?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"])},"删除线",2),l("button",{onClick:t[154]||(t[154]=()=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.textDecoration="none")}),class:Ne(["px-2 py-1 text-xs rounded transition-colors duration-200",(((go=e.selectedEl.style)==null?void 0:go.textDecoration)||"none")==="none"?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"])},"无",2)])]),l("div",Bc,[l("div",Gc,[t[324]||(t[324]=l("label",{class:"text-xs text-gray-400"},"文本渐变",-1)),l("div",Tc,[(fo=e.selectedEl.style)!=null&&fo.textGradient?Y("",!0):(C(),I("button",{key:0,onClick:t[155]||(t[155]=s=>V(e.selectedEl)),class:"px-2 py-1 bg-purple-600/30 hover:bg-purple-600/50 text-purple-300 rounded text-xs transition-colors duration-200"},"启用")),(yo=e.selectedEl.style)!=null&&yo.textGradient?(C(),I("button",{key:1,onClick:t[156]||(t[156]=()=>{e.selectedEl&&e.selectedEl.style&&(e.selectedEl.style.textGradient=void 0)}),class:"px-2 py-1 bg-red-600/30 hover:bg-red-600/50 text-red-300 rounded text-xs transition-colors duration-200"},"关闭")):Y("",!0)])]),(bo=e.selectedEl.style)!=null&&bo.textGradient?(C(),I("div",Lc,[l("div",Uc,[l("div",null,[t[325]||(t[325]=l("label",{class:"block text-xs text-gray-400 mb-1"},"起始色",-1)),l("div",Vc,[ce(l("input",{"onUpdate:modelValue":t[157]||(t[157]=s=>e.selectedEl.style.textGradient.colors[0]=s),type:"color",class:"w-8 h-6 bg-gray-800/50 border border-purple-500/30 rounded cursor-pointer"},null,512),[[ke,e.selectedEl.style.textGradient.colors[0]]]),ce(l("input",{"onUpdate:modelValue":t[158]||(t[158]=s=>e.selectedEl.style.textGradient.colors[0]=s),type:"text",class:"flex-1 px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-xs focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200",placeholder:"#DFDD5A"},null,512),[[ke,e.selectedEl.style.textGradient.colors[0]]])])]),l("div",null,[t[326]||(t[326]=l("label",{class:"block text-xs text-gray-400 mb-1"},"结束色",-1)),l("div",Rc,[ce(l("input",{"onUpdate:modelValue":t[159]||(t[159]=s=>e.selectedEl.style.textGradient.colors[1]=s),type:"color",class:"w-8 h-6 bg-gray-800/50 border border-purple-500/30 rounded cursor-pointer"},null,512),[[ke,e.selectedEl.style.textGradient.colors[1]]]),ce(l("input",{"onUpdate:modelValue":t[160]||(t[160]=s=>e.selectedEl.style.textGradient.colors[1]=s),type:"text",class:"flex-1 px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-xs focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200",placeholder:"#FFFFFF"},null,512),[[ke,e.selectedEl.style.textGradient.colors[1]]])])])]),l("div",null,[l("label",Pc,"角度: "+ut(e.selectedEl.style.textGradient.angle||0)+"°",1),ce(l("input",{"onUpdate:modelValue":t[161]||(t[161]=s=>e.selectedEl.style.textGradient.angle=s),type:"range",min:"0",max:"360",class:"w-full"},null,512),[[ke,e.selectedEl.style.textGradient.angle,void 0,{number:!0}]])])])):Y("",!0)]),l("div",Wc,[l("div",Hc,[t[327]||(t[327]=l("label",{class:"text-xs text-gray-400"},"背景渐变",-1)),l("div",_c,[(xo=e.selectedEl.style)!=null&&xo.backgroundGradient?Y("",!0):(C(),I("button",{key:0,onClick:t[162]||(t[162]=s=>U(e.selectedEl)),class:"px-2 py-1 bg-purple-600/30 hover:bg-purple-600/50 text-purple-300 rounded text-xs transition-colors duration-200"},"启用")),(mo=e.selectedEl.style)!=null&&mo.backgroundGradient?(C(),I("button",{key:1,onClick:t[163]||(t[163]=()=>{e.selectedEl&&e.selectedEl.style&&(e.selectedEl.style.backgroundGradient=void 0)}),class:"px-2 py-1 bg-red-600/30 hover:bg-red-600/50 text-red-300 rounded text-xs transition-colors duration-200"},"关闭")):Y("",!0)])]),(ho=e.selectedEl.style)!=null&&ho.backgroundGradient?(C(),I("div",Jc,[l("div",qc,[l("div",null,[t[328]||(t[328]=l("label",{class:"block text-xs text-gray-400 mb-1"},"起始色",-1)),l("div",Yc,[ce(l("input",{"onUpdate:modelValue":t[164]||(t[164]=s=>e.selectedEl.style.backgroundGradient.colors[0]=s),type:"color",class:"w-8 h-6 bg-gray-800/50 border border-purple-500/30 rounded cursor-pointer"},null,512),[[ke,e.selectedEl.style.backgroundGradient.colors[0]]]),ce(l("input",{"onUpdate:modelValue":t[165]||(t[165]=s=>e.selectedEl.style.backgroundGradient.colors[0]=s),type:"text",class:"flex-1 px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-xs focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200",placeholder:"#00A3FF"},null,512),[[ke,e.selectedEl.style.backgroundGradient.colors[0]]])])]),l("div",null,[t[329]||(t[329]=l("label",{class:"block text-xs text-gray-400 mb-1"},"结束色",-1)),l("div",Kc,[ce(l("input",{"onUpdate:modelValue":t[166]||(t[166]=s=>e.selectedEl.style.backgroundGradient.colors[1]=s),type:"color",class:"w-8 h-6 bg-gray-800/50 border border-purple-500/30 rounded cursor-pointer"},null,512),[[ke,e.selectedEl.style.backgroundGradient.colors[1]]]),ce(l("input",{"onUpdate:modelValue":t[167]||(t[167]=s=>e.selectedEl.style.backgroundGradient.colors[1]=s),type:"text",class:"flex-1 px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-xs focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200",placeholder:"#ffffff"},null,512),[[ke,e.selectedEl.style.backgroundGradient.colors[1]]])])])]),l("div",null,[l("label",Xc,"角度: "+ut(e.selectedEl.style.backgroundGradient.angle||0)+"°",1),ce(l("input",{"onUpdate:modelValue":t[168]||(t[168]=s=>e.selectedEl.style.backgroundGradient.angle=s),type:"range",min:"0",max:"360",class:"w-full"},null,512),[[ke,e.selectedEl.style.backgroundGradient.angle,void 0,{number:!0}]])])])):Y("",!0)])])):Y("",!0),e.selectedEl&&e.selectedEl.type==="image"?(C(),I("div",Zc,[t[341]||(t[341]=nr('<h3 class="text-sm font-medium text-purple-300 border-b border-purple-500/30 pb-1" data-v-3aa712a7>图片设置</h3><div class="space-y-2" data-v-3aa712a7><label class="block text-xs text-gray-400 mb-1" data-v-3aa712a7>图片来源</label><div class="grid grid-cols-2 gap-2" data-v-3aa712a7><button class="px-3 py-2 bg-purple-600/30 hover:bg-purple-600/50 text-purple-300 rounded text-xs transition-colors duration-200" data-v-3aa712a7>上传文件</button><button class="px-3 py-2 bg-green-600/30 hover:bg-green-600/50 text-green-300 rounded text-xs transition-colors duration-200" data-v-3aa712a7>选择图标</button></div></div>',2)),l("div",Qc,[t[331]||(t[331]=l("label",{class:"block text-xs text-gray-400 mb-1"},"图片文件",-1)),l("input",{type:"file",onChange:Et,accept:"image/*",class:"w-full text-xs text-gray-300 file:mr-2 file:py-1 file:px-2 file:rounded file:border-0 file:text-xs file:bg-purple-600 file:text-white hover:file:bg-purple-500 file:cursor-pointer"},null,32)]),l("div",e0,[t[332]||(t[332]=l("label",{class:"block text-xs text-gray-400 mb-1"},"选择高亮图标",-1)),l("div",t0,[l("div",l0,[(C(!0),I(Vt,null,Jt(e.iconLibrary,s=>(C(),I("div",{key:s.id,onClick:k=>qe(s),class:"aspect-square bg-gray-700/50 rounded cursor-pointer hover:bg-gray-600/50 transition-colors duration-200 flex items-center justify-center p-1 border border-transparent hover:border-pink-400/50"},[l("img",{src:s.url,alt:s.name,class:"max-w-full max-h-full object-contain",loading:"lazy"},null,8,n0)],8,r0))),128))])])]),l("div",o0,[t[333]||(t[333]=l("label",{class:"block text-xs text-gray-400 mb-1"},"是否使用高亮",-1)),l("div",s0,[l("button",{onClick:t[169]||(t[169]=()=>{e.selectedEl&&(e.selectedEl.highlightEnabled=!0)}),class:Ne(["px-3 py-2 rounded text-xs transition-colors duration-200",e.selectedEl.highlightEnabled?"bg-pink-600/60 text-white":"bg-gray-700/60 text-gray-200 hover:bg-gray-600/60"])},"开启高亮",2),l("button",{onClick:t[170]||(t[170]=()=>{e.selectedEl&&(e.selectedEl.highlightEnabled=!1)}),class:Ne(["px-3 py-2 rounded text-xs transition-colors duration-200",e.selectedEl.highlightEnabled?"bg-gray-700/60 text-gray-200 hover:bg-gray-600/60":"bg-pink-600/60 text-white"])},"关闭高亮",2)])]),e.iconLibrary.length>0?(C(),I("div",a0,[t[334]||(t[334]=l("label",{class:"block text-xs text-gray-400 mb-1"},"选择图标",-1)),l("div",i0,[l("div",d0,[(C(!0),I(Vt,null,Jt(e.iconLibrary,s=>(C(),I("div",{key:s.id,onClick:k=>je(s),class:"aspect-square bg-gray-700/50 rounded cursor-pointer hover:bg-gray-600/50 transition-colors duration-200 flex items-center justify-center p-1 border border-transparent hover:border-green-400/50"},[l("img",{src:s.url,alt:s.name,class:"max-w-full max-h-full object-contain",loading:"lazy"},null,8,c0)],8,u0))),128))])]),e.iconLibrary.length===0?(C(),I("div",p0,"暂无图标，请先在图标库管理中上传图标")):Y("",!0)])):Y("",!0),l("div",g0,[t[335]||(t[335]=l("label",{class:"block text-xs text-gray-400 mb-1"},"尺寸模式",-1)),l("div",f0,[l("button",{onClick:$e,class:Ne(["px-3 py-2 rounded text-xs transition-colors duration-200",e.selectedEl.autoSize===!0?"bg-blue-600 text-white":"bg-blue-600/30 hover:bg-blue-600/50 text-blue-300"])},"自适应（原始尺寸）",2),l("button",{onClick:Ge,class:Ne(["px-3 py-2 rounded text-xs transition-colors duration-200",e.selectedEl.autoSize!==!0?"bg-purple-600 text-white":"bg-purple-600/30 hover:bg-purple-600/50 text-purple-300"])},"固定大小",2)])]),l("div",y0,[l("div",null,[t[336]||(t[336]=l("label",{class:"block text-xs text-gray-400 mb-1"},"宽度(px)",-1)),ce(l("input",{"onUpdate:modelValue":t[171]||(t[171]=s=>e.selectedEl.width=s),type:"number",min:"1",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,512),[[ke,e.selectedEl.width,void 0,{number:!0}]])]),l("div",null,[t[337]||(t[337]=l("label",{class:"block text-xs text-gray-400 mb-1"},"高度(px)",-1)),ce(l("input",{"onUpdate:modelValue":t[172]||(t[172]=s=>e.selectedEl.height=s),type:"number",min:"1",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,512),[[ke,e.selectedEl.height,void 0,{number:!0}]])]),l("div",null,[t[339]||(t[339]=l("label",{class:"block text-xs text-gray-400 mb-1"},"对象适配",-1)),ce(l("select",{"onUpdate:modelValue":t[173]||(t[173]=s=>e.selectedEl.style.objectFit=s),class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},[...t[338]||(t[338]=[nr('<option value="contain" data-v-3aa712a7>contain（完整显示）</option><option value="cover" data-v-3aa712a7>cover（填充裁剪）</option><option value="fill" data-v-3aa712a7>fill（拉伸填充）</option><option value="scale-down" data-v-3aa712a7>scale-down（缩小适配）</option><option value="none" data-v-3aa712a7>none（不适配）</option>',5)])],512),[[$o,e.selectedEl.style.objectFit]])])]),l("div",b0,[t[340]||(t[340]=l("label",{class:"block text-xs text-gray-400 mb-1"},"圆角",-1)),ce(l("input",{"onUpdate:modelValue":t[174]||(t[174]=s=>e.selectedEl.style.borderRadius=s),type:"number",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,512),[[ke,e.selectedEl.style.borderRadius,void 0,{number:!0}]])])])):Y("",!0),l("div",x0,[l("button",{onClick:t[175]||(t[175]=s=>d("saveSelectedAsComponent")),class:"w-full px-3 py-2 bg-gradient-to-r from-purple-600 to-fuchsia-600 hover:from-purple-500 hover:to-fuchsia-500 text-white rounded-lg text-sm font-medium transition-all duration-200 transform hover:scale-105 shadow-lg shadow-purple-500/25"},"保存为组件"),l("button",{onClick:t[176]||(t[176]=s=>d("duplicateSelected")),class:"w-full px-3 py-2 bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-500 hover:to-cyan-500 text-white rounded-lg text-sm font-medium transition-all duration-200 transform hover:scale-105 shadow-lg shadow-blue-500/25"},"复制元素"),l("button",{onClick:t[177]||(t[177]=s=>d("removeSelected")),class:"w-full px-3 py-2 bg-gradient-to-r from-red-600 to-pink-600 hover:from-red-500 hover:to-pink-500 text-white rounded-lg text-sm font-medium transition-all duration-200 transform hover:scale-105 shadow-lg shadow-red-500/25"},"删除元素")])])):Y("",!0),e.selectedEl?Y("",!0):(C(),I("div",m0,[...t[342]||(t[342]=[l("div",{class:"w-16 h-16 mx-auto mb-4 border-2 border-dashed border-gray-600 rounded-lg flex items-center justify-center"},[l("span",{class:"text-2xl"},"📝")],-1),l("p",{class:"text-sm"},"选择一个元素来编辑其属性",-1)])]))])}}}),$0=pr(v0,[["__scopeId","data-v-3aa712a7"]]),w0={class:"h-full bg-gradient-to-br from-gray-900 via-blue-900 to-purple-900 text-white relative overflow-hidden min-w-[1200px]"},E0={class:"relative z-10 flex h-full min-h-[600px] gap-4 p-4"},k0={class:"flex-1 min-w-0 flex flex-col bg-gray-900/60 backdrop-blur-sm border border-purple-500/30 rounded-xl shadow-2xl shadow-purple-500/20"},S0={class:"flex items-center justify-between p-4 border-b border-purple-500/30 bg-gradient-to-r from-purple-600/20 to-pink-600/20 flex-shrink-0"},C0={class:"flex gap-2"},M0={class:"relative"},I0={class:"grid grid-cols-2 gap-2"},N0={class:"flex items-center gap-2"},j0={class:"text-sm text-gray-400 min-w-[60px] text-center"},F0={key:0,class:"absolute inset-0 pointer-events-none z-50"},A0={key:1,class:"absolute inset-0 z-[9999] select-none pointer-events-none"},z0={key:0,class:"fixed inset-0 z-50 flex items-center justify-center"},O0={class:"relative w-[800px] max-w-[90vw] bg-gray-900/90 backdrop-blur-md border border-fuchsia-500/40 rounded-xl shadow-2xl"},D0={class:"p-4 space-y-3"},B0={class:"flex items-center gap-2"},G0={key:0,class:"text-center text-sm text-gray-400 py-6"},T0={key:1},L0={key:0,class:"text-center text-sm text-gray-400 py-6"},U0={key:1,class:"grid grid-cols-3 gap-3"},V0={class:"aspect-video bg-gray-700/50 flex items-center justify-center"},R0=["src"],P0={key:1,class:"text-gray-400 text-xs"},W0={class:"p-3 space-y-1"},H0={class:"flex items-center justify-between"},_0=["title"],J0={class:"text-xs text-gray-500"},q0={class:"flex flex-wrap gap-1 mt-1"},Y0={class:"pt-2"},K0=["onClick"],X0={key:1,class:"fixed inset-0 z-50 flex items-center justify-center"},Z0={class:"relative w-[600px] max-w-[90vw] bg-gray-900/90 backdrop-blur-md border border-cyan-500/40 rounded-xl shadow-2xl"},Q0={class:"flex items-center justify-between p-4 border-b border-cyan-500/30 bg-gradient-to-r from-cyan-600/20 to-blue-600/20"},ep={class:"p-4 space-y-3 max-h-[50vh] overflow-y-auto"},tp={key:0,class:"text-center text-sm text-gray-400 py-6"},lp={key:1,class:"space-y-2"},rp=["title"],np=["onClick"],op=50,ir=1,sp=ol({__name:"LowCodeBuilder",props:{projectId:{},currentProject:{},isComponent:{type:Boolean}},setup(g){const a=g,e=Ro(),d=Ho(),S=st(()=>{var n;return(n=a.projectId)!=null?n:e.params.id?String(e.params.id):void 0}),D=me(null);async function P(){if(S.value)try{const n=(await fe()).transaction(["projects"],"readonly").objectStore("projects").get(S.value);n.onsuccess=()=>{D.value=n.result}}catch(n){console.error("加载项目信息失败:",n)}}function te(){if(!S.value)return;const n=a.isComponent?{path:`/project/${S.value}/preview`,query:{type:"component"}}:{path:`/project/${S.value}/preview`},o=d.resolve(n).href;window.open(o,"_blank")}async function fe(){return new Promise((n,o)=>{const i="lowcode-projects",u="projects",b=indexedDB.open(i);b.onerror=()=>o(b.error),b.onupgradeneeded=()=>{const x=b.result;x.objectStoreNames.contains(u)||x.createObjectStore(u,{keyPath:"id"})},b.onsuccess=()=>{const x=b.result;if(x.objectStoreNames.contains(u))n(x);else{const F=x.version+1;x.close();const N=indexedDB.open(i,F);N.onerror=()=>o(N.error),N.onupgradeneeded=()=>{const A=N.result;A.objectStoreNames.contains(u)||A.createObjectStore(u,{keyPath:"id"})},N.onsuccess=()=>n(N.result)}}})}const E=vo({width:1024,height:576,backgroundUrl:"",backgroundColor:"#000000",globalFontFamily:"Arial, Helvetica, sans-serif",globalFontSize:14,globalColor:"#FFFFFF"}),ie=me("GeneratedComponent"),Ae=me(["Arial, Helvetica, sans-serif","PingFang SC","Microsoft YaHei","Roboto","Inter"]),Be=me([8,9,10,11,12,14,16,18,20,24,28,32,36,48,64]),Ce=me(["100","200","300","400","500","600","700","800","900"]),ne=me(["normal","italic","oblique"]),j=me([]),f=me(null),m=me([]),L=me({}),V=me(null),U=me([]),q=me(!1),Ve=me(!1),X=me({id:null,steps:[],cursor:0,stage:0,active:!1}),G=me(!1);function se(n){return`${n}-${Math.random().toString(36).slice(2,8)}`}function Le(){try{const n=JSON.parse(JSON.stringify(j.value));U.value.push(n),U.value.length>op&&U.value.shift()}catch(n){console.warn("pushHistory 序列化失败：",n)}}function Et(){U.value.length!==0&&(j.value=U.value.pop(),f.value=null,it.value=!1)}function je(n){var x,F,N,A,z,c,p,T,H,ae,he,Fe,de,ve,Q;function o(ee){var le;if(!ee)return!1;const R=(le=ee.tagName)==null?void 0:le.toLowerCase();return ee.isContentEditable||!!ee.closest('[contenteditable="true"]')||R==="input"||R==="textarea"||R==="select"}const i=document.activeElement;if(o(i)||o(n.target))return;const u=n.metaKey||n.ctrlKey,b=n.key.toLowerCase();if(b==="arrowleft"||b==="arrowright"||b==="arrowup"||b==="arrowdown"){if(!f.value)return;const{el:ee}=ht(f.value);if(!ee)return;Ve.value||(Le(),Ve.value=!0,X.value={id:f.value,steps:[],cursor:0,stage:0,active:!0},G.value=!0),$e.shift=n.shiftKey,b==="arrowleft"&&($e.left=!0),b==="arrowright"&&($e.right=!0),b==="arrowup"&&($e.up=!0),b==="arrowdown"&&($e.down=!0);const R=n.shiftKey?10:1;dt(b==="arrowleft"?-R:b==="arrowright"?R:0,b==="arrowup"?-R:b==="arrowdown"?R:0),He!=null&&(clearTimeout(He),He=null),He=window.setTimeout(()=>{gt()},220),n.preventDefault();return}if(u&&b==="c"){if(Wt.value){try{V.value=JSON.parse(JSON.stringify(Wt.value))}catch{}n.preventDefault()}}else if(u&&b==="v"){if(V.value){const ee=V.value,R=Ml(ee),{parentGroup:le}=ht(ee.id);if(le){const We=Number((F=(x=le.left)!=null?x:le.x)!=null?F:0),y=Number((A=(N=le.top)!=null?N:le.y)!=null?A:0),h=Number((z=le.width)!=null?z:0),W=Number((c=le.height)!=null?c:0),O=We+h,B=y+W,K=Number((p=ee.width)!=null?p:0),M=Number((T=ee.height)!=null?T:0);let _=K,v=M;if(!_||!v)if(ee.type==="text"){const At=Number((H=ee.fontSize)!=null?H:16),Nt=String((he=(ae=ee.text)!=null?ae:ee.content)!=null?he:"").trim();_=Math.max(K||50,Math.round((Nt.length||2)*At*.6)),v=Math.max(M||20,Math.round(At*1.5))}else ee.type==="image"?(_=K||200,v=M||150):ee.type==="carousel"?(_=K||320,v=M||200):ee.type==="chart"?(_=K||240,v=M||160):ee.type==="line"?(_=K||200,v=M||2):(_=K||100,v=M||60);const J=10,ye=We+h/2,be=y+W/2;let Ue=!1,Je=O+J,ot=Math.round(be-v/2);if(!Ue&&Je+_<=E.width&&(R.left=Math.max(0,Math.min(Je,Math.max(0,E.width-_))),R.top=Math.max(0,Math.min(ot,Math.max(0,E.height-v))),Ue=!0),Je=We-_-J,ot=Math.round(be-v/2),!Ue&&Je>=0&&(R.left=Math.max(0,Math.min(Je,Math.max(0,E.width-_))),R.top=Math.max(0,Math.min(ot,Math.max(0,E.height-v))),Ue=!0),Je=Math.round(ye-_/2),ot=B+J,!Ue&&ot+v<=E.height&&(R.left=Math.max(0,Math.min(Je,Math.max(0,E.width-_))),R.top=Math.max(0,Math.min(ot,Math.max(0,E.height-v))),Ue=!0),Je=Math.round(ye-_/2),ot=y-v-J,!Ue&&ot>=0&&(R.left=Math.max(0,Math.min(Je,Math.max(0,E.width-_))),R.top=Math.max(0,Math.min(ot,Math.max(0,E.height-v))),Ue=!0),!Ue){const At=Number((de=(Fe=ee.left)!=null?Fe:ee.x)!=null?de:0),Nt=Number((Q=(ve=ee.top)!=null?ve:ee.y)!=null?Q:0),Dt=We+At+J,Mt=y+Nt+J;R.left=Math.max(0,Math.min(Math.round(Dt),Math.max(0,E.width-_))),R.top=Math.max(0,Math.min(Math.round(Mt),Math.max(0,E.height-v)))}R.x=R.left,R.y=R.top}Le(),j.value.push(R),f.value=R.id,n.preventDefault()}}else if(b==="delete"||b==="backspace"){if(f.value){Le();const{el:ee,parentGroup:R}=ht(f.value);ee&&R&&Array.isArray(R.children)?R.children=R.children.filter(le=>le.id!==ee.id):(j.value=j.value.filter(le=>le.id!==f.value),ee&&ee.type==="group"&&xt(ee.id)),f.value=null,n.preventDefault()}}else u&&b==="z"&&((()=>{var We,y;const R=X.value,le=[20,15,10];if(G.value&&R.id&&R.cursor>0){const{el:h}=ht(R.id);if(h){const W=Math.min(Math.max(R.stage,0),le.length-1),O=le[W],B=Math.min(O,R.cursor);let K=0,M=0;for(let _=R.cursor-B;_<R.cursor;_++){const v=R.steps[_];K+=v.dx,M+=v.dy}h.left=Math.round(((We=h.left)!=null?We:0)-K),h.top=Math.round(((y=h.top)!=null?y:0)-M),h.x=h.left,h.y=h.top,R.cursor-=B,R.stage=Math.min(R.stage+1,le.length-1),f.value=h.id,Re();return}}Et(),G.value=!1,X.value.active=!1})(),n.preventDefault())}const $e=vo({left:!1,right:!1,up:!1,down:!1,shift:!1});let Ge=null,qe=0,He=null;function dt(n,o){var de,ve,Q,ee,R,le,We,y;const i=f.value;if(!i)return;const{el:u,parentGroup:b}=ht(i);if(!u)return;Ve.value&&X.value.active&&X.value.id===i&&(X.value.steps.push({dx:n,dy:o}),X.value.cursor=X.value.steps.length,G.value=!0);const x=(Q=(ve=u.width)!=null?ve:(de=L.value[i])==null?void 0:de.width)!=null?Q:0,F=(le=(R=u.height)!=null?R:(ee=L.value[i])==null?void 0:ee.height)!=null?le:0;let N=E.width,A=E.height;b&&b.width&&b.height&&(N=Number(b.width)||N,A=Number(b.height)||A);let z=((We=u.left)!=null?We:0)+n,c=((y=u.top)!=null?y:0)+o;z=Math.round(z),c=Math.round(c),z=Math.max(0,Math.min(z,N-(x||0))),c=Math.max(0,Math.min(c,A-(F||0))),u.left=z,u.top=c,u.x=u.left,u.y=u.top;const p=u.left,T=u.top,H=p+(x||0),ae=T+(F||0),he=p+(x||0)/2,Fe=T+(F||0)/2;sl({left:p,top:T,right:H,bottom:ae,centerX:he,centerY:Fe})}function gt(){if(Ge!=null)return;qe=Date.now();const n=()=>{if(!$e.left&&!$e.right&&!$e.up&&!$e.down){Ge!=null&&cancelAnimationFrame(Ge),Ge=null,Xt();return}const o=Date.now()-qe,i=o>1500?8:o>800?4:o>300?2:1,u=($e.shift?10:1)*i,b=($e.left?-u:0)+($e.right?u:0),x=($e.up?-u:0)+($e.down?u:0);dt(b,x),Ge=requestAnimationFrame(n)};Ge=requestAnimationFrame(n)}function yt(n){const o=n.key.toLowerCase();o==="shift"&&($e.shift=!1),o==="arrowleft"&&($e.left=!1),o==="arrowright"&&($e.right=!1),o==="arrowup"&&($e.up=!1),o==="arrowdown"&&($e.down=!1),He!=null&&(clearTimeout(He),He=null),!$e.left&&!$e.right&&!$e.up&&!$e.down&&Ge==null&&(Ve.value=!1,X.value.active=!1),!$e.left&&!$e.right&&!$e.up&&!$e.down&&Xt()}const it=me(!1),$=me({left:0,top:0,right:0,bottom:0,centerX:0,centerY:0});function t(n){L.value[n.id]=n}function pe(n){return n==="pie"?{backgroundColor:"transparent",tooltip:{trigger:"item"},legend:{top:"5%",left:"center",textStyle:{color:"#fff"},show:!0},series:[{name:"分类占比",type:"pie",radius:["40%","70%"],avoidLabelOverlap:!1,itemStyle:{borderRadius:8,borderColor:"#111",borderWidth:2},label:{show:!0,color:"#fff"},labelLine:{show:!0},data:[{value:1048,name:"A"},{value:735,name:"B"},{value:580,name:"C"},{value:484,name:"D"},{value:300,name:"E"}]}]}:n==="mix"?{backgroundColor:"transparent",color:["#00bcd4","#ff9800"],tooltip:{trigger:"axis"},legend:{textStyle:{color:"#fff"},show:!0},xAxis:{type:"category",data:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],axisLine:{lineStyle:{color:"#888"}},axisLabel:{color:"#ccc"}},yAxis:{type:"value",axisLine:{lineStyle:{color:"#888"}},axisLabel:{color:"#ccc"}},series:[{name:"销量",type:"bar",data:[120,200,150,80,70,110,130],itemStyle:{borderRadius:[4,4,0,0]}},{name:"均价",type:"line",smooth:!0,data:[30,40,45,50,49,60,70],lineStyle:{width:2}}]}:n==="bar"?{backgroundColor:"transparent",color:["#42b883"],tooltip:{trigger:"axis"},legend:{show:!0,textStyle:{color:"#fff"}},xAxis:{type:"category",data:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],axisLine:{lineStyle:{color:"#888"}},axisLabel:{color:"#ccc"}},yAxis:{type:"value",axisLine:{lineStyle:{color:"#888"}},axisLabel:{color:"#ccc"}},series:[{name:"数量",type:"bar",data:[120,200,150,80,70,110,130],itemStyle:{borderRadius:[4,4,0,0]}}]}:{backgroundColor:"transparent",color:["#42b883"],tooltip:{trigger:"axis"},legend:{show:!0,textStyle:{color:"#fff"}},xAxis:{type:"category",data:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],axisLine:{lineStyle:{color:"#888"}},axisLabel:{color:"#ccc"}},yAxis:{type:"value",axisLine:{lineStyle:{color:"#888"}},axisLabel:{color:"#ccc"}},series:[{name:"趋势",type:"line",smooth:!0,data:[150,230,224,218,135,147,260],lineStyle:{width:2}}]}}function Qe(n){var ee,R;const o=se(n),i=il.value,u=Ct.value||1,b=(ee=i==null?void 0:i.clientWidth)!=null?ee:0,x=(R=i==null?void 0:i.clientHeight)!=null?R:0,F=i?(i.scrollLeft+b/2)/u:20,N=i?(i.scrollTop+x/2)/u:20,A=n==="chart"?240:n==="image"?200:n==="carousel"?320:n==="line"?200:n==="container"?240:void 0,z=n==="chart"?160:n==="image"?150:n==="carousel"?200:n==="line"?2:n==="container"?160:void 0,c=Math.round(F-(A?A/2:10)),p=Math.round(N-(z?z/2:10)),T=Math.max(0,Math.min(c,Math.max(0,E.width-(A!=null?A:0)))),H=Math.max(0,Math.min(p,Math.max(0,E.height-(z!=null?z:0)))),ae=(le,We,y,h)=>{const W=Math.max(0,Math.min(le,Math.max(0,E.width-(y!=null?y:0)))),O=Math.max(0,Math.min(We,Math.max(0,E.height-(h!=null?h:0))));return{cl:W,ct:O}},he=j.value.map(le=>{var O,B,K,M,_,v;const We=(O=le.width)!=null?O:0,y=(B=le.height)!=null?B:0,h=Number((M=(K=le.left)!=null?K:le.x)!=null?M:0),W=Number((v=(_=le.top)!=null?_:le.y)!=null?v:0);return{l:h,t:W,r:h+We,b:W+y}}),Fe=(le,We,y,h)=>{const W=le+(y!=null?y:0),O=We+(h!=null?h:0);for(const B of he)if(!(y===void 0||h===void 0)&&!(W<=B.l||O<=B.t||le>=B.r||We>=B.b))return!0;return!1},de=24;let ve={cl:T,ct:H};if(A&&z&&Fe(ve.cl,ve.ct,A,z)){let le=!1;for(let We=1;We<=20&&!le;We++)for(const y of[[We,0],[0,We],[-We,0],[0,-We]]){const[h,W]=y,O=c+h*de,B=p+W*de,K=ae(O,B,A,z);if(!Fe(K.cl,K.ct,A,z)){ve=K,le=!0;break}}}const Q={id:o,type:n,left:ve.cl,top:ve.ct,position:"absolute",autoSize:n==="text",width:A,height:z,text:n==="text"?"文字":n==="image"||n==="line"?"":"图表",className:"",zIndex:1,style:{}};if(n==="text"?Object.assign(Q,{content:"文字",fontSize:16,fontWeight:"400",fontFamily:"Arial, Helvetica, sans-serif",color:"#ffffff",letterSpacing:"0px",lineHeight:"1.5",fontStyle:"normal",useGradient:!1,gradientStart:"#00A3FF",gradientEnd:"#ffffff",gradientDirection:"to right",x:ve.cl,y:ve.ct}):n==="image"&&(Object.assign(Q,{src:"",borderRadius:0,x:ve.cl,y:ve.ct}),Q.style={...Q.style||{},objectFit:"contain"}),n==="chart"&&Object.assign(Q,{elementId:se("chart"),chartType:"line",chartOption:pe("line")}),n==="carousel"&&(Q.autoSize=!1,Q.slides=[{id:"1",src:"",text:"Slide 1"},{id:"2",src:"",text:"Slide 2"},{id:"3",src:"",text:"Slide 3"}],Q.carouselConfig={autoplay:!0,interval:3e3,textStyle:{color:"#ffffff",fontSize:16,fontWeight:"bold"}}),n==="line"&&(Q.autoSize=!1,Q.style={...Q.style||{},lineColor:"#ffffff",lineThickness:2,lineOrientation:"horizontal",lineStyle:"solid",lineDashLength:6,lineDashGap:4}),n==="arc-text"){Q.autoSize=!1,Q.text="环绕文字";const le=60;Q.width=Q.width||le*2+20,Q.height=Q.height||le*2+20,Q.style={...Q.style||{},fontFamily:E.globalFontFamily,fontSize:Math.max(12,E.globalFontSize),color:E.globalColor,textAlign:"center",arcText:{radius:le,startAngle:0,sweepAngle:180,clockwise:!0}}}n==="container"&&(Q.autoSize=!1,Q.text="",Q.elementId=se("container"),Q.style={...Q.style||{},backgroundColor:"transparent",borderRadius:"6px",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start",gap:4}),Le(),j.value.push(Q),f.value=o}function mt(n){Qe(n),tl.value=!1}function jt(n){const{el:o}=ht(n.id);o&&(q.value||(Le(),q.value=!0),o.left=n.left,o.top=n.top,o.x=n.left,o.y=n.top)}function r(n){const{el:o}=ht(n.id);o&&(q.value||(Le(),q.value=!0),o.width=n.width,o.height=n.height,n.left!==void 0&&(o.left=n.left,o.x=n.left),n.top!==void 0&&(o.top=n.top,o.y=n.top))}function re(n){f.value=n,Re()}function Z(n){f.value=n,Re(),sr(()=>{const o=document.querySelector(`[data-el-id="${n}"]`);o&&o.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})})}function nt(n,o){if(n===o||n<0||o<0||n>=j.value.length||o>=j.value.length)return;Le();const[i]=j.value.splice(n,1);i&&(j.value.splice(o,0,i),f.value=i.id)}function Re(){if(qt(),!Rt.value)return;const n=f.value;if(!n)return;const o=Pt.value.find(x=>x.id===n);if(!o)return;const i=Pt.value.filter(x=>x.id!==n),u={left:o.left,top:o.top,right:o.right,bottom:o.bottom,centerX:o.centerX,centerY:o.centerY};$.value={left:u.left,top:u.top,right:u.right,bottom:u.bottom,centerX:u.centerX,centerY:u.centerY},Ee.value={centerV:!1,centerH:!1,left:!1,right:!1,top:!1,bottom:!1};const b=4;for(const x of i)Math.abs(u.centerX-x.centerX)<=b&&x.w>0&&(Ee.value.centerV=!0,$.value.centerX=x.centerX),Math.abs(u.centerY-x.centerY)<=b&&x.h>0&&(Ee.value.centerH=!0,$.value.centerY=x.centerY),Math.abs(u.left-x.left)<=b&&(Ee.value.left=!0,$.value.left=x.left),Math.abs(u.right-x.right)<=b&&x.w>0&&(Ee.value.right=!0,$.value.right=x.right),Math.abs(u.top-x.top)<=b&&(Ee.value.top=!0,$.value.top=x.top),Math.abs(u.bottom-x.bottom)<=b&&x.h>0&&(Ee.value.bottom=!0,$.value.bottom=x.bottom);it.value=Object.values(Ee.value).some(Boolean)}function _e(){f.value=null,Xt()}const Ee=me({centerV:!1,centerH:!1,left:!1,right:!1,top:!1,bottom:!1}),ue=me({left:null,right:null,up:null,down:null}),lt=me(!0),Rt=me(!0),Lt=me(!1),Kt=st(()=>j.value.filter(n=>n.hidden));function rl(n){const o=j.value.find(i=>i.id===n);o&&(o.hidden=!1,f.value=n,sr(()=>{const i=document.querySelector(`[data-el-id="${n}"]`);i&&i.scrollIntoView({behavior:"smooth",block:"center"}),Lt.value=!1}))}const ct=me(null),bt=me(null),Pt=st(()=>{const n=[];function o(i,u,b,x){var F,N,A,z;for(const c of i){const p=L.value[c.id],T=p?p.left:(F=c.left)!=null?F:0,H=p?p.top:(N=c.top)!=null?N:0,ae=p?p.width:(A=c.width)!=null?A:0,he=p?p.height:(z=c.height)!=null?z:0,Fe=u+T,de=b+H;n.push({id:c.id,left:Fe,top:de,right:Fe+ae,bottom:de+he,centerX:Fe+ae/2,centerY:de+he/2,w:ae,h:he,type:c.type,parentId:x}),(c.type==="group"||c.type==="container")&&Array.isArray(c.children)&&o(c.children,Fe,de,c.id)}}return o(j.value,0,0,null),n});function sl(n){q.value||(Le(),q.value=!0),$.value={left:n.left,top:n.top,right:n.right,bottom:n.bottom,centerX:n.centerX,centerY:n.centerY},Ee.value={centerV:!1,centerH:!1,left:!1,right:!1,top:!1,bottom:!1},ue.value={left:null,right:null,up:null,down:null};const o=.5,i=f.value,u=Pt.value.find(p=>p.id===i),b=u?u.parentId:null,x=Pt.value.filter(p=>p.parentId===b);function F(p,T,H,ae){const he=Math.max(p,H);return Math.min(T,ae)-he}let N=null,A=null,z=null,c=null;for(const p of x)if(!(!i||p.id===i)){if(Math.abs(n.centerX-p.centerX)<=o&&p.w>0&&(Ee.value.centerV=!0,$.value.centerX=p.centerX),Math.abs(n.centerY-p.centerY)<=o&&p.h>0&&(Ee.value.centerH=!0,$.value.centerY=p.centerY),Math.abs(n.left-p.left)<=o&&(Ee.value.left=!0,$.value.left=p.left),Math.abs(n.right-p.right)<=o&&p.w>0&&(Ee.value.right=!0,$.value.right=p.right),Math.abs(n.top-p.top)<=o&&(Ee.value.top=!0,$.value.top=p.top),Math.abs(n.bottom-p.bottom)<=o&&p.h>0&&(Ee.value.bottom=!0,$.value.bottom=p.bottom),F(n.top,n.bottom,p.top,p.bottom)>0){const T=n.left-p.right;T>=0&&(!N||T<N.gap)&&(N={gap:T,m:p});const H=p.left-n.right;H>=0&&(!A||H<A.gap)&&(A={gap:H,m:p})}if(F(n.left,n.right,p.left,p.right)>0){const T=n.top-p.bottom;T>=0&&(!z||T<z.gap)&&(z={gap:T,m:p});const H=p.top-n.bottom;H>=0&&(!c||H<c.gap)&&(c={gap:H,m:p})}}if(it.value=Object.values(Ee.value).some(Boolean),!lt.value){ue.value={left:null,right:null,up:null,down:null};return}if(N){const p=N.m,T=(Math.max(n.left,p.left)+Math.min(n.right,p.right))/2,H=(Math.max(n.top,p.top)+Math.min(n.bottom,p.bottom))/2;ue.value.left={gap:Math.floor(N.gap),exact:N.gap,refId:p.id,x:Math.round(T),y:Math.round(H)}}if(A){const p=A.m,T=(Math.max(n.left,p.left)+Math.min(n.right,p.right))/2,H=(Math.max(n.top,p.top)+Math.min(n.bottom,p.bottom))/2;ue.value.right={gap:Math.floor(A.gap),exact:A.gap,refId:p.id,x:Math.round(T),y:Math.round(H)}}if(z){const p=z.m,T=(Math.max(n.left,p.left)+Math.min(n.right,p.right))/2,H=(p.bottom+n.top)/2;ue.value.up={gap:Math.floor(z.gap),exact:z.gap,refId:p.id,x:Math.round(T),y:Math.round(H)}}if(c){const p=c.m,T=(Math.max(n.left,p.left)+Math.min(n.right,p.right))/2,H=(n.bottom+p.top)/2;ue.value.down={gap:Math.floor(c.gap),exact:c.gap,refId:p.id,x:Math.round(T),y:Math.round(H)}}Rt.value||(Ee.value={centerV:!1,centerH:!1,left:!1,right:!1,top:!1,bottom:!1},it.value=!1)}function qt(){if(!lt.value){ue.value={left:null,right:null,up:null,down:null};return}const n=f.value;if(!n){ue.value={left:null,right:null,up:null,down:null};return}const o=Pt.value.find(p=>p.id===n);if(!o){ue.value={left:null,right:null,up:null,down:null};return}const i={left:o.left,top:o.top,right:o.right,bottom:o.bottom,centerX:o.centerX,centerY:o.centerY},u=o.parentId,b=Pt.value.filter(p=>p.id!==n&&p.parentId===u);function x(p,T,H,ae){const he=Math.max(p,H);return Math.min(T,ae)-he}let F=null,N=null,A=null,z=null;for(const p of b){if(x(i.top,i.bottom,p.top,p.bottom)>0){const T=i.left-p.right;T>=0&&(!F||T<F.gap)&&(F={gap:T,m:p});const H=p.left-i.right;H>=0&&(!N||H<N.gap)&&(N={gap:H,m:p})}if(x(i.left,i.right,p.left,p.right)>0){const T=i.top-p.bottom;T>=0&&(!A||T<A.gap)&&(A={gap:T,m:p});const H=p.top-i.bottom;H>=0&&(!z||H<z.gap)&&(z={gap:H,m:p})}}const c={left:null,right:null,up:null,down:null};if(F){const p=F.m,T=(Math.max(i.left,p.left)+Math.min(i.right,p.right))/2,H=(Math.max(i.top,p.top)+Math.min(i.bottom,p.bottom))/2;c.left={gap:Math.floor(F.gap),exact:F.gap,refId:p.id,x:Math.round(T),y:Math.round(H)}}if(N){const p=N.m,T=(Math.max(i.left,p.left)+Math.min(i.right,p.right))/2,H=(Math.max(i.top,p.top)+Math.min(i.bottom,p.bottom))/2;c.right={gap:Math.floor(N.gap),exact:N.gap,refId:p.id,x:Math.round(T),y:Math.round(H)}}if(A){const p=A.m,T=(Math.max(i.left,p.left)+Math.min(i.right,p.right))/2,H=(p.bottom+i.top)/2;c.up={gap:Math.floor(A.gap),exact:A.gap,refId:p.id,x:Math.round(T),y:Math.round(H)}}if(z){const p=z.m,T=(Math.max(i.left,p.left)+Math.min(i.right,p.right))/2,H=(i.bottom+p.top)/2;c.down={gap:Math.floor(z.gap),exact:z.gap,refId:p.id,x:Math.round(T),y:Math.round(H)}}ue.value=c}function Xt(){q.value=!1,Rt.value&&f.value?Re():it.value=!1,qt()}function ht(n){if(!n)return{el:null,parentGroup:null};const o=(i,u)=>{for(const b of i){if(b.id===n)return{el:b,parentGroup:u};if((b.type==="group"||b.type==="container")&&Array.isArray(b.children)){const x=o(b.children,b);if(x)return x}}return null};return o(j.value,null)||{el:null,parentGroup:null}}const al=me(null);function dl(n,o){if(!n.children||!Array.isArray(n.children))return!1;const i=[...n.children];for(;i.length;){const u=i.pop();if((u==null?void 0:u.id)===o.id)return!0;u!=null&&u.children&&Array.isArray(u.children)&&i.push(...u.children)}return!1}function ul(n){var H,ae,he,Fe;const{id:o,globalLeft:i,globalTop:u}=n;if(!o)return;const b=(H=al.value)==null?void 0:H.getBoundingClientRect();if(!b)return;const{el:x,parentGroup:F}=ht(o);if(!x)return;const N=(((ae=L.value[o])==null?void 0:ae.width)||Number(x.width)||0)*Ct.value,A=(((he=L.value[o])==null?void 0:he.height)||Number(x.height)||0)*Ct.value,z={left:i,top:u,right:i+N,bottom:u+A};function c(){const de=z.left+1,ve=z.top+1,Q=z.right-1,ee=z.bottom-1;return[{x:(z.left+z.right)/2,y:(z.top+z.bottom)/2},{x:de,y:ve},{x:Q,y:ve},{x:de,y:ee},{x:Q,y:ee}]}let p=null;for(const de of c()){const ve=document.elementsFromPoint(de.x,de.y);for(const Q of ve){const ee=(Fe=Q.closest("[data-box-id]"))==null?void 0:Fe.getAttribute("data-box-id");if(!ee||ee===o)continue;const{el:R}=ht(ee);if(R&&!(R.type!=="container"&&R.type!=="group")&&R.id!==x.id&&!dl(x,R)){p=ee;break}}if(p)break}const T=F?F.id:null;if(p!==T){if(F?Array.isArray(F.children)&&(F.children=F.children.filter(de=>de.id!==o)):j.value=j.value.filter(de=>de.id!==o),p){const{el:de}=ht(p);if(de){const ve=document.querySelector(`[data-box-id="${p}"]`);if(ve){const Q=ve.getBoundingClientRect(),ee=(i-Q.left)/Ct.value,R=(u-Q.top)/Ct.value;x.left=Math.floor(ee),x.top=Math.floor(R),x.x=x.left,x.y=x.top,de.children||(de.children=[]),de.children.push(x)}}}else{const de=(i-b.left)/Ct.value,ve=(u-b.top)/Ct.value;x.left=Math.floor(de),x.top=Math.floor(ve),x.x=x.left,x.y=x.top,j.value.push(x)}Le(),sr(()=>{f.value=o})}}function Zt(n){const o=ue.value[n];o&&(ct.value=n,bt.value=o.gap)}function Qt(){var N,A,z,c,p;if(!ct.value||bt.value==null){ct.value=null,bt.value=null;return}const n=ct.value,o=ue.value[n];if(!o){ct.value=null,bt.value=null;return}const i=Pt.value.find(T=>T.id===o.refId),u=bt.value,b=Wt.value;if(!i||!b){ct.value=null,bt.value=null;return}Le();const x=(N=o.exact)!=null?N:o.gap,F=u-x;n==="left"?b.left=Math.round(((A=b.left)!=null?A:0)+F):n==="right"?b.left=Math.round(((z=b.left)!=null?z:0)-F):n==="up"?b.top=Math.round(((c=b.top)!=null?c:0)+F):n==="down"&&(b.top=Math.round(((p=b.top)!=null?p:0)-F)),ct.value=null,bt.value=null,qt()}Yt(f,()=>{q.value||qt()}),Yt(L,()=>{q.value||qt()},{deep:!0}),Yt(lt,n=>{n?qt():(ct.value=null,bt.value=null,ue.value={left:null,right:null,up:null,down:null})}),Yt(Rt,n=>{n?Re():(Ee.value={centerV:!1,centerH:!1,left:!1,right:!1,top:!1,bottom:!1},it.value=!1)});const Wt=st(()=>f.value?ht(f.value).el:null),cl=st(()=>{var i;if(!f.value)return!1;const{parentGroup:n}=ht(f.value);if(!n)return!1;const o=((i=n.style)==null?void 0:i.display)||"";return String(o).toLowerCase()==="flex"});async function pl(){return new Promise((n,o)=>{const i="lowcode-db",u="objects",b=indexedDB.open(i);b.onerror=()=>o(b.error),b.onupgradeneeded=()=>{const x=b.result;if(!x.objectStoreNames.contains(u)){const F=x.createObjectStore(u,{keyPath:"id"});try{F.createIndex("projectId","projectId",{unique:!1}),F.createIndex("name","name",{unique:!1})}catch{}}},b.onsuccess=()=>{const x=b.result;if(x.objectStoreNames.contains(u))n(x);else{const F=x.version+1;x.close();const N=indexedDB.open(i,F);N.onerror=()=>o(N.error),N.onupgradeneeded=()=>{const A=N.result;if(!A.objectStoreNames.contains(u)){const z=A.createObjectStore(u,{keyPath:"id"});try{z.createIndex("projectId","projectId",{unique:!1}),z.createIndex("name","name",{unique:!1})}catch{}}},N.onsuccess=()=>n(N.result)}}})}async function gl(){try{const n=(await pl()).transaction(["objects"],"readonly").objectStore("objects").getAll();n.onsuccess=()=>{m.value=(n.result||[]).filter(o=>!o.projectId||o.projectId===(a.projectId||void 0))},n.onerror=()=>{console.warn("loadDatabaseObjects error",n.error)}}catch(n){console.warn("openDatabaseDB error",n)}}const at=st(()=>{const n={};for(const o of m.value)o&&o.name&&(n[o.name]=o.content);return n}),pt=me({}),oe=st(()=>{const n={...at.value};for(const o in pt.value)Object.assign(n,pt.value[o]);return n});function ze(n,o){const i={};for(const u of o)u&&u.name&&(i[u.name]=u.content);pt.value[n]=i}function xt(n){pt.value[n]&&delete pt.value[n];const o=`component-fonts-${n}`,i=document.getElementById(o);i&&i.parentNode&&i.parentNode.removeChild(i)}function Me(n,o="#000000"){try{const i=String(n||"").trim();return/^#([0-9a-fA-F]{6})$/.test(i)?i:o}catch{return o}}function vt(){if(!f.value)return;Le();const{el:n,parentGroup:o}=ht(f.value);n&&o&&Array.isArray(o.children)?o.children=o.children.filter(i=>i.id!==n.id):(j.value=j.value.filter(i=>i.id!==f.value),n&&n.type==="group"&&xt(n.id)),f.value=null}function Ie(n){(!n.className||!n.className.trim())&&(n.className=`cls-${String(n.id).slice(0,8)}`)}function et(n){try{Ie(n);const o=String(n.className||"").trim();String(n.customClassCss||"").trim()||(n.customClassCss=`.${o} {
  
}`)}catch{}}function Oe(n){const o=String(n||"").trim();return o?o.split(";").map(i=>{const u=i.trim();return u?/!important\s*$/.test(u)?u+";":u+" !important;":""}).filter(Boolean).join(`
`):""}function De(n){return String(n||"").replace(/\{([^}]*)\}/g,(o,i)=>`{
`+String(i||"").split(";").map(u=>{const b=u.trim();return b?b.startsWith("@")||!/:/.test(b)||/!important\s*$/.test(b)?b+";":b+" !important;":""}).filter(Boolean).join(`
`)+`
}`)}function kt(n){try{if(!n.enableClassStyle)return;Ie(n);const o=String(n.customClassCss||"").trim();if(!o)return;const i=`custom-class-${n.id}`;let u=document.getElementById(i);if(u||(u=document.createElement("style"),u.id=i,document.head.appendChild(u)),/{[^}]*}/.test(o)){u.textContent=De(o);return}const b=Oe(o);u.textContent=`.${String(n.className).trim()} {
${b}
}`}catch(o){console.warn("注入自定义类样式失败：",o)}}function St(n){try{const o=`custom-class-${n}`,i=document.getElementById(o);i&&i.remove()}catch{}}function tt(n,o){for(const i of n)o(i),(i.type==="group"||i.type==="container")&&Array.isArray(i.children)&&tt(i.children,o)}let Pe=null;function we(){Pe&&clearTimeout(Pe),Pe=setTimeout(()=>{try{tt(j.value,n=>{n.enableClassStyle&&n.customClassCss&&n.className?kt(n):St(n.id)})}catch(n){console.warn("刷新自定义类样式失败：",n)}},50)}async function Se(){var n,o,i,u,b,x,F,N,A,z;try{const c=Wt.value;if(!c){alert("请先选中要保存的元素或分组");return}const p=ie.value||(c.type==="group"?"分组组件":"元素组件"),T=prompt("请输入组件名称",p);if(T===null)return;const H=(T||p).trim()||"未命名组件";let ae=[];if(c.type==="group"&&Array.isArray(c.children)){const y=Number((o=(n=c.left)!=null?n:c.x)!=null?o:0),h=Number((u=(i=c.top)!=null?i:c.y)!=null?u:0);ae=c.children.map(W=>{var J,ye,be,Ue,Je,ot;const O=JSON.parse(JSON.stringify(W)),B=Number((ye=(J=O.left)!=null?J:O.x)!=null?ye:0),K=Number((Ue=(be=O.top)!=null?be:O.y)!=null?Ue:0);O.left=y+B,O.top=h+K,O.x=O.left,O.y=O.top;const M=L.value[W.id],_=Number(O.width||0),v=Number(O.height||0);if(!(_>0)){const At=(()=>{var Nt,Dt,Mt,_t,zt;if(O.type==="text"){const ll=Number((Nt=O.fontSize)!=null?Nt:16),El=String((Dt=O.text)!=null?Dt:"").trim();return Math.max(50,Math.round((El.length||2)*ll*.6))}if(O.type==="image")return 100;if(O.type==="carousel")return 320;if(O.type==="chart")return 240;if(O.type==="line"){const ll=Number((_t=(Mt=O.style)==null?void 0:Mt.lineThickness)!=null?_t:2);return(((zt=O.style)==null?void 0:zt.lineOrientation)||"horizontal")==="vertical"?ll:100}return 50})();O.width=Math.max(1,Math.round((Je=M==null?void 0:M.width)!=null?Je:At))}if(!(v>0)){const At=(()=>{var Nt,Dt,Mt,_t;if(O.type==="text"){const zt=Number((Nt=O.fontSize)!=null?Nt:16);return Math.max(20,Math.round(zt*1.5))}if(O.type==="image")return 100;if(O.type==="carousel")return 200;if(O.type==="chart")return 160;if(O.type==="line"){const zt=Number((Mt=(Dt=O.style)==null?void 0:Dt.lineThickness)!=null?Mt:2);return(((_t=O.style)==null?void 0:_t.lineOrientation)||"horizontal")==="vertical"?100:zt}return 20})();O.height=Math.max(1,Math.round((ot=M==null?void 0:M.height)!=null?ot:At))}return O.id=`${O.type}-${Date.now()}-${Math.random().toString(36).slice(2,8)}`,O})}else{const y=JSON.parse(JSON.stringify(c)),h=Number((x=(b=y.left)!=null?b:y.x)!=null?x:0),W=Number((N=(F=y.top)!=null?F:y.y)!=null?N:0);y.left=h,y.top=W,y.x=y.left,y.y=y.top;const O=L.value[c.id],B=Number(y.width||0),K=Number(y.height||0);if(!(B>0)){const M=(()=>{var _,v,J,ye,be;if(y.type==="text"){const Ue=Number((_=y.fontSize)!=null?_:16),Je=String((v=y.text)!=null?v:"").trim();return Math.max(50,Math.round((Je.length||2)*Ue*.6))}if(y.type==="image")return 100;if(y.type==="chart")return 240;if(y.type==="line"){const Ue=Number((ye=(J=y.style)==null?void 0:J.lineThickness)!=null?ye:2);return(((be=y.style)==null?void 0:be.lineOrientation)||"horizontal")==="vertical"?Ue:100}return 50})();y.width=Math.max(1,Math.round((A=O==null?void 0:O.width)!=null?A:M))}if(!(K>0)){const M=(()=>{var _,v,J,ye;if(y.type==="text"){const be=Number((_=y.fontSize)!=null?_:16);return Math.max(20,Math.round(be*1.5))}if(y.type==="image")return 100;if(y.type==="chart")return 160;if(y.type==="line"){const be=Number((J=(v=y.style)==null?void 0:v.lineThickness)!=null?J:2);return(((ye=y.style)==null?void 0:ye.lineOrientation)||"horizontal")==="vertical"?100:be}return 20})();y.height=Math.max(1,Math.round((z=O==null?void 0:O.height)!=null?z:M))}y.id=`${y.type}-${Date.now()}-${Math.random().toString(36).slice(2,8)}`,ae=[y]}const he=Math.min(...ae.map(y=>{var h,W;return Number((W=(h=y.left)!=null?h:y.x)!=null?W:0)})),Fe=Math.min(...ae.map(y=>{var h,W;return Number((W=(h=y.top)!=null?h:y.y)!=null?W:0)})),de=Math.max(...ae.map(y=>{var h,W,O;return Number((W=(h=y.left)!=null?h:y.x)!=null?W:0)+Number((O=y.width)!=null?O:0)})),ve=Math.max(...ae.map(y=>{var h,W,O;return Number((W=(h=y.top)!=null?h:y.y)!=null?W:0)+Number((O=y.height)!=null?O:0)})),Q=Math.max(1,Math.round(de-he)),ee=Math.max(1,Math.round(ve-Fe));ae=ae.map(y=>{var B,K,M,_;const h=JSON.parse(JSON.stringify(y)),W=Number((K=(B=h.left)!=null?B:h.x)!=null?K:0)-he,O=Number((_=(M=h.top)!=null?M:h.y)!=null?_:0)-Fe;return h.left=Math.max(0,Math.round(W)),h.top=Math.max(0,Math.round(O)),h.x=h.left,h.y=h.top,h});const R={width:Q,height:ee,backgroundUrl:"",backgroundColor:"transparent",globalFontFamily:E.globalFontFamily,globalFontSize:E.globalFontSize,globalColor:E.globalColor},le=`${Date.now()}${Math.random().toString(36).slice(2,9)}`,We={id:le,name:H,description:"",tags:[],elements:ae,config:R,usageCount:0,createdAt:Date.now(),updatedAt:Date.now()};await It.init(),await It.saveComponent(JSON.parse(JSON.stringify(We))),await vl(`component-${le}`,{config:R,elements:ae,exportName:H}),alert("组件已保存到组件库")}catch(c){console.warn("保存组件失败：",c),alert("保存组件失败，请稍后重试")}}const rt=me(null);function Ft(n){var u;const o=(u=n.target.files)==null?void 0:u[0];if(!o)return;const i=new FileReader;i.onload=()=>{const b=String(i.result);E.backgroundUrl=b;const x=new Image;x.onload=()=>{rt.value={width:x.naturalWidth,height:x.naturalHeight},E.width=x.naturalWidth,E.height=x.naturalHeight},x.src=b},i.readAsDataURL(o)}function Te(n){var o;return n&&((o=n.split(",")[0])!=null?o:"").trim().replace(/^['"]|['"]$/g,"")||null}function $t(n){return{"image/png":"png","image/jpeg":"jpg","image/jpg":"jpg","image/webp":"webp","image/gif":"gif","image/svg+xml":"svg","image/avif":"avif","image/apng":"apng","image/x-icon":"ico","image/vnd.microsoft.icon":"ico","font/ttf":"ttf","font/otf":"otf","font/woff":"woff","font/woff2":"woff2","application/font-ttf":"ttf","application/font-otf":"otf","application/font-woff":"woff","application/font-woff2":"woff2","application/x-font-ttf":"ttf","application/x-font-otf":"otf","application/x-font-woff":"woff","application/x-font-woff2":"woff2","application/vnd.ms-fontobject":"eot","application/octet-stream":"bin"}[n]||"bin"}function Gt(n){var u;const o=/\.([A-Za-z0-9]+)$/.exec(n||"");if(!o)return null;const i=((u=o[1])!=null?u:"").toLowerCase();return i?["png","jpg","jpeg","gif","svg","webp","avif","apng","ico"].includes(i)?i==="jpeg"?"jpg":i:["ttf","otf","woff","woff2","eot"].includes(i)?i:null:null}async function ft(n){try{const o="lowcode-icons",i="icons",u=await new Promise((b,x)=>{const F=indexedDB.open(o);F.onsuccess=()=>{const N=F.result;if(N.objectStoreNames.contains(i))b(N);else{const A=N.version+1;N.close();const z=indexedDB.open(o,A);z.onupgradeneeded=()=>{const c=z.result;c.objectStoreNames.contains(i)||c.createObjectStore(i,{keyPath:"id"})},z.onsuccess=()=>b(z.result),z.onerror=()=>x(z.error)}},F.onerror=()=>x(F.error)});return await new Promise((b,x)=>{const F=u.transaction(i,"readonly").objectStore(i).get(n);F.onsuccess=()=>b(F.result||null),F.onerror=()=>x(F.error)})}catch{return null}}function el(n){var o,i,u,b,x,F,N,A;try{const z=new Uint8Array(n),c=String.fromCharCode((o=z[0])!=null?o:0,(i=z[1])!=null?i:0,(u=z[2])!=null?u:0,(b=z[3])!=null?b:0);return c==="wOFF"?"woff":c==="wOF2"?"woff2":c==="OTTO"?"otf":(((x=z[0])!=null?x:0)===0&&((F=z[1])!=null?F:0)===1&&((N=z[2])!=null?N:0)===0&&((A=z[3])!=null?A:0)===0||c==="true"||c==="typ1","ttf")}catch{return"ttf"}}async function yl(n){const o=prompt("请输入导出名称",ie.value||"GeneratedComponent");if(o===null)return;const i=o.trim()||"GeneratedComponent";ie.value=i;function u(y){const h=new Set,W={};function O(K){let M=Date.now(),_=`${K}-${M}`;for(;h.has(_);)M+=1,_=`${K}-${M}`;return _}function B(K){const M=JSON.parse(JSON.stringify(K)),_=String(M.id);let v=_;return h.has(v)&&(v=O(String(M.type||"el"))),h.add(v),W[_]=v,M.id=v,(M.type==="group"||M.type==="container")&&Array.isArray(M.children)&&(M.children=M.children.map(J=>B(J))),M}return{normalized:y.map(K=>B(K)),remap:W}}const{normalized:b}=u(j.value),x=[],F=y=>{for(const h of y)if((h.type==="group"||h.type==="container")&&Array.isArray(h.children))F(h.children);else if(h.type==="image"){const W=!!h.src||!!h.iconId,O=!!h.highlightEnabled&&(!!h.highlightSrc||!!h.highlightIconId);(W||O)&&x.push(h)}};F(b);const N={},A=new Map;let z=0;for(const y of x)try{let h;const W=!!y.highlightEnabled&&!!y.highlightIconId,O=!!y.highlightEnabled&&!!y.highlightSrc;if(W){const v=y.highlightIconId,J=await ft(v);if(!J)throw new Error("icon record missing: "+v);h=new Blob([J.buffer],{type:String(J.mime||"image/png")})}else{const v=String(O?y.highlightSrc:y.src||"");if(v)h=await(await fetch(v)).blob();else if(y.iconId){const J=y.iconId,ye=await ft(J);if(!ye)throw new Error("icon record missing: "+J);h=new Blob([ye.buffer],{type:String(ye.mime||"image/png")})}else continue}let B=$t(h.type);if(B==="bin"){const v=W?y.highlightIconId:y.iconId;if(v){const J=await ft(v);if(J){const ye=$t(String(J.mime||"")),be=Gt(String(J.originalName||""));B=ye!=="bin"?ye:be||B}}B==="bin"&&(B="png")}const K=await h.arrayBuffer(),M=await crypto.subtle.digest("SHA-256",K),_=Array.from(new Uint8Array(M)).map(v=>v.toString(16).padStart(2,"0")).join("");if(A.has(_)){const{fileName:v}=A.get(_);N[y.id]=v}else{const v=`${i}_img_${z}.${B}`;A.set(_,{fileName:v,blob:h}),z++,N[y.id]=v}}catch(h){console.warn("导出图片失败：",h)}const c=Array.from(A.values());let p=null,T=null;if(E.backgroundUrl)try{const y=await(await fetch(String(E.backgroundUrl))).blob(),h=$t(y.type);p=`${i}_bg.${h}`,T=y}catch(y){console.warn("导出背景图片失败：",y)}const H=new Set,ae=Te(E.globalFontFamily);ae&&H.add(ae);const he=y=>{var h;for(const W of y)if((W.type==="group"||W.type==="container")&&Array.isArray(W.children))he(W.children);else if(W.type==="text"){const O=Te((h=W.style)==null?void 0:h.fontFamily);O&&H.add(O)}};he(j.value);const Fe=[],de=[];if(H.size>0)try{const y="lowcode-fonts",h="fonts",W=await new Promise((M,_)=>{const v=indexedDB.open(y);v.onsuccess=()=>{const J=v.result;if(J.objectStoreNames.contains(h))M(J);else{const ye=J.version+1;J.close();const be=indexedDB.open(y,ye);be.onupgradeneeded=()=>{const Ue=be.result;Ue.objectStoreNames.contains(h)||Ue.createObjectStore(h,{keyPath:"id"})},be.onsuccess=()=>M(be.result),be.onerror=()=>_(be.error)}},v.onerror=()=>_(v.error)}),O=await new Promise((M,_)=>{const v=W.transaction(h,"readonly").objectStore(h).getAll();v.onsuccess=()=>M(v.result),v.onerror=()=>_(v.error)}),B=S.value,K=B?O.filter(M=>M.projectId===B):O.filter(M=>!M.projectId);for(const M of K)if(H.has(M.name)){const _=new Blob([M.buffer],{type:M.mime});let v=$t(M.mime);if(v==="bin")try{v=el(M.buffer)}catch{v="ttf"}const J=M.name.replace(/[^A-Za-z0-9_\-]/g,"_"),ye=`${i}_${J}.${v}`;Fe.push({family:M.name,file:ye}),de.push({file:ye,blob:_})}}catch(y){console.warn("读取字体库失败：",y)}const ve=new Io.default,Q=ve.folder(i),ee=Q.folder("imgs");for(const y of c)ee.file(y.fileName,y.blob);T&&p&&ee.file(p,T);const R=Q.folder("fonts");for(const y of de)R.file(y.file,y.blob);let le="";if(n==="vue2"){const y=wo(i,E,b,{imageFileNames:c.map(h=>h.fileName),imageFileMap:N,backgroundFileName:T&&p?p:null,fontFaces:Fe,hideDirective:"if"},oe.value);le=y.indexVue,Q.file("index.vue",le),y.files&&Object.entries(y.files).forEach(([h,W])=>{Q.file(h,W)})}else n==="vue3"?(le=Eo(i,E,b,{imageFileNames:c.map(y=>y.fileName),imageFileMap:N,backgroundFileName:T&&p?p:null,fontFaces:Fe,hideDirective:"if"}),Q.file("index.vue",le)):n==="react"?(le=Co(i,E,b,{imageFileNames:c.map(y=>y.fileName),imageFileMap:N,backgroundFileName:T&&p?p:null,fontFaces:Fe}),Q.file("index.jsx",le),Q.file("README.md","# React 导出使用说明\n\n- 将本目录的 `imgs/` 与 `fonts/` 拷贝到 React 项目 `public/` 根目录：\n  - `public/imgs`\n  - `public/fonts`\n- 组件中图片路径为 `/imgs/...`，字体为 `/fonts/...`，确保开发与生产可访问。\n\n可选方案：若不使用 `public`，需自行改为通过打包管道解析资源（如 `new URL(path, import.meta.url).href` 或 import）。")):(le=ko(i,E,b,{imageFileNames:c.map(y=>y.fileName),imageFileMap:N,backgroundFileName:T&&p?p:null,fontFaces:Fe}),Q.file("index.html",le));const We=await ve.generateAsync({type:"blob"});(0,Mo.saveAs)(We,`${i}.zip`)}async function Ul(){const n=prompt("请输入导出名称",ie.value||"GeneratedComponent");if(n===null)return;const o=n.trim()||"GeneratedComponent";ie.value=o;const i=[],u=y=>{for(const h of y)if((h.type==="group"||h.type==="container")&&Array.isArray(h.children))u(h.children);else if(h.type==="image"){const W=!!h.src||!!h.iconId,O=!!h.highlightEnabled&&(!!h.highlightSrc||!!h.highlightIconId);(W||O)&&i.push(h)}};u(j.value);const b={},x=new Map;let F=0;for(const y of i)try{let h;const W=!!y.highlightEnabled&&!!y.highlightIconId,O=!!y.highlightEnabled&&!!y.highlightSrc;if(W){const v=y.highlightIconId,J=await ft(v);if(!J)throw new Error("icon record missing: "+v);h=new Blob([J.buffer],{type:String(J.mime||"image/png")})}else{const v=String(O?y.highlightSrc:y.src||"");if(v)h=await(await fetch(v)).blob();else if(y.iconId){const J=y.iconId,ye=await ft(J);if(!ye)throw new Error("icon record missing: "+J);h=new Blob([ye.buffer],{type:String(ye.mime||"image/png")})}else continue}let B=$t(h.type);if(B==="bin"){const v=W?y.highlightIconId:y.iconId;if(v){const J=await ft(v);if(J){const ye=$t(String(J.mime||"")),be=Gt(String(J.originalName||""));B=ye!=="bin"?ye:be||B}}B==="bin"&&(B="png")}const K=await h.arrayBuffer(),M=await crypto.subtle.digest("SHA-256",K),_=Array.from(new Uint8Array(M)).map(v=>v.toString(16).padStart(2,"0")).join("");if(x.has(_)){const{fileName:v}=x.get(_);b[y.id]=v}else{const v=`${o}_img_${F}.${B}`;x.set(_,{fileName:v,blob:h}),F++,b[y.id]=v}}catch(h){console.warn("导出图片失败：",h)}const N=Array.from(x.values());let A=null,z=null;if(E.backgroundUrl)try{const y=await(await fetch(String(E.backgroundUrl))).blob(),h=$t(y.type);A=`${o}_bg.${h}`,z=y}catch(y){console.warn("导出背景图片失败：",y)}const c=new Set,p=Te(E.globalFontFamily);p&&c.add(p);const T=y=>{var h;for(const W of y)if((W.type==="group"||W.type==="container")&&Array.isArray(W.children))T(W.children);else if(W.type==="text"){const O=Te((h=W.style)==null?void 0:h.fontFamily);O&&c.add(O)}};T(j.value);const H=[],ae=[];if(c.size>0)try{const y="lowcode-fonts",h="fonts",W=await new Promise((M,_)=>{const v=indexedDB.open(y);v.onsuccess=()=>{const J=v.result;if(J.objectStoreNames.contains(h))M(J);else{const ye=J.version+1;J.close();const be=indexedDB.open(y,ye);be.onupgradeneeded=()=>{const Ue=be.result;Ue.objectStoreNames.contains(h)||Ue.createObjectStore(h,{keyPath:"id"})},be.onsuccess=()=>M(be.result),be.onerror=()=>_(be.error)}},v.onerror=()=>_(v.error)}),O=await new Promise((M,_)=>{const v=W.transaction(h,"readonly").objectStore(h).getAll();v.onsuccess=()=>M(v.result),v.onerror=()=>_(v.error)}),B=S.value,K=B?O.filter(M=>M.projectId===B):O.filter(M=>!M.projectId);for(const M of K)if(c.has(M.name)){const _=new Blob([M.buffer],{type:M.mime});let v=$t(M.mime);if(v==="bin")try{v=el(M.buffer)}catch{v="ttf"}const J=M.name.replace(/[^A-Za-z0-9_\-]/g,"_"),ye=`${o}_${J}.${v}`;H.push({family:M.name,file:ye}),ae.push({file:ye,blob:_})}}catch(y){console.warn("读取字体库失败：",y)}const he=new Io.default,Fe=he.folder(`${o}_all`),de=[],ve={imageFileNames:N.map(y=>y.fileName),imageFileMap:b,backgroundFileName:z&&A?A:null,fontFaces:H,hideDirective:"if"},Q=wo(o,E,j.value,ve,oe.value);de.push({key:"vue2",file:"index.vue",content:Q.indexVue,files:Q.files});const ee=Eo(o,E,j.value,ve);de.push({key:"vue3",file:"index.vue",content:ee});const R=Co(o,E,j.value,ve);de.push({key:"react",file:"index.jsx",content:R});const le=ko(o,E,j.value,ve);de.push({key:"html",file:"index.html",content:le});for(const y of de){const h=Fe.folder(y.key);h.file(y.file,y.content),y.files&&Object.entries(y.files).forEach(([B,K])=>{h.file(B,K)}),y.key==="react"&&h.file("README.md","# React 导出使用说明\n\n- 将本目录的 `imgs/` 与 `fonts/` 拷贝到 React 项目 `public/` 根目录：\n  - `public/imgs`\n  - `public/fonts`\n- 组件中图片路径为 `/imgs/...`，字体为 `/fonts/...`，确保开发与生产可访问。\n\n可选方案：若不使用 `public`，需自行改为通过打包管道解析资源（如 `new URL(path, import.meta.url).href` 或 import）。");const W=h.folder("imgs");for(const B of N)W.file(B.fileName,B.blob);z&&A&&W.file(A,z);const O=h.folder("fonts");for(const B of ae)O.file(B.file,B.blob)}const We=await he.generateAsync({type:"blob"});(0,Mo.saveAs)(We,`${o}-all.zip`)}function Vl(){confirm("确认清空当前画布与元素吗？")&&(j.value=[],f.value=null)}const Ct=me(1),il=me(null);function Rl(){Ct.value=Math.min(2,+(Ct.value+.1).toFixed(2))}function Pl(){Ct.value=Math.max(.2,+(Ct.value-.1).toFixed(2))}function Sl(){const n=il.value;if(!n)return;const o=n.clientWidth-16,i=n.clientHeight-16,u=o/E.width,b=i/E.height;Ct.value=+Math.max(.2,Math.min(2,Math.min(u,b))).toFixed(2)}dr(async()=>{Sl(),await gl()});const Cl=me([]);function Ml(n){const o=JSON.parse(JSON.stringify(n));function i(u){u.id=se(String(u.type||"el")),u.elementId&&(u.elementId=se(String(u.type||"el"))),(u.type==="group"||u.type==="container")&&Array.isArray(u.children)&&u.children.forEach(b=>i(b))}return i(o),o.left=(n.left||0)+10,o.top=(n.top||0)+10,o.x=o.left,o.y=o.top,o.zIndex=(n.zIndex||1)+1,o}function Wl(){var b,x,F,N,A,z,c,p,T,H,ae,he,Fe,de,ve;if(!Wt.value)return;let n=Wt.value;const o=ht(n.id);o.parentGroup&&(n=o.parentGroup);const i=Ml(n),{parentGroup:u}=ht(n.id);if(u){const Q=Number((x=(b=u.left)!=null?b:u.x)!=null?x:0),ee=Number((N=(F=u.top)!=null?F:u.y)!=null?N:0),R=Number((A=u.width)!=null?A:0),le=Number((z=u.height)!=null?z:0),We=Q+R,y=ee+le,h=Number((c=n.width)!=null?c:0),W=Number((p=n.height)!=null?p:0);let O=h,B=W;if(!O||!B)if(n.type==="text"){const be=Number((T=n.fontSize)!=null?T:16),Ue=String((ae=(H=n.text)!=null?H:n.content)!=null?ae:"").trim();O=Math.max(h||50,Math.round((Ue.length||2)*be*.6)),B=Math.max(W||20,Math.round(be*1.5))}else n.type==="image"?(O=h||200,B=W||150):n.type==="chart"?(O=h||240,B=W||160):n.type==="line"?(O=h||200,B=W||2):(O=h||100,B=W||60);const K=10,M=Q+R/2,_=ee+le/2;let v=!1,J=We+K,ye=Math.round(_-B/2);if(!v&&J+O<=E.width&&(i.left=Math.max(0,Math.min(J,Math.max(0,E.width-O))),i.top=Math.max(0,Math.min(ye,Math.max(0,E.height-B))),v=!0),J=Q-O-K,ye=Math.round(_-B/2),!v&&J>=0&&(i.left=Math.max(0,Math.min(J,Math.max(0,E.width-O))),i.top=Math.max(0,Math.min(ye,Math.max(0,E.height-B))),v=!0),J=Math.round(M-O/2),ye=y+K,!v&&ye+B<=E.height&&(i.left=Math.max(0,Math.min(J,Math.max(0,E.width-O))),i.top=Math.max(0,Math.min(ye,Math.max(0,E.height-B))),v=!0),J=Math.round(M-O/2),ye=ee-B-K,!v&&ye>=0&&(i.left=Math.max(0,Math.min(J,Math.max(0,E.width-O))),i.top=Math.max(0,Math.min(ye,Math.max(0,E.height-B))),v=!0),!v){const be=Number((Fe=(he=n.left)!=null?he:n.x)!=null?Fe:0),Ue=Number((ve=(de=n.top)!=null?de:n.y)!=null?ve:0),Je=Q+be+K,ot=ee+Ue+K;i.left=Math.max(0,Math.min(Math.round(Je),Math.max(0,E.width-O))),i.top=Math.max(0,Math.min(Math.round(ot),Math.max(0,E.height-B)))}i.x=i.left,i.y=i.top}Le(),j.value.push(i),f.value=i.id}const fl=me(!1),bl=me([]),xl=me(""),ml=me(!1),Il=st(()=>{const n=xl.value.trim().toLowerCase();return n?bl.value.filter(o=>o.name.toLowerCase().includes(n)||(o.description||"").toLowerCase().includes(n)||Array.isArray(o.tags)&&o.tags.some(i=>i.toLowerCase().includes(n))):bl.value});async function Nl(){try{ml.value=!0,await It.init(),bl.value=(await It.getAllComponents()||[]).sort((n,o)=>(o.updatedAt||0)-(n.updatedAt||0))}catch(n){console.warn("加载组件缓存失败：",n)}finally{ml.value=!1}}async function Hl(){await Nl(),fl.value=!0}function jl(){fl.value=!1}const tl=me(!1);let Ot=null;function _l(){tl.value=!0,Ot&&(clearTimeout(Ot),Ot=null)}function Jl(){Ot&&clearTimeout(Ot),Ot=setTimeout(()=>{tl.value=!1,Ot=null},120)}function ql(){tl.value=!0,Ot&&(clearTimeout(Ot),Ot=null)}function Yl(){tl.value=!1,Ot&&(clearTimeout(Ot),Ot=null)}function Kl(n){const o=[],i=[],u=[],b=[];function x(c){var H,ae,he,Fe,de;const p=Number(c.width||0),T=Number(c.height||0);if(p>0&&T>0)return{w:p,h:T};if(c.type==="text"){const ve=Number((H=c.fontSize)!=null?H:16),Q=String((ae=c.text)!=null?ae:"").trim(),ee=Math.max(50,Math.round((Q.length||2)*ve*.6)),R=Math.max(20,Math.round(ve*1.5));return{w:p||ee,h:T||R}}if(c.type==="image")return{w:p||100,h:T||100};if(c.type==="chart")return{w:p||240,h:T||160};if(c.type==="line"){const ve=Number((Fe=(he=c.style)==null?void 0:he.lineThickness)!=null?Fe:2);return(((de=c.style)==null?void 0:de.lineOrientation)||"horizontal")==="vertical"?{w:p||ve,h:T||100}:{w:p||100,h:T||ve}}return{w:p||50,h:T||20}}for(const c of n){const p=Number(c.left||c.x||0),T=Number(c.top||c.y||0),{w:H,h:ae}=x(c);o.push(p),i.push(T),u.push(p+(H||0)),b.push(T+(ae||0))}const F=o.length?Math.min(...o):0,N=i.length?Math.min(...i):0,A=u.length?Math.max(...u):F,z=b.length?Math.max(...b):N;return{minX:F,minY:N,maxX:A,maxY:z,width:Math.max(0,A-F),height:Math.max(0,z-N)}}async function Xl(n){var o,i,u,b,x,F,N,A,z,c;try{const p=await Al(`component-${n.id}`),T=JSON.parse(JSON.stringify((p==null?void 0:p.elements)||n.elements||[]));if(!T||T.length===0){console.warn("该组件没有可插入的元素");return}let H=Date.now();const ae=B=>{B.id=`${B.type||"el"}-${H++}-${Math.random().toString(36).slice(2,8)}`,(B.type==="chart"||B.type==="container")&&B.elementId&&(B.elementId=String(B.elementId)+"_"+String(H%1e3)),(B.type==="group"||B.type==="container")&&Array.isArray(B.children)&&B.children.forEach(K=>ae(K))},he=il.value,Fe=Ct.value||1,de=(o=he==null?void 0:he.clientWidth)!=null?o:0,ve=(i=he==null?void 0:he.clientHeight)!=null?i:0,Q=he?(he.scrollLeft+de/2)/Fe:20,ee=he?(he.scrollTop+ve/2)/Fe:20,R=Kl(T),le=R.minX+R.width/2,We=R.minY+R.height/2,y=Math.round(Q-le),h=Math.round(ee-We),W=j.value.reduce((B,K)=>Math.max(B,Number(K.zIndex||0)),0);let O=null;if(T.length===1){const B=T[0];if(!B){console.warn("单元素组件插入失败：源元素不存在");return}const M=JSON.parse(JSON.stringify(B));ae(M);const _=Number((b=(u=M.left)!=null?u:M.x)!=null?b:0),v=Number((F=(x=M.top)!=null?x:M.y)!=null?F:0);M.left=Math.round(_+y),M.top=Math.round(v+h),M.x=M.left,M.y=M.top;const{w:J,h:ye}=(function(){var Je,ot,At,Nt,Dt;const be=Number(M.width||0),Ue=Number(M.height||0);if(be>0&&Ue>0)return{w:be,h:Ue};if(M.type==="text"){const Mt=Number((Je=M.fontSize)!=null?Je:16),_t=String((ot=M.text)!=null?ot:"").trim(),zt=Math.max(50,Math.round((_t.length||2)*Mt*.6)),ll=Math.max(20,Math.round(Mt*1.5));return{w:be||zt,h:Ue||ll}}if(M.type==="image")return{w:be||100,h:Ue||100};if(M.type==="chart")return{w:be||240,h:Ue||160};if(M.type==="line"){const Mt=Number((Nt=(At=M.style)==null?void 0:At.lineThickness)!=null?Nt:2);return(((Dt=M.style)==null?void 0:Dt.lineOrientation)||"horizontal")==="vertical"?{w:be||Mt,h:Ue||100}:{w:be||100,h:Ue||Mt}}return{w:be||50,h:Ue||20}})();if(M.width=J,M.height=ye,M.type==="image"&&!(M.src||"").startsWith("data:")&&M.iconId)try{Ht(M.iconId).then(be=>{be&&(M.src=be)}).catch(()=>{})}catch{}M.zIndex=Math.max(1,W+1),Le(),j.value=j.value.concat(M),f.value=M.id,O=M.id}else{const B=`group-${Date.now()}-${Math.random().toString(36).slice(2,8)}`,K=[];for(const _ of T){const v=JSON.parse(JSON.stringify(_));ae(v);const J=Number((A=(N=v.left)!=null?N:v.x)!=null?A:0),ye=Number((c=(z=v.top)!=null?z:v.y)!=null?c:0);v.left=Math.round(J-R.minX),v.top=Math.round(ye-R.minY),v.x=v.left,v.y=v.top;const{w:be,h:Ue}=(function(){var At,Nt,Dt,Mt,_t;const Je=Number(v.width||0),ot=Number(v.height||0);if(Je>0&&ot>0)return{w:Je,h:ot};if(v.type==="text"){const zt=Number((At=v.fontSize)!=null?At:16),ll=String((Nt=v.text)!=null?Nt:"").trim(),El=Math.max(50,Math.round((ll.length||2)*zt*.6)),tr=Math.max(20,Math.round(zt*1.5));return{w:Je||El,h:ot||tr}}if(v.type==="image")return{w:Je||100,h:ot||100};if(v.type==="chart")return{w:Je||240,h:ot||160};if(v.type==="line"){const zt=Number((Mt=(Dt=v.style)==null?void 0:Dt.lineThickness)!=null?Mt:2);return(((_t=v.style)==null?void 0:_t.lineOrientation)||"horizontal")==="vertical"?{w:Je||zt,h:ot||100}:{w:Je||100,h:ot||zt}}return{w:Je||50,h:ot||20}})();if(v.width=be,v.height=Ue,v.type==="image"&&!(v.src||"").startsWith("data:")&&v.iconId)try{Ht(v.iconId).then(Je=>{Je&&(v.src=Je)}).catch(()=>{})}catch{}K.push(v)}const M={id:B,type:"group",left:Math.round(R.minX+y),top:Math.round(R.minY+h),width:Math.max(1,Math.round(R.width)),height:Math.max(1,Math.round(R.height)),zIndex:Math.max(1,W+1),className:n.name?`component-${n.name.replace(/[^A-Za-z0-9_-]/g,"-")}`:void 0,children:K,componentId:n.id,editable:!0,style:{backgroundColor:"transparent"}};Le(),j.value=j.value.concat(M),f.value=M.id,O=B}try{if(O){const B=await It.getFontsByComponentId(n.id);if(Array.isArray(B)&&B.length>0){let K=document.getElementById(`component-fonts-${O}`);K||(K=document.createElement("style"),K.id=`component-fonts-${O}`,document.head.appendChild(K));const M=[];for(const _ of B){const v=String(_.name||"").replace(/[^A-Za-z0-9_\-]/g,"_"),J=_.bufferBase64;J&&M.push(`@font-face { font-family: '${v}'; src: url('${J}'); font-weight: normal; font-style: normal; font-display: swap; }`)}K.textContent=M.join(`
`)}}}catch(B){console.warn("注入组件字体失败：",B)}try{if(O){const B=await It.getDatabaseObjectsByComponentId(n.id);Array.isArray(B)&&B.length>0&&ze(O,B.map(K=>({name:K.name,content:K.content})))}}catch(B){console.warn("注入组件数据库对象失败：",B)}await It.incrementUsageCount(n.id),fl.value=!1}catch(p){console.warn("插入组件失败：",p)}}const Fl=()=>S.value?`lowcode-builder-state-${S.value}`:"lowcode-builder-state-v1",hl=()=>S.value?a.isComponent?`component-${S.value}`:`project-${S.value}`:"default";async function vl(n,o){try{const i=JSON.parse(JSON.stringify(o));if(n.startsWith("component-")){const u=n.replace(/^component-/,"");await It.saveBuilderStateForComponent(u,i)}else if(n.startsWith("project-")){const u=n.replace(/^project-/,"");await It.saveBuilderStateForProject(u,i)}else await It.saveBuilderStateForProject(n,i)}catch(i){console.warn("保存构建器状态失败：",i)}}async function Al(n){try{if(n.startsWith("component-")){const o=n.replace(/^component-/,"");return await It.getBuilderStateForComponent(o)}else if(n.startsWith("project-")){const o=n.replace(/^project-/,"");return await It.getBuilderStateForProject(o)}return await It.getBuilderStateForProject(n)}catch(o){return console.warn("恢复构建器状态失败：",o),null}}let $l=null;function wl(){$l&&clearTimeout($l),$l=setTimeout(()=>{j.value.some(o=>o.position==="static")&&console.log("DEBUG: Saving elements with static position:",j.value.filter(o=>o.position==="static").map(o=>({id:o.id,pos:o.position})));const n={config:E,elements:j.value,exportName:ie.value,version:ir};try{const o=async()=>{if(await vl(hl(),n),a.isComponent&&S.value)try{const i=String(S.value),u=await It.getComponent(i),b={id:i,name:ie.value||(u==null?void 0:u.name)||"未命名组件",description:(u==null?void 0:u.description)||"",tags:(u==null?void 0:u.tags)||[],elements:j.value,config:E,usageCount:(u==null?void 0:u.usageCount)||0,createdAt:(u==null?void 0:u.createdAt)||Date.now(),updatedAt:Date.now()};await It.saveComponent(JSON.parse(JSON.stringify(b))),Bl()}catch(i){console.warn("同步保存组件记录失败：",i)}};typeof window.requestIdleCallback=="function"?window.requestIdleCallback(()=>{o()}):o()}catch(o){console.warn("保存失败：",o)}},400)}Yt(E,wl,{deep:!0}),Yt(j,wl,{deep:!0}),Yt(ie,wl),Yt(j,()=>{we()},{deep:!0});async function Zl(){try{const n="lowcode-icons",o="icons",i=await new Promise((x,F)=>{const N=indexedDB.open(n);N.onsuccess=()=>{const A=N.result;if(A.objectStoreNames.contains(o))x(A);else{const z=A.version+1;A.close();const c=indexedDB.open(n,z);c.onupgradeneeded=()=>{const p=c.result;p.objectStoreNames.contains(o)||p.createObjectStore(o,{keyPath:"id"})},c.onsuccess=()=>x(c.result),c.onerror=()=>F(c.error)}},N.onerror=()=>F(N.error)}),u=await new Promise((x,F)=>{const N=i.transaction(o,"readonly").objectStore(o).getAll();N.onsuccess=()=>x(N.result),N.onerror=()=>F(N.error)}),b=S.value;Cl.value=(b?u.filter(x=>x.projectId===b):u.filter(x=>!x.projectId)).map(x=>{const F=new Blob([x.buffer],{type:x.mime}),N=URL.createObjectURL(F);return{id:x.id,url:N,name:x.name}})}catch(n){console.warn("图标库初始化失败：",n)}}async function Ht(n){try{const o="lowcode-icons",i="icons",u=await new Promise((F,N)=>{const A=indexedDB.open(o);A.onsuccess=()=>{const z=A.result;if(z.objectStoreNames.contains(i))F(z);else{const c=z.version+1;z.close();const p=indexedDB.open(o,c);p.onupgradeneeded=()=>{const T=p.result;T.objectStoreNames.contains(i)||T.createObjectStore(i,{keyPath:"id"})},p.onsuccess=()=>F(p.result),p.onerror=()=>N(p.error)}},A.onerror=()=>N(A.error)}),b=await new Promise((F,N)=>{const A=u.transaction(i,"readonly").objectStore(i).get(n);A.onsuccess=()=>F(A.result),A.onerror=()=>N(A.error)});if(!b||!b.buffer)return null;const x=new Blob([b.buffer],{type:b.mime||"application/octet-stream"});return await new Promise((F,N)=>{const A=new FileReader;A.onload=()=>F(String(A.result)),A.onerror=()=>N(A.error),A.readAsDataURL(x)})}catch(o){return console.warn("读取图标数据失败：",o),null}}async function zl(){const n=j.value;for(const o of n)if(o.type==="image"){if(o.iconId&&o.src&&!o.src.startsWith("data:")){const i=await Ht(o.iconId);i&&(o.src=i)}if(o.highlightIconId)try{const i=await Ht(o.highlightIconId);i&&(o.highlightSrc=i)}catch(i){console.warn("Failed to rehydrate highlight src",i)}}else if(o.type==="carousel"){const i=o.carouselConfig;if(i){if(i.frameHighlightId){const u=await Ht(i.frameHighlightId);u&&(i.frameHighlight=u)}if(i.frameNormalId){const u=await Ht(i.frameNormalId);u&&(i.frameNormal=u)}if(i.arrowLeftId){const u=await Ht(i.arrowLeftId);u&&(i.arrowLeft=u)}if(i.arrowRightId){const u=await Ht(i.arrowRightId);u&&(i.arrowRight=u)}}if(o.slides){for(const u of o.slides)if(u.iconId){const b=await Ht(u.iconId);b&&(u.src=b)}}}}async function Ql(){try{const n="lowcode-fonts",o="fonts",i=await new Promise((b,x)=>{const F=indexedDB.open(n);F.onsuccess=()=>{const N=F.result;if(N.objectStoreNames.contains(o))b(N);else{const A=N.version+1;N.close();const z=indexedDB.open(n,A);z.onupgradeneeded=()=>{const c=z.result;c.objectStoreNames.contains(o)||c.createObjectStore(o,{keyPath:"id"})},z.onsuccess=()=>b(z.result),z.onerror=()=>x(z.error)}},F.onerror=()=>x(F.error)}),u=await new Promise((b,x)=>{const F=i.transaction(o,"readonly").objectStore(o).getAll();F.onsuccess=()=>b(F.result),F.onerror=()=>x(F.error)});if(u.length>0){let b=document.querySelector("style[data-font-lib]");b||(b=document.createElement("style"),b.setAttribute("data-font-lib",""),document.head.appendChild(b));const x=[],F=[],N=S.value,A=N?u.filter(c=>c.projectId===N):u.filter(c=>!c.projectId);for(const c of A){const p=new Blob([c.buffer],{type:c.mime}),T=URL.createObjectURL(p),H=c.name;F.push(H),x.push(`@font-face { font-family: '${H}'; src: url('${T}'); font-weight: normal; font-style: normal; }`)}b.textContent=x.join(`
`);const z=new Set([...Ae.value,...F]);Ae.value=Array.from(z)}}catch(n){console.warn("字体库初始化失败：",n)}}function Ol(n){const o=new Set,i=new Set,u=b=>{b.forEach(x=>{if((!x.id||o.has(x.id))&&(x.id=`${x.type||"el"}-${Date.now()}-${Math.random().toString(36).slice(2,8)}`),o.add(x.id),x.elementId){const F=x.elementId.trim();if(i.has(F)){let N=2,A=`${F}_${N}`;for(;i.has(A);)N++,A=`${F}_${N}`;x.elementId=A}i.add(x.elementId)}(x.type==="group"||x.type==="container")&&Array.isArray(x.children)&&u(x.children)})};u(n)}dr(async()=>{await P(),await Ql(),await Zl();try{if(a.isComponent&&S.value){const n=String(S.value);if(!await It.getComponent(n)){const o={id:n,name:ie.value||"未命名组件",description:"",tags:[],elements:[],config:E,usageCount:0,createdAt:Date.now(),updatedAt:Date.now()};await It.saveComponent(JSON.parse(JSON.stringify(o)))}}}catch(n){console.warn("预创建组件记录失败：",n)}try{const n=await Al(hl());if(n){n.config&&Object.assign(E,n.config),Array.isArray(n.elements)&&(j.value=n.elements),typeof n.exportName=="string"&&n.exportName&&(ie.value=n.exportName),await zl();try{j.value=j.value.map(o=>{if(o.type==="chart"&&o.style&&typeof o.style.border=="string"&&o.style.border.includes("dashed")){const i={...o,style:{...o.style}};return delete i.style.border,i}return o})}catch{}n.version!==ir&&Ol(j.value)}else{const o=localStorage.getItem(Fl());if(o){const i=JSON.parse(o);i&&i.config&&Object.assign(E,i.config),Array.isArray(i==null?void 0:i.elements)&&(j.value=i.elements),typeof(i==null?void 0:i.exportName)=="string"&&i.exportName&&(ie.value=i.exportName),await zl();try{j.value=j.value.map(u=>{if(u.type==="chart"&&u.style&&typeof u.style.border=="string"&&u.style.border.includes("dashed")){const b={...u,style:{...u.style}};return delete b.style.border,b}return u})}catch{}Ol(j.value),await vl(hl(),{config:E,elements:j.value,exportName:ie.value,version:ir});try{localStorage.removeItem(Fl())}catch{}}}}catch(n){console.warn("恢复失败：",n)}we(),window.addEventListener("keydown",je),window.addEventListener("keyup",yt)}),ur(()=>{window.removeEventListener("keydown",je),window.removeEventListener("keyup",yt),Bl()});let Dl=0;async function er(n,o){var i,u,b;try{const x=E.width||n.clientWidth||800,F=E.height||n.clientHeight||600,N=(i=o==null?void 0:o.maxWidth)!=null?i:420,A=(u=o==null?void 0:o.scale)!=null?u:Math.min(1,N/x),z=(b=o==null?void 0:o.quality)!=null?b:.85,c=n.cloneNode(!0);c.style.transform="none",c.style.transformOrigin="top left",c.style.width=`${x}px`,c.style.height=`${F}px`;const p=new XMLSerializer().serializeToString(c),T=`<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" width="${Math.round(x*A)}" height="${Math.round(F*A)}">
  <foreignObject width="100%" height="100%">
    <div xmlns="http://www.w3.org/1999/xhtml" style="transform: scale(${A}); transform-origin: top left;">${p}</div>
  </foreignObject>
</svg>`,H="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(T),ae=new Image;return await new Promise(he=>{ae.onload=()=>{try{const Fe=document.createElement("canvas");Fe.width=ae.width,Fe.height=ae.height;const de=Fe.getContext("2d");if(!de)return he(null);de.drawImage(ae,0,0);const ve=Fe.toDataURL("image/jpeg",z);he(ve)}catch{he(null)}},ae.onerror=()=>he(null),ae.src=H})}catch{return null}}async function Bl(){try{const n=Date.now();if(n-Dl<5e3||(Dl=n,!a.isComponent||!S.value))return;const o=il.value;if(!o)return;const i=o.firstElementChild;if(!i)return;const u=await er(i,{maxWidth:420,quality:.8});if(!u)return;const b=String(S.value),x=await It.getComponent(b);if(!x)return;const F={...x,previewDataUrl:u,updatedAt:Date.now()};await It.saveComponent(JSON.parse(JSON.stringify(F)))}catch(n){console.warn("生成缩略图失败：",n)}}return(n,o)=>{var i,u,b,x,F,N,A,z;return C(),I(Vt,null,[l("div",w0,[o[34]||(o[34]=nr('<div class="absolute inset-0 opacity-10" data-v-96ee785f><div class="absolute top-10 left-10 w-32 h-32 border border-cyan-400 rotate-45 animate-pulse" data-v-96ee785f></div><div class="absolute top-32 right-20 w-24 h-24 border border-purple-400 rounded-full animate-spin" style="animation-duration:20s;" data-v-96ee785f></div><div class="absolute bottom-20 left-1/4 w-40 h-40 border border-blue-400 rotate-12 animate-bounce" style="animation-duration:3s;" data-v-96ee785f></div><div class="absolute bottom-32 right-1/3 w-28 h-28 border border-green-400 rounded-lg rotate-45 animate-pulse" style="animation-delay:1s;" data-v-96ee785f></div></div><div class="absolute inset-0 opacity-5" style="background-image:linear-gradient(cyan 1px, transparent 1px), linear-gradient(90deg, cyan 1px, transparent 1px);background-size:50px 50px;" data-v-96ee785f></div>',2)),l("div",E0,[wt(Xs,{exportName:ie.value,config:E,fontLibrary:Ae.value,spacingEnabled:lt.value,alignmentEnabled:Rt.value,"onUpdate:exportName":o[0]||(o[0]=c=>ie.value=c),"onUpdate:configWidth":o[1]||(o[1]=c=>E.width=c),"onUpdate:configHeight":o[2]||(o[2]=c=>E.height=c),"onUpdate:backgroundColor":o[3]||(o[3]=c=>E.backgroundColor=c),"onUpdate:globalFontFamily":o[4]||(o[4]=c=>E.globalFontFamily=c),"onUpdate:globalFontSize":o[5]||(o[5]=c=>E.globalFontSize=c),"onUpdate:globalColor":o[6]||(o[6]=c=>E.globalColor=c),"onUpdate:spacingEnabled":o[7]||(o[7]=c=>lt.value=c),"onUpdate:alignmentEnabled":o[8]||(o[8]=c=>Rt.value=c),onBackgroundFileChange:Ft,onOpenPreview:te,onDownloadByFormat:o[9]||(o[9]=c=>yl(c)),onDownloadAllFormats:Ul,onResetCanvas:Vl,elements:j.value,selectedId:f.value,onSelectElement:o[10]||(o[10]=c=>Z(c)),onReorderTopElements:o[11]||(o[11]=c=>nt(c.from,c.to))},null,8,["exportName","config","fontLibrary","spacingEnabled","alignmentEnabled","elements","selectedId"]),l("div",k0,[l("div",S0,[l("div",C0,[l("div",M0,[l("button",{onMouseenter:_l,onMouseleave:Jl,onClick:o[12]||(o[12]=c=>tl.value=!0),class:"px-4 py-2 bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-500 hover:to-blue-500 text-white rounded-lg font-medium transition-all duration-200 transform hover:scale-105 shadow-lg shadow-cyan-500/25"}," 插入元素 ",32),ce(l("div",{onMouseenter:ql,onMouseleave:Yl,class:"absolute left-0 top-full w-72 p-3 bg-gray-900/95 backdrop-blur-md border border-cyan-500/40 rounded-xl shadow-2xl z-50"},[l("div",I0,[l("button",{onClick:o[13]||(o[13]=c=>mt("text")),class:"px-3 py-2 text-xs bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-500 hover:to-blue-500 text-white rounded"},"文本"),l("button",{onClick:o[14]||(o[14]=c=>mt("arc-text")),class:"px-3 py-2 text-xs bg-gradient-to-r from-cyan-600 to-indigo-600 hover:from-cyan-500 hover:to-indigo-500 text-white rounded"},"环绕文字"),l("button",{onClick:o[15]||(o[15]=c=>mt("image")),class:"px-3 py-2 text-xs bg-gradient-to-r from-emerald-600 to-green-600 hover:from-emerald-500 hover:to-green-500 text-white rounded"},"图片"),l("button",{onClick:o[16]||(o[16]=c=>mt("chart")),class:"px-3 py-2 text-xs bg-gradient-to-r from-orange-600 to-red-600 hover:from-orange-500 hover:to-red-500 text-white rounded"},"图表"),l("button",{onClick:o[17]||(o[17]=c=>mt("carousel")),class:"px-3 py-2 text-xs bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500 text-white rounded"},"轮播图"),l("button",{onClick:o[18]||(o[18]=c=>mt("line")),class:"px-3 py-2 text-xs bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-500 hover:to-purple-500 text-white rounded"},"线条"),l("button",{onClick:o[19]||(o[19]=c=>mt("container")),class:"px-3 py-2 text-xs bg-gradient-to-r from-slate-600 to-gray-700 hover:from-slate-500 hover:to-gray-600 text-white rounded col-span-2"},"容器")])],544),[[Po,tl.value]])]),l("button",{onClick:o[20]||(o[20]=c=>Lt.value=!0),class:"px-4 py-2 bg-gradient-to-r from-gray-600 to-slate-700 hover:from-gray-500 hover:to-slate-600 text-white rounded-lg font-medium transition-all duration-200 transform hover:scale-105 shadow-lg shadow-gray-500/25"}," 隐藏元素 "),l("button",{onClick:Hl,class:"px-4 py-2 bg-gradient-to-r from-pink-600 to-fuchsia-600 hover:from-pink-500 hover:to-fuchsia-500 text-white rounded-lg font-medium transition-all duration-200 transform hover:scale-105 shadow-lg shadow-pink-500/25"}," 插入组件 ")]),l("div",N0,[l("button",{onClick:Pl,class:"p-2 bg-gray-700/50 hover:bg-gray-600/50 rounded-lg transition-colors duration-200"},[...o[32]||(o[32]=[l("span",{class:"text-gray-300"},"-",-1)])]),l("span",j0,ut(Math.round(Ct.value*100))+"%",1),l("button",{onClick:Rl,class:"p-2 bg-gray-700/50 hover:bg-gray-600/50 rounded-lg transition-colors duration-200"},[...o[33]||(o[33]=[l("span",{class:"text-gray-300"},"+",-1)])]),l("button",{onClick:Sl,class:"px-3 py-2 bg-gray-700/50 hover:bg-gray-600/50 rounded-lg text-xs text-gray-300 transition-colors duration-200"}," 适应 ")])]),l("div",{ref_key:"canvasScrollRef",ref:il,class:"flex-1 overflow-auto bg-gray-800/30 p-4 min-h-0 custom-scrollbar"},[l("div",{ref_key:"canvasContentRef",ref:al,class:"relative border border-gray-600/50 bg-gray-100 shadow-2xl mx-auto",onMousedown:cr(_e,["self"]),style:Bt({width:`${E.width}px`,height:`${E.height}px`,backgroundColor:E.backgroundColor||"transparent",backgroundImage:E.backgroundUrl?`url(${E.backgroundUrl})`:"none",backgroundSize:"cover",backgroundPosition:"center",transform:`scale(${Ct.value})`,transformOrigin:"top left"})},[it.value?(C(),I("div",F0,[Ee.value.left?(C(),I("div",{key:0,class:"absolute top-0 bottom-0 border-l border-dashed border-orange-400/70",style:Bt([{"border-width":"0.5px"},{left:`${$.value.left}px`}])},null,4)):Y("",!0),Ee.value.right?(C(),I("div",{key:1,class:"absolute top-0 bottom-0 border-l border-dashed border-orange-400/70",style:Bt([{"border-width":"0.5px"},{left:`${$.value.right}px`}])},null,4)):Y("",!0),Ee.value.top?(C(),I("div",{key:2,class:"absolute left-0 right-0 border-t border-dashed border-orange-400/70",style:Bt([{"border-width":"0.5px"},{top:`${$.value.top}px`}])},null,4)):Y("",!0),Ee.value.bottom?(C(),I("div",{key:3,class:"absolute left-0 right-0 border-t border-dashed border-orange-400/70",style:Bt([{"border-width":"0.5px"},{top:`${$.value.bottom}px`}])},null,4)):Y("",!0),Ee.value.centerV?(C(),I("div",{key:4,class:"absolute top-0 bottom-0 border-l border-dashed border-blue-400/60",style:Bt([{"border-width":"0.5px"},{left:`${$.value.centerX}px`}])},null,4)):Y("",!0),Ee.value.centerH?(C(),I("div",{key:5,class:"absolute left-0 right-0 border-t border-dashed border-blue-400/60",style:Bt([{"border-width":"0.5px"},{top:`${$.value.centerY}px`}])},null,4)):Y("",!0)])):Y("",!0),lt.value&&(ue.value.left||ue.value.right||ue.value.up||ue.value.down)?(C(),I("div",A0,[ue.value.left&&ct.value!=="left"?(C(),I("div",{key:0,class:"absolute text-[10px] px-1.5 py-0.5 rounded bg-gray-900/80 border border-orange-400/60 text-orange-200 cursor-pointer pointer-events-auto",style:Bt({left:`${ue.value.left.x-14}px`,top:`${ue.value.left.y-14}px`}),onDblclick:o[21]||(o[21]=c=>Zt("left"))},ut(ue.value.left.gap)+"px ",37)):Y("",!0),ue.value.right&&ct.value!=="right"?(C(),I("div",{key:1,class:"absolute text-[10px] px-1.5 py-0.5 rounded bg-gray-900/80 border border-orange-400/60 text-orange-200 cursor-pointer pointer-events-auto",style:Bt({left:`${ue.value.right.x-14}px`,top:`${ue.value.right.y-14}px`}),onDblclick:o[22]||(o[22]=c=>Zt("right"))},ut(ue.value.right.gap)+"px ",37)):Y("",!0),ue.value.up&&ct.value!=="up"?(C(),I("div",{key:2,class:"absolute text-[10px] px-1.5 py-0.5 rounded bg-gray-900/80 border border-orange-400/60 text-orange-200 cursor-pointer pointer-events-auto",style:Bt({left:`${ue.value.up.x-14}px`,top:`${ue.value.up.y-18}px`}),onDblclick:o[23]||(o[23]=c=>Zt("up"))},ut(ue.value.up.gap)+"px ",37)):Y("",!0),ue.value.down&&ct.value!=="down"?(C(),I("div",{key:3,class:"absolute text-[10px] px-1.5 py-0.5 rounded bg-gray-900/80 border border-orange-400/60 text-orange-200 cursor-pointer pointer-events-auto",style:Bt({left:`${ue.value.down.x-14}px`,top:`${ue.value.down.y-18}px`}),onDblclick:o[24]||(o[24]=c=>Zt("down"))},ut(ue.value.down.gap)+"px ",37)):Y("",!0),ct.value==="left"?ce((C(),I("input",{key:4,type:"number",class:"absolute w-14 h-6 px-1 text-[10px] rounded bg-gray-900/90 border border-orange-400/80 text-orange-100 focus:outline-none pointer-events-auto",style:Bt({left:`${(((i=ue.value.left)==null?void 0:i.x)||0)-28}px`,top:`${(((u=ue.value.left)==null?void 0:u.y)||0)-14}px`}),"onUpdate:modelValue":o[25]||(o[25]=c=>bt.value=c),onKeydown:lr(Qt,["enter"])},null,36)),[[ke,bt.value,void 0,{number:!0}]]):Y("",!0),ct.value==="right"?ce((C(),I("input",{key:5,type:"number",class:"absolute w-14 h-6 px-1 text-[10px] rounded bg-gray-900/90 border border-orange-400/80 text-orange-100 focus:outline-none pointer-events-auto",style:Bt({left:`${(((b=ue.value.right)==null?void 0:b.x)||0)-28}px`,top:`${(((x=ue.value.right)==null?void 0:x.y)||0)-14}px`}),"onUpdate:modelValue":o[26]||(o[26]=c=>bt.value=c),onKeydown:lr(Qt,["enter"])},null,36)),[[ke,bt.value,void 0,{number:!0}]]):Y("",!0),ct.value==="up"?ce((C(),I("input",{key:6,type:"number",class:"absolute w-14 h-6 px-1 text-[10px] rounded bg-gray-900/90 border border-orange-400/80 text-orange-100 focus:outline-none pointer-events-auto",style:Bt({left:`${(((F=ue.value.up)==null?void 0:F.x)||0)-28}px`,top:`${(((N=ue.value.up)==null?void 0:N.y)||0)-18}px`}),"onUpdate:modelValue":o[27]||(o[27]=c=>bt.value=c),onKeydown:lr(Qt,["enter"])},null,36)),[[ke,bt.value,void 0,{number:!0}]]):Y("",!0),ct.value==="down"?ce((C(),I("input",{key:7,type:"number",class:"absolute w-14 h-6 px-1 text-[10px] rounded bg-gray-900/90 border border-orange-400/80 text-orange-100 focus:outline-none pointer-events-auto",style:Bt({left:`${(((A=ue.value.down)==null?void 0:A.x)||0)-28}px`,top:`${(((z=ue.value.down)==null?void 0:z.y)||0)-18}px`}),"onUpdate:modelValue":o[28]||(o[28]=c=>bt.value=c),onKeydown:lr(Qt,["enter"])},null,36)),[[ke,bt.value,void 0,{number:!0}]]):Y("",!0)])):Y("",!0),(C(!0),I(Vt,null,Jt(j.value,c=>(C(),or(_o,{key:c.id,element:c,selected:c.id===f.value,"selected-id":f.value,config:E,zoom:Ct.value,dbMap:oe.value,"metrics-map":L.value,onSelect:re,"onUpdate:position":jt,"onUpdate:size":r,onShowGuidelines:sl,onHideGuidelines:Xt,onReportMetrics:t,onDragEnd:ul},null,8,["element","selected","selected-id","config","zoom","dbMap","metrics-map"]))),128))],36)],512)]),wt($0,{selectedEl:Wt.value,selectedParentIsFlex:cl.value,config:E,fontLibrary:Ae.value,fontSizeLibrary:Be.value,fontWeightOptions:Ce.value,fontStyleOptions:ne.value,databaseObjects:m.value,dbMap:oe.value,iconLibrary:Cl.value,defaultChartOption:pe,safeHex:Me,initCustomClassSkeleton:et,refreshAllCustomClassCss:we,removeCustomClassCssForElement:St,getIconDataUrlById:Ht,onDuplicateSelected:Wl,onRemoveSelected:vt,onSaveSelectedAsComponent:Se,onPositionChanged:Le},null,8,["selectedEl","selectedParentIsFlex","config","fontLibrary","fontSizeLibrary","fontWeightOptions","fontStyleOptions","databaseObjects","dbMap","iconLibrary"])])]),fl.value?(C(),I("div",z0,[l("div",{class:"absolute inset-0 bg-black/60",onClick:jl}),l("div",O0,[l("div",{class:"flex items-center justify-between p-4 border-b border-fuchsia-500/30 bg-gradient-to-r from-fuchsia-600/20 to-pink-600/20"},[o[35]||(o[35]=l("h3",{class:"text-lg font-bold text-pink-300"},"插入组件",-1)),l("button",{onClick:jl,class:"px-3 py-1 bg-gray-700/60 hover:bg-gray-600/60 rounded text-sm text-gray-200"},"关闭")]),l("div",D0,[l("div",B0,[ce(l("input",{"onUpdate:modelValue":o[29]||(o[29]=c=>xl.value=c),type:"text",placeholder:"搜索名称、描述或标签",class:"flex-1 px-3 py-2 bg-gray-800/60 border border-fuchsia-500/30 rounded-lg text-gray-100 placeholder-gray-400 focus:border-fuchsia-400 focus:ring-1 focus:ring-fuchsia-400 focus:outline-none transition-all duration-200"},null,512),[[ke,xl.value]]),l("button",{onClick:Nl,class:"px-3 py-2 bg-pink-600/70 hover:bg-pink-600 text-white rounded"},"刷新")]),ml.value?(C(),I("div",G0,"正在加载组件...")):(C(),I("div",T0,[Il.value.length===0?(C(),I("div",L0,"暂无匹配的组件")):(C(),I("div",U0,[(C(!0),I(Vt,null,Jt(Il.value,c=>(C(),I("div",{key:c.id,class:"bg-gray-800/60 border border-pink-500/20 rounded-lg overflow-hidden"},[l("div",V0,[c.previewDataUrl?(C(),I("img",{key:0,src:c.previewDataUrl,alt:"预览",class:"max-w-full max-h-full object-contain"},null,8,R0)):(C(),I("div",P0,"无预览"))]),l("div",W0,[l("div",H0,[l("div",{class:"text-sm text-gray-100 font-medium truncate",title:c.name},ut(c.name),9,_0),l("div",J0,ut(c.usageCount||0)+" 次",1)]),l("div",q0,[(C(!0),I(Vt,null,Jt(c.tags||[],p=>(C(),I("span",{key:p,class:"px-1.5 py-0.5 text-[10px] rounded bg-pink-600/30 text-pink-200"},ut(p),1))),128))]),l("div",Y0,[l("button",{onClick:p=>Xl(c),class:"w-full px-3 py-1.5 bg-gradient-to-r from-pink-600 to-fuchsia-600 hover:from-pink-500 hover:to-fuchsia-500 text-white rounded text-sm transition"}," 插入到画布 ",8,K0)])])]))),128))]))]))])])])):Y("",!0),Lt.value?(C(),I("div",X0,[l("div",{class:"absolute inset-0 bg-black/60",onClick:o[30]||(o[30]=c=>Lt.value=!1)}),l("div",Z0,[l("div",Q0,[o[36]||(o[36]=l("h3",{class:"text-lg font-bold text-cyan-300"},"隐藏元素列表",-1)),l("button",{onClick:o[31]||(o[31]=c=>Lt.value=!1),class:"px-3 py-1 bg-gray-700/60 hover:bg-gray-600/60 rounded text-sm text-gray-200"},"关闭")]),l("div",ep,[Kt.value.length===0?(C(),I("div",tp,"暂无隐藏元素")):(C(),I("div",lp,[(C(!0),I(Vt,null,Jt(Kt.value,c=>(C(),I("div",{key:c.id,class:"flex items-center justify-between bg-gray-800/60 border border-cyan-500/20 rounded-lg px-3 py-2"},[l("div",{class:"text-sm text-gray-100 truncate",title:c.hiddenLabel||c.className||c.id},ut(c.hiddenLabel||c.className||c.id),9,rp),l("button",{onClick:p=>rl(c.id),class:"px-3 py-1 bg-cyan-600/70 hover:bg-cyan-600 text-white rounded text-sm"},"取消隐藏并定位",8,np)]))),128))]))])])])):Y("",!0)],64)}}}),ap=pr(sp,[["__scopeId","data-v-96ee785f"]]),ip=ol({__name:"index",props:{projectId:{},currentProject:{},isComponent:{type:Boolean}},setup(g){const a=g;return(e,d)=>(C(),or(ap,{"project-id":a.projectId,"current-project":a.currentProject,"is-component":a.isComponent},null,8,["project-id","current-project","is-component"]))}}),bp=ip;export{bp as default};
