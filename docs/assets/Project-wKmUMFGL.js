import{E as p,F as b,R as $,_ as k,c as S,d as w,f as y,g as c,h as g,k as _,l as n,lt as f,m as q,st as x,u as V,w as D}from"./codemirror-B25QCqWr.js";import{o as E,s as R}from"./vendor-vue-C93_ecI2.js";var z={key:0},M={key:1,class:"min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-purple-900 text-white relative overflow-hidden min-w-[1200px]"},A={class:"relative z-20 bg-gray-900/90 backdrop-blur-sm border-b border-cyan-500/30 h-14 flex items-center"},L={class:"flex items-center justify-between w-full"},T={class:"flex items-center space-x-4 px-4"},O={key:0,class:"text-sm text-gray-300 flex items-center"},F=["title"],G=["title"],H={class:"flex"},J={class:"relative z-10 h-[calc(100vh-56px)] overflow-auto custom-scrollbar"},K=k({__name:"ProjectLayout",props:{projectId:{},isComponent:{type:Boolean}},setup(t){const l=R(),j=E(),o=t,a=$(null);function C(){o.isComponent?l.push("/components"):l.push("/projects")}function u(r){return j.name===r}const I=S(()=>j.name==="preview");async function B(){if(o.projectId)try{const r=(await P()).transaction(["projects"],"readonly").objectStore("projects").get(o.projectId);r.onsuccess=()=>{a.value=r.result}}catch(r){console.error("加载项目信息失败:",r)}}async function P(){const r="lowcode-projects",e="projects";return new Promise((d,s)=>{const m=indexedDB.open(r);m.onsuccess=()=>{const v=m.result;if(v.objectStoreNames.contains(e))d(v);else{const N=v.version+1;v.close();const i=indexedDB.open(r,N);i.onupgradeneeded=()=>{const h=i.result;h.objectStoreNames.contains(e)||h.createObjectStore(e,{keyPath:"id"})},i.onsuccess=()=>d(i.result),i.onerror=()=>s(i.error)}},m.onerror=()=>s(m.error)})}return D(async()=>{await B()}),(r,e)=>{const d=_("router-view"),s=_("router-link");return I.value?(p(),y("div",z,[c(d,{"project-id":t.projectId,"current-project":a.value,"is-component":o.isComponent},null,8,["project-id","current-project","is-component"])])):(p(),y("div",M,[e[5]||(e[5]=q('<div class="absolute inset-0 opacity-10"><div class="absolute top-10 left-10 w-32 h-32 border border-cyan-400 rotate-45 animate-pulse"></div><div class="absolute top-32 right-20 w-24 h-24 border border-purple-400 rounded-full animate-spin" style="animation-duration:20s;"></div><div class="absolute bottom-20 left-1/4 w-40 h-40 border border-blue-400 rotate-12 animate-bounce" style="animation-duration:3s;"></div><div class="absolute bottom-32 right-1/3 w-28 h-28 border border-green-400 rounded-lg rotate-45 animate-pulse" style="animation-delay:1s;"></div></div><div class="absolute inset-0 opacity-5" style="background-image:linear-gradient(cyan 1px, transparent 1px), linear-gradient(90deg, cyan 1px, transparent 1px);background-size:50px 50px;"></div>',2)),n("div",A,[n("div",L,[n("div",T,[n("button",{onClick:C,class:"flex items-center space-x-2 px-3 py-2 bg-gray-700/50 hover:bg-gray-600/50 rounded-lg transition-all duration-200 text-gray-300 hover:text-white"},[e[0]||(e[0]=n("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1)),n("span",null,f(o.isComponent?"返回组件管理":"返回项目列表"),1)]),a.value?(p(),y("div",O,[n("span",{class:"font-medium text-cyan-300 truncate",title:a.value.name},f(a.value.name),9,F),a.value.description?(p(),y("span",{key:0,class:"ml-2 text-gray-400 truncate",style:{"max-width":"300px !important"},title:a.value.description},f(a.value.description),9,G)):w("",!0)])):w("",!0)]),n("div",H,[c(s,{to:o.isComponent?{path:`/project/${t.projectId}/builder`,query:{type:"component"}}:`/project/${t.projectId}/builder`,class:x(["px-6 py-3 font-medium transition-all duration-200 hover:bg-gray-800/50",u("builder")?"bg-gradient-to-r from-cyan-600 to-blue-600 text-white border-b-2 border-cyan-400":"text-gray-400 hover:text-cyan-300"])},{default:b(()=>[...e[1]||(e[1]=[g(" 可视化构建器 ",-1)])]),_:1},8,["to","class"]),c(s,{to:o.isComponent?{path:`/project/${t.projectId}/fonts`,query:{type:"component"}}:`/project/${t.projectId}/fonts`,class:x(["px-6 py-3 font-medium transition-all duration-200 hover:bg-gray-800/50",u("fonts")?"bg-gradient-to-r from-purple-600 to-pink-600 text-white border-b-2 border-purple-400":"text-gray-400 hover:text-purple-300"])},{default:b(()=>[...e[2]||(e[2]=[g(" 字体库管理 ",-1)])]),_:1},8,["to","class"]),c(s,{to:o.isComponent?{path:`/project/${t.projectId}/icons`,query:{type:"component"}}:`/project/${t.projectId}/icons`,class:x(["px-6 py-3 font-medium transition-all duration-200 hover:bg-gray-800/50",u("icons")?"bg-gradient-to-r from-green-600 to-emerald-600 text-white border-b-2 border-green-400":"text-gray-400 hover:text-green-300"])},{default:b(()=>[...e[3]||(e[3]=[g(" 图标库管理 ",-1)])]),_:1},8,["to","class"]),c(s,{to:o.isComponent?{path:`/project/${t.projectId}/database`,query:{type:"component"}}:`/project/${t.projectId}/database`,class:x(["px-6 py-3 font-medium transition-all duration-200 hover:bg-gray-800/50",u("database")?"bg-gradient-to-r from-orange-600 to-red-600 text-white border-b-2 border-orange-400":"text-gray-400 hover:text-orange-300"])},{default:b(()=>[...e[4]||(e[4]=[g(" 数据库管理 ",-1)])]),_:1},8,["to","class"])])])]),n("div",J,[c(d,{"project-id":t.projectId,"current-project":a.value,"is-component":o.isComponent},null,8,["project-id","current-project","is-component"])])]))}}}),Q=K,U=k({__name:"index",props:{projectId:{},isComponent:{type:Boolean}},setup(t){const l=t;return(j,o)=>(p(),V(Q,{"project-id":l.projectId,"is-component":l.isComponent},null,8,["project-id","is-component"]))}}),Y=U;export{Y as default};
