import{i as sl}from"./rolldown-runtime-CKFmjIRy.js";import{C as Xr,E as O,H as gl,I as ue,L as Zn,O as Pt,P as gt,R as ce,S as yl,_ as cr,c as yt,ct as Qe,d as K,f as D,g as ft,h as ur,i as ml,l as r,lt as Ke,m as Wr,n as bl,o as At,r as xl,st as Be,t as hl,u as al,w as Jr}from"./codemirror-B25QCqWr.js";import{d as vl,f as ye,h as il,m as Tr,n as wl,o as $l,p as kl,r as El,s as Sl,u as qr}from"./vendor-vue-C93_ecI2.js";import{t as Yr}from"./index-BsUJhUQS.js";import{t as _e}from"./componentStorage-DB4dbTb9.js";import"./echarts-xBohgwka.js";import{t as Ml}from"./DraggableBox-Dx_537gp.js";function Pr(x){return x.replace(/[&<>"']/g,o=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"})[o]||o)}function Cl(x){var g,k;const o=x.style||{},e=[];if(e.push("position:absolute"),e.push(`left:${Math.round(x.left||0)}px`),e.push(`top:${Math.round(x.top||0)}px`),x.autoSize||(x.width&&e.push(`width:${Math.round(x.width)}px`),x.height&&e.push(`height:${Math.round(x.height)}px`)),o.opacity!==void 0&&e.push(`opacity:${o.opacity}`),o.border&&e.push(`border:${o.border}`),o.borderRadius&&e.push(`border-radius:${o.borderRadius}`),o.backgroundColor&&e.push(`background-color:${o.backgroundColor}`),o.boxShadow&&e.push(`box-shadow:${o.boxShadow}`),o.backgroundGradient&&((g=o.backgroundGradient.colors)!=null&&g.length)){const z=o.backgroundGradient.angle||0,T=o.backgroundGradient.colors[0]||"#000000",he=o.backgroundGradient.colors[1]||"#000000";e.push(`background-image:linear-gradient(${z}deg, ${T}, ${he})`),e.push("background-size:cover"),e.push("background-repeat:no-repeat")}if(x.type==="text"){o.fontFamily&&e.push(`font-family:${o.fontFamily}`),o.fontSize!==void 0&&e.push(`font-size:${o.fontSize}px`),o.color&&e.push(`color:${o.color}`),o.fontWeight&&e.push(`font-weight:${o.fontWeight}`),o.letterSpacing!==void 0&&o.letterSpacing!==null&&e.push(`letter-spacing:${o.letterSpacing}px`),o.lineHeight!==void 0&&e.push(`line-height:${o.lineHeight}`),o.fontStyle&&e.push(`font-style:${o.fontStyle}`),o.textAlign&&e.push(`text-align:${o.textAlign}`),o.textDecoration&&e.push(`text-decoration:${o.textDecoration}`);const z=o.textOrientation;if(z==="vertical"?(e.push("writing-mode:vertical-rl"),e.push("text-orientation:upright")):z==="horizontal"&&e.push("writing-mode:horizontal-tb"),o.textGradient&&((k=o.textGradient.colors)!=null&&k.length)){const T=o.textGradient.angle||0,he=o.textGradient.colors[0]||"#000000",Me=o.textGradient.colors[1]||"#000000";e.push(`background-image:linear-gradient(${T}deg, ${he}, ${Me})`),e.push("-webkit-background-clip:text"),e.push("background-clip:text"),e.push("color:transparent")}}return x.type==="image"&&o.objectFit&&e.push(`object-fit:${o.objectFit}`),e.join(";")}function dl(x){return String(x).split(";").map(o=>o.trim()).filter(Boolean).map(o=>o.includes("!important")?o:`${o} !important`).join("; ")}function Nl(x){return String(x).replace(/\{([^}]*)\}/g,(o,e)=>`{ ${dl(e)} }`)}function Il(x){const o=[],e=g=>{g.forEach(k=>{if(k.type==="group"&&Array.isArray(k.children))e(k.children);else{const z=(k.className||"").trim(),T=k.customClassCss?String(k.customClassCss).trim():"";if(!z||!T)return;/\{[^}]*\}/.test(T)?o.push(Nl(T)):o.push(`.${z} { ${dl(T)} }`)}})};return e(x),o.join(`
`)}function Qn(x,o,e,g,k){const z=x.replace(/[^A-Za-z0-9_]/g,"_");let T=0;const he=[],Me=[],E=o.backgroundUrl||"",ge=o.backgroundColor||"transparent",V=o.globalFontFamily||"",P=o.globalFontSize||14,te=o.globalColor||"#000000",we=e.some(d=>d.type==="chart");function U(d){const t=String(d||"").trim();if(!t)return"";let j=t.replace(/[^A-Za-z0-9_]/g,"_");return/[A-Za-z_]/.test(j[0]||"")||(j="_"+j),j}function m(d){if(!d.hidden)return"";const t=U(d.hiddenLabel);return t?` ${g&&g.hideDirective==="show"?"v-show":"v-if"}="${t}"`:""}function _(d,t){var Ae,be,He,We,Xe,mt,bt,Mt,wt,Ct,Ce,le,rt,ot,ut;const j=Cl(d),q=d.zIndex||1,$e=d.className&&d.className.trim()?` class="${d.className.trim()}"`:"";if(d.type==="group"&&Array.isArray(d.children)){const Ve=d.children.map((Je,Ee)=>_(Je,Ee)).join(`
        `);return`<div${$e}${m(d)} style="${j};z-index:${q}">
        ${Ve}
      </div>`}if(d.type==="text"){const Ve=(()=>{var De;const Le=((De=d.style)==null?void 0:De.textAlign)||"left";return Le==="center"?"text-flex-center":Le==="right"?"text-flex-right":"text-flex-left"})(),Je=[(Ae=d.className)==null?void 0:Ae.trim(),Ve].filter(Boolean).join(" "),Ee=Je?` class="${Je}"`:"",me=d.style||{},et=d.elementId&&d.elementId.trim()?d.elementId.trim():`text_${t}`,xt=!!(me.textWave&&me.textWave.enabled),nt=!!me.skewFlowEnabled;if(xt||nt){const Le=d.dynamic&&d.dynamic.enabled&&d.dynamic.objectName&&d.dynamic.propertyPath?{type:"dynamic",obj:d.dynamic.objectName,path:d.dynamic.propertyPath}:{type:"static",text:d.text||""};he.push(`'${et.replace(/'/g,"\\'")}' : ${JSON.stringify(Le)}`);const De={textWaveEnabled:xt,amplitude:(He=(be=me.textWave)==null?void 0:be.amplitude)!=null?He:0,frequency:(Xe=(We=me.textWave)==null?void 0:We.frequency)!=null?Xe:0,phase:(bt=(mt=me.textWave)==null?void 0:mt.phase)!=null?bt:0,skewFlowEnabled:nt,skewAngle:(Mt=me.skewAngle)!=null?Mt:0,textOrientation:me.textOrientation||"horizontal",fontSize:(wt=me.fontSize)!=null?wt:P,letterSpacing:(Ct=me.letterSpacing)!=null?Ct:0};return Me.push(`'${et.replace(/'/g,"\\'")}' : ${JSON.stringify(De)}`),`<div${Ee}${m(d)} style="${j};z-index:${q}">
          <span v-for="(p,pi) in getTextPieces('${et.replace(/'/g,"\\'")}')" :key="pi" :style="p.style">{{ p.char }}</span>
        </div>`}if(d.dynamic&&d.dynamic.enabled&&d.dynamic.objectName&&d.dynamic.propertyPath){const Le=`${d.dynamic.objectName}.${d.dynamic.propertyPath}`;return`<div${Ee}${m(d)} style="${j};z-index:${q}">{{ ${Le} }}</div>`}else{const Le=Pr(d.text||"");return`<div${Ee}${m(d)} style="${j};z-index:${q}">${Le}</div>`}}if(d.type==="image"){if(g!=null&&g.imageFileMap&&g.imageFileMap[d.id]){const Ee=g.imageFileMap[d.id],me=d.elementId&&d.elementId.trim()?` id="${d.elementId.trim()}"`:"";return`<img${$e}${me}${m(d)} src="./imgs/${Ee}" style="${j};z-index:${q}" alt="" />`}if(g!=null&&g.imageFileNames&&g.imageFileNames[T]){const Ee=g.imageFileNames[T++],me=d.elementId&&d.elementId.trim()?` id="${d.elementId.trim()}"`:"";return`<img${$e}${me}${m(d)} src="./imgs/${Ee}" style="${j};z-index:${q}" alt="" />`}const Ve=d.elementId&&d.elementId.trim()?d.elementId.trim():`img_${t}`,Je=d.elementId&&d.elementId.trim()?` id="${d.elementId.trim()}"`:"";return`<img${$e}${Je}${m(d)} :src="images['${Ve}']" style="${j};z-index:${q}" alt="" />`}if(d.type==="chart"){const Ve=Pr(d.text||"chart"),Je=d.elementId&&d.elementId.trim()?d.elementId.trim():`chart_${t}`;return`<div${$e}${m(d)} id="${Je}" style="${j};z-index:${q}">${Ve}</div>`}if(d.type==="container"){const Ve=d.elementId&&d.elementId.trim()?` id="${d.elementId.trim()}"`:"",Je=Pr(d.text||"");return`<div${$e}${m(d)}${Ve} style="${j};z-index:${q}">${Je}</div>`}if(d.type==="line"){const Ve=d.style||{},Je=Ve.lineColor||"#ffffff",Ee=(Ce=Ve.lineThickness)!=null?Ce:2,me=Ve.lineOrientation||"horizontal",et=Ve.lineStyle==="dashed",xt=(le=Ve.lineDashLength)!=null?le:6,nt=(rt=Ve.lineDashGap)!=null?rt:4,Le=Math.max(1,Math.round((ot=d.width)!=null?ot:me==="horizontal"?200:2)),De=Math.max(1,Math.round((ut=d.height)!=null?ut:me==="horizontal"?2:200)),ht=Math.round(De/2),vt=Math.round(Le/2),st=et?` stroke-dasharray="${xt} ${nt}"`:"";return me==="horizontal"?`<svg${$e}${m(d)} viewBox="0 0 ${Le} ${De}" preserveAspectRatio="none" style="${j};z-index:${q}"><line x1="0" y1="${ht}" x2="${Le}" y2="${ht}" stroke="${Je}" stroke-width="${Ee}"${st} fill="none" /></svg>`:`<svg${$e}${m(d)} viewBox="0 0 ${Le} ${De}" preserveAspectRatio="none" style="${j};z-index:${q}"><line x1="${vt}" y1="0" x2="${vt}" y2="${De}" stroke="${Je}" stroke-width="${Ee}"${st} fill="none" /></svg>`}const Ue=Pr(d.text||"element");return`<div${$e}${m(d)} style="${j};z-index:${q}">${Ue}</div>`}const H=e.map((d,t)=>_(d,t)).join(`
      `),ae=Il(e);function W(d,t){d.forEach(j=>{j.type==="group"&&Array.isArray(j.children)?(t(j),W(j.children,t)):t(j)})}const R=new Set;W(e,d=>{d.type==="text"&&d.dynamic&&d.dynamic.enabled&&d.dynamic.objectName&&R.add(String(d.dynamic.objectName))});const ie=Array.from(R),Te=!k||ie.length===0?"":ie.map(d=>{try{const t=k[d],j=JSON.stringify(t!=null?t:{});return`      ${d}: ${j},`}catch{return`      ${d}: {},`}}).join(`
`),Pe=(()=>{const d=[];let t=0;return W(e,j=>{if(j.type==="chart"){const q=j.elementId&&j.elementId.trim()?j.elementId.trim():`chart_${t}`;t++;const $e=j.chartOption||{};try{d.push(`'${q.replace(/'/g,"\\'")}' : ${JSON.stringify($e)}`)}catch{d.push(`'${q.replace(/'/g,"\\'")}' : {}`)}}}),`{ ${d.join(", ")} }`})(),J=(()=>{const d=new Set;return W(e,t=>{const j=String(t.hiddenLabel||"").trim(),q=U(j),$e=!!t.hidden;q&&$e&&d.add(q)}),Array.from(d).map(t=>`      ${t}: false,`).join(`
`)})();return`
<template>
  <div class="container" :style="containerStyle">
    ${H}
  </div>
</template>

<script>
${we?`import * as echarts from 'echarts';
`:""}
export default {
  name: '${z}',
  data() {
    return {
      config: {
        width: ${Math.round(o.width)},
        height: ${Math.round(o.height)},
        backgroundColor: '${ge.replace(/'/g,"\\'")}',
        globalFontFamily: '${V.replace(/'/g,"\\'")}',
        globalFontSize: ${Math.round(P)},
        globalColor: '${te}',
      },
      backgroundUrl: ${g!=null&&g.backgroundFileName?`(() => { try { return require('./imgs/${g.backgroundFileName.replace(/'/g,"\\'")}'); } catch(e) { return './imgs/${g.backgroundFileName.replace(/'/g,"\\'")}'; } })()`:`'${E.replace(/'/g,"\\'")}'`},
      ${g!=null&&g.imageFileNames?`// 使用本地资源路径，动态映射不再需要
      images: {},`:`// 图片 src 动态映射，初始写入 base64（若存在），blob 留空待替换
      images: {},`}
      // 图表配置导出，键为元素ID或序号
      chartOptions: ${Pe},
      ${Te?`// 数据库对象（按页面引用注入到 data）
${Te}`:""}
      ${he.length?`// 文本数据源映射（支持静态/动态）
      textSources: { ${he.join(", ")} },`:""}
      ${Me.length?`// 文本效果参数映射（波形与倾斜跟随）
      textEffects: { ${Me.join(", ")} },`:""}
      ${J}
    };
  },
  computed: {
    containerStyle() {
      const base = {
        position: 'relative',
        width: this.config.width + 'px',
        height: this.config.height + 'px',
        fontFamily: this.config.globalFontFamily,
        fontSize: this.config.globalFontSize + 'px',
        color: this.config.globalColor,
        backgroundColor: this.config.backgroundColor || 'transparent',
      };
      if (this.backgroundUrl) {
        return Object.assign({}, base, {
          backgroundImage: 'url(' + this.backgroundUrl + ')',
          backgroundSize: 'cover',
          backgroundRepeat: 'no-repeat',
        });
      }
      return base;
    }
  },
  methods: {
    getByPath(obj, path) {
      try {
        const segs = String(path).split('.');
        return segs.reduce((acc, k) => (acc ? acc[k] : undefined), obj);
      } catch(e) {
        return undefined;
      }
    },
    getTextValue(id) {
      const srcMap = this.textSources || {};
      const src = srcMap[id];
      if (!src) return '';
      if (src.type === 'static') return String(src.text || '');
      const root = this[src.obj] || {};
      const v = this.getByPath(root, src.path);
      return v != null ? String(v) : '';
    },
    getTextPieces(id) {
      const text = this.getTextValue(id);
      const effMap = this.textEffects || {};
      const eff = effMap[id] || {};
      const orientation = eff.textOrientation || 'horizontal';
      const fontSize = Number(eff.fontSize || (this.config && this.config.globalFontSize) || 14);
      const letterSpacing = Number(eff.letterSpacing || 0);
      const step = fontSize * 0.6 + letterSpacing;

      const amp = eff.textWaveEnabled ? Number(eff.amplitude || 0) : 0;
      const freq = eff.textWaveEnabled ? Number(eff.frequency || 0) : 0;
      const phase = eff.textWaveEnabled ? Number(eff.phase || 0) : 0;

      const skewAngle = eff.skewFlowEnabled ? Number(eff.skewAngle || 0) : 0;
      const tan = Math.tan(skewAngle * Math.PI / 180);

      const pieces = [];
      for (let i = 0; i < text.length; i++) {
        const ch = text[i];
        const wave = amp ? amp * Math.sin(i * freq + phase) : 0;
        let dx = 0, dy = 0;
        if (orientation === 'horizontal') {
          dy += wave;
          dy += tan * step * i;
        } else {
          dx += wave;
          dx += tan * step * i;
        }
        const style = 'display:inline-block;white-space:pre;transform: translate(' + Math.round(dx) + 'px, ' + Math.round(dy) + 'px);';
        pieces.push({ char: ch, style });
      }
      return pieces;
    }
  },
  mounted() {
    // 使用 npm 依赖的 echarts 初始化图表实例
    Object.keys(this.chartOptions || {}).forEach((id) => {
      const el = document.getElementById(id);
      if (el) {
        const inst = echarts.init(el);
        inst.setOption(this.chartOptions[id], true);
      }
    });
  }
};
<\/script>

${g!=null&&g.fontFaces&&g.fontFaces.length>0?`
<style>
${g.fontFaces.map(d=>`@font-face { font-family: '${d.family.replace(/'/g,"\\'")}'; src: url('./fonts/${d.file}'); font-weight: normal; font-style: normal; }`).join(`
`)}
</style>
`:""}
<style scoped>
.container { box-sizing: border-box; }
/* 文本对齐公共样式，减少重复的内联 CSS */
.text-flex-left { display:flex; align-items:center; justify-content:flex-start; }
.text-flex-center { display:flex; align-items:center; justify-content:center; }
.text-flex-right { display:flex; align-items:center; justify-content:flex-end; }
${ae}
</style>
`}function Hr(x){return x.replace(/[&<>"']/g,o=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"})[o]||o)}function Fl(x){var g,k;const o=x.style||{},e=[];if(e.push("position:absolute"),e.push(`left:${Math.round(x.left||0)}px`),e.push(`top:${Math.round(x.top||0)}px`),x.autoSize||(x.width&&e.push(`width:${Math.round(x.width)}px`),x.height&&e.push(`height:${Math.round(x.height)}px`)),o.opacity!==void 0&&e.push(`opacity:${o.opacity}`),o.border&&e.push(`border:${o.border}`),o.borderRadius&&e.push(`border-radius:${o.borderRadius}`),o.backgroundColor&&e.push(`background-color:${o.backgroundColor}`),o.boxShadow&&e.push(`box-shadow:${o.boxShadow}`),o.backgroundGradient&&((g=o.backgroundGradient.colors)!=null&&g.length)){const z=o.backgroundGradient.angle||0,T=o.backgroundGradient.colors[0]||"#000000",he=o.backgroundGradient.colors[1]||"#000000";e.push(`background-image:linear-gradient(${z}deg, ${T}, ${he})`),e.push("background-size:cover"),e.push("background-repeat:no-repeat")}if(x.type==="text"&&(o.fontFamily&&e.push(`font-family:${o.fontFamily}`),o.fontSize!==void 0&&e.push(`font-size:${o.fontSize}px`),o.color&&e.push(`color:${o.color}`),o.fontWeight&&e.push(`font-weight:${o.fontWeight}`),o.letterSpacing!==void 0&&o.letterSpacing!==null&&e.push(`letter-spacing:${o.letterSpacing}px`),o.lineHeight!==void 0&&e.push(`line-height:${o.lineHeight}`),o.fontStyle&&e.push(`font-style:${o.fontStyle}`),o.textAlign&&e.push(`text-align:${o.textAlign}`),o.textDecoration&&e.push(`text-decoration:${o.textDecoration}`),o.textOrientation==="vertical"&&(e.push("writing-mode:vertical-rl"),e.push("text-orientation:upright")),o.textGradient&&((k=o.textGradient.colors)!=null&&k.length))){const z=o.textGradient.angle||0,T=o.textGradient.colors[0]||"#000000",he=o.textGradient.colors[1]||"#000000";e.push(`background-image:linear-gradient(${z}deg, ${T}, ${he})`),e.push("-webkit-background-clip:text"),e.push("background-clip:text"),e.push("color:transparent")}return x.type==="image"&&o.objectFit&&e.push(`object-fit:${o.objectFit}`),e.join(";")}function ul(x){return String(x).split(";").map(o=>o.trim()).filter(Boolean).map(o=>o.includes("!important")?o:`${o} !important`).join("; ")}function jl(x){return String(x).replace(/\{([^}]*)\}/g,(o,e)=>`{ ${ul(e)} }`)}function zl(x){const o=[],e=g=>{g.forEach(k=>{if(k.type==="group"&&Array.isArray(k.children))e(k.children);else{const z=(k.className||"").trim(),T=k.customClassCss?String(k.customClassCss).trim():"";if(!z||!T)return;/\{[^}]*\}/.test(T)?o.push(jl(T)):o.push(`.${z} { ${ul(T)} }`)}})};return e(x),o.join(`
`)}function cl(x){const o=String(x||"").trim();if(!o)return"";let e=o.replace(/[^A-Za-z0-9_]/g,"_");return/[A-Za-z_]/.test(e[0]||"")||(e="_"+e),e}function Al(x,o){if(!x.hidden)return"";const e=cl(x.hiddenLabel);return e?` ${o!=null&&o.useShow?"v-show":"v-if"}="${e}"`:""}function el(x,o,e,g){let k=0;const z=e.some(m=>m.type==="chart");function T(m,_){var ie,Te,Pe,J,d;const H=Fl(m),ae=m.zIndex||1,W=m.className&&m.className.trim()?` class="${m.className.trim()}"`:"",R=Al(m,{useShow:(g==null?void 0:g.hideDirective)==="show"});if(m.type==="group"&&Array.isArray(m.children)){const t=m.children.map((j,q)=>T(j,q)).join(`
        `);return`<div${W}${R} style="${H};z-index:${ae}">
        ${t}
      </div>`}if(m.type==="text"){const t=Hr(m.text||"");return`<div${W}${R} style="${H};z-index:${ae}">${t}</div>`}if(m.type==="image"){if(g!=null&&g.imageFileMap&&g.imageFileMap[m.id]){const t=g.imageFileMap[m.id],j=m.elementId&&m.elementId.trim()?` id="${m.elementId.trim()}"`:"";return`<img${W}${j}${R} :src="assetUrl('./imgs/${t}')" style="${H};z-index:${ae}" alt="" />`}if(g!=null&&g.imageFileNames&&g.imageFileNames[k]){const t=g.imageFileNames[k++],j=m.elementId&&m.elementId.trim()?` id="${m.elementId.trim()}"`:"";return`<img${W}${j}${R} :src="assetUrl('./imgs/${t}')" style="${H};z-index:${ae}" alt="" />`}return`<div${W}${R} style="${H};z-index:${ae}"></div>`}if(m.type==="line"){const t=m.style||{},j=t.lineColor||"#ffffff",q=(ie=t.lineThickness)!=null?ie:2,$e=t.lineOrientation||"horizontal",Ue=t.lineStyle==="dashed",Ae=(Te=t.lineDashLength)!=null?Te:6,be=(Pe=t.lineDashGap)!=null?Pe:4,He=Math.max(1,Math.round((J=m.width)!=null?J:$e==="horizontal"?200:2)),We=Math.max(1,Math.round((d=m.height)!=null?d:$e==="horizontal"?2:200)),Xe=Math.round(We/2),mt=Math.round(He/2),bt=Ue?` stroke-dasharray="${Ae} ${be}"`:"";return $e==="horizontal"?`<svg${W}${R} viewBox="0 0 ${He} ${We}" preserveAspectRatio="none" style="${H};z-index:${ae}"><line x1="0" y1="${Xe}" x2="${He}" y2="${Xe}" stroke="${j}" stroke-width="${q}"${bt} fill="none" /></svg>`:`<svg${W}${R} viewBox="0 0 ${He} ${We}" preserveAspectRatio="none" style="${H};z-index:${ae}"><line x1="${mt}" y1="0" x2="${mt}" y2="${We}" stroke="${j}" stroke-width="${q}"${bt} fill="none" /></svg>`}if(m.type==="chart"){const t=m.elementId&&m.elementId.trim()?m.elementId.trim():`chart_${_}`,j=Hr(m.text||"chart");return`<div${W}${R} id="${t}" style="${H};z-index:${ae}">${j}</div>`}return`<div${W}${R} style="${H};z-index:${ae}">${Hr(m.text||"")}</div>`}const he=e.map((m,_)=>T(m,_)).join(`
      `),Me=zl(e),E=o.backgroundUrl||"",ge=o.backgroundColor||"transparent",V=o.globalFontFamily||"",P=o.globalFontSize||14,te=o.globalColor||"#000000",we=(()=>{const m=[];let _=0;return e.forEach(H=>{if(H.type==="chart"){const ae=H.elementId&&H.elementId.trim()?H.elementId.trim():`chart_${_}`;_++;const W=H.chartOption||{};try{m.push(`'${ae.replace(/'/g,"\\'")}' : ${JSON.stringify(W)}`)}catch{m.push(`'${ae.replace(/'/g,"\\'")}' : {}`)}}}),`{ ${m.join(", ")} }`})(),U=(()=>{const m=new Set;return e.forEach(_=>{const H=String(_.hiddenLabel||"").trim(),ae=cl(H),W=!!_.hidden;ae&&W&&m.add(ae)}),Array.from(m).map(_=>`const ${_} = ref(false)`).join(`
`)})();return`
<template>
  <div class="container" :style="containerStyle">
    ${he}
  </div>
</template>

<script setup lang="ts">
import { onMounted, ref, computed } from 'vue'
${z?`import * as echarts from 'echarts'
`:""}
function assetUrl(p: string): string { try { return new URL(p, import.meta.url).href } catch { return p } }
const config = {
  width: ${Math.round(o.width)},
  height: ${Math.round(o.height)},
  backgroundColor: '${ge.replace(/'/g,"\\'")}',
  globalFontFamily: '${V.replace(/'/g,"\\'")}',
  globalFontSize: ${Math.round(P)},
  globalColor: '${te}',
}
const backgroundUrl: string = ${g!=null&&g.backgroundFileName?`assetUrl('./imgs/${String(g.backgroundFileName).replace(/'/g,"\\'")}')`:`'${E.replace(/'/g,"\\'")}'`}
const images: Record<string, string> = {}
${z?`const chartOptions: Record<string, any> = ${we}`:""}
${U?`${U}
`:""}
const containerStyle = computed(() => {
  const base: Record<string, string> = {
    position: 'relative',
    width: config.width + 'px',
    height: config.height + 'px',
    fontFamily: config.globalFontFamily,
    fontSize: config.globalFontSize + 'px',
    color: config.globalColor,
    backgroundColor: (config.backgroundColor || 'transparent') as string,
  }
  if (backgroundUrl) {
    return Object.assign({}, base, {
      backgroundImage: 'url(' + backgroundUrl + ')',
      backgroundSize: 'cover',
      backgroundRepeat: 'no-repeat',
    }) as Record<string, string>
  }
  return base
})
${z?`onMounted(() => {
  Object.keys(chartOptions || {}).forEach((id) => {
    const el = document.getElementById(id)
    if (el && (echarts as any)) { const inst = (echarts as any).init(el); inst.setOption((chartOptions as any)[id], true) }
  })
})`:""}
<\/script>

<style scoped>
.container { box-sizing: border-box; }
.text-flex-left { display:flex; align-items:center; justify-content:flex-start; }
.text-flex-center { display:flex; align-items:center; justify-content:center; }
.text-flex-right { display:flex; align-items:center; justify-content:flex-end; }
${Me}
</style>
`}function dr(x){return String(x).replace(/[&<>"']/g,o=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"})[o]||o)}function Ol(x){const o=x.style||{},e=[];if(e.push("position:absolute"),e.push(`left:${Math.round(x.left||x.x||0)}px`),e.push(`top:${Math.round(x.top||x.y||0)}px`),x.autoSize||(x.width&&e.push(`width:${Math.round(x.width)}px`),x.height&&e.push(`height:${Math.round(x.height)}px`)),o.opacity!==void 0&&e.push(`opacity:${o.opacity}`),o.border&&e.push(`border:${o.border}`),o.borderRadius&&e.push(`border-radius:${o.borderRadius}`),o.backgroundColor&&e.push(`background-color:${o.backgroundColor}`),o.boxShadow&&e.push(`box-shadow:${o.boxShadow}`),o.backgroundGradient&&o.backgroundGradient.colors&&o.backgroundGradient.colors.length){const g=o.backgroundGradient.angle||0,k=o.backgroundGradient.colors[0]||"#000000",z=o.backgroundGradient.colors[1]||"#000000";e.push(`background-image:linear-gradient(${g}deg, ${k}, ${z})`),e.push("background-size:cover"),e.push("background-repeat:no-repeat")}if(x.type==="text"&&(o.fontFamily&&e.push(`font-family:${o.fontFamily}`),o.fontSize!==void 0&&e.push(`font-size:${o.fontSize}px`),o.color&&e.push(`color:${o.color}`),o.fontWeight&&e.push(`font-weight:${o.fontWeight}`),o.letterSpacing!==void 0&&o.letterSpacing!==null&&e.push(`letter-spacing:${o.letterSpacing}px`),o.lineHeight!==void 0&&e.push(`line-height:${o.lineHeight}`),o.fontStyle&&e.push(`font-style:${o.fontStyle}`),o.textAlign&&e.push(`text-align:${o.textAlign}`),o.textDecoration&&e.push(`text-decoration:${o.textDecoration}`),o.textOrientation==="vertical"&&(e.push("writing-mode:vertical-rl"),e.push("text-orientation:upright")),o.textGradient&&o.textGradient.colors&&o.textGradient.colors.length)){const g=o.textGradient.angle||0,k=o.textGradient.colors[0]||"#000000",z=o.textGradient.colors[1]||"#000000";e.push(`background-image:linear-gradient(${g}deg, ${k}, ${z})`),e.push("-webkit-background-clip:text"),e.push("background-clip:text"),e.push("color:transparent")}return x.type==="image"&&o.objectFit&&e.push(`object-fit:${o.objectFit}`),x.hidden&&e.push("display:none"),e.join(";")}function pl(x){return String(x).split(";").map(o=>o.trim()).filter(Boolean).map(o=>o.includes("!important")?o:`${o} !important`).join("; ")}function Dl(x){return String(x).replace(/\{([^}]*)\}/g,(o,e)=>`{ ${pl(e)} }`)}function Gl(x){const o=[],e=g=>{g.forEach(k=>{if(k.type==="group"&&Array.isArray(k.children))e(k.children);else{const z=(k.className||"").trim(),T=k.customClassCss?String(k.customClassCss).trim():"";if(!z||!T)return;/\{[^}]*\}/.test(T)?o.push(Dl(T)):o.push(`.${z} { ${pl(T)} }`)}})};return e(x),o.join(`
`)}function tl(x,o,e,g){function k(m){for(const _ of m)if(_.type==="group"&&Array.isArray(_.children)){if(k(_.children))return!0}else if(_.type==="chart")return!0;return!1}const z=k(e),T=o.backgroundUrl||"",he=g!=null&&g.backgroundFileName?`background-image:url('./imgs/${g.backgroundFileName}');background-size:cover;background-repeat:no-repeat;`:T?`background-image:url('${T}');background-size:cover;background-repeat:no-repeat;`:"";let Me=0;const E={};(function(_){let H=0;const ae=W=>{W.forEach(R=>{if(R.type==="group"&&Array.isArray(R.children))ae(R.children);else if(R.type==="chart"){const ie=R.elementId&&String(R.elementId).trim()?String(R.elementId).trim():`chart_${H++}`;E[R.id]=ie}})};ae(_)})(e);function ge(m){var W,R,ie,Te,Pe;const _=Ol(m),H=m.zIndex||1,ae=m.className&&m.className.trim()?` class="${m.className.trim()}"`:"";if(m.type==="group"&&Array.isArray(m.children)){const J=m.children.map(d=>ge(d)).join(`
        `);return`<div${ae} style="${_};z-index:${H}">
        ${J}
      </div>`}if(m.type==="text"){const J=(m.style||{}).textAlign||"left",d=J==="center"?"text-flex-center":J==="right"?"text-flex-right":"text-flex-left",t=[(m.className||"").trim(),d].filter(Boolean).join(" ");return`<div${t?` class="${t}"`:""} style="${_};z-index:${H}">${dr(m.text||"")}</div>`}if(m.type==="image"){if(g!=null&&g.imageFileMap&&g.imageFileMap[m.id]){const J=g.imageFileMap[m.id];return`<img${ae} src="./imgs/${J}" style="${_};z-index:${H}" alt="" />`}if(g!=null&&g.imageFileNames&&g.imageFileNames[Me]){const J=g.imageFileNames[Me++];return`<img${ae} src="./imgs/${J}" style="${_};z-index:${H}" alt="" />`}return`<div${ae} style="${_};z-index:${H}"></div>`}if(m.type==="line"){const J=m.style||{},d=J.lineColor||"#ffffff",t=(W=J.lineThickness)!=null?W:2,j=J.lineOrientation||"horizontal",q=J.lineStyle==="dashed",$e=(R=J.lineDashLength)!=null?R:6,Ue=(ie=J.lineDashGap)!=null?ie:4,Ae=Math.max(1,Math.round((Te=m.width)!=null?Te:j==="horizontal"?200:2)),be=Math.max(1,Math.round((Pe=m.height)!=null?Pe:j==="horizontal"?2:200)),He=Math.round(be/2),We=Math.round(Ae/2),Xe=q?` stroke-dasharray="${$e} ${Ue}"`:"";return j==="horizontal"?`<svg${ae} viewBox="0 0 ${Ae} ${be}" preserveAspectRatio="none" style="${_};z-index:${H}"><line x1="0" y1="${He}" x2="${Ae}" y2="${He}" stroke="${d}" stroke-width="${t}"${Xe} fill="none" /></svg>`:`<svg${ae} viewBox="0 0 ${Ae} ${be}" preserveAspectRatio="none" style="${_};z-index:${H}"><line x1="${We}" y1="0" x2="${We}" y2="${be}" stroke="${d}" stroke-width="${t}"${Xe} fill="none" /></svg>`}if(m.type==="chart"){const J=E[m.id]||String(m.elementId||"");return`<div${ae} id="${J}" style="${_};z-index:${H}">${dr(m.text||"chart")}</div>`}return m.type==="container"?`<div${ae} style="${_};z-index:${H}">${dr(m.text||"")}</div>`:`<div${ae} style="${_};z-index:${H}">${dr(m.text||"")}</div>`}const V=e.map(m=>ge(m)).join(`
      `),P=Gl(e),te=g!=null&&g.fontFaces&&g.fontFaces.length>0?g.fontFaces.map(m=>`@font-face { font-family: '${String(m.family).replace(/'/g,"\\'")}'; src: url('./fonts/${String(m.file)}'); font-weight: normal; font-style: normal; }`).join(`
`):"";function we(m,_){m.forEach(H=>{if(H.type==="group"&&Array.isArray(H.children))we(H.children,_);else if(H.type==="chart"){const ae=E[H.id]||String(H.elementId||"");try{_.push(`chartOptions['${ae.replace(/'/g,"\\'")}'] = ${JSON.stringify(H.chartOption||{})};`)}catch{_.push(`chartOptions['${ae.replace(/'/g,"\\'")}'] = {};`)}}})}const U=z?`
    (function(){
      var chartOptions = {};
      ${(()=>{const m=[];return we(e,m),m.join(`
      `)})()}
      Object.keys(chartOptions).forEach(function(id){
        var el = document.getElementById(id);
        if (el && window.echarts) { var inst = window.echarts.init(el); inst.setOption(chartOptions[id], true); }
      });
    })();
  `:"";return`<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<title>${dr(x)}</title>
<style>
.container { position:relative; width:${Math.round(o.width)}px; height:${Math.round(o.height)}px; font-family:${String(o.globalFontFamily||"").replace(/'/g,"\\'")}; font-size:${Math.round(o.globalFontSize)}px; color:${String(o.globalColor)}; background-color:${String(o.backgroundColor||"transparent")}; ${he} }
.text-flex-left { display:flex; align-items:center; justify-content:flex-start; }
.text-flex-center { display:flex; align-items:center; justify-content:center; }
.text-flex-right { display:flex; align-items:center; justify-content:flex-end; }
${te}
${P}
</style>
${z?'<script src="https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"><\/script>':""}
</head>
<body>
<div class="container">
  ${V}
</div>
<script>
${U}
<\/script>
</body>
</html>`}function _r(x){return x.replace(/[&<>"']/g,o=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"})[o]||o)}function rl(x){var g,k;const o=x.style||{},e=[];if(e.push("position:absolute"),e.push(`left:${Math.round(x.left||0)}px`),e.push(`top:${Math.round(x.top||0)}px`),x.autoSize||(x.width&&e.push(`width:${Math.round(x.width)}px`),x.height&&e.push(`height:${Math.round(x.height)}px`)),o.opacity!==void 0&&e.push(`opacity:${o.opacity}`),o.border&&e.push(`border:${o.border}`),o.borderRadius&&e.push(`border-radius:${o.borderRadius}`),o.backgroundColor&&e.push(`background-color:${o.backgroundColor}`),o.boxShadow&&e.push(`box-shadow:${o.boxShadow}`),o.backgroundGradient&&((g=o.backgroundGradient.colors)!=null&&g.length)){const z=o.backgroundGradient.angle||0,T=o.backgroundGradient.colors[0]||"#000000",he=o.backgroundGradient.colors[1]||"#000000";e.push(`background-image:linear-gradient(${z}deg, ${T}, ${he})`),e.push("background-size:cover"),e.push("background-repeat:no-repeat")}if(x.type==="text"&&(o.fontFamily&&e.push(`font-family:${o.fontFamily}`),o.fontSize!==void 0&&e.push(`font-size:${o.fontSize}px`),o.color&&e.push(`color:${o.color}`),o.fontWeight&&e.push(`font-weight:${o.fontWeight}`),o.letterSpacing!==void 0&&o.letterSpacing!==null&&e.push(`letter-spacing:${o.letterSpacing}px`),o.lineHeight!==void 0&&e.push(`line-height:${o.lineHeight}`),o.fontStyle&&e.push(`font-style:${o.fontStyle}`),o.textAlign&&e.push(`text-align:${o.textAlign}`),o.textDecoration&&e.push(`text-decoration:${o.textDecoration}`),o.textOrientation==="vertical"&&(e.push("writing-mode:vertical-rl"),e.push("text-orientation:upright")),o.textGradient&&((k=o.textGradient.colors)!=null&&k.length))){const z=o.textGradient.angle||0,T=o.textGradient.colors[0]||"#000000",he=o.textGradient.colors[1]||"#000000";e.push(`background-image:linear-gradient(${z}deg, ${T}, ${he})`),e.push("-webkit-background-clip:text"),e.push("background-clip:text"),e.push("color:transparent")}return x.type==="image"&&o.objectFit&&e.push(`object-fit:${o.objectFit}`),x.hidden&&e.push("display:none"),e.join(";")}function fl(x){return String(x).split(";").map(o=>o.trim()).filter(Boolean).map(o=>o.includes("!important")?o:`${o} !important`).join("; ")}function Bl(x){return String(x).replace(/\{([^}]*)\}/g,(o,e)=>`{ ${fl(e)} }`)}function Ul(x){const o=[],e=g=>{g.forEach(k=>{if(k.type==="group"&&Array.isArray(k.children))e(k.children);else{const z=(k.className||"").trim(),T=k.customClassCss?String(k.customClassCss).trim():"";if(!z||!T)return;/\{[^}]*\}/.test(T)?o.push(Bl(T)):o.push(`.${z} { ${fl(T)} }`)}})};return e(x),o.join(`
`)}function nl(x,o,e,g){const k=e.some(V=>V.type==="chart");let z=0;const T=e.map((V,P)=>{var m,_,H,ae,W;const te=rl(V),we=V.zIndex||1,U=V.className&&V.className.trim()?` class="${V.className.trim()}"`:"";if(V.type==="group"&&Array.isArray(V.children)){const R=V.children.map(ie=>{const Te=rl(ie),Pe=ie.zIndex||1,J=ie.className&&ie.className.trim()?` class="${ie.className.trim()}"`:"";if(ie.type==="image"){if(g!=null&&g.imageFileMap&&g.imageFileMap[ie.id]){const d=g.imageFileMap[ie.id];return`<img${J} src="/imgs/${d}" style="${Te};z-index:${Pe}" alt="" />`}if(g!=null&&g.imageFileNames&&g.imageFileNames[z]){const d=g.imageFileNames[z++];return`<img${J} src="/imgs/${d}" style="${Te};z-index:${Pe}" alt="" />`}}return`<div${J} style="${Te};z-index:${Pe}">${_r(ie.text||"")}</div>`}).join(`
        `);return`<div${U} style="${te};z-index:${we}">${R}</div>`}if(V.type==="text")return`<div${U} style="${te};z-index:${we}">${_r(V.text||"")}</div>`;if(V.type==="image"){if(g!=null&&g.imageFileMap&&g.imageFileMap[V.id]){const R=g.imageFileMap[V.id];return`<img${U} src="/imgs/${R}" style="${te};z-index:${we}" alt="" />`}if(g!=null&&g.imageFileNames&&g.imageFileNames[z]){const R=g.imageFileNames[z++];return`<img${U} src="/imgs/${R}" style="${te};z-index:${we}" alt="" />`}return`<div${U} style="${te};z-index:${we}"></div>`}if(V.type==="line"){const R=V.style||{},ie=R.lineColor||"#ffffff",Te=(m=R.lineThickness)!=null?m:2,Pe=R.lineOrientation||"horizontal",J=R.lineStyle==="dashed",d=(_=R.lineDashLength)!=null?_:6,t=(H=R.lineDashGap)!=null?H:4,j=Math.max(1,Math.round((ae=V.width)!=null?ae:Pe==="horizontal"?200:2)),q=Math.max(1,Math.round((W=V.height)!=null?W:Pe==="horizontal"?2:200)),$e=Math.round(q/2),Ue=Math.round(j/2),Ae=J?` stroke-dasharray="${d} ${t}"`:"";return Pe==="horizontal"?`<svg${U} viewBox="0 0 ${j} ${q}" preserveAspectRatio="none" style="${te};z-index:${we}"><line x1="0" y1="${$e}" x2="${j}" y2="${$e}" stroke="${ie}" stroke-width="${Te}"${Ae} fill="none" /></svg>`:`<svg${U} viewBox="0 0 ${j} ${q}" preserveAspectRatio="none" style="${te};z-index:${we}"><line x1="${Ue}" y1="0" x2="${Ue}" y2="${q}" stroke="${ie}" stroke-width="${Te}"${Ae} fill="none" /></svg>`}if(V.type==="chart"){const R=V.elementId&&V.elementId.trim()?V.elementId.trim():`chart_${P}`;return`<div${U} id="${R}" style="${te};z-index:${we}">${_r(V.text||"chart")}</div>`}return`<div${U} style="${te};z-index:${we}">${_r(V.text||"")}</div>`}).join(`
      `),he=Ul(e),Me=g!=null&&g.fontFaces&&g.fontFaces.length>0?g.fontFaces.map(V=>`@font-face { font-family: '${V.family.replace(/'/g,"\\'")}'; src: url('/fonts/${V.file}'); font-weight: normal; font-style: normal; }`).join(`
`):"",E=(()=>{const V=[];return e.forEach((P,te)=>{if(P.type==="chart"){const we=P.elementId&&P.elementId.trim()?P.elementId.trim():`chart_${te}`,U=P.chartOption||{};try{V.push(`'${we.replace(/'/g,"\\'")}' : ${JSON.stringify(U)}`)}catch{V.push(`'${we.replace(/'/g,"\\'")}' : {}`)}}}),`{ ${V.join(", ")} }`})(),ge=g!=null&&g.backgroundFileName?`'/imgs/${String(g.backgroundFileName).replace(/'/g,"\\'")}'`:`'${(o.backgroundUrl||"").replace(/'/g,"\\'")}'`;return`import React, { useEffect } from 'react';
${k?`import * as echarts from 'echarts';
`:""}
export default function ${x.replace(/[^A-Za-z0-9_]/g,"_")}() {
  const config = { width: ${Math.round(o.width)}, height: ${Math.round(o.height)}, backgroundColor: '${(o.backgroundColor||"transparent").replace(/'/g,"\\'")}', globalFontFamily: '${(o.globalFontFamily||"").replace(/'/g,"\\'")}', globalFontSize: ${Math.round(o.globalFontSize)}, globalColor: '${o.globalColor}' };
  const backgroundUrl = ${ge};
  ${k?`const chartOptions = ${E};
  useEffect(() => {
    Object.keys(chartOptions || {}).forEach((id) => {
      const el = document.getElementById(id);
      if (el) { const inst = echarts.init(el); inst.setOption(chartOptions[id], true); }
    });
  }, []);
`:""}  const containerStyle = { position:'relative', width: config.width + 'px', height: config.height + 'px', fontFamily: config.globalFontFamily, fontSize: config.globalFontSize + 'px', color: config.globalColor, backgroundColor: config.backgroundColor, ...(backgroundUrl ? { backgroundImage: 'url(' + backgroundUrl + ')', backgroundSize: 'cover', backgroundRepeat: 'no-repeat' } : {}) };
  return (
    <div className="container" style={containerStyle}>
      <style>{\`.text-flex-left{display:flex;align-items:center;justify-content:flex-start}.text-flex-center{display:flex;align-items:center;justify-content:center}.text-flex-right{display:flex;align-items:center;justify-content:flex-end${Me?"\\n"+Me:""}${he?"\\n"+he:""}\`}</style>
      <div dangerouslySetInnerHTML={{ __html: \`${T.replace(/`/g,"\\`")}\` }} />
    </div>
  );
}
`}var ll=sl(wl()),ol=sl(El()),Vl=["placeholder"],Ll={key:0,class:"absolute z-10 bg-gray-900 border border-gray-700 rounded w-full mt-1 max-h-40 overflow-auto shadow custom-scrollbar"},Rl=["onMousedown"],Tl={key:0,class:"px-2 py-2 text-xs text-gray-400"},Pl=cr({__name:"SearchableSelect",props:{modelValue:{},options:{},placeholder:{},numeric:{type:Boolean}},emits:["update:modelValue"],setup(x,{emit:o}){const e=x,g=o,k=ce(!1),z=ce(""),T=ce(null),he=ce("");let Me=null;const E=ce(!1);gt(()=>e.modelValue,W=>{W==null?z.value="":z.value=String(W)},{immediate:!0});const ge=yt(()=>e.options.map(W=>String(W))),V=yt(()=>{const W=he.value.trim().toLowerCase();return W?ge.value.filter(R=>R.toLowerCase().includes(W)):ge.value});function P(W){z.value=W;const R=e.numeric?Number(W):W;g("update:modelValue",R),k.value=!1}function te(){const W=z.value.trim();if(!W){g("update:modelValue",(e.numeric,null)),k.value=!1;return}const R=e.numeric?Number(W):W;g("update:modelValue",R),k.value=!1}function we(){E.value=!1,k.value=!0,_(z.value)}function U(){}function m(W){W.key==="Enter"&&te()}function _(W){Me&&window.clearTimeout(Me),Me=window.setTimeout(()=>{he.value=W},180)}function H(){E.value=!0,k.value=!0,_(z.value)}function ae(W){T.value&&(T.value.contains(W.target)||(k.value=!1))}return Jr(()=>{window.addEventListener("click",ae),he.value=z.value}),Xr(()=>{window.removeEventListener("click",ae),Me&&window.clearTimeout(Me)}),(W,R)=>(O(),D("div",{class:"relative",ref_key:"root",ref:T},[ue(r("input",{class:"border border-gray-700 bg-gray-900 text-gray-100 rounded w-full px-2 py-1",placeholder:x.placeholder||"搜索选择或直接输入","onUpdate:modelValue":R[0]||(R[0]=ie=>z.value=ie),onInput:H,onFocus:we,onBlur:U,onKeydown:m},null,40,Vl),[[ye,z.value]]),k.value?(O(),D("div",Ll,[(O(!0),D(At,null,Pt(V.value,ie=>(O(),D("div",{key:ie,class:"px-2 py-1 hover:bg-gray-700 cursor-pointer text-sm text-gray-100",onMousedown:il(Te=>P(ie),["prevent"])},Ke(ie),41,Rl))),128)),V.value.length===0?(O(),D("div",Tl,"无匹配项，回车使用当前输入")):K("",!0)])):K("",!0)],512))}}),St=Pl,_l={class:"relative w-full"},Hl=cr({__name:"CssEditor",props:{modelValue:{},height:{},debounceMs:{}},emits:["update:modelValue"],setup(x,{emit:o}){const e=x,g=o,k=ce(e.modelValue||"");let z=null;const T=typeof e.debounceMs=="number"?Math.max(0,e.debounceMs):250;gt(()=>e.modelValue,V=>{z&&(clearTimeout(z),z=null);const P=V||"";P!==k.value&&(k.value=P)}),gt(k,V=>{z&&clearTimeout(z),z=window.setTimeout(()=>{g("update:modelValue",V),z=null},T)}),Xr(()=>{z&&(clearTimeout(z),z=null)});function he(){const V=k.value||"";if(navigator.clipboard&&typeof navigator.clipboard.writeText=="function")navigator.clipboard.writeText(V).catch(()=>{try{const P=document.createElement("textarea");P.value=V,document.body.appendChild(P),P.select(),document.execCommand("copy"),document.body.removeChild(P)}catch{}});else try{const P=document.createElement("textarea");P.value=V,document.body.appendChild(P),P.select(),document.execCommand("copy"),document.body.removeChild(P)}catch{}}function Me(){z&&(clearTimeout(z),z=null),k.value="",g("update:modelValue","")}const E=[ml,bl(),hl],ge=yt(()=>{var V;return(V=e.height)!=null?V:"180px"});return(V,P)=>(O(),D("div",_l,[r("div",{class:"absolute right-2 top-2 z-10 flex gap-2"},[r("button",{type:"button",class:"px-2 py-1 text-xs bg-gray-700/70 hover:bg-gray-700 text-gray-100 rounded",onClick:he},"复制"),r("button",{type:"button",class:"px-2 py-1 text-xs bg-red-600/70 hover:bg-red-600 text-white rounded",onClick:Me},"清空")]),ft(gl(xl),{modelValue:k.value,"onUpdate:modelValue":P[0]||(P[0]=te=>k.value=te),extensions:E,style:Qe({height:ge.value,width:"100%"}),class:"w-full rounded border border-purple-500/30 bg-gray-800/50"},null,8,["modelValue","style"])]))}}),Wl=Yr(Hl,[["__scopeId","data-v-c1c6cbbe"]]);function Jl(x,o,e,g,k,z){x&&(x.style=x.style||{},x.style.boxShadow=`${o}px ${e}px ${g}px ${k}px ${z}`)}function ql(x){x.style=x.style||{},x.style.textGradient=x.style.textGradient||{colors:["#00A3FF","#ffffff"],angle:0}}function Xl(x){x.style=x.style||{},x.style.backgroundGradient=x.style.backgroundGradient||{colors:["#00A3FF","#ffffff"],angle:90}}function Yl(x,o){var ge,V,P;const e=(ge=o==null?void 0:o.maxDepth)!=null?ge:6,g=(V=o==null?void 0:o.maxEntries)!=null?V:400,k=(P=o==null?void 0:o.includeIntermediate)!=null?P:!1,z=[],T=new WeakSet;function he(te){return Object.prototype.toString.call(te)==="[object Object]"}function Me(te){z.length<g&&z.push(te)}function E(te,we,U){if(!(U>e)&&te!=null){if(typeof te!="object"){Me(we);return}if(!T.has(te)){if(T.add(te),Array.isArray(te)){Me(we);const m=Math.min(te.length,20);for(let _=0;_<m;_++)E(te[_],`${we}[${_}]`,U+1);return}if(he(te)){k&&Me(we);const m=Object.keys(te).slice(0,50);for(const _ of m)E(te[_],we?`${we}.${_}`:_,U+1);return}Me(we)}}}return E(x,"",0),z.filter(Boolean)}function Kl(x,o){try{if(!x||!o)return"";const e=o.replace(/\[(\d+)\]/g,".$1").replace(/\['([^']+)'\]/g,".$1").replace(/\["([^\"]+)"\]/g,".$1").split(".").filter(Boolean);let g=x;for(const k of e){if(g==null)return"";g=g[k]}return typeof g=="object"?JSON.stringify(g):g!=null?g:""}catch{return""}}function Zl(x,o){var k;if(!o||!((k=o.dynamic)!=null&&k.enabled)||!o.dynamic.objectName||!o.dynamic.propertyPath)return"";const e=o.dynamic,g=x[e.objectName];return String(Kl(g,e.propertyPath))}var Ql={class:"w-80 min-w-[300px] bg-gray-900/80 backdrop-blur-sm border border-purple-500/30 rounded-xl shadow-2xl shadow-purple-500/20 flex flex-col"},eo={key:0,class:"p-4 space-y-4 overflow-y-auto flex-1 custom-scrollbar"},to={class:"space-y-3"},ro={class:"grid grid-cols-2 gap-2"},no={class:"col-span-2"},lo={class:"space-y-3"},oo={class:"space-y-2"},so={class:"flex items-center justify-between"},ao={key:0},io={class:"flex gap-2"},uo={key:1},co={key:2},po={key:3,class:"space-y-2 pt-2 border-t border-purple-500/20"},fo={class:"flex items-center justify-between"},go={class:"inline-flex items-center cursor-pointer"},yo=["checked"],mo={key:0,class:"space-y-1"},bo=["value"],xo={key:0,class:"space-y-3"},ho={class:"flex items-center gap-2"},vo=["value"],wo=["value"],$o={class:"space-y-2"},ko={class:"flex items-center justify-between"},Eo={class:"flex items-center gap-1 text-xs text-gray-300"},So=["checked"],Mo={key:0,class:"grid grid-cols-3 gap-2 items-end"},Co={class:"flex items-center gap-2"},No=["value"],Io=["value"],Fo={class:"flex items-center gap-2"},jo=["value"],zo=["value"],Ao={class:"space-y-1"},Oo=["value"],Do=["value"],Go={class:"space-y-2"},Bo={class:"flex items-center justify-between"},Uo={class:"flex items-center gap-1 text-xs text-gray-300"},Vo=["checked"],Lo={key:0,class:"space-y-1"},Ro={class:"flex items-center gap-2"},To={key:0,class:"space-y-1"},Po=["value"],_o=["value"],Ho={key:1,class:"space-y-1"},Wo=["value"],Jo={class:"flex items-center gap-1"},qo=["value"],Xo={class:"space-y-2"},Yo={class:"flex items-center justify-between"},Ko={class:"flex items-center gap-1 text-xs text-gray-300"},Zo=["checked"],Qo={key:0,class:"space-y-2"},es=["value"],ts={class:"space-y-1"},rs={class:"flex items-center gap-2"},ns=["value"],ls=["value"],os={class:"space-y-1"},ss={class:"flex items-center gap-2"},as=["value"],is=["value"],ds={class:"space-y-1"},us={class:"flex items-center gap-2"},cs=["value"],ps=["value"],fs={class:"space-y-1"},gs={class:"flex items-center gap-2"},ys=["value"],ms=["value"],bs={class:"space-y-1"},xs={key:0,class:"flex items-center gap-2"},hs=["value"],vs=["value"],ws={key:1,class:"space-y-3"},$s={class:"flex items-center gap-2"},ks={key:0,class:"space-y-2"},Es=["value"],Ss={class:"grid grid-cols-2 gap-2"},Ms=["value"],Cs=["value"],Ns={key:0,class:"grid grid-cols-2 gap-2"},Is=["value"],Fs=["value"],js={key:1,class:"grid grid-cols-2 gap-2"},zs={key:2,class:"grid grid-cols-3 gap-2 items-end"},As={key:1},Os={class:"flex items-center justify-between mt-2"},Ds={key:0,class:"text-xs text-red-400"},Gs={key:2,class:"space-y-3"},Bs={class:"space-y-2"},Us={class:"flex gap-1"},Vs=["value"],Ls=["value"],Rs={class:"grid grid-cols-2 gap-2"},Ts={class:"grid grid-cols-2 gap-1"},Ps=["value"],_s={class:"grid grid-cols-2 gap-2"},Hs=["value"],Ws={key:0},Js=["value"],qs={key:0,class:"grid grid-cols-2 gap-2"},Xs=["value"],Ys={key:3,class:"space-y-3"},Ks={class:"space-y-2"},Zs={class:"space-y-2 mt-2"},Qs={class:"flex items-center gap-2"},ea=["checked"],ta={key:0,class:"space-y-2 p-2 bg-gray-800/30 rounded"},ra={class:"text-xs text-gray-400"},na={class:"space-y-2"},la={class:"grid grid-cols-2 gap-1"},oa={class:"grid grid-cols-2 gap-2"},sa={class:"grid grid-cols-2 gap-2"},aa={class:"grid grid-cols-2 gap-2"},ia=["value"],da=["value"],ua={class:"space-y-2"},ca={class:"flex gap-1"},pa=["value","disabled"],fa=["value","disabled"],ga={key:0,class:"text-xs text-yellow-400 mt-1"},ya={class:"space-y-2"},ma={class:"flex gap-1"},ba=["value"],xa=["value"],ha={class:"space-y-2"},va={class:"grid grid-cols-3 gap-1"},wa={class:"space-y-2"},$a={class:"grid grid-cols-2 gap-1"},ka={class:"space-y-2"},Ea={class:"flex items-center gap-2"},Sa={class:"flex items-center gap-2 mt-1"},Ma={class:"space-y-2"},Ca={class:"flex items-center justify-between"},Na={class:"flex gap-1"},Ia={key:0,class:"grid grid-cols-3 gap-2 items-center"},Fa={class:"col-span-1"},ja={class:"col-span-1"},za={class:"col-span-1"},Aa={class:"space-y-2"},Oa={class:"grid grid-cols-3 gap-1"},Da={class:"space-y-2"},Ga={class:"flex items-center justify-between"},Ba={class:"flex gap-1"},Ua={key:0,class:"space-y-2 p-2 bg-gray-800/30 rounded"},Va={class:"grid grid-cols-2 gap-2"},La={class:"flex gap-1"},Ra={class:"flex gap-1"},Ta={class:"block text-xs text-gray-400 mb-1"},Pa={class:"space-y-2"},_a={class:"flex items-center justify-between"},Ha={class:"flex gap-1"},Wa={key:0,class:"space-y-2 p-2 bg-gray-800/30 rounded"},Ja={class:"grid grid-cols-2 gap-2"},qa={class:"flex gap-1"},Xa={class:"flex gap-1"},Ya={class:"block text-xs text-gray-400 mb-1"},Ka={key:4,class:"space-y-3"},Za={class:"space-y-2"},Qa={key:0,class:"space-y-2"},ei={class:"max-h-32 overflow-y-auto custom-scrollbar bg-gray-800/30 rounded p-2"},ti={class:"grid grid-cols-4 gap-2"},ri=["onClick"],ni=["src","alt"],li={key:0,class:"text-xs text-gray-500 text-center py-2"},oi={class:"grid grid-cols-3 gap-2"},si={class:"space-y-2"},ai={class:"pt-4 border-t border-purple-500/30 space-y-2"},ii={key:1,class:"p-4 text-center text-gray-400 flex-1 flex flex-col justify-center"},di=cr({__name:"ElementSettingsPanel",props:{selectedEl:{},config:{},fontLibrary:{},fontSizeLibrary:{},fontWeightOptions:{},fontStyleOptions:{},databaseObjects:{},dbMap:{},iconLibrary:{},defaultChartOption:{type:Function},safeHex:{type:Function},initCustomClassSkeleton:{type:Function},refreshAllCustomClassCss:{type:Function},removeCustomClassCssForElement:{type:Function},getIconDataUrlById:{type:Function}},emits:["duplicateSelected","removeSelected","saveSelectedAsComponent"],setup(x,{emit:o}){const e=x,g=o,k=ce("visual"),z=ce(""),T=ce("");gt(()=>{var d;return(d=e.selectedEl)==null?void 0:d.id},()=>{var t;const d=e.selectedEl;d&&d.type==="chart"&&(k.value="visual",T.value="",z.value=JSON.stringify((t=d.chartOption)!=null?t:e.defaultChartOption(d.chartType||"line"),null,2))});const he=yt(()=>{var j,q;const d=(q=(j=e.selectedEl)==null?void 0:j.dynamic)==null?void 0:q.objectName;if(!d)return[];const t=e.dbMap[d];try{return Yl(t,{maxDepth:6,maxEntries:400})}catch{return[]}});function Me(d){return Zl(e.dbMap,d)}function E(d){return typeof d=="string"&&d.trim().endsWith("%")?"%":"px"}function ge(d){if(d==null)return 0;if(typeof d=="number")return d;const t=String(d).trim();if(t.endsWith("%")){const q=Number(t.replace("%",""));return Number.isFinite(q)?q:0}const j=Number(t.replace("px",""));return Number.isFinite(j)?j:0}function V(d,t){const j=e.selectedEl;j&&(j.style=j.style||{},j.style.borderRadius=`${d}${t}`)}function P(d){const t={x:0,y:8,blur:24,spread:0,color:"#000000"};if(!d||!d.trim())return t;const j=d.split(/\s+/).filter(Boolean);if(j.length<3)return t;const q=j.slice(0,4).map(We=>Number(String(We).replace("px",""))),$e=j.slice(4).join(" ")||t.color,[Ue=NaN,Ae=NaN,be=NaN,He=NaN]=q;return{x:Number.isFinite(Ue)?Ue:t.x,y:Number.isFinite(Ae)?Ae:t.y,blur:Number.isFinite(be)?be:t.blur,spread:Number.isFinite(He)?He:t.spread,color:$e}}function te(d,t,j,q,$e){Jl(e.selectedEl,d,t,j,q,$e)}function we(d){ql(d)}function U(d){Xl(d)}function m(){T.value="";try{const d=JSON.parse(z.value);e.selectedEl&&e.selectedEl.type==="chart"&&(e.selectedEl.chartOption=d)}catch(d){T.value=`JSON 解析失败：${(d==null?void 0:d.message)||String(d)}`}}function _(d,t){if(!e.selectedEl||e.selectedEl.type!=="chart"||!e.selectedEl.chartOption)return;const j=e.selectedEl.chartOption,q=j.series||[],$e={type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:d},{offset:1,color:t}],global:!1};q.forEach(Ue=>{Ue.type==="bar"&&(Ue.itemStyle=Ue.itemStyle||{},Ue.itemStyle.color=$e)}),z.value=JSON.stringify(j,null,2)}function H(){const d=e.selectedEl;return!d||d.type!=="chart"?null:(d.chartOption||(d.chartOption=e.defaultChartOption(d.chartType||"line")),d.chartOption)}function ae(d){const t=H();t&&(t.title=t.title||{},t.title.text=d,z.value=JSON.stringify(t,null,2))}function W(d){const t=H();t&&(t.color=d.split(",").map(j=>j.trim()).filter(Boolean),z.value=JSON.stringify(t,null,2))}function R(d){const t=H();t&&(t.legend=t.legend||{},t.legend.show=d==="1",z.value=JSON.stringify(t,null,2))}function ie(d){var j;const t=(j=d.target.files)==null?void 0:j[0];if(t&&e.selectedEl){const q=new FileReader;q.onload=()=>{e.selectedEl&&(e.selectedEl.src=String(q.result),e.selectedEl.iconId=void 0)},q.readAsDataURL(t)}}async function Te(d){const t=e.selectedEl;if(!t||t.type!=="image")return;const j=await e.getIconDataUrlById(d.id);if(!j)return;t.src=j,t.iconId=d.id;const q=new Image;q.onload=()=>{e.selectedEl&&e.selectedEl.id===t.id&&(e.selectedEl.width=q.naturalWidth,e.selectedEl.height=q.naturalHeight)},q.src=j}function Pe(){const d=e.selectedEl;if(!d||d.type!=="image"||!d.src)return;const t=new Image;t.onload=()=>{e.selectedEl&&(e.selectedEl.width=t.naturalWidth,e.selectedEl.height=t.naturalHeight)},t.src=d.src}function J(){}return(d,t)=>{var j,q,$e,Ue,Ae,be,He,We,Xe,mt,bt,Mt,wt,Ct,Ce,le,rt,ot,ut,Ve,Je,Ee,me,et,xt,nt,Le,De,ht,vt,st,pr,fr,gr,$t,_t,yr,Ht,mr,Wt,br,Jt,xr,hr,vr,wr,qt,Xt,Ot,Dt,$r,kr,Er,Nt,ct,Yt,It,Kt,Ft,Sr,Mr,at,kt,Cr,Nr,Zt,Qt,er,Ir,jt,Gt,Bt,Ut,tr,rr,Fr,nr,lt,Ze,jr,zr,Ar,Or,it,Dr,Gr,Br,lr,Vt,Lt,or,Rt,Tt,Ur,zt,sr,Vr,ar,Lr,ir,l,n,a,u,c,f,S,C,M,y,s,$,B,ne,se,Se,ve,ke,pe,Z,Q,ee,Y,xe,p,h,N,v,I,X,b,G,A,L,de,re,fe,Oe,Ge,Ye,Re,tt,qe,dt,pt,Et,Rr,Kr,Zr,Qr,en,tn,rn,nn,ln,on,sn,an,dn,un,cn,pn,fn,gn,yn,mn,bn,xn,hn,vn,wn,$n,kn,En,Sn,Mn,Cn,Nn,In,Fn,jn,zn,An,On,Dn,Gn,Bn,Un,Vn,Ln,Rn,Tn,Pn,_n,Hn,Wn,Jn,qn,Xn,Yn,Kn;return O(),D("div",Ql,[t[221]||(t[221]=r("div",{class:"p-4 border-b border-purple-500/30 bg-gradient-to-r from-purple-600/20 to-pink-600/20 flex-shrink-0"},[r("h2",{class:"text-lg font-bold text-purple-300 flex items-center gap-2"},[r("span",{class:"w-2 h-2 bg-purple-400 rounded-full animate-pulse"}),ur(" 元素设置 ")])],-1)),e.selectedEl?(O(),D("div",eo,[r("div",to,[t[123]||(t[123]=r("h3",{class:"text-sm font-medium text-purple-300 border-b border-purple-500/30 pb-1"},"位置和尺寸",-1)),r("div",ro,[r("div",null,[t[118]||(t[118]=r("label",{class:"block text-xs text-gray-400 mb-1"},"X",-1)),ue(r("input",{"onUpdate:modelValue":t[0]||(t[0]=i=>e.selectedEl.left=i),type:"number",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,512),[[ye,e.selectedEl.left,void 0,{number:!0}]])]),r("div",null,[t[119]||(t[119]=r("label",{class:"block text-xs text-gray-400 mb-1"},"Y",-1)),ue(r("input",{"onUpdate:modelValue":t[1]||(t[1]=i=>e.selectedEl.top=i),type:"number",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,512),[[ye,e.selectedEl.top,void 0,{number:!0}]])]),r("div",null,[t[120]||(t[120]=r("label",{class:"block text-xs text-gray-400 mb-1"},"宽度",-1)),ue(r("input",{"onUpdate:modelValue":t[2]||(t[2]=i=>e.selectedEl.width=i),type:"number",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,512),[[ye,e.selectedEl.width,void 0,{number:!0}]])]),r("div",null,[t[121]||(t[121]=r("label",{class:"block text-xs text-gray-400 mb-1"},"高度",-1)),ue(r("input",{"onUpdate:modelValue":t[3]||(t[3]=i=>e.selectedEl.height=i),type:"number",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,512),[[ye,e.selectedEl.height,void 0,{number:!0}]])]),r("div",no,[t[122]||(t[122]=r("label",{class:"block text-xs text-gray-400 mb-1"},"层级（z-index）",-1)),ue(r("input",{"onUpdate:modelValue":t[4]||(t[4]=i=>e.selectedEl.zIndex=i),type:"number",min:"0",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,512),[[ye,e.selectedEl.zIndex,void 0,{number:!0}]])])])]),r("div",lo,[t[133]||(t[133]=r("h3",{class:"text-sm font-medium text-purple-300 border-b border-purple-500/30 pb-1"},"元素属性",-1)),r("div",oo,[r("div",so,[t[124]||(t[124]=r("label",{class:"text-xs text-gray-400"},"启用 Class 样式",-1)),ue(r("input",{type:"checkbox","onUpdate:modelValue":t[5]||(t[5]=i=>e.selectedEl.enableClassStyle=i),onChange:t[6]||(t[6]=i=>{e.selectedEl&&i.target.checked?(e.initCustomClassSkeleton(e.selectedEl),e.refreshAllCustomClassCss()):e.selectedEl&&!i.target.checked&&e.removeCustomClassCssForElement(e.selectedEl.id)}),class:"rounded border-purple-500/30 text-purple-400 focus:ring-purple-400"},null,544),[[qr,e.selectedEl.enableClassStyle]])]),(j=e.selectedEl)!=null&&j.enableClassStyle?(O(),D("div",ao,[t[125]||(t[125]=r("label",{class:"block text-xs text-gray-400 mb-1"},"CSS Class",-1)),r("div",io,[ue(r("input",{"onUpdate:modelValue":t[7]||(t[7]=i=>e.selectedEl.className=i),type:"text",placeholder:"自动生成唯一类名，可修改",class:"flex-1 px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,512),[[ye,e.selectedEl.className]]),r("button",{type:"button",onClick:t[8]||(t[8]=()=>{e.selectedEl&&(e.selectedEl.className=`cls-${String(e.selectedEl.id).slice(0,8)}`,e.initCustomClassSkeleton(e.selectedEl),e.refreshAllCustomClassCss())}),class:"px-2 py-1 text-xs bg-purple-600/60 hover:bg-purple-600 rounded text-white"},"生成默认")])])):K("",!0),(q=e.selectedEl)!=null&&q.enableClassStyle?(O(),D("div",uo,[t[126]||(t[126]=r("label",{class:"block text-xs text-gray-400 mb-1"},"自定义样式（CSS 声明）",-1)),ft(Wl,{modelValue:String(($e=e.selectedEl.customClassCss)!=null?$e:""),"onUpdate:modelValue":t[9]||(t[9]=i=>{e.selectedEl.customClassCss=i,e.refreshAllCustomClassCss()}),height:"180px"},null,8,["modelValue"]),t[127]||(t[127]=r("p",{class:"text-[11px] text-gray-500 mt-1"},"提示：已为当前类名生成 .className { } 模板；也可直接填写声明，系统会自动包裹并追加 !important。",-1))])):K("",!0),e.selectedEl&&(e.selectedEl.type==="chart"||e.selectedEl.type==="container")?(O(),D("div",co,[t[128]||(t[128]=r("label",{class:"block text-xs text-gray-400 mb-1"},"元素ID",-1)),ue(r("input",{"onUpdate:modelValue":t[10]||(t[10]=i=>e.selectedEl.elementId=i),type:"text",placeholder:"输入元素ID",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,512),[[ye,e.selectedEl.elementId]])])):K("",!0),e.selectedEl?(O(),D("div",po,[t[132]||(t[132]=r("h3",{class:"text-sm font-medium text-purple-300"},"显示与隐藏",-1)),r("div",fo,[t[130]||(t[130]=r("label",{class:"text-xs text-gray-400"},"隐藏该元素",-1)),r("label",go,[r("input",{type:"checkbox",class:"sr-only peer",checked:!!e.selectedEl.hidden,onChange:t[11]||(t[11]=i=>{const F=i.target.checked;e.selectedEl&&(e.selectedEl.hidden=F,F&&!e.selectedEl.hiddenLabel&&(e.selectedEl.hiddenLabel=`hidden-${String(e.selectedEl.id).slice(0,8)}`))})},null,40,yo),t[129]||(t[129]=r("div",{class:"relative w-12 h-6 rounded-full bg-gray-700/60 transition-all duration-200 shadow-inner peer-checked:bg-gradient-to-r peer-checked:from-purple-600 peer-checked:to-pink-600"},[r("div",{class:"absolute left-0.5 top-0.5 w-5 h-5 bg-white rounded-full shadow transform transition-transform duration-200 peer-checked:translate-x-6"})],-1)),r("span",{class:Be(["ml-3 text-xs",e.selectedEl.hidden?"text-purple-300":"text-gray-300"])},Ke(e.selectedEl.hidden?"已隐藏":"显示中"),3)])]),e.selectedEl.hidden?(O(),D("div",mo,[t[131]||(t[131]=r("label",{class:"block text-xs text-gray-400"},"隐藏标识",-1)),r("input",{type:"text",value:e.selectedEl.hiddenLabel||"",onInput:t[12]||(t[12]=i=>{e.selectedEl&&(e.selectedEl.hiddenLabel=i.target.value)}),class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1",placeholder:"hidden-xxxx"},null,40,bo)])):K("",!0)])):K("",!0)])]),e.selectedEl&&e.selectedEl.type==="container"?(O(),D("div",xo,[t[154]||(t[154]=r("h3",{class:"text-sm font-medium text-purple-300 border-b border-purple-500/30 pb-1"},"容器样式",-1)),r("div",null,[t[134]||(t[134]=r("label",{class:"block text-xs text-gray-400 mb-1"},"背景色（HEX）",-1)),r("div",ho,[r("input",{type:"color",value:((Ae=(Ue=e.selectedEl)==null?void 0:Ue.style)==null?void 0:Ae.backgroundColor)||"#000000",onInput:t[13]||(t[13]=i=>{const F=i.target.value;e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.backgroundColor=F)}),class:"w-10 h-8 bg-gray-800/50 border border-purple-500/30 rounded"},null,40,vo),r("input",{type:"text",value:((He=(be=e.selectedEl)==null?void 0:be.style)==null?void 0:He.backgroundColor)||"",placeholder:"#1e293b 或 transparent",onInput:t[14]||(t[14]=i=>{const F=i.target.value.trim();e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.backgroundColor=F)}),class:"flex-1 px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,40,wo)]),t[135]||(t[135]=r("p",{class:"text-[11px] text-gray-500 mt-1"},"支持 #RGB/#RRGGBB 或 CSS 颜色名；启用渐变时该颜色被覆盖。",-1))]),r("div",$o,[r("div",ko,[t[137]||(t[137]=r("label",{class:"block text-xs text-gray-400 mb-1"},"渐变背景",-1)),r("label",Eo,[r("input",{type:"checkbox",checked:!!((Xe=(We=e.selectedEl)==null?void 0:We.style)!=null&&Xe.backgroundGradient),onChange:t[15]||(t[15]=i=>{const F=i.target.checked;e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},F?e.selectedEl.style.backgroundGradient||(e.selectedEl.style.backgroundGradient={colors:["#42b883","#0ea5e9"],angle:90}):delete e.selectedEl.style.backgroundGradient)})},null,40,So),t[136]||(t[136]=ur(" 启用 ",-1))])]),(bt=(mt=e.selectedEl)==null?void 0:mt.style)!=null&&bt.backgroundGradient?(O(),D("div",Mo,[r("div",null,[t[138]||(t[138]=r("label",{class:"block text-[11px] text-gray-400 mb-1"},"起始色（HEX）",-1)),r("div",Co,[r("input",{type:"color",value:((Ce=(Ct=(wt=(Mt=e.selectedEl)==null?void 0:Mt.style)==null?void 0:wt.backgroundGradient)==null?void 0:Ct.colors)==null?void 0:Ce[0])||"#42b883",onInput:t[16]||(t[16]=i=>{var oe;const F=i.target.value;if(!e.selectedEl)return;e.selectedEl.style=e.selectedEl.style||{};const w=e.selectedEl.style.backgroundGradient||{colors:["","#"],angle:90};w.colors=(oe=w.colors)!=null&&oe.length?w.colors:["","#"],w.colors[0]=F,e.selectedEl.style.backgroundGradient=w}),class:"w-10 h-8 bg-gray-800/50 border border-purple-500/30 rounded"},null,40,No),r("input",{type:"text",value:((ut=(ot=(rt=(le=e.selectedEl)==null?void 0:le.style)==null?void 0:rt.backgroundGradient)==null?void 0:ot.colors)==null?void 0:ut[0])||"",placeholder:"#42b883",onInput:t[17]||(t[17]=i=>{var oe;const F=i.target.value.trim();if(!e.selectedEl)return;e.selectedEl.style=e.selectedEl.style||{};const w=e.selectedEl.style.backgroundGradient||{colors:["","#"],angle:90};w.colors=(oe=w.colors)!=null&&oe.length?w.colors:["","#"],w.colors[0]=F,e.selectedEl.style.backgroundGradient=w}),class:"flex-1 px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-xs"},null,40,Io)])]),r("div",null,[t[139]||(t[139]=r("label",{class:"block text-[11px] text-gray-400 mb-1"},"结束色（HEX）",-1)),r("div",Fo,[r("input",{type:"color",value:((me=(Ee=(Je=(Ve=e.selectedEl)==null?void 0:Ve.style)==null?void 0:Je.backgroundGradient)==null?void 0:Ee.colors)==null?void 0:me[1])||"#0ea5e9",onInput:t[18]||(t[18]=i=>{var oe;const F=i.target.value;if(!e.selectedEl)return;e.selectedEl.style=e.selectedEl.style||{};const w=e.selectedEl.style.backgroundGradient||{colors:["","#"],angle:90};w.colors=(oe=w.colors)!=null&&oe.length?w.colors:["","#"],w.colors[1]=F,e.selectedEl.style.backgroundGradient=w}),class:"w-10 h-8 bg-gray-800/50 border border-purple-500/30 rounded"},null,40,jo),r("input",{type:"text",value:((Le=(nt=(xt=(et=e.selectedEl)==null?void 0:et.style)==null?void 0:xt.backgroundGradient)==null?void 0:nt.colors)==null?void 0:Le[1])||"",placeholder:"#0ea5e9",onInput:t[19]||(t[19]=i=>{var oe;const F=i.target.value.trim();if(!e.selectedEl)return;e.selectedEl.style=e.selectedEl.style||{};const w=e.selectedEl.style.backgroundGradient||{colors:["","#"],angle:90};w.colors=(oe=w.colors)!=null&&oe.length?w.colors:["","#"],w.colors[1]=F,e.selectedEl.style.backgroundGradient=w}),class:"flex-1 px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-xs"},null,40,zo)])]),r("div",Ao,[t[140]||(t[140]=r("label",{class:"block text-[11px] text-gray-400"},"角度（0-360）",-1)),r("input",{type:"range",min:"0",max:"360",step:"1",value:(st=(vt=(ht=(De=e.selectedEl)==null?void 0:De.style)==null?void 0:ht.backgroundGradient)==null?void 0:vt.angle)!=null?st:90,onInput:t[20]||(t[20]=i=>{const F=Number(i.target.value)||0;if(!e.selectedEl)return;e.selectedEl.style=e.selectedEl.style||{};const w=e.selectedEl.style.backgroundGradient||{colors:["","#"],angle:90};w.angle=F,e.selectedEl.style.backgroundGradient=w}),class:"w-full"},null,40,Oo),r("input",{type:"number",value:($t=(gr=(fr=(pr=e.selectedEl)==null?void 0:pr.style)==null?void 0:fr.backgroundGradient)==null?void 0:gr.angle)!=null?$t:90,onInput:t[21]||(t[21]=i=>{const F=Number(i.target.value)||0;if(!e.selectedEl)return;e.selectedEl.style=e.selectedEl.style||{};const w=e.selectedEl.style.backgroundGradient||{colors:["","#"],angle:90};w.angle=F,e.selectedEl.style.backgroundGradient=w}),class:"w-24 px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-xs"},null,40,Do)])])):K("",!0),t[141]||(t[141]=r("p",{class:"text-[11px] text-gray-500"},"提示：仅在启用后显示渐变设置；未启用时使用背景色。",-1))]),r("div",Go,[r("div",Bo,[t[143]||(t[143]=r("label",{class:"block text-xs text-gray-400"},"圆角",-1)),r("label",Uo,[r("input",{type:"checkbox",checked:!!((yr=(_t=e.selectedEl)==null?void 0:_t.style)!=null&&yr.borderRadius)&&ge((mr=(Ht=e.selectedEl)==null?void 0:Ht.style)==null?void 0:mr.borderRadius)>0,onChange:t[22]||(t[22]=i=>{const F=i.target.checked;e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},F?e.selectedEl.style.borderRadius||(e.selectedEl.style.borderRadius="8px"):e.selectedEl.style.borderRadius="0")})},null,40,Vo),t[142]||(t[142]=ur(" 启用 ",-1))])]),(br=(Wt=e.selectedEl)==null?void 0:Wt.style)!=null&&br.borderRadius&&ge((xr=(Jt=e.selectedEl)==null?void 0:Jt.style)==null?void 0:xr.borderRadius)>=0?(O(),D("div",Lo,[r("div",Ro,[t[144]||(t[144]=r("span",{class:"text-[11px] text-gray-400"},"单位",-1)),r("button",{type:"button",class:Be(["px-2 py-0.5 rounded text-[11px]",E((vr=(hr=e.selectedEl)==null?void 0:hr.style)==null?void 0:vr.borderRadius)==="px"?"bg-purple-600/60":"bg-gray-700"]),onClick:t[23]||(t[23]=()=>{var F,w;const i=ge((w=(F=e.selectedEl)==null?void 0:F.style)==null?void 0:w.borderRadius);V(i,"px")})},"px",2),r("button",{type:"button",class:Be(["px-2 py-0.5 rounded text-[11px]",E((qt=(wr=e.selectedEl)==null?void 0:wr.style)==null?void 0:qt.borderRadius)==="%"?"bg-purple-600/60":"bg-gray-700"]),onClick:t[24]||(t[24]=()=>{var F,w;const i=ge((w=(F=e.selectedEl)==null?void 0:F.style)==null?void 0:w.borderRadius);V(i,"%")})},"%",2)]),E((Ot=(Xt=e.selectedEl)==null?void 0:Xt.style)==null?void 0:Ot.borderRadius)==="px"?(O(),D("div",To,[r("input",{type:"range",min:"0",max:"64",step:"1",value:ge(($r=(Dt=e.selectedEl)==null?void 0:Dt.style)==null?void 0:$r.borderRadius),onInput:t[25]||(t[25]=i=>{const F=Number(i.target.value)||0;V(F,"px")}),class:"w-full"},null,40,Po),r("input",{type:"number",value:ge((Er=(kr=e.selectedEl)==null?void 0:kr.style)==null?void 0:Er.borderRadius),onInput:t[26]||(t[26]=i=>{const F=Number(i.target.value)||0;V(F,"px")}),class:"w-24 px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm"},null,40,_o)])):(O(),D("div",Ho,[r("input",{type:"range",min:"0",max:"100",step:"1",value:ge((ct=(Nt=e.selectedEl)==null?void 0:Nt.style)==null?void 0:ct.borderRadius),onInput:t[27]||(t[27]=i=>{const F=Number(i.target.value)||0;V(F,"%")}),class:"w-full"},null,40,Wo),r("div",Jo,[r("input",{type:"number",value:ge((It=(Yt=e.selectedEl)==null?void 0:Yt.style)==null?void 0:It.borderRadius),onInput:t[28]||(t[28]=i=>{const F=Number(i.target.value)||0;V(F,"%")}),class:"w-20 px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm"},null,40,qo),t[145]||(t[145]=r("span",{class:"text-xs text-gray-400"},"%",-1))])]))])):K("",!0)]),r("div",Xo,[r("div",Yo,[t[147]||(t[147]=r("label",{class:"block text-xs text-gray-400"},"阴影（box-shadow）",-1)),r("label",Ko,[r("input",{type:"checkbox",checked:!!((Ft=(Kt=e.selectedEl)==null?void 0:Kt.style)!=null&&Ft.boxShadow),onChange:t[29]||(t[29]=i=>{const F=i.target.checked;e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},F?e.selectedEl.style.boxShadow||(e.selectedEl.style.boxShadow="0 8px 24px rgba(0,0,0,0.25)"):delete e.selectedEl.style.boxShadow)})},null,40,Zo),t[146]||(t[146]=ur(" 启用 ",-1))])]),(Mr=(Sr=e.selectedEl)==null?void 0:Sr.style)!=null&&Mr.boxShadow?(O(),D("div",Qo,[r("input",{type:"text",value:((kt=(at=e.selectedEl)==null?void 0:at.style)==null?void 0:kt.boxShadow)||"",placeholder:"例如: 0 8px 24px rgba(0,0,0,0.25)",onInput:t[30]||(t[30]=i=>{const F=i.target.value;e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.boxShadow=F)}),class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm"},null,40,es),r("div",ts,[t[148]||(t[148]=r("label",{class:"block text-[11px] text-gray-400"},"X 偏移",-1)),r("div",rs,[r("input",{type:"range",min:"-64",max:"64",step:"1",value:P((Nr=(Cr=e.selectedEl)==null?void 0:Cr.style)==null?void 0:Nr.boxShadow).x,onInput:t[31]||(t[31]=i=>{var oe,Ne,Ie,Fe,je,ze;const F=Number(i.target.value)||0,w=P((Ne=(oe=e.selectedEl)==null?void 0:oe.style)==null?void 0:Ne.boxShadow);te(F!=null?F:0,(Ie=w.y)!=null?Ie:0,(Fe=w.blur)!=null?Fe:0,(je=w.spread)!=null?je:0,(ze=w.color)!=null?ze:"#000000")}),class:"flex-1"},null,40,ns),r("input",{type:"number",value:P((Qt=(Zt=e.selectedEl)==null?void 0:Zt.style)==null?void 0:Qt.boxShadow).x,onInput:t[32]||(t[32]=i=>{var oe,Ne,Ie,Fe,je,ze;const F=Number(i.target.value)||0,w=P((Ne=(oe=e.selectedEl)==null?void 0:oe.style)==null?void 0:Ne.boxShadow);te(F!=null?F:0,(Ie=w.y)!=null?Ie:0,(Fe=w.blur)!=null?Fe:0,(je=w.spread)!=null?je:0,(ze=w.color)!=null?ze:"#000000")}),class:"w-20 px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-xs"},null,40,ls)])]),r("div",os,[t[149]||(t[149]=r("label",{class:"block text-[11px] text-gray-400"},"Y 偏移",-1)),r("div",ss,[r("input",{type:"range",min:"-64",max:"64",step:"1",value:P((Ir=(er=e.selectedEl)==null?void 0:er.style)==null?void 0:Ir.boxShadow).y,onInput:t[33]||(t[33]=i=>{var oe,Ne,Ie,Fe,je,ze;const F=Number(i.target.value)||0,w=P((Ne=(oe=e.selectedEl)==null?void 0:oe.style)==null?void 0:Ne.boxShadow);te((Ie=w.x)!=null?Ie:0,F!=null?F:0,(Fe=w.blur)!=null?Fe:0,(je=w.spread)!=null?je:0,(ze=w.color)!=null?ze:"#000000")}),class:"flex-1"},null,40,as),r("input",{type:"number",value:P((Gt=(jt=e.selectedEl)==null?void 0:jt.style)==null?void 0:Gt.boxShadow).y,onInput:t[34]||(t[34]=i=>{var oe,Ne,Ie,Fe,je,ze;const F=Number(i.target.value)||0,w=P((Ne=(oe=e.selectedEl)==null?void 0:oe.style)==null?void 0:Ne.boxShadow);te((Ie=w.x)!=null?Ie:0,F!=null?F:0,(Fe=w.blur)!=null?Fe:0,(je=w.spread)!=null?je:0,(ze=w.color)!=null?ze:"#000000")}),class:"w-20 px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-xs"},null,40,is)])]),r("div",ds,[t[150]||(t[150]=r("label",{class:"block text-[11px] text-gray-400"},"模糊",-1)),r("div",us,[r("input",{type:"range",min:"0",max:"128",step:"1",value:P((Ut=(Bt=e.selectedEl)==null?void 0:Bt.style)==null?void 0:Ut.boxShadow).blur,onInput:t[35]||(t[35]=i=>{var oe,Ne,Ie,Fe,je,ze;const F=Number(i.target.value)||0,w=P((Ne=(oe=e.selectedEl)==null?void 0:oe.style)==null?void 0:Ne.boxShadow);te((Ie=w.x)!=null?Ie:0,(Fe=w.y)!=null?Fe:0,F!=null?F:0,(je=w.spread)!=null?je:0,(ze=w.color)!=null?ze:"#000000")}),class:"flex-1"},null,40,cs),r("input",{type:"number",value:P((rr=(tr=e.selectedEl)==null?void 0:tr.style)==null?void 0:rr.boxShadow).blur,onInput:t[36]||(t[36]=i=>{var oe,Ne,Ie,Fe,je,ze;const F=Number(i.target.value)||0,w=P((Ne=(oe=e.selectedEl)==null?void 0:oe.style)==null?void 0:Ne.boxShadow);te((Ie=w.x)!=null?Ie:0,(Fe=w.y)!=null?Fe:0,F!=null?F:0,(je=w.spread)!=null?je:0,(ze=w.color)!=null?ze:"#000000")}),class:"w-20 px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-xs"},null,40,ps)])]),r("div",fs,[t[151]||(t[151]=r("label",{class:"block text-[11px] text-gray-400"},"扩散",-1)),r("div",gs,[r("input",{type:"range",min:"-64",max:"64",step:"1",value:P((nr=(Fr=e.selectedEl)==null?void 0:Fr.style)==null?void 0:nr.boxShadow).spread,onInput:t[37]||(t[37]=i=>{var oe,Ne,Ie,Fe,je,ze;const F=Number(i.target.value)||0,w=P((Ne=(oe=e.selectedEl)==null?void 0:oe.style)==null?void 0:Ne.boxShadow);te((Ie=w.x)!=null?Ie:0,(Fe=w.y)!=null?Fe:0,(je=w.blur)!=null?je:0,F!=null?F:0,(ze=w.color)!=null?ze:"#000000")}),class:"flex-1"},null,40,ys),r("input",{type:"number",value:P((Ze=(lt=e.selectedEl)==null?void 0:lt.style)==null?void 0:Ze.boxShadow).spread,onInput:t[38]||(t[38]=i=>{var oe,Ne,Ie,Fe,je,ze;const F=Number(i.target.value)||0,w=P((Ne=(oe=e.selectedEl)==null?void 0:oe.style)==null?void 0:Ne.boxShadow);te((Ie=w.x)!=null?Ie:0,(Fe=w.y)!=null?Fe:0,(je=w.blur)!=null?je:0,F!=null?F:0,(ze=w.color)!=null?ze:"#000000")}),class:"w-20 px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-xs"},null,40,ms)])])])):K("",!0),r("div",bs,[t[152]||(t[152]=r("label",{class:"block text-[11px] text-gray-400"},"阴影颜色",-1)),(zr=(jr=e.selectedEl)==null?void 0:jr.style)!=null&&zr.boxShadow?(O(),D("div",xs,[r("input",{type:"color",value:P((Or=(Ar=e.selectedEl)==null?void 0:Ar.style)==null?void 0:Or.boxShadow).color||"#000000",onInput:t[39]||(t[39]=i=>{var oe,Ne,Ie,Fe,je,ze;const F=i.target.value,w=P((Ne=(oe=e.selectedEl)==null?void 0:oe.style)==null?void 0:Ne.boxShadow);te((Ie=w.x)!=null?Ie:0,(Fe=w.y)!=null?Fe:0,(je=w.blur)!=null?je:0,(ze=w.spread)!=null?ze:0,F||"#000000")}),class:"w-10 h-8 bg-gray-800/50 border border-purple-500/30 rounded"},null,40,hs),r("input",{type:"text",value:P((Dr=(it=e.selectedEl)==null?void 0:it.style)==null?void 0:Dr.boxShadow).color||"",placeholder:"#000000 或 rgba(...)",onInput:t[40]||(t[40]=i=>{var oe,Ne,Ie,Fe,je,ze;const F=i.target.value.trim(),w=P((Ne=(oe=e.selectedEl)==null?void 0:oe.style)==null?void 0:Ne.boxShadow);te((Ie=w.x)!=null?Ie:0,(Fe=w.y)!=null?Fe:0,(je=w.blur)!=null?je:0,(ze=w.spread)!=null?ze:0,F||"#000000")}),class:"flex-1 px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm"},null,40,vs)])):K("",!0)]),t[153]||(t[153]=r("p",{class:"text-[11px] text-gray-500"},"支持滑动或数字输入；颜色可选色块与 HEX 文本。",-1))])])):K("",!0),e.selectedEl&&e.selectedEl.type==="chart"?(O(),D("div",ws,[t[169]||(t[169]=r("h3",{class:"text-sm font-medium text-purple-300 border-b border-purple-500/30 pb-1"},"图表配置",-1)),r("div",$s,[r("button",{onClick:t[41]||(t[41]=i=>k.value="visual"),class:Be(["px-3 py-1 rounded text-sm",k.value==="visual"?"bg-purple-600/60":"bg-gray-700"])},"可视化",2),r("button",{onClick:t[42]||(t[42]=i=>k.value="json"),class:Be(["px-3 py-1 rounded text-sm",k.value==="json"?"bg-purple-600/60":"bg-gray-700"])},"JSON",2)]),k.value==="visual"?(O(),D("div",ks,[r("div",null,[t[155]||(t[155]=r("label",{class:"block text-xs text-gray-400 mb-1"},"图表类型",-1)),ft(St,{options:["line","bar","pie","mix"],modelValue:e.selectedEl.chartType||"line","onUpdate:modelValue":t[43]||(t[43]=i=>{e.selectedEl&&(e.selectedEl.chartType=i,e.selectedEl.chartOption=e.defaultChartOption(i),z.value=JSON.stringify(e.selectedEl.chartOption,null,2))})},null,8,["modelValue"])]),r("div",null,[t[156]||(t[156]=r("label",{class:"block text-xs text-gray-400 mb-1"},"标题",-1)),r("input",{value:((lr=(Br=(Gr=e.selectedEl)==null?void 0:Gr.chartOption)==null?void 0:Br.title)==null?void 0:lr.text)||"",onInput:t[44]||(t[44]=i=>ae(i.target.value)),type:"text",placeholder:"输入图表标题",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm"},null,40,Es)]),r("div",Ss,[r("div",null,[t[157]||(t[157]=r("label",{class:"block text-xs text-gray-400 mb-1"},"颜色列表（逗号分隔）",-1)),r("input",{value:((or=(Lt=(Vt=e.selectedEl)==null?void 0:Vt.chartOption)==null?void 0:Lt.color)==null?void 0:or.join(","))||"",onInput:t[45]||(t[45]=i=>W(i.target.value)),type:"text",placeholder:"#42b883,#ff9800",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm"},null,40,Ms)]),r("div",null,[t[159]||(t[159]=r("label",{class:"block text-xs text-gray-400 mb-1"},"显示图例",-1)),r("select",{value:(zt=(Ur=(Tt=(Rt=e.selectedEl)==null?void 0:Rt.chartOption)==null?void 0:Tt.legend)==null?void 0:Ur.show)==null||zt?"1":"0",onChange:t[46]||(t[46]=i=>R(i.target.value)),class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm"},[...t[158]||(t[158]=[r("option",{value:"1"},"显示",-1),r("option",{value:"0"},"隐藏",-1)])],40,Cs)])]),e.selectedEl&&e.selectedEl.chartType!=="pie"?(O(),D("div",Ns,[r("div",null,[t[160]||(t[160]=r("label",{class:"block text-xs text-gray-400 mb-1"},"Y轴最小值",-1)),r("input",{value:Array.isArray((Vr=(sr=e.selectedEl)==null?void 0:sr.chartOption)==null?void 0:Vr.yAxis)?(n=(l=(ir=(Lr=(ar=e.selectedEl)==null?void 0:ar.chartOption)==null?void 0:Lr.yAxis)==null?void 0:ir[0])==null?void 0:l.min)!=null?n:"":(f=(c=(u=(a=e.selectedEl)==null?void 0:a.chartOption)==null?void 0:u.yAxis)==null?void 0:c.min)!=null?f:"",onInput:t[47]||(t[47]=i=>{const F=i.target.value;if(!e.selectedEl)return;e.selectedEl.chartOption||(e.selectedEl.chartOption=e.defaultChartOption(e.selectedEl.chartType||"line"));const w=e.selectedEl.chartOption.yAxis,oe=F===""?null:Number(F);Array.isArray(w)?(w[0]=w[0]||{},w[0].min=oe):(e.selectedEl.chartOption.yAxis=w||{},e.selectedEl.chartOption.yAxis.min=oe),z.value=JSON.stringify(e.selectedEl.chartOption,null,2)}),type:"number",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm"},null,40,Is)]),r("div",null,[t[161]||(t[161]=r("label",{class:"block text-xs text-gray-400 mb-1"},"Y轴最大值",-1)),r("input",{value:Array.isArray((C=(S=e.selectedEl)==null?void 0:S.chartOption)==null?void 0:C.yAxis)?(B=($=(s=(y=(M=e.selectedEl)==null?void 0:M.chartOption)==null?void 0:y.yAxis)==null?void 0:s[0])==null?void 0:$.max)!=null?B:"":(ve=(Se=(se=(ne=e.selectedEl)==null?void 0:ne.chartOption)==null?void 0:se.yAxis)==null?void 0:Se.max)!=null?ve:"",onInput:t[48]||(t[48]=i=>{const F=i.target.value;if(!e.selectedEl)return;e.selectedEl.chartOption||(e.selectedEl.chartOption=e.defaultChartOption(e.selectedEl.chartType||"line"));const w=e.selectedEl.chartOption.yAxis,oe=F===""?null:Number(F);Array.isArray(w)?(w[0]=w[0]||{},w[0].max=oe):(e.selectedEl.chartOption.yAxis=w||{},e.selectedEl.chartOption.yAxis.max=oe),z.value=JSON.stringify(e.selectedEl.chartOption,null,2)}),type:"number",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm"},null,40,Fs)])])):K("",!0),e.selectedEl&&(e.selectedEl.chartType==="line"||e.selectedEl.chartType==="mix")?(O(),D("div",js,[r("div",null,[t[163]||(t[163]=r("label",{class:"block text-xs text-gray-400 mb-1"},"折线平滑",-1)),r("select",{value:"1",onChange:t[49]||(t[49]=i=>{const F=i.target.value==="1";e.selectedEl&&e.selectedEl.chartOption&&((e.selectedEl.chartOption.series||[]).forEach(w=>{w.type==="line"&&(w.smooth=F)}),z.value=JSON.stringify(e.selectedEl.chartOption,null,2))}),class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm"},[...t[162]||(t[162]=[r("option",{value:"1"},"平滑",-1),r("option",{value:"0"},"不平滑",-1)])],32)]),r("div",null,[t[164]||(t[164]=r("label",{class:"block text-xs text-gray-400 mb-1"},"线宽",-1)),r("input",{value:2,onInput:t[50]||(t[50]=i=>{const F=Number(i.target.value)||2;e.selectedEl&&e.selectedEl.chartOption&&((e.selectedEl.chartOption.series||[]).forEach(w=>{w.type==="line"&&(w.lineStyle=w.lineStyle||{},w.lineStyle.width=F)}),z.value=JSON.stringify(e.selectedEl.chartOption,null,2))}),type:"number",min:"1",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm"},null,32)])])):K("",!0),e.selectedEl&&(e.selectedEl.chartType==="bar"||e.selectedEl.chartType==="mix")?(O(),D("div",zs,[r("div",null,[t[165]||(t[165]=r("label",{class:"block text-xs text-gray-400 mb-1"},"柱状渐变起始色",-1)),r("input",{type:"color",value:"#42b883",onInput:t[51]||(t[51]=i=>{const F=i.target.value;_(F,"#0ea5e9")}),class:"w-full h-8 bg-gray-800/50 border border-purple-500/30 rounded"},null,32)]),r("div",null,[t[166]||(t[166]=r("label",{class:"block text-xs text-gray-400 mb-1"},"柱状渐变结束色",-1)),r("input",{type:"color",value:"#0ea5e9",onInput:t[52]||(t[52]=i=>{const F=i.target.value;_("#42b883",F)}),class:"w-full h-8 bg-gray-800/50 border border-purple-500/30 rounded"},null,32)]),r("div",null,[t[167]||(t[167]=r("label",{class:"block text-xs text-gray-400 mb-1"},"圆角",-1)),r("input",{value:4,onInput:t[53]||(t[53]=i=>{const F=Number(i.target.value)||0;e.selectedEl&&e.selectedEl.chartOption&&((e.selectedEl.chartOption.series||[]).forEach(w=>{w.type==="bar"&&(w.itemStyle=w.itemStyle||{},w.itemStyle.borderRadius=[F,F,0,0])}),z.value=JSON.stringify(e.selectedEl.chartOption,null,2))}),type:"number",min:"0",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm"},null,32)])])):K("",!0)])):(O(),D("div",As,[t[168]||(t[168]=r("label",{class:"block text-xs text-gray-400 mb-1"},"ECharts Option JSON",-1)),ue(r("textarea",{"onUpdate:modelValue":t[54]||(t[54]=i=>z.value=i),rows:"10",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-xs font-mono"},null,512),[[ye,z.value]]),r("div",Os,[r("button",{onClick:t[55]||(t[55]=i=>m()),class:"px-3 py-1 bg-emerald-600 rounded text-sm"},"应用配置"),T.value?(O(),D("div",Ds,Ke(T.value),1)):K("",!0)])]))])):K("",!0),e.selectedEl&&e.selectedEl.type==="line"?(O(),D("div",Gs,[t[177]||(t[177]=r("h3",{class:"text-sm font-medium text-purple-300 border-b border-purple-500/30 pb-1"},"线条设置",-1)),r("div",Bs,[t[170]||(t[170]=r("label",{class:"block text-xs text-gray-400 mb-1"},"颜色",-1)),r("div",Us,[r("input",{value:e.safeHex(((pe=(ke=e.selectedEl)==null?void 0:ke.style)==null?void 0:pe.lineColor)||""),onInput:t[56]||(t[56]=i=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.lineColor=i.target.value)}),type:"color",class:"w-8 h-6 bg-gray-800/50 border border-purple-500/30 rounded cursor-pointer"},null,40,Vs),r("input",{value:(ee=(Q=(Z=e.selectedEl)==null?void 0:Z.style)==null?void 0:Q.lineColor)!=null?ee:"#ffffff",onInput:t[57]||(t[57]=i=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.lineColor=i.target.value)}),type:"text",class:"flex-1 px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-xs focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200",placeholder:"#ffffff"},null,40,Ls)])]),r("div",Rs,[r("div",null,[t[171]||(t[171]=r("label",{class:"block text-xs text-gray-400 mb-1"},"方向",-1)),r("div",Ts,[r("button",{onClick:t[58]||(t[58]=()=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.lineOrientation="horizontal")}),class:Be(["px-2 py-1 text-xs rounded transition-colors duration-200",(((xe=(Y=e.selectedEl)==null?void 0:Y.style)==null?void 0:xe.lineOrientation)||"horizontal")==="horizontal"?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"])},"横向",2),r("button",{onClick:t[59]||(t[59]=()=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.lineOrientation="vertical")}),class:Be(["px-2 py-1 text-xs rounded transition-colors duration-200",(((h=(p=e.selectedEl)==null?void 0:p.style)==null?void 0:h.lineOrientation)||"horizontal")==="vertical"?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"])},"纵向",2)])]),r("div",null,[t[172]||(t[172]=r("label",{class:"block text-xs text-gray-400 mb-1"},"粗细(px)",-1)),r("input",{value:(I=(v=(N=e.selectedEl)==null?void 0:N.style)==null?void 0:v.lineThickness)!=null?I:2,onInput:t[60]||(t[60]=i=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.lineThickness=Number(i.target.value))}),type:"number",min:"1",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,40,Ps)])]),r("div",_s,[r("div",null,[t[174]||(t[174]=r("label",{class:"block text-xs text-gray-400 mb-1"},"样式",-1)),r("select",{value:((b=(X=e.selectedEl)==null?void 0:X.style)==null?void 0:b.lineStyle)||"solid",onChange:t[61]||(t[61]=i=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.lineStyle=i.target.value)}),class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},[...t[173]||(t[173]=[r("option",{value:"solid"},"实线",-1),r("option",{value:"dashed"},"虚线",-1)])],40,Hs)]),((A=(G=e.selectedEl)==null?void 0:G.style)==null?void 0:A.lineStyle)==="dashed"?(O(),D("div",Ws,[t[175]||(t[175]=r("label",{class:"block text-xs text-gray-400 mb-1"},"虚线长度(px)",-1)),r("input",{value:(re=(de=(L=e.selectedEl)==null?void 0:L.style)==null?void 0:de.lineDashLength)!=null?re:6,onInput:t[62]||(t[62]=i=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.lineDashLength=Number(i.target.value))}),type:"number",min:"1",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,40,Js)])):K("",!0)]),((Oe=(fe=e.selectedEl)==null?void 0:fe.style)==null?void 0:Oe.lineStyle)==="dashed"?(O(),D("div",qs,[r("div",null,[t[176]||(t[176]=r("label",{class:"block text-xs text-gray-400 mb-1"},"虚线间距(px)",-1)),r("input",{value:(Re=(Ye=(Ge=e.selectedEl)==null?void 0:Ge.style)==null?void 0:Ye.lineDashGap)!=null?Re:4,onInput:t[63]||(t[63]=i=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.lineDashGap=Number(i.target.value))}),type:"number",min:"0",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,40,Xs)])])):K("",!0)])):K("",!0),e.selectedEl&&e.selectedEl.type==="text"?(O(),D("div",Ys,[t[210]||(t[210]=r("h3",{class:"text-sm font-medium text-purple-300 border-b border-purple-500/30 pb-1"},"文本设置",-1)),r("div",Ks,[t[182]||(t[182]=r("label",{class:"block text-xs text-gray-400 mb-1"},"内容",-1)),ue(r("textarea",{"onUpdate:modelValue":t[64]||(t[64]=i=>e.selectedEl.text=i),class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200 resize-none",rows:"2"},null,512),[[ye,e.selectedEl.text]]),r("div",Zs,[t[181]||(t[181]=r("label",{class:"block text-xs text-gray-400 mb-1"},"动态值",-1)),r("div",Qs,[r("input",{type:"checkbox",checked:!!((qe=(tt=e.selectedEl)==null?void 0:tt.dynamic)!=null&&qe.enabled),onChange:t[65]||(t[65]=i=>{e.selectedEl&&(e.selectedEl.dynamic=e.selectedEl.dynamic||{enabled:!1,objectName:"",propertyPath:""},e.selectedEl.dynamic.enabled=i.target.checked)}),class:"rounded accent-purple-600"},null,40,ea),t[178]||(t[178]=r("span",{class:"text-xs text-gray-400"},"启用后从数据库对象绑定",-1))]),(pt=(dt=e.selectedEl)==null?void 0:dt.dynamic)!=null&&pt.enabled?(O(),D("div",ta,[r("div",null,[t[179]||(t[179]=r("label",{class:"block text-xs text-gray-400 mb-1"},"选择对象",-1)),ft(St,{options:e.databaseObjects.map(i=>i.name),modelValue:((Rr=(Et=e.selectedEl)==null?void 0:Et.dynamic)==null?void 0:Rr.objectName)||"","onUpdate:modelValue":t[66]||(t[66]=i=>{e.selectedEl&&(e.selectedEl.dynamic=e.selectedEl.dynamic||{enabled:!0,objectName:"",propertyPath:""},e.selectedEl.dynamic.objectName=String(i||""))})},null,8,["options","modelValue"])]),r("div",null,[t[180]||(t[180]=r("label",{class:"block text-xs text-gray-400 mb-1"},"属性路径",-1)),ft(St,{options:he.value,modelValue:((Zr=(Kr=e.selectedEl)==null?void 0:Kr.dynamic)==null?void 0:Zr.propertyPath)||"","onUpdate:modelValue":t[67]||(t[67]=i=>{e.selectedEl&&(e.selectedEl.dynamic=e.selectedEl.dynamic||{enabled:!0,objectName:"",propertyPath:""},e.selectedEl.dynamic.propertyPath=String(i||""))})},null,8,["options","modelValue"])]),r("div",ra,"预览值: "+Ke(Me(e.selectedEl)),1)])):K("",!0)])]),r("div",na,[t[183]||(t[183]=r("label",{class:"block text-xs text-gray-400 mb-1"},"尺寸模式",-1)),r("div",la,[r("button",{onClick:t[68]||(t[68]=()=>{const i=e.selectedEl;!i||i.type!=="text"||(i.autoSize=!0)}),class:Be(["px-2 py-1 text-xs rounded transition-colors duration-200",e.selectedEl.autoSize!==!1?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"])},"自适应",2),r("button",{onClick:t[69]||(t[69]=()=>{const i=e.selectedEl;!i||i.type!=="text"||(i.autoSize=!1)}),class:Be(["px-2 py-1 text-xs rounded transition-colors duration-200",e.selectedEl.autoSize===!1?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"])},"固定尺寸",2)])]),r("div",oa,[r("div",null,[t[184]||(t[184]=r("label",{class:"block text-xs text-gray-400 mb-1"},"字号",-1)),ft(St,{options:e.fontSizeLibrary,modelValue:((Qr=e.selectedEl.style)==null?void 0:Qr.fontSize)||14,"onUpdate:modelValue":t[70]||(t[70]=i=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.fontSize=i)}),numeric:!0},null,8,["options","modelValue"])]),r("div",null,[t[185]||(t[185]=r("label",{class:"block text-xs text-gray-400 mb-1"},"字体",-1)),ft(St,{options:e.fontLibrary,modelValue:((en=e.selectedEl.style)==null?void 0:en.fontFamily)||e.config.globalFontFamily,"onUpdate:modelValue":t[71]||(t[71]=i=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.fontFamily=i)})},null,8,["options","modelValue"])])]),r("div",sa,[r("div",null,[t[186]||(t[186]=r("label",{class:"block text-xs text-gray-400 mb-1"},"粗细",-1)),ft(St,{options:e.fontWeightOptions,modelValue:((tn=e.selectedEl.style)==null?void 0:tn.fontWeight)||"400","onUpdate:modelValue":t[72]||(t[72]=i=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.fontWeight=i)})},null,8,["options","modelValue"])]),r("div",null,[t[187]||(t[187]=r("label",{class:"block text-xs text-gray-400 mb-1"},"样式",-1)),ft(St,{options:e.fontStyleOptions,modelValue:((rn=e.selectedEl.style)==null?void 0:rn.fontStyle)||"normal","onUpdate:modelValue":t[73]||(t[73]=i=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.fontStyle=i)})},null,8,["options","modelValue"])])]),r("div",aa,[r("div",null,[t[188]||(t[188]=r("label",{class:"block text-xs text-gray-400 mb-1"},"字间距",-1)),r("input",{value:((nn=e.selectedEl.style)==null?void 0:nn.letterSpacing)||0,onInput:t[74]||(t[74]=i=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.letterSpacing=Number(i.target.value))}),type:"number",step:"0.1",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,40,ia)]),r("div",null,[t[189]||(t[189]=r("label",{class:"block text-xs text-gray-400 mb-1"},"行高",-1)),r("input",{value:((ln=e.selectedEl.style)==null?void 0:ln.lineHeight)||1.5,onInput:t[75]||(t[75]=i=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.lineHeight=Number(i.target.value))}),type:"number",step:"0.1",min:"0.5",max:"3",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,40,da)])]),r("div",ua,[t[190]||(t[190]=r("label",{class:"block text-xs text-gray-400 mb-1"},"颜色",-1)),r("div",ca,[r("input",{value:(sn=(on=e.selectedEl)==null?void 0:on.style)!=null&&sn.textGradient?"#000000":((dn=(an=e.selectedEl)==null?void 0:an.style)==null?void 0:dn.color)||e.config.globalColor,onInput:t[76]||(t[76]=i=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.color=i.target.value)}),type:"color",disabled:!!((cn=(un=e.selectedEl)==null?void 0:un.style)!=null&&cn.textGradient),class:"w-8 h-6 bg-gray-800/50 border border-purple-500/30 rounded cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed"},null,40,pa),r("input",{value:(fn=(pn=e.selectedEl)==null?void 0:pn.style)!=null&&fn.textGradient?"transparent":(mn=(yn=(gn=e.selectedEl)==null?void 0:gn.style)==null?void 0:yn.color)!=null?mn:e.config.globalColor,onInput:t[77]||(t[77]=i=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.color=i.target.value)}),type:"text",disabled:!!((xn=(bn=e.selectedEl)==null?void 0:bn.style)!=null&&xn.textGradient),class:"flex-1 px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-xs focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",placeholder:"#000000"},null,40,fa)]),(vn=(hn=e.selectedEl)==null?void 0:hn.style)!=null&&vn.textGradient?(O(),D("div",ga,"文字渐变启用时，文字颜色自动设为透明")):K("",!0)]),r("div",ya,[t[191]||(t[191]=r("label",{class:"block text-xs text-gray-400 mb-1"},"背景色",-1)),r("div",ma,[r("input",{value:e.safeHex((($n=(wn=e.selectedEl)==null?void 0:wn.style)==null?void 0:$n.backgroundColor)||""),onInput:t[78]||(t[78]=i=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.backgroundColor=i.target.value)}),type:"color",class:"w-8 h-6 bg-gray-800/50 border border-purple-500/30 rounded cursor-pointer"},null,40,ba),r("input",{value:(Sn=(En=(kn=e.selectedEl)==null?void 0:kn.style)==null?void 0:En.backgroundColor)!=null?Sn:"transparent",onInput:t[79]||(t[79]=i=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.backgroundColor=i.target.value)}),type:"text",class:"flex-1 px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-xs focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200",placeholder:"transparent"},null,40,xa)])]),r("div",ha,[t[192]||(t[192]=r("label",{class:"block text-xs text-gray-400 mb-1"},"文本对齐",-1)),r("div",va,[r("button",{onClick:t[80]||(t[80]=()=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.textAlign="left")}),class:Be(["px-2 py-1 text-xs rounded transition-colors duration-200",(((Mn=e.selectedEl.style)==null?void 0:Mn.textAlign)||"left")==="left"?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"])},"左对齐",2),r("button",{onClick:t[81]||(t[81]=()=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.textAlign="center")}),class:Be(["px-2 py-1 text-xs rounded transition-colors duration-200",(((Cn=e.selectedEl.style)==null?void 0:Cn.textAlign)||"left")==="center"?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"])},"居中",2),r("button",{onClick:t[82]||(t[82]=()=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.textAlign="right")}),class:Be(["px-2 py-1 text-xs rounded transition-colors duration-200",(((Nn=e.selectedEl.style)==null?void 0:Nn.textAlign)||"left")==="right"?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"])},"右对齐",2)])]),r("div",wa,[t[193]||(t[193]=r("label",{class:"block text-xs text-gray-400 mb-1"},"文本方向",-1)),r("div",$a,[r("button",{onClick:t[83]||(t[83]=()=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.textOrientation="horizontal")}),class:Be(["px-2 py-1 text-xs rounded transition-colors duration-200",(((Fn=(In=e.selectedEl)==null?void 0:In.style)==null?void 0:Fn.textOrientation)||"horizontal")==="horizontal"?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"])},"横向",2),r("button",{onClick:t[84]||(t[84]=()=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.textOrientation="vertical")}),class:Be(["px-2 py-1 text-xs rounded transition-colors duration-200",(((zn=(jn=e.selectedEl)==null?void 0:jn.style)==null?void 0:zn.textOrientation)||"horizontal")==="vertical"?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"])},"纵向",2)]),t[194]||(t[194]=r("p",{class:"text-[11px] text-gray-400"},"纵向使用 CSS writing-mode 展示，适合竖排文本。",-1))]),r("div",ka,[t[196]||(t[196]=r("label",{class:"block text-xs text-gray-400 mb-1"},"布局倾斜",-1)),r("div",Ea,[ue(r("input",{"onUpdate:modelValue":t[85]||(t[85]=i=>e.selectedEl.style.skewAngle=i),type:"range",min:"-45",max:"45",class:"flex-1"},null,512),[[ye,e.selectedEl.style.skewAngle,void 0,{number:!0}]]),ue(r("input",{"onUpdate:modelValue":t[86]||(t[86]=i=>e.selectedEl.style.skewAngle=i),type:"number",min:"-45",max:"45",class:"w-16 px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-xs focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,512),[[ye,e.selectedEl.style.skewAngle,void 0,{number:!0}]])]),r("div",Sa,[t[195]||(t[195]=r("label",{class:"text-xs text-gray-400"},"布局倾斜跟随",-1)),r("button",{onClick:t[87]||(t[87]=()=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.skewFlowEnabled=!0)}),class:Be(["px-2 py-1 text-xs rounded transition-colors duration-200",(On=(An=e.selectedEl)==null?void 0:An.style)!=null&&On.skewFlowEnabled?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"])},"开",2),r("button",{onClick:t[88]||(t[88]=()=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.skewFlowEnabled=!1)}),class:Be(["px-2 py-1 text-xs rounded transition-colors duration-200",(Gn=(Dn=e.selectedEl)==null?void 0:Dn.style)!=null&&Gn.skewFlowEnabled?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-purple-600 text-white"])},"关",2)]),t[197]||(t[197]=r("p",{class:"text-[11px] text-gray-400"},"调整整体容器的 X 轴倾斜角度（-45° ~ 45°）。启用“跟随”后，文本布局按父视图倾斜线性排布，字符保持正立，可与波形叠加。",-1))]),r("div",Ma,[r("div",Ca,[t[198]||(t[198]=r("label",{class:"text-xs text-gray-400"},"文本波形",-1)),r("div",Na,[(Vn=(Un=(Bn=e.selectedEl)==null?void 0:Bn.style)==null?void 0:Un.textWave)!=null&&Vn.enabled?(O(),D("button",{key:1,onClick:t[90]||(t[90]=()=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.textWave={enabled:!1})}),class:"px-2 py-1 bg-red-600/30 hover:bg-red-600/50 text-red-300 rounded text-xs transition-colors duration-200"},"关闭")):(O(),D("button",{key:0,onClick:t[89]||(t[89]=()=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.textWave={enabled:!0,amplitude:8,frequency:.5,phase:0})}),class:"px-2 py-1 bg-purple-600/30 hover:bg-purple-600/50 text-purple-300 rounded text-xs transition-colors duration-200"},"启用"))])]),(Tn=(Rn=(Ln=e.selectedEl)==null?void 0:Ln.style)==null?void 0:Rn.textWave)!=null&&Tn.enabled?(O(),D("div",Ia,[r("div",Fa,[t[199]||(t[199]=r("label",{class:"block text-xs text-gray-400 mb-1"},"幅度(px)",-1)),ue(r("input",{"onUpdate:modelValue":t[91]||(t[91]=i=>e.selectedEl.style.textWave.amplitude=i),type:"number",min:"0",max:"100",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-xs focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,512),[[ye,e.selectedEl.style.textWave.amplitude,void 0,{number:!0}]])]),r("div",ja,[t[200]||(t[200]=r("label",{class:"block text-xs text-gray-400 mb-1"},"频率(rad/字)",-1)),ue(r("input",{"onUpdate:modelValue":t[92]||(t[92]=i=>e.selectedEl.style.textWave.frequency=i),type:"number",step:"0.1",min:"0.1",max:"10",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-xs focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,512),[[ye,e.selectedEl.style.textWave.frequency,void 0,{number:!0}]])]),r("div",za,[t[201]||(t[201]=r("label",{class:"block text-xs text-gray-400 mb-1"},"相位(rad)",-1)),ue(r("input",{"onUpdate:modelValue":t[93]||(t[93]=i=>e.selectedEl.style.textWave.phase=i),type:"number",step:"0.1",min:"-100",max:"100",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-xs focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,512),[[ye,e.selectedEl.style.textWave.phase,void 0,{number:!0}]])])])):K("",!0),t[202]||(t[202]=r("p",{class:"text-[11px] text-gray-400"},"每个字符沿 Y 轴按正弦位移，字符保持正立。",-1))]),r("div",Aa,[t[203]||(t[203]=r("label",{class:"block text-xs text-gray-400 mb-1"},"文本装饰",-1)),r("div",Oa,[r("button",{onClick:t[94]||(t[94]=()=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.textDecoration=e.selectedEl.style.textDecoration==="underline"?"none":"underline")}),class:Be(["px-2 py-1 text-xs rounded transition-colors duration-200",(((Pn=e.selectedEl.style)==null?void 0:Pn.textDecoration)||"none")==="underline"?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"])},"下划线",2),r("button",{onClick:t[95]||(t[95]=()=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.textDecoration=e.selectedEl.style.textDecoration==="line-through"?"none":"line-through")}),class:Be(["px-2 py-1 text-xs rounded transition-colors duration-200",(((_n=e.selectedEl.style)==null?void 0:_n.textDecoration)||"none")==="line-through"?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"])},"删除线",2),r("button",{onClick:t[96]||(t[96]=()=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.textDecoration="none")}),class:Be(["px-2 py-1 text-xs rounded transition-colors duration-200",(((Hn=e.selectedEl.style)==null?void 0:Hn.textDecoration)||"none")==="none"?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"])},"无",2)])]),r("div",Da,[r("div",Ga,[t[204]||(t[204]=r("label",{class:"text-xs text-gray-400"},"文本渐变",-1)),r("div",Ba,[(Wn=e.selectedEl.style)!=null&&Wn.textGradient?K("",!0):(O(),D("button",{key:0,onClick:t[97]||(t[97]=i=>we(e.selectedEl)),class:"px-2 py-1 bg-purple-600/30 hover:bg-purple-600/50 text-purple-300 rounded text-xs transition-colors duration-200"},"启用")),(Jn=e.selectedEl.style)!=null&&Jn.textGradient?(O(),D("button",{key:1,onClick:t[98]||(t[98]=()=>{e.selectedEl&&e.selectedEl.style&&(e.selectedEl.style.textGradient=void 0)}),class:"px-2 py-1 bg-red-600/30 hover:bg-red-600/50 text-red-300 rounded text-xs transition-colors duration-200"},"关闭")):K("",!0)])]),(qn=e.selectedEl.style)!=null&&qn.textGradient?(O(),D("div",Ua,[r("div",Va,[r("div",null,[t[205]||(t[205]=r("label",{class:"block text-xs text-gray-400 mb-1"},"起始色",-1)),r("div",La,[ue(r("input",{"onUpdate:modelValue":t[99]||(t[99]=i=>e.selectedEl.style.textGradient.colors[0]=i),type:"color",class:"w-8 h-6 bg-gray-800/50 border border-purple-500/30 rounded cursor-pointer"},null,512),[[ye,e.selectedEl.style.textGradient.colors[0]]]),ue(r("input",{"onUpdate:modelValue":t[100]||(t[100]=i=>e.selectedEl.style.textGradient.colors[0]=i),type:"text",class:"flex-1 px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-xs focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200",placeholder:"#DFDD5A"},null,512),[[ye,e.selectedEl.style.textGradient.colors[0]]])])]),r("div",null,[t[206]||(t[206]=r("label",{class:"block text-xs text-gray-400 mb-1"},"结束色",-1)),r("div",Ra,[ue(r("input",{"onUpdate:modelValue":t[101]||(t[101]=i=>e.selectedEl.style.textGradient.colors[1]=i),type:"color",class:"w-8 h-6 bg-gray-800/50 border border-purple-500/30 rounded cursor-pointer"},null,512),[[ye,e.selectedEl.style.textGradient.colors[1]]]),ue(r("input",{"onUpdate:modelValue":t[102]||(t[102]=i=>e.selectedEl.style.textGradient.colors[1]=i),type:"text",class:"flex-1 px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-xs focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200",placeholder:"#FFFFFF"},null,512),[[ye,e.selectedEl.style.textGradient.colors[1]]])])])]),r("div",null,[r("label",Ta,"角度: "+Ke(e.selectedEl.style.textGradient.angle||0)+"°",1),ue(r("input",{"onUpdate:modelValue":t[103]||(t[103]=i=>e.selectedEl.style.textGradient.angle=i),type:"range",min:"0",max:"360",class:"w-full"},null,512),[[ye,e.selectedEl.style.textGradient.angle,void 0,{number:!0}]])])])):K("",!0)]),r("div",Pa,[r("div",_a,[t[207]||(t[207]=r("label",{class:"text-xs text-gray-400"},"背景渐变",-1)),r("div",Ha,[(Xn=e.selectedEl.style)!=null&&Xn.backgroundGradient?K("",!0):(O(),D("button",{key:0,onClick:t[104]||(t[104]=i=>U(e.selectedEl)),class:"px-2 py-1 bg-purple-600/30 hover:bg-purple-600/50 text-purple-300 rounded text-xs transition-colors duration-200"},"启用")),(Yn=e.selectedEl.style)!=null&&Yn.backgroundGradient?(O(),D("button",{key:1,onClick:t[105]||(t[105]=()=>{e.selectedEl&&e.selectedEl.style&&(e.selectedEl.style.backgroundGradient=void 0)}),class:"px-2 py-1 bg-red-600/30 hover:bg-red-600/50 text-red-300 rounded text-xs transition-colors duration-200"},"关闭")):K("",!0)])]),(Kn=e.selectedEl.style)!=null&&Kn.backgroundGradient?(O(),D("div",Wa,[r("div",Ja,[r("div",null,[t[208]||(t[208]=r("label",{class:"block text-xs text-gray-400 mb-1"},"起始色",-1)),r("div",qa,[ue(r("input",{"onUpdate:modelValue":t[106]||(t[106]=i=>e.selectedEl.style.backgroundGradient.colors[0]=i),type:"color",class:"w-8 h-6 bg-gray-800/50 border border-purple-500/30 rounded cursor-pointer"},null,512),[[ye,e.selectedEl.style.backgroundGradient.colors[0]]]),ue(r("input",{"onUpdate:modelValue":t[107]||(t[107]=i=>e.selectedEl.style.backgroundGradient.colors[0]=i),type:"text",class:"flex-1 px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-xs focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200",placeholder:"#00A3FF"},null,512),[[ye,e.selectedEl.style.backgroundGradient.colors[0]]])])]),r("div",null,[t[209]||(t[209]=r("label",{class:"block text-xs text-gray-400 mb-1"},"结束色",-1)),r("div",Xa,[ue(r("input",{"onUpdate:modelValue":t[108]||(t[108]=i=>e.selectedEl.style.backgroundGradient.colors[1]=i),type:"color",class:"w-8 h-6 bg-gray-800/50 border border-purple-500/30 rounded cursor-pointer"},null,512),[[ye,e.selectedEl.style.backgroundGradient.colors[1]]]),ue(r("input",{"onUpdate:modelValue":t[109]||(t[109]=i=>e.selectedEl.style.backgroundGradient.colors[1]=i),type:"text",class:"flex-1 px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-xs focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200",placeholder:"#ffffff"},null,512),[[ye,e.selectedEl.style.backgroundGradient.colors[1]]])])])]),r("div",null,[r("label",Ya,"角度: "+Ke(e.selectedEl.style.backgroundGradient.angle||0)+"°",1),ue(r("input",{"onUpdate:modelValue":t[110]||(t[110]=i=>e.selectedEl.style.backgroundGradient.angle=i),type:"range",min:"0",max:"360",class:"w-full"},null,512),[[ye,e.selectedEl.style.backgroundGradient.angle,void 0,{number:!0}]])])])):K("",!0)])])):K("",!0),e.selectedEl&&e.selectedEl.type==="image"?(O(),D("div",Ka,[t[219]||(t[219]=Wr('<h3 class="text-sm font-medium text-purple-300 border-b border-purple-500/30 pb-1" data-v-9146a8a2>图片设置</h3><div class="space-y-2" data-v-9146a8a2><label class="block text-xs text-gray-400 mb-1" data-v-9146a8a2>图片来源</label><div class="grid grid-cols-2 gap-2" data-v-9146a8a2><button class="px-3 py-2 bg-purple-600/30 hover:bg-purple-600/50 text-purple-300 rounded text-xs transition-colors duration-200" data-v-9146a8a2>上传文件</button><button class="px-3 py-2 bg-green-600/30 hover:bg-green-600/50 text-green-300 rounded text-xs transition-colors duration-200" data-v-9146a8a2>选择图标</button></div></div>',2)),r("div",Za,[t[211]||(t[211]=r("label",{class:"block text-xs text-gray-400 mb-1"},"图片文件",-1)),r("input",{type:"file",onChange:ie,accept:"image/*",class:"w-full text-xs text-gray-300 file:mr-2 file:py-1 file:px-2 file:rounded file:border-0 file:text-xs file:bg-purple-600 file:text-white hover:file:bg-purple-500 file:cursor-pointer"},null,32)]),e.iconLibrary.length>0?(O(),D("div",Qa,[t[212]||(t[212]=r("label",{class:"block text-xs text-gray-400 mb-1"},"选择图标",-1)),r("div",ei,[r("div",ti,[(O(!0),D(At,null,Pt(e.iconLibrary,i=>(O(),D("div",{key:i.id,onClick:F=>Te(i),class:"aspect-square bg-gray-700/50 rounded cursor-pointer hover:bg-gray-600/50 transition-colors duration-200 flex items-center justify-center p-1 border border-transparent hover:border-green-400/50"},[r("img",{src:i.url,alt:i.name,class:"max-w-full max-h-full object-contain",loading:"lazy"},null,8,ni)],8,ri))),128))])]),e.iconLibrary.length===0?(O(),D("div",li,"暂无图标，请先在图标库管理中上传图标")):K("",!0)])):K("",!0),r("div",{class:"space-y-2"},[t[213]||(t[213]=r("label",{class:"block text-xs text-gray-400 mb-1"},"尺寸模式",-1)),r("div",{class:"grid grid-cols-2 gap-2"},[r("button",{onClick:Pe,class:Be(["px-3 py-2 rounded text-xs transition-colors duration-200","bg-blue-600/30 hover:bg-blue-600/50 text-blue-300"])},"自适应（原始尺寸）"),r("button",{onClick:J,class:Be(["px-3 py-2 rounded text-xs transition-colors duration-200","bg-purple-600/30 hover:bg-purple-600/50 text-purple-300"])},"固定大小")])]),r("div",oi,[r("div",null,[t[214]||(t[214]=r("label",{class:"block text-xs text-gray-400 mb-1"},"宽度(px)",-1)),ue(r("input",{"onUpdate:modelValue":t[111]||(t[111]=i=>e.selectedEl.width=i),type:"number",min:"1",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,512),[[ye,e.selectedEl.width,void 0,{number:!0}]])]),r("div",null,[t[215]||(t[215]=r("label",{class:"block text-xs text-gray-400 mb-1"},"高度(px)",-1)),ue(r("input",{"onUpdate:modelValue":t[112]||(t[112]=i=>e.selectedEl.height=i),type:"number",min:"1",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,512),[[ye,e.selectedEl.height,void 0,{number:!0}]])]),r("div",null,[t[217]||(t[217]=r("label",{class:"block text-xs text-gray-400 mb-1"},"对象适配",-1)),ue(r("select",{"onUpdate:modelValue":t[113]||(t[113]=i=>e.selectedEl.style.objectFit=i),class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},[...t[216]||(t[216]=[Wr('<option value="contain" data-v-9146a8a2>contain（完整显示）</option><option value="cover" data-v-9146a8a2>cover（填充裁剪）</option><option value="fill" data-v-9146a8a2>fill（拉伸填充）</option><option value="scale-down" data-v-9146a8a2>scale-down（缩小适配）</option><option value="none" data-v-9146a8a2>none（不适配）</option>',5)])],512),[[vl,e.selectedEl.style.objectFit]])])]),r("div",si,[t[218]||(t[218]=r("label",{class:"block text-xs text-gray-400 mb-1"},"圆角",-1)),ue(r("input",{"onUpdate:modelValue":t[114]||(t[114]=i=>e.selectedEl.style.borderRadius=i),type:"number",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,512),[[ye,e.selectedEl.style.borderRadius,void 0,{number:!0}]])])])):K("",!0),r("div",ai,[r("button",{onClick:t[115]||(t[115]=i=>g("saveSelectedAsComponent")),class:"w-full px-3 py-2 bg-gradient-to-r from-purple-600 to-fuchsia-600 hover:from-purple-500 hover:to-fuchsia-500 text-white rounded-lg text-sm font-medium transition-all duration-200 transform hover:scale-105 shadow-lg shadow-purple-500/25"},"保存为组件"),r("button",{onClick:t[116]||(t[116]=i=>g("duplicateSelected")),class:"w-full px-3 py-2 bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-500 hover:to-cyan-500 text-white rounded-lg text-sm font-medium transition-all duration-200 transform hover:scale-105 shadow-lg shadow-blue-500/25"},"复制元素"),r("button",{onClick:t[117]||(t[117]=i=>g("removeSelected")),class:"w-full px-3 py-2 bg-gradient-to-r from-red-600 to-pink-600 hover:from-red-500 hover:to-pink-500 text-white rounded-lg text-sm font-medium transition-all duration-200 transform hover:scale-105 shadow-lg shadow-red-500/25"},"删除元素")])])):K("",!0),e.selectedEl?K("",!0):(O(),D("div",ii,[...t[220]||(t[220]=[r("div",{class:"w-16 h-16 mx-auto mb-4 border-2 border-dashed border-gray-600 rounded-lg flex items-center justify-center"},[r("span",{class:"text-2xl"},"📝")],-1),r("p",{class:"text-sm"},"选择一个元素来编辑其属性",-1)])]))])}}}),ui=Yr(di,[["__scopeId","data-v-9146a8a2"]]),ci={class:"h-full bg-gradient-to-br from-gray-900 via-blue-900 to-purple-900 text-white relative overflow-hidden min-w-[1200px]"},pi={class:"relative z-10 flex h-full min-h-[600px] gap-4 p-4"},fi={class:"w-80 min-w-[300px] bg-gray-900/80 backdrop-blur-sm border border-cyan-500/30 rounded-xl shadow-2xl shadow-cyan-500/20 flex flex-col"},gi={class:"p-4 space-y-4 overflow-y-auto flex-1 custom-scrollbar"},yi={class:"space-y-2"},mi={class:"space-y-2"},bi={class:"grid grid-cols-2 gap-2"},xi={class:"space-y-2"},hi={class:"flex gap-2"},vi={class:"space-y-2"},wi={class:"flex gap-2"},$i=["value"],ki={class:"space-y-3"},Ei={class:"space-y-2"},Si={class:"space-y-2"},Mi={class:"space-y-2"},Ci={class:"space-y-3"},Ni={class:"flex items-center justify-between"},Ii={class:"inline-flex items-center cursor-pointer"},Fi={class:"flex items-center justify-between"},ji={class:"inline-flex items-center cursor-pointer"},zi={class:"space-y-2 pt-4 border-t border-cyan-500/30"},Ai={class:"relative"},Oi={key:0,class:"fixed inset-0 z-50 flex items-center justify-center"},Di={class:"relative w-[520px] max-w-[90vw] p-4 bg-gray-900/95 backdrop-blur-md border border-emerald-500/40 rounded-xl shadow-2xl"},Gi={class:"flex items-center justify-between mb-3"},Bi={class:"grid grid-cols-2 gap-2"},Ui={class:"flex-1 min-w-0 flex flex-col bg-gray-900/60 backdrop-blur-sm border border-purple-500/30 rounded-xl shadow-2xl shadow-purple-500/20"},Vi={class:"flex items-center justify-between p-4 border-b border-purple-500/30 bg-gradient-to-r from-purple-600/20 to-pink-600/20 flex-shrink-0"},Li={class:"flex gap-2"},Ri={class:"relative"},Ti={class:"grid grid-cols-2 gap-2"},Pi={class:"flex items-center gap-2"},_i={class:"text-sm text-gray-400 min-w-[60px] text-center"},Hi={key:0,class:"absolute inset-0 pointer-events-none z-50"},Wi={key:1,class:"absolute inset-0 z-[9999] select-none pointer-events-none"},Ji={key:0,class:"fixed inset-0 z-50 flex items-center justify-center"},qi={class:"relative w-[800px] max-w-[90vw] bg-gray-900/90 backdrop-blur-md border border-fuchsia-500/40 rounded-xl shadow-2xl"},Xi={class:"p-4 space-y-3"},Yi={class:"flex items-center gap-2"},Ki={key:0,class:"text-center text-sm text-gray-400 py-6"},Zi={key:1},Qi={key:0,class:"text-center text-sm text-gray-400 py-6"},ed={key:1,class:"grid grid-cols-3 gap-3"},td={class:"aspect-video bg-gray-700/50 flex items-center justify-center"},rd=["src"],nd={key:1,class:"text-gray-400 text-xs"},ld={class:"p-3 space-y-1"},od={class:"flex items-center justify-between"},sd=["title"],ad={class:"text-xs text-gray-500"},id={class:"flex flex-wrap gap-1 mt-1"},dd={class:"pt-2"},ud=["onClick"],cd={key:1,class:"fixed inset-0 z-50 flex items-center justify-center"},pd={class:"relative w-[600px] max-w-[90vw] bg-gray-900/90 backdrop-blur-md border border-cyan-500/40 rounded-xl shadow-2xl"},fd={class:"flex items-center justify-between p-4 border-b border-cyan-500/30 bg-gradient-to-r from-cyan-600/20 to-blue-600/20"},gd={class:"p-4 space-y-3 max-h-[50vh] overflow-y-auto"},yd={key:0,class:"text-center text-sm text-gray-400 py-6"},md={key:1,class:"space-y-2"},bd=["title"],xd=["onClick"],hd=50,vd=cr({__name:"LowCodeBuilder",props:{projectId:{},currentProject:{},isComponent:{type:Boolean}},setup(x){const o=x,e=$l(),g=Sl(),k=yt(()=>{var l;return(l=o.projectId)!=null?l:e.params.id?String(e.params.id):void 0}),z=ce(null);async function T(){if(k.value)try{const l=(await Me()).transaction(["projects"],"readonly").objectStore("projects").get(k.value);l.onsuccess=()=>{z.value=l.result}}catch(l){console.error("加载项目信息失败:",l)}}function he(){if(!k.value)return;const l=o.isComponent?{path:`/project/${k.value}/preview`,query:{type:"component"}}:{path:`/project/${k.value}/preview`},n=g.resolve(l).href;window.open(n,"_blank")}async function Me(){return new Promise((l,n)=>{const a="lowcode-projects",u="projects",c=indexedDB.open(a);c.onerror=()=>n(c.error),c.onupgradeneeded=()=>{const f=c.result;f.objectStoreNames.contains(u)||f.createObjectStore(u,{keyPath:"id"})},c.onsuccess=()=>{const f=c.result;if(f.objectStoreNames.contains(u))l(f);else{const S=f.version+1;f.close();const C=indexedDB.open(a,S);C.onerror=()=>n(C.error),C.onupgradeneeded=()=>{const M=C.result;M.objectStoreNames.contains(u)||M.createObjectStore(u,{keyPath:"id"})},C.onsuccess=()=>l(C.result)}}})}const E=Zn({width:1024,height:576,backgroundUrl:"",backgroundColor:"#000000",globalFontFamily:"Arial, Helvetica, sans-serif",globalFontSize:14,globalColor:"#FFFFFF"}),ge=ce("GeneratedComponent"),V=ce(["Arial, Helvetica, sans-serif","PingFang SC","Microsoft YaHei","Roboto","Inter"]),P=ce([8,9,10,11,12,14,16,18,20,24,28,32,36,48,64]),te=ce(["100","200","300","400","500","600","700","800","900"]),we=ce(["normal","italic","oblique"]),U=ce([]),m=ce(null),_=ce([]),H=ce({}),ae=ce(null),W=ce([]),R=ce(!1);function ie(){try{const l=JSON.parse(JSON.stringify(U.value));W.value.push(l),W.value.length>hd&&W.value.shift()}catch(l){console.warn("pushHistory 序列化失败：",l)}}function Te(){W.value.length!==0&&(U.value=W.value.pop(),m.value=null,Ae.value=!1)}function Pe(l){var f,S,C,M,y,s,$,B,ne,se,Se,ve,ke,pe,Z;function n(Q){var Y;if(!Q)return!1;const ee=(Y=Q.tagName)==null?void 0:Y.toLowerCase();return Q.isContentEditable||!!Q.closest('[contenteditable="true"]')||ee==="input"||ee==="textarea"||ee==="select"}const a=document.activeElement;if(n(a)||n(l.target))return;const u=l.metaKey||l.ctrlKey,c=l.key.toLowerCase();if(c==="arrowleft"||c==="arrowright"||c==="arrowup"||c==="arrowdown"){if(!m.value)return;const{el:Q}=De(m.value);if(!Q)return;J.shift=l.shiftKey,c==="arrowleft"&&(J.left=!0),c==="arrowright"&&(J.right=!0),c==="arrowup"&&(J.up=!0),c==="arrowdown"&&(J.down=!0);const ee=l.shiftKey?10:1;q(c==="arrowleft"?-ee:c==="arrowright"?ee:0,c==="arrowup"?-ee:c==="arrowdown"?ee:0),j!=null&&(clearTimeout(j),j=null),j=window.setTimeout(()=>{$e()},220),l.preventDefault();return}if(u&&c==="c"){if(st.value){try{ae.value=JSON.parse(JSON.stringify(st.value))}catch{}l.preventDefault()}}else if(u&&c==="v"){if(ae.value){const Q=ae.value,ee=er(Q),{parentGroup:Y}=De(Q.id);if(Y){const xe=Number((S=(f=Y.left)!=null?f:Y.x)!=null?S:0),p=Number((M=(C=Y.top)!=null?C:Y.y)!=null?M:0),h=Number((y=Y.width)!=null?y:0),N=Number((s=Y.height)!=null?s:0),v=xe+h,I=p+N,X=Number(($=Q.width)!=null?$:0),b=Number((B=Q.height)!=null?B:0);let G=X,A=b;if(!G||!A)if(Q.type==="text"){const Ye=Number((ne=Q.fontSize)!=null?ne:16),Re=String((Se=(se=Q.text)!=null?se:Q.content)!=null?Se:"").trim();G=Math.max(X||50,Math.round((Re.length||2)*Ye*.6)),A=Math.max(b||20,Math.round(Ye*1.5))}else Q.type==="image"?(G=X||200,A=b||150):Q.type==="chart"?(G=X||240,A=b||160):Q.type==="line"?(G=X||200,A=b||2):(G=X||100,A=b||60);const L=10,de=xe+h/2,re=p+N/2;let fe=!1,Oe=v+L,Ge=Math.round(re-A/2);if(!fe&&Oe+G<=E.width&&(ee.left=Math.max(0,Math.min(Oe,Math.max(0,E.width-G))),ee.top=Math.max(0,Math.min(Ge,Math.max(0,E.height-A))),fe=!0),Oe=xe-G-L,Ge=Math.round(re-A/2),!fe&&Oe>=0&&(ee.left=Math.max(0,Math.min(Oe,Math.max(0,E.width-G))),ee.top=Math.max(0,Math.min(Ge,Math.max(0,E.height-A))),fe=!0),Oe=Math.round(de-G/2),Ge=I+L,!fe&&Ge+A<=E.height&&(ee.left=Math.max(0,Math.min(Oe,Math.max(0,E.width-G))),ee.top=Math.max(0,Math.min(Ge,Math.max(0,E.height-A))),fe=!0),Oe=Math.round(de-G/2),Ge=p-A-L,!fe&&Ge>=0&&(ee.left=Math.max(0,Math.min(Oe,Math.max(0,E.width-G))),ee.top=Math.max(0,Math.min(Ge,Math.max(0,E.height-A))),fe=!0),!fe){const Ye=Number((ke=(ve=Q.left)!=null?ve:Q.x)!=null?ke:0),Re=Number((Z=(pe=Q.top)!=null?pe:Q.y)!=null?Z:0),tt=xe+Ye+L,qe=p+Re+L;ee.left=Math.max(0,Math.min(Math.round(tt),Math.max(0,E.width-G))),ee.top=Math.max(0,Math.min(Math.round(qe),Math.max(0,E.height-A)))}ee.x=ee.left,ee.y=ee.top}ie(),U.value.push(ee),m.value=ee.id,l.preventDefault()}}else if(c==="delete"||c==="backspace"){if(m.value){ie();const{el:Q,parentGroup:ee}=De(m.value);Q&&ee&&Array.isArray(ee.children)?ee.children=ee.children.filter(Y=>Y.id!==Q.id):(U.value=U.value.filter(Y=>Y.id!==m.value),Q&&Q.type==="group"&&Ht(Q.id)),m.value=null,l.preventDefault()}}else u&&c==="z"&&(Te(),l.preventDefault())}const J=Zn({left:!1,right:!1,up:!1,down:!1,shift:!1});let d=null,t=0,j=null;function q(l,n){var ke,pe,Z,Q,ee,Y,xe,p;const a=m.value;if(!a)return;const{el:u,parentGroup:c}=De(a);if(!u)return;const f=(Z=(pe=u.width)!=null?pe:(ke=H.value[a])==null?void 0:ke.width)!=null?Z:0,S=(Y=(ee=u.height)!=null?ee:(Q=H.value[a])==null?void 0:Q.height)!=null?Y:0;let C=E.width,M=E.height;c&&c.width&&c.height&&(C=Number(c.width)||C,M=Number(c.height)||M);let y=((xe=u.left)!=null?xe:0)+l,s=((p=u.top)!=null?p:0)+n;y=Math.round(y),s=Math.round(s),y=Math.max(0,Math.min(y,C-(f||0))),s=Math.max(0,Math.min(s,M-(S||0))),u.left=y,u.top=s,u.x=u.left,u.y=u.top;const $=u.left,B=u.top,ne=$+(f||0),se=B+(S||0),Se=$+(f||0)/2,ve=B+(S||0)/2;xt({left:$,top:B,right:ne,bottom:se,centerX:Se,centerY:ve})}function $e(){if(d!=null)return;t=Date.now(),ie();const l=()=>{if(!J.left&&!J.right&&!J.up&&!J.down){d!=null&&cancelAnimationFrame(d),d=null,Le();return}const n=Date.now()-t,a=n>1500?8:n>800?4:n>300?2:1,u=(J.shift?10:1)*a,c=(J.left?-u:0)+(J.right?u:0),f=(J.up?-u:0)+(J.down?u:0);q(c,f),d=requestAnimationFrame(l)};d=requestAnimationFrame(l)}function Ue(l){const n=l.key.toLowerCase();n==="shift"&&(J.shift=!1),n==="arrowleft"&&(J.left=!1),n==="arrowright"&&(J.right=!1),n==="arrowup"&&(J.up=!1),n==="arrowdown"&&(J.down=!1),j!=null&&(clearTimeout(j),j=null),!J.left&&!J.right&&!J.up&&!J.down&&d==null&&ie(),!J.left&&!J.right&&!J.up&&!J.down&&Le()}const Ae=ce(!1),be=ce({left:0,top:0,right:0,bottom:0,centerX:0,centerY:0});function He(l){H.value[l.id]=l}function We(l){return l==="pie"?{backgroundColor:"transparent",tooltip:{trigger:"item"},legend:{top:"5%",left:"center",textStyle:{color:"#fff"},show:!0},series:[{name:"分类占比",type:"pie",radius:["40%","70%"],avoidLabelOverlap:!1,itemStyle:{borderRadius:8,borderColor:"#111",borderWidth:2},label:{show:!0,color:"#fff"},labelLine:{show:!0},data:[{value:1048,name:"A"},{value:735,name:"B"},{value:580,name:"C"},{value:484,name:"D"},{value:300,name:"E"}]}]}:l==="mix"?{backgroundColor:"transparent",color:["#00bcd4","#ff9800"],tooltip:{trigger:"axis"},legend:{textStyle:{color:"#fff"},show:!0},xAxis:{type:"category",data:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],axisLine:{lineStyle:{color:"#888"}},axisLabel:{color:"#ccc"}},yAxis:{type:"value",axisLine:{lineStyle:{color:"#888"}},axisLabel:{color:"#ccc"}},series:[{name:"销量",type:"bar",data:[120,200,150,80,70,110,130],itemStyle:{borderRadius:[4,4,0,0]}},{name:"均价",type:"line",smooth:!0,data:[30,40,45,50,49,60,70],lineStyle:{width:2}}]}:l==="bar"?{backgroundColor:"transparent",color:["#42b883"],tooltip:{trigger:"axis"},legend:{show:!0,textStyle:{color:"#fff"}},xAxis:{type:"category",data:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],axisLine:{lineStyle:{color:"#888"}},axisLabel:{color:"#ccc"}},yAxis:{type:"value",axisLine:{lineStyle:{color:"#888"}},axisLabel:{color:"#ccc"}},series:[{name:"数量",type:"bar",data:[120,200,150,80,70,110,130],itemStyle:{borderRadius:[4,4,0,0]}}]}:{backgroundColor:"transparent",color:["#42b883"],tooltip:{trigger:"axis"},legend:{show:!0,textStyle:{color:"#fff"}},xAxis:{type:"category",data:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],axisLine:{lineStyle:{color:"#888"}},axisLabel:{color:"#ccc"}},yAxis:{type:"value",axisLine:{lineStyle:{color:"#888"}},axisLabel:{color:"#ccc"}},series:[{name:"趋势",type:"line",smooth:!0,data:[150,230,224,218,135,147,260],lineStyle:{width:2}}]}}function Xe(l){var Q,ee;const n=`${l}-${Date.now()}`,a=kt.value,u=at.value||1,c=(Q=a==null?void 0:a.clientWidth)!=null?Q:0,f=(ee=a==null?void 0:a.clientHeight)!=null?ee:0,S=a?(a.scrollLeft+c/2)/u:20,C=a?(a.scrollTop+f/2)/u:20,M=l==="chart"?240:l==="image"||l==="line"?200:l==="container"?240:void 0,y=l==="chart"?160:l==="image"?150:l==="line"?2:l==="container"?160:void 0,s=Math.round(S-(M?M/2:10)),$=Math.round(C-(y?y/2:10)),B=Math.max(0,Math.min(s,Math.max(0,E.width-(M!=null?M:0)))),ne=Math.max(0,Math.min($,Math.max(0,E.height-(y!=null?y:0)))),se=(Y,xe,p,h)=>{const N=Math.max(0,Math.min(Y,Math.max(0,E.width-(p!=null?p:0)))),v=Math.max(0,Math.min(xe,Math.max(0,E.height-(h!=null?h:0))));return{cl:N,ct:v}},Se=U.value.map(Y=>{var v,I,X,b,G,A;const xe=(v=Y.width)!=null?v:0,p=(I=Y.height)!=null?I:0,h=Number((b=(X=Y.left)!=null?X:Y.x)!=null?b:0),N=Number((A=(G=Y.top)!=null?G:Y.y)!=null?A:0);return{l:h,t:N,r:h+xe,b:N+p}}),ve=(Y,xe,p,h)=>{const N=Y+(p!=null?p:0),v=xe+(h!=null?h:0);for(const I of Se)if(!(p===void 0||h===void 0)&&!(N<=I.l||v<=I.t||Y>=I.r||xe>=I.b))return!0;return!1},ke=24;let pe={cl:B,ct:ne};if(M&&y&&ve(pe.cl,pe.ct,M,y)){let Y=!1;for(let xe=1;xe<=20&&!Y;xe++)for(const p of[[xe,0],[0,xe],[-xe,0],[0,-xe]]){const[h,N]=p,v=s+h*ke,I=$+N*ke,X=se(v,I,M,y);if(!ve(X.cl,X.ct,M,y)){pe=X,Y=!0;break}}}const Z={id:n,type:l,left:pe.cl,top:pe.ct,autoSize:l==="text",width:M,height:y,text:l==="text"?"文字":l==="image"||l==="line"?"":"图表",className:"",zIndex:1,style:{}};l==="text"?Object.assign(Z,{content:"文字",fontSize:16,fontWeight:"400",fontFamily:"Arial, Helvetica, sans-serif",color:"#ffffff",letterSpacing:"0px",lineHeight:"1.5",fontStyle:"normal",useGradient:!1,gradientStart:"#00A3FF",gradientEnd:"#ffffff",gradientDirection:"to right",x:pe.cl,y:pe.ct}):l==="image"&&(Object.assign(Z,{src:"",borderRadius:0,x:pe.cl,y:pe.ct}),Z.style={...Z.style||{},objectFit:"contain"}),l==="chart"&&Object.assign(Z,{elementId:`chart-${Date.now()}`,chartType:"line",chartOption:We("line")}),l==="line"&&(Z.autoSize=!1,Z.style={...Z.style||{},lineColor:"#ffffff",lineThickness:2,lineOrientation:"horizontal",lineStyle:"solid",lineDashLength:6,lineDashGap:4}),l==="container"&&(Z.autoSize=!1,Z.text="",Z.elementId=`container-${Date.now()}`,Z.style={...Z.style||{},backgroundColor:"transparent",border:"1px dashed rgba(148,163,184,0.6)",borderRadius:"6px"}),ie(),U.value.push(Z),m.value=n}function mt(l){const{el:n}=De(l.id);n&&(R.value||(ie(),R.value=!0),n.left=l.left,n.top=l.top,n.x=l.left,n.y=l.top)}function bt(l){const{el:n}=De(l.id);n&&(R.value||(ie(),R.value=!0),n.width=l.width,n.height=l.height,l.left!==void 0&&(n.left=l.left,n.x=l.left),l.top!==void 0&&(n.top=l.top,n.y=l.top))}function Mt(l){m.value=l,wt()}function wt(){if(nt(),!ot.value)return;const l=m.value;if(!l)return;const n=et.value.find(f=>f.id===l);if(!n)return;const a=et.value.filter(f=>f.id!==l),u={left:n.left,top:n.top,right:n.right,bottom:n.bottom,centerX:n.centerX,centerY:n.centerY};be.value={left:u.left,top:u.top,right:u.right,bottom:u.bottom,centerX:u.centerX,centerY:u.centerY},Ce.value={centerV:!1,centerH:!1,left:!1,right:!1,top:!1,bottom:!1};const c=4;for(const f of a)Math.abs(u.centerX-f.centerX)<=c&&f.w>0&&(Ce.value.centerV=!0,be.value.centerX=f.centerX),Math.abs(u.centerY-f.centerY)<=c&&f.h>0&&(Ce.value.centerH=!0,be.value.centerY=f.centerY),Math.abs(u.left-f.left)<=c&&(Ce.value.left=!0,be.value.left=f.left),Math.abs(u.right-f.right)<=c&&f.w>0&&(Ce.value.right=!0,be.value.right=f.right),Math.abs(u.top-f.top)<=c&&(Ce.value.top=!0,be.value.top=f.top),Math.abs(u.bottom-f.bottom)<=c&&f.h>0&&(Ce.value.bottom=!0,be.value.bottom=f.bottom);Ae.value=Object.values(Ce.value).some(Boolean)}function Ct(){m.value=null,Le()}const Ce=ce({centerV:!1,centerH:!1,left:!1,right:!1,top:!1,bottom:!1}),le=ce({left:null,right:null,up:null,down:null}),rt=ce(!0),ot=ce(!0),ut=ce(!1),Ve=yt(()=>U.value.filter(l=>l.hidden));function Je(l){const n=U.value.find(a=>a.id===l);n&&(n.hidden=!1,m.value=l,yl(()=>{const a=document.querySelector(`[data-el-id="${l}"]`);a&&a.scrollIntoView({behavior:"smooth",block:"center"}),ut.value=!1}))}const Ee=ce(null),me=ce(null),et=yt(()=>U.value.map(l=>{var c,f;const n=H.value[l.id];if(n)return{id:l.id,left:n.left,top:n.top,right:n.right,bottom:n.bottom,centerX:n.centerX,centerY:n.centerY,w:n.width,h:n.height,type:l.type};const a=(c=l.width)!=null?c:0,u=(f=l.height)!=null?f:0;return{id:l.id,left:l.left,top:l.top,right:l.left+a,bottom:l.top+u,centerX:l.left+a/2,centerY:l.top+u/2,w:a,h:u,type:l.type}}));function xt(l){R.value||(ie(),R.value=!0),be.value={left:l.left,top:l.top,right:l.right,bottom:l.bottom,centerX:l.centerX,centerY:l.centerY},Ce.value={centerV:!1,centerH:!1,left:!1,right:!1,top:!1,bottom:!1},le.value={left:null,right:null,up:null,down:null};const n=.5,a=m.value,u=et.value;function c(y,s,$,B){const ne=Math.max(y,$);return Math.min(s,B)-ne}let f=null,S=null,C=null,M=null;for(const y of u)if(!(!a||y.id===a)){if(Math.abs(l.centerX-y.centerX)<=n&&y.w>0&&(Ce.value.centerV=!0,be.value.centerX=y.centerX),Math.abs(l.centerY-y.centerY)<=n&&y.h>0&&(Ce.value.centerH=!0,be.value.centerY=y.centerY),Math.abs(l.left-y.left)<=n&&(Ce.value.left=!0,be.value.left=y.left),Math.abs(l.right-y.right)<=n&&y.w>0&&(Ce.value.right=!0,be.value.right=y.right),Math.abs(l.top-y.top)<=n&&(Ce.value.top=!0,be.value.top=y.top),Math.abs(l.bottom-y.bottom)<=n&&y.h>0&&(Ce.value.bottom=!0,be.value.bottom=y.bottom),c(l.top,l.bottom,y.top,y.bottom)>0){const s=l.left-y.right;s>=0&&(!f||s<f.gap)&&(f={gap:s,m:y});const $=y.left-l.right;$>=0&&(!S||$<S.gap)&&(S={gap:$,m:y})}if(c(l.left,l.right,y.left,y.right)>0){const s=l.top-y.bottom;s>=0&&(!C||s<C.gap)&&(C={gap:s,m:y});const $=y.top-l.bottom;$>=0&&(!M||$<M.gap)&&(M={gap:$,m:y})}}if(Ae.value=Object.values(Ce.value).some(Boolean),!rt.value){le.value={left:null,right:null,up:null,down:null};return}if(f){const y=f.m,s=(Math.max(l.left,y.left)+Math.min(l.right,y.right))/2,$=(Math.max(l.top,y.top)+Math.min(l.bottom,y.bottom))/2;le.value.left={gap:Math.floor(f.gap),exact:f.gap,refId:y.id,x:Math.round(s),y:Math.round($)}}if(S){const y=S.m,s=(Math.max(l.left,y.left)+Math.min(l.right,y.right))/2,$=(Math.max(l.top,y.top)+Math.min(l.bottom,y.bottom))/2;le.value.right={gap:Math.floor(S.gap),exact:S.gap,refId:y.id,x:Math.round(s),y:Math.round($)}}if(C){const y=C.m,s=(Math.max(l.left,y.left)+Math.min(l.right,y.right))/2,$=(y.bottom+l.top)/2;le.value.up={gap:Math.floor(C.gap),exact:C.gap,refId:y.id,x:Math.round(s),y:Math.round($)}}if(M){const y=M.m,s=(Math.max(l.left,y.left)+Math.min(l.right,y.right))/2,$=(l.bottom+y.top)/2;le.value.down={gap:Math.floor(M.gap),exact:M.gap,refId:y.id,x:Math.round(s),y:Math.round($)}}ot.value||(Ce.value={centerV:!1,centerH:!1,left:!1,right:!1,top:!1,bottom:!1},Ae.value=!1)}function nt(){if(!rt.value){le.value={left:null,right:null,up:null,down:null};return}const l=m.value;if(!l){le.value={left:null,right:null,up:null,down:null};return}const n=et.value.find(s=>s.id===l);if(!n){le.value={left:null,right:null,up:null,down:null};return}const a={left:n.left,top:n.top,right:n.right,bottom:n.bottom,centerX:n.centerX,centerY:n.centerY},u=et.value.filter(s=>s.id!==l);function c(s,$,B,ne){const se=Math.max(s,B);return Math.min($,ne)-se}let f=null,S=null,C=null,M=null;for(const s of u){if(c(a.top,a.bottom,s.top,s.bottom)>0){const $=a.left-s.right;$>=0&&(!f||$<f.gap)&&(f={gap:$,m:s});const B=s.left-a.right;B>=0&&(!S||B<S.gap)&&(S={gap:B,m:s})}if(c(a.left,a.right,s.left,s.right)>0){const $=a.top-s.bottom;$>=0&&(!C||$<C.gap)&&(C={gap:$,m:s});const B=s.top-a.bottom;B>=0&&(!M||B<M.gap)&&(M={gap:B,m:s})}}const y={left:null,right:null,up:null,down:null};if(f){const s=f.m,$=(Math.max(a.left,s.left)+Math.min(a.right,s.right))/2,B=(Math.max(a.top,s.top)+Math.min(a.bottom,s.bottom))/2;y.left={gap:Math.floor(f.gap),exact:f.gap,refId:s.id,x:Math.round($),y:Math.round(B)}}if(S){const s=S.m,$=(Math.max(a.left,s.left)+Math.min(a.right,s.right))/2,B=(Math.max(a.top,s.top)+Math.min(a.bottom,s.bottom))/2;y.right={gap:Math.floor(S.gap),exact:S.gap,refId:s.id,x:Math.round($),y:Math.round(B)}}if(C){const s=C.m,$=(Math.max(a.left,s.left)+Math.min(a.right,s.right))/2,B=(s.bottom+a.top)/2;y.up={gap:Math.floor(C.gap),exact:C.gap,refId:s.id,x:Math.round($),y:Math.round(B)}}if(M){const s=M.m,$=(Math.max(a.left,s.left)+Math.min(a.right,s.right))/2,B=(a.bottom+s.top)/2;y.down={gap:Math.floor(M.gap),exact:M.gap,refId:s.id,x:Math.round($),y:Math.round(B)}}le.value=y}function Le(){R.value=!1,ot.value&&m.value?wt():Ae.value=!1,nt()}function De(l){if(!l)return{el:null,parentGroup:null};const n=(a,u)=>{for(const c of a){if(c.id===l)return{el:c,parentGroup:u};if(c.type==="group"&&Array.isArray(c.children)){const f=n(c.children,c);if(f)return f}}return null};return n(U.value,null)||{el:null,parentGroup:null}}function ht(l){const n=le.value[l];n&&(Ee.value=l,me.value=n.gap)}function vt(){var C,M,y,s,$;if(!Ee.value||me.value==null){Ee.value=null,me.value=null;return}const l=Ee.value,n=le.value[l];if(!n){Ee.value=null,me.value=null;return}const a=et.value.find(B=>B.id===n.refId),u=me.value,c=st.value;if(!a||!c){Ee.value=null,me.value=null;return}ie();const f=(C=n.exact)!=null?C:n.gap,S=u-f;l==="left"?c.left=Math.round(((M=c.left)!=null?M:0)+S):l==="right"?c.left=Math.round(((y=c.left)!=null?y:0)-S):l==="up"?c.top=Math.round(((s=c.top)!=null?s:0)+S):l==="down"&&(c.top=Math.round((($=c.top)!=null?$:0)-S)),Ee.value=null,me.value=null,nt()}gt(m,()=>{R.value||nt()}),gt(H,()=>{R.value||nt()},{deep:!0}),gt(rt,l=>{l?nt():(Ee.value=null,me.value=null,le.value={left:null,right:null,up:null,down:null})});const st=yt(()=>m.value?De(m.value).el:null);async function pr(){return new Promise((l,n)=>{const a=indexedDB.open("lowcode-db",1);a.onupgradeneeded=()=>{const u=a.result;if(!u.objectStoreNames.contains("objects")){const c=u.createObjectStore("objects",{keyPath:"id"});try{c.createIndex("projectId","projectId",{unique:!1}),c.createIndex("name","name",{unique:!1})}catch{}}},a.onsuccess=()=>l(a.result),a.onerror=()=>n(a.error)})}async function fr(){try{const l=(await pr()).transaction(["objects"],"readonly").objectStore("objects").getAll();l.onsuccess=()=>{_.value=(l.result||[]).filter(n=>!n.projectId||n.projectId===(o.projectId||void 0))},l.onerror=()=>{console.warn("loadDatabaseObjects error",l.error)}}catch(l){console.warn("openDatabaseDB error",l)}}const gr=yt(()=>{const l={};for(const n of _.value)n&&n.name&&(l[n.name]=n.content);return l}),$t=ce({}),_t=yt(()=>{const l={...gr.value};for(const n in $t.value)Object.assign(l,$t.value[n]);return l});function yr(l,n){const a={};for(const u of n)u&&u.name&&(a[u.name]=u.content);$t.value[l]=a}function Ht(l){$t.value[l]&&delete $t.value[l];const n=`component-fonts-${l}`,a=document.getElementById(n);a&&a.parentNode&&a.parentNode.removeChild(a)}function mr(l){return l?/^#([0-9a-fA-F]{6})$/.test(l.trim()):!1}function Wt(l,n="#000000"){return mr(l)?l:n}function br(){if(!m.value)return;ie();const{el:l,parentGroup:n}=De(m.value);l&&n&&Array.isArray(n.children)?n.children=n.children.filter(a=>a.id!==l.id):(U.value=U.value.filter(a=>a.id!==m.value),l&&l.type==="group"&&Ht(l.id)),m.value=null}function Jt(l){(!l.className||!l.className.trim())&&(l.className=`cls-${String(l.id).slice(0,8)}`)}function xr(l){try{Jt(l);const n=String(l.className||"").trim();String(l.customClassCss||"").trim()||(l.customClassCss=`.${n} {
  
}`)}catch{}}function hr(l){const n=String(l||"").trim();return n?n.split(";").map(a=>{const u=a.trim();return u?/!important\s*$/.test(u)?u+";":u+" !important;":""}).filter(Boolean).join(`
`):""}function vr(l){return String(l||"").replace(/\{([^}]*)\}/g,(n,a)=>`{
`+String(a||"").split(";").map(u=>{const c=u.trim();return c?c.startsWith("@")||!/:/.test(c)||/!important\s*$/.test(c)?c+";":c+" !important;":""}).filter(Boolean).join(`
`)+`
}`)}function wr(l){try{if(!l.enableClassStyle)return;Jt(l);const n=String(l.customClassCss||"").trim();if(!n)return;const a=`custom-class-${l.id}`;let u=document.getElementById(a);if(u||(u=document.createElement("style"),u.id=a,document.head.appendChild(u)),/{[^}]*}/.test(n)){u.textContent=vr(n);return}const c=hr(n);u.textContent=`.${String(l.className).trim()} {
${c}
}`}catch(n){console.warn("注入自定义类样式失败：",n)}}function qt(l){try{const n=`custom-class-${l}`,a=document.getElementById(n);a&&a.remove()}catch{}}function Xt(l,n){for(const a of l)n(a),a.type==="group"&&Array.isArray(a.children)&&Xt(a.children,n)}let Ot=null;function Dt(){Ot&&clearTimeout(Ot),Ot=setTimeout(()=>{try{Xt(U.value,l=>{l.enableClassStyle&&l.customClassCss&&l.className?wr(l):qt(l.id)})}catch(l){console.warn("刷新自定义类样式失败：",l)}},50)}async function $r(){var l,n,a,u,c,f,S,C,M,y;try{const s=st.value;if(!s){alert("请先选中要保存的元素或分组");return}const $=ge.value||(s.type==="group"?"分组组件":"元素组件"),B=prompt("请输入组件名称",$);if(B===null)return;const ne=(B||$).trim()||"未命名组件";let se=[];if(s.type==="group"&&Array.isArray(s.children)){const p=Number((n=(l=s.left)!=null?l:s.x)!=null?n:0),h=Number((u=(a=s.top)!=null?a:s.y)!=null?u:0);se=s.children.map(N=>{var L,de,re,fe,Oe,Ge;const v=JSON.parse(JSON.stringify(N)),I=Number((de=(L=v.left)!=null?L:v.x)!=null?de:0),X=Number((fe=(re=v.top)!=null?re:v.y)!=null?fe:0);v.left=p+I,v.top=h+X,v.x=v.left,v.y=v.top;const b=H.value[N.id],G=Number(v.width||0),A=Number(v.height||0);if(!(G>0)){const Ye=(()=>{var Re,tt,qe,dt,pt;if(v.type==="text"){const Et=Number((Re=v.fontSize)!=null?Re:16),Rr=String((tt=v.text)!=null?tt:"").trim();return Math.max(50,Math.round((Rr.length||2)*Et*.6))}if(v.type==="image")return 100;if(v.type==="chart")return 240;if(v.type==="line"){const Et=Number((dt=(qe=v.style)==null?void 0:qe.lineThickness)!=null?dt:2);return(((pt=v.style)==null?void 0:pt.lineOrientation)||"horizontal")==="vertical"?Et:100}return 50})();v.width=Math.max(1,Math.round((Oe=b==null?void 0:b.width)!=null?Oe:Ye))}if(!(A>0)){const Ye=(()=>{var Re,tt,qe,dt;if(v.type==="text"){const pt=Number((Re=v.fontSize)!=null?Re:16);return Math.max(20,Math.round(pt*1.5))}if(v.type==="image")return 100;if(v.type==="chart")return 160;if(v.type==="line"){const pt=Number((qe=(tt=v.style)==null?void 0:tt.lineThickness)!=null?qe:2);return(((dt=v.style)==null?void 0:dt.lineOrientation)||"horizontal")==="vertical"?100:pt}return 20})();v.height=Math.max(1,Math.round((Ge=b==null?void 0:b.height)!=null?Ge:Ye))}return v.id=`${v.type}-${Date.now()}-${Math.random().toString(36).slice(2,8)}`,v})}else{const p=JSON.parse(JSON.stringify(s)),h=Number((f=(c=p.left)!=null?c:p.x)!=null?f:0),N=Number((C=(S=p.top)!=null?S:p.y)!=null?C:0);p.left=h,p.top=N,p.x=p.left,p.y=p.top;const v=H.value[s.id],I=Number(p.width||0),X=Number(p.height||0);if(!(I>0)){const b=(()=>{var G,A,L,de,re;if(p.type==="text"){const fe=Number((G=p.fontSize)!=null?G:16),Oe=String((A=p.text)!=null?A:"").trim();return Math.max(50,Math.round((Oe.length||2)*fe*.6))}if(p.type==="image")return 100;if(p.type==="chart")return 240;if(p.type==="line"){const fe=Number((de=(L=p.style)==null?void 0:L.lineThickness)!=null?de:2);return(((re=p.style)==null?void 0:re.lineOrientation)||"horizontal")==="vertical"?fe:100}return 50})();p.width=Math.max(1,Math.round((M=v==null?void 0:v.width)!=null?M:b))}if(!(X>0)){const b=(()=>{var G,A,L,de;if(p.type==="text"){const re=Number((G=p.fontSize)!=null?G:16);return Math.max(20,Math.round(re*1.5))}if(p.type==="image")return 100;if(p.type==="chart")return 160;if(p.type==="line"){const re=Number((L=(A=p.style)==null?void 0:A.lineThickness)!=null?L:2);return(((de=p.style)==null?void 0:de.lineOrientation)||"horizontal")==="vertical"?100:re}return 20})();p.height=Math.max(1,Math.round((y=v==null?void 0:v.height)!=null?y:b))}p.id=`${p.type}-${Date.now()}-${Math.random().toString(36).slice(2,8)}`,se=[p]}const Se=Math.min(...se.map(p=>{var h,N;return Number((N=(h=p.left)!=null?h:p.x)!=null?N:0)})),ve=Math.min(...se.map(p=>{var h,N;return Number((N=(h=p.top)!=null?h:p.y)!=null?N:0)})),ke=Math.max(...se.map(p=>{var h,N,v;return Number((N=(h=p.left)!=null?h:p.x)!=null?N:0)+Number((v=p.width)!=null?v:0)})),pe=Math.max(...se.map(p=>{var h,N,v;return Number((N=(h=p.top)!=null?h:p.y)!=null?N:0)+Number((v=p.height)!=null?v:0)})),Z=Math.max(1,Math.round(ke-Se)),Q=Math.max(1,Math.round(pe-ve));se=se.map(p=>{var I,X,b,G;const h=JSON.parse(JSON.stringify(p)),N=Number((X=(I=h.left)!=null?I:h.x)!=null?X:0)-Se,v=Number((G=(b=h.top)!=null?b:h.y)!=null?G:0)-ve;return h.left=Math.max(0,Math.round(N)),h.top=Math.max(0,Math.round(v)),h.x=h.left,h.y=h.top,h});const ee={width:Z,height:Q,backgroundUrl:"",backgroundColor:"transparent",globalFontFamily:E.globalFontFamily,globalFontSize:E.globalFontSize,globalColor:E.globalColor},Y=`${Date.now()}${Math.random().toString(36).slice(2,9)}`,xe={id:Y,name:ne,description:"",tags:[],elements:se,config:ee,usageCount:0,createdAt:Date.now(),updatedAt:Date.now()};await _e.init(),await _e.saveComponent(JSON.parse(JSON.stringify(xe))),await Lt(`component-${Y}`,{config:ee,elements:se,exportName:ne}),alert("组件已保存到组件库")}catch(s){console.warn("保存组件失败：",s),alert("保存组件失败，请稍后重试")}}const kr=ce(null);function Er(l){var u;const n=(u=l.target.files)==null?void 0:u[0];if(!n)return;const a=new FileReader;a.onload=()=>{const c=String(a.result);E.backgroundUrl=c;const f=new Image;f.onload=()=>{kr.value={width:f.naturalWidth,height:f.naturalHeight},E.width=f.naturalWidth,E.height=f.naturalHeight},f.src=c},a.readAsDataURL(n)}function Nt(l){var n;return l&&((n=l.split(",")[0])!=null?n:"").trim().replace(/^['"]|['"]$/g,"")||null}function ct(l){return{"image/png":"png","image/jpeg":"jpg","image/jpg":"jpg","image/webp":"webp","image/gif":"gif","image/svg+xml":"svg","image/avif":"avif","image/apng":"apng","image/x-icon":"ico","image/vnd.microsoft.icon":"ico","font/ttf":"ttf","font/otf":"otf","font/woff":"woff","font/woff2":"woff2","application/font-ttf":"ttf","application/font-otf":"otf","application/font-woff":"woff","application/font-woff2":"woff2","application/x-font-ttf":"ttf","application/x-font-otf":"otf","application/x-font-woff":"woff","application/x-font-woff2":"woff2","application/vnd.ms-fontobject":"eot","application/octet-stream":"bin"}[l]||"bin"}function Yt(l){var u;const n=/\.([A-Za-z0-9]+)$/.exec(l||"");if(!n)return null;const a=((u=n[1])!=null?u:"").toLowerCase();return a?["png","jpg","jpeg","gif","svg","webp","avif","apng","ico"].includes(a)?a==="jpeg"?"jpg":a:["ttf","otf","woff","woff2","eot"].includes(a)?a:null:null}async function It(l){try{const n="lowcode-icons",a="icons",u=await new Promise((c,f)=>{const S=indexedDB.open(n);S.onsuccess=()=>{const C=S.result;if(C.objectStoreNames.contains(a))c(C);else{const M=C.version+1;C.close();const y=indexedDB.open(n,M);y.onupgradeneeded=()=>{const s=y.result;s.objectStoreNames.contains(a)||s.createObjectStore(a,{keyPath:"id"})},y.onsuccess=()=>c(y.result),y.onerror=()=>f(y.error)}},S.onerror=()=>f(S.error)});return await new Promise((c,f)=>{const S=u.transaction(a,"readonly").objectStore(a).get(l);S.onsuccess=()=>c(S.result||null),S.onerror=()=>f(S.error)})}catch{return null}}function Kt(l){var n,a,u,c,f,S,C,M;try{const y=new Uint8Array(l),s=String.fromCharCode((n=y[0])!=null?n:0,(a=y[1])!=null?a:0,(u=y[2])!=null?u:0,(c=y[3])!=null?c:0);return s==="wOFF"?"woff":s==="wOF2"?"woff2":s==="OTTO"?"otf":(((f=y[0])!=null?f:0)===0&&((S=y[1])!=null?S:0)===1&&((C=y[2])!=null?C:0)===0&&((M=y[3])!=null?M:0)===0||s==="true"||s==="typ1","ttf")}catch{return"ttf"}}async function Ft(l){const n=prompt("请输入导出名称",ge.value||"GeneratedComponent");if(n===null)return;const a=n.trim()||"GeneratedComponent";ge.value=a;function u(p){const h=new Set,N={};function v(X){let b=Date.now(),G=`${X}-${b}`;for(;h.has(G);)b+=1,G=`${X}-${b}`;return G}function I(X){const b=JSON.parse(JSON.stringify(X)),G=String(b.id);let A=G;return h.has(A)&&(A=v(String(b.type||"el"))),h.add(A),N[G]=A,b.id=A,b.type==="group"&&Array.isArray(b.children)&&(b.children=b.children.map(L=>I(L))),b}return{normalized:p.map(X=>I(X)),remap:N}}const{normalized:c}=u(U.value),f=[],S=p=>{for(const h of p)h.type==="group"&&Array.isArray(h.children)?S(h.children):h.type==="image"&&(h.src||h.iconId)&&f.push(h)};S(c);const C={},M=new Map;let y=0;for(const p of f)try{let h;if(p.src)h=await(await fetch(String(p.src))).blob();else if(p.iconId){const b=p.iconId,G=await It(b);if(!G)throw new Error("icon record missing: "+b);h=new Blob([G.buffer],{type:String(G.mime||"image/png")})}else continue;let N=ct(h.type);if(N==="bin"&&p.iconId){const b=p.iconId,G=await It(b);if(G){const A=ct(String(G.mime||"")),L=Yt(String(G.originalName||""));N=A!=="bin"?A:L||N}N==="bin"&&(N="png")}const v=await h.arrayBuffer(),I=await crypto.subtle.digest("SHA-256",v),X=Array.from(new Uint8Array(I)).map(b=>b.toString(16).padStart(2,"0")).join("");if(M.has(X)){const{fileName:b}=M.get(X);C[p.id]=b}else{const b=`${a}_img_${y}.${N}`;M.set(X,{fileName:b,blob:h}),y++,C[p.id]=b}}catch(h){console.warn("导出图片失败：",h)}const s=Array.from(M.values());let $=null,B=null;if(E.backgroundUrl)try{const p=await(await fetch(String(E.backgroundUrl))).blob(),h=ct(p.type);$=`${a}_bg.${h}`,B=p}catch(p){console.warn("导出背景图片失败：",p)}const ne=new Set,se=Nt(E.globalFontFamily);se&&ne.add(se);const Se=p=>{var h;for(const N of p)if(N.type==="group"&&Array.isArray(N.children))Se(N.children);else if(N.type==="text"){const v=Nt((h=N.style)==null?void 0:h.fontFamily);v&&ne.add(v)}};Se(U.value);const ve=[],ke=[];if(ne.size>0)try{const p="lowcode-fonts",h="fonts",N=await new Promise((b,G)=>{const A=indexedDB.open(p);A.onsuccess=()=>{const L=A.result;if(L.objectStoreNames.contains(h))b(L);else{const de=L.version+1;L.close();const re=indexedDB.open(p,de);re.onupgradeneeded=()=>{const fe=re.result;fe.objectStoreNames.contains(h)||fe.createObjectStore(h,{keyPath:"id"})},re.onsuccess=()=>b(re.result),re.onerror=()=>G(re.error)}},A.onerror=()=>G(A.error)}),v=await new Promise((b,G)=>{const A=N.transaction(h,"readonly").objectStore(h).getAll();A.onsuccess=()=>b(A.result),A.onerror=()=>G(A.error)}),I=k.value,X=I?v.filter(b=>b.projectId===I):v.filter(b=>!b.projectId);for(const b of X)if(ne.has(b.name)){const G=new Blob([b.buffer],{type:b.mime});let A=ct(b.mime);if(A==="bin")try{A=Kt(b.buffer)}catch{A="ttf"}const L=b.name.replace(/[^A-Za-z0-9_\-]/g,"_"),de=`${a}_${L}.${A}`;ve.push({family:b.name,file:de}),ke.push({file:de,blob:G})}}catch(p){console.warn("读取字体库失败：",p)}const pe=new ol.default,Z=pe.folder(a),Q=Z.folder("imgs");for(const p of s)Q.file(p.fileName,p.blob);B&&$&&Q.file($,B);const ee=Z.folder("fonts");for(const p of ke)ee.file(p.file,p.blob);let Y="";l==="vue2"?(Y=Qn(a,E,c,{imageFileNames:s.map(p=>p.fileName),imageFileMap:C,backgroundFileName:B&&$?$:null,fontFaces:ve,hideDirective:"if"}),Z.file("index.vue",Y)):l==="vue3"?(Y=el(a,E,c,{imageFileNames:s.map(p=>p.fileName),imageFileMap:C,backgroundFileName:B&&$?$:null,fontFaces:ve,hideDirective:"if"}),Z.file("index.vue",Y)):l==="react"?(Y=nl(a,E,c,{imageFileNames:s.map(p=>p.fileName),imageFileMap:C,backgroundFileName:B&&$?$:null,fontFaces:ve}),Z.file("index.jsx",Y),Z.file("README.md","# React 导出使用说明\n\n- 将本目录的 `imgs/` 与 `fonts/` 拷贝到 React 项目 `public/` 根目录：\n  - `public/imgs`\n  - `public/fonts`\n- 组件中图片路径为 `/imgs/...`，字体为 `/fonts/...`，确保开发与生产可访问。\n\n可选方案：若不使用 `public`，需自行改为通过打包管道解析资源（如 `new URL(path, import.meta.url).href` 或 import）。")):(Y=tl(a,E,c,{imageFileNames:s.map(p=>p.fileName),imageFileMap:C,backgroundFileName:B&&$?$:null,fontFaces:ve}),Z.file("index.html",Y));const xe=await pe.generateAsync({type:"blob"});(0,ll.saveAs)(xe,`${a}.zip`)}async function Sr(){const l=prompt("请输入导出名称",ge.value||"GeneratedComponent");if(l===null)return;const n=l.trim()||"GeneratedComponent";ge.value=n;const a=[],u=p=>{for(const h of p)h.type==="group"&&Array.isArray(h.children)?u(h.children):h.type==="image"&&h.src&&a.push(h)};u(U.value);const c={},f=new Map;let S=0;for(const p of a)try{let h;if(p.src)h=await(await fetch(String(p.src))).blob();else if(p.iconId){const b=p.iconId,G=await It(b);if(!G)throw new Error("icon record missing: "+b);h=new Blob([G.buffer],{type:String(G.mime||"image/png")})}else continue;let N=ct(h.type);if(N==="bin"&&p.iconId){const b=p.iconId,G=await It(b);if(G){const A=ct(String(G.mime||"")),L=Yt(String(G.originalName||""));N=A!=="bin"?A:L||N}N==="bin"&&(N="png")}const v=await h.arrayBuffer(),I=await crypto.subtle.digest("SHA-256",v),X=Array.from(new Uint8Array(I)).map(b=>b.toString(16).padStart(2,"0")).join("");if(f.has(X)){const{fileName:b}=f.get(X);c[p.id]=b}else{const b=`${n}_img_${S}.${N}`;f.set(X,{fileName:b,blob:h}),S++,c[p.id]=b}}catch(h){console.warn("导出图片失败：",h)}const C=Array.from(f.values());let M=null,y=null;if(E.backgroundUrl)try{const p=await(await fetch(String(E.backgroundUrl))).blob(),h=ct(p.type);M=`${n}_bg.${h}`,y=p}catch(p){console.warn("导出背景图片失败：",p)}const s=new Set,$=Nt(E.globalFontFamily);$&&s.add($);const B=p=>{var h;for(const N of p)if(N.type==="group"&&Array.isArray(N.children))B(N.children);else if(N.type==="text"){const v=Nt((h=N.style)==null?void 0:h.fontFamily);v&&s.add(v)}};B(U.value);const ne=[],se=[];if(s.size>0)try{const p="lowcode-fonts",h="fonts",N=await new Promise((b,G)=>{const A=indexedDB.open(p);A.onsuccess=()=>{const L=A.result;if(L.objectStoreNames.contains(h))b(L);else{const de=L.version+1;L.close();const re=indexedDB.open(p,de);re.onupgradeneeded=()=>{const fe=re.result;fe.objectStoreNames.contains(h)||fe.createObjectStore(h,{keyPath:"id"})},re.onsuccess=()=>b(re.result),re.onerror=()=>G(re.error)}},A.onerror=()=>G(A.error)}),v=await new Promise((b,G)=>{const A=N.transaction(h,"readonly").objectStore(h).getAll();A.onsuccess=()=>b(A.result),A.onerror=()=>G(A.error)}),I=k.value,X=I?v.filter(b=>b.projectId===I):v.filter(b=>!b.projectId);for(const b of X)if(s.has(b.name)){const G=new Blob([b.buffer],{type:b.mime});let A=ct(b.mime);if(A==="bin")try{A=Kt(b.buffer)}catch{A="ttf"}const L=b.name.replace(/[^A-Za-z0-9_\-]/g,"_"),de=`${n}_${L}.${A}`;ne.push({family:b.name,file:de}),se.push({file:de,blob:G})}}catch(p){console.warn("读取字体库失败：",p)}const Se=new ol.default,ve=Se.folder(`${n}_all`),ke=[],pe={imageFileNames:C.map(p=>p.fileName),imageFileMap:c,backgroundFileName:y&&M?M:null,fontFaces:ne,hideDirective:"if"},Z=Qn(n,E,U.value,pe);ke.push({key:"vue2",file:"index.vue",content:Z});const Q=el(n,E,U.value,pe);ke.push({key:"vue3",file:"index.vue",content:Q});const ee=nl(n,E,U.value,pe);ke.push({key:"react",file:"index.jsx",content:ee});const Y=tl(n,E,U.value,pe);ke.push({key:"html",file:"index.html",content:Y});for(const p of ke){const h=ve.folder(p.key);h.file(p.file,p.content),p.key==="react"&&h.file("README.md","# React 导出使用说明\n\n- 将本目录的 `imgs/` 与 `fonts/` 拷贝到 React 项目 `public/` 根目录：\n  - `public/imgs`\n  - `public/fonts`\n- 组件中图片路径为 `/imgs/...`，字体为 `/fonts/...`，确保开发与生产可访问。\n\n可选方案：若不使用 `public`，需自行改为通过打包管道解析资源（如 `new URL(path, import.meta.url).href` 或 import）。");const N=h.folder("imgs");for(const I of C)N.file(I.fileName,I.blob);y&&M&&N.file(M,y);const v=h.folder("fonts");for(const I of se)v.file(I.file,I.blob)}const xe=await Se.generateAsync({type:"blob"});(0,ll.saveAs)(xe,`${n}-all.zip`)}function Mr(){confirm("确认清空当前画布与元素吗？")&&(U.value=[],m.value=null)}const at=ce(1),kt=ce(null);function Cr(){at.value=Math.min(2,+(at.value+.1).toFixed(2))}function Nr(){at.value=Math.max(.2,+(at.value-.1).toFixed(2))}function Zt(){const l=kt.value;if(!l)return;const n=l.clientWidth-16,a=l.clientHeight-16,u=n/E.width,c=a/E.height;at.value=+Math.max(.2,Math.min(2,Math.min(u,c))).toFixed(2)}Jr(async()=>{Zt(),await fr()});const Qt=ce([]);function er(l){const n=JSON.parse(JSON.stringify(l));let a=Date.now();function u(f){return a+=1,`${f}-${a}`}function c(f){f.id=u(String(f.type||"el")),f.type==="chart"&&f.elementId&&(f.elementId=String(f.elementId)+"_"+String(a%1e3)),f.type==="group"&&Array.isArray(f.children)&&f.children.forEach(S=>c(S))}return c(n),n.left=(l.left||0)+10,n.top=(l.top||0)+10,n.x=n.left,n.y=n.top,n.zIndex=(l.zIndex||1)+1,n}function Ir(){var c,f,S,C,M,y,s,$,B,ne,se,Se,ve,ke,pe;if(!st.value)return;let l=st.value;const n=De(l.id);n.parentGroup&&(l=n.parentGroup);const a=er(l),{parentGroup:u}=De(l.id);if(u){const Z=Number((f=(c=u.left)!=null?c:u.x)!=null?f:0),Q=Number((C=(S=u.top)!=null?S:u.y)!=null?C:0),ee=Number((M=u.width)!=null?M:0),Y=Number((y=u.height)!=null?y:0),xe=Z+ee,p=Q+Y,h=Number((s=l.width)!=null?s:0),N=Number(($=l.height)!=null?$:0);let v=h,I=N;if(!v||!I)if(l.type==="text"){const re=Number((B=l.fontSize)!=null?B:16),fe=String((se=(ne=l.text)!=null?ne:l.content)!=null?se:"").trim();v=Math.max(h||50,Math.round((fe.length||2)*re*.6)),I=Math.max(N||20,Math.round(re*1.5))}else l.type==="image"?(v=h||200,I=N||150):l.type==="chart"?(v=h||240,I=N||160):l.type==="line"?(v=h||200,I=N||2):(v=h||100,I=N||60);const X=10,b=Z+ee/2,G=Q+Y/2;let A=!1,L=xe+X,de=Math.round(G-I/2);if(!A&&L+v<=E.width&&(a.left=Math.max(0,Math.min(L,Math.max(0,E.width-v))),a.top=Math.max(0,Math.min(de,Math.max(0,E.height-I))),A=!0),L=Z-v-X,de=Math.round(G-I/2),!A&&L>=0&&(a.left=Math.max(0,Math.min(L,Math.max(0,E.width-v))),a.top=Math.max(0,Math.min(de,Math.max(0,E.height-I))),A=!0),L=Math.round(b-v/2),de=p+X,!A&&de+I<=E.height&&(a.left=Math.max(0,Math.min(L,Math.max(0,E.width-v))),a.top=Math.max(0,Math.min(de,Math.max(0,E.height-I))),A=!0),L=Math.round(b-v/2),de=Q-I-X,!A&&de>=0&&(a.left=Math.max(0,Math.min(L,Math.max(0,E.width-v))),a.top=Math.max(0,Math.min(de,Math.max(0,E.height-I))),A=!0),!A){const re=Number((ve=(Se=l.left)!=null?Se:l.x)!=null?ve:0),fe=Number((pe=(ke=l.top)!=null?ke:l.y)!=null?pe:0),Oe=Z+re+X,Ge=Q+fe+X;a.left=Math.max(0,Math.min(Math.round(Oe),Math.max(0,E.width-v))),a.top=Math.max(0,Math.min(Math.round(Ge),Math.max(0,E.height-I)))}a.x=a.left,a.y=a.top}ie(),U.value.push(a),m.value=a.id}const jt=ce(!1),Gt=ce([]),Bt=ce(""),Ut=ce(!1),tr=yt(()=>{const l=Bt.value.trim().toLowerCase();return l?Gt.value.filter(n=>n.name.toLowerCase().includes(l)||(n.description||"").toLowerCase().includes(l)||Array.isArray(n.tags)&&n.tags.some(a=>a.toLowerCase().includes(l))):Gt.value});async function rr(){try{Ut.value=!0,await _e.init(),Gt.value=(await _e.getAllComponents()||[]).sort((l,n)=>(n.updatedAt||0)-(l.updatedAt||0))}catch(l){console.warn("加载组件缓存失败：",l)}finally{Ut.value=!1}}async function Fr(){await rr(),jt.value=!0}function nr(){jt.value=!1}const lt=ce(!1);let Ze=null;function jr(){lt.value=!0,Ze&&(clearTimeout(Ze),Ze=null)}function zr(){Ze&&clearTimeout(Ze),Ze=setTimeout(()=>{lt.value=!1,Ze=null},120)}function Ar(){lt.value=!0,Ze&&(clearTimeout(Ze),Ze=null)}function Or(){lt.value=!1,Ze&&(clearTimeout(Ze),Ze=null)}const it=ce(!1);function Dr(){it.value=!it.value}function Gr(l){const n=[],a=[],u=[],c=[];function f(s){var ne,se,Se,ve,ke;const $=Number(s.width||0),B=Number(s.height||0);if($>0&&B>0)return{w:$,h:B};if(s.type==="text"){const pe=Number((ne=s.fontSize)!=null?ne:16),Z=String((se=s.text)!=null?se:"").trim(),Q=Math.max(50,Math.round((Z.length||2)*pe*.6)),ee=Math.max(20,Math.round(pe*1.5));return{w:$||Q,h:B||ee}}if(s.type==="image")return{w:$||100,h:B||100};if(s.type==="chart")return{w:$||240,h:B||160};if(s.type==="line"){const pe=Number((ve=(Se=s.style)==null?void 0:Se.lineThickness)!=null?ve:2);return(((ke=s.style)==null?void 0:ke.lineOrientation)||"horizontal")==="vertical"?{w:$||pe,h:B||100}:{w:$||100,h:B||pe}}return{w:$||50,h:B||20}}for(const s of l){const $=Number(s.left||s.x||0),B=Number(s.top||s.y||0),{w:ne,h:se}=f(s);n.push($),a.push(B),u.push($+(ne||0)),c.push(B+(se||0))}const S=n.length?Math.min(...n):0,C=a.length?Math.min(...a):0,M=u.length?Math.max(...u):S,y=c.length?Math.max(...c):C;return{minX:S,minY:C,maxX:M,maxY:y,width:Math.max(0,M-S),height:Math.max(0,y-C)}}async function Br(l){var n,a,u,c,f,S,C,M,y,s;try{const $=await or(`component-${l.id}`),B=JSON.parse(JSON.stringify(($==null?void 0:$.elements)||l.elements||[]));if(!B||B.length===0){console.warn("该组件没有可插入的元素");return}const ne=kt.value,se=at.value||1,Se=(n=ne==null?void 0:ne.clientWidth)!=null?n:0,ve=(a=ne==null?void 0:ne.clientHeight)!=null?a:0,ke=ne?(ne.scrollLeft+Se/2)/se:20,pe=ne?(ne.scrollTop+ve/2)/se:20,Z=Gr(B),Q=Z.minX+Z.width/2,ee=Z.minY+Z.height/2,Y=Math.round(ke-Q),xe=Math.round(pe-ee),p=U.value.reduce((N,v)=>Math.max(N,Number(v.zIndex||0)),0);let h=null;if(B.length===1){const N=B[0];if(!N){console.warn("单元素组件插入失败：源元素不存在");return}const v=N,I=JSON.parse(JSON.stringify(v));I.id=`${v.type}-${Date.now()}-${Math.random().toString(36).slice(2,8)}`;const X=Number((c=(u=I.left)!=null?u:I.x)!=null?c:0),b=Number((S=(f=I.top)!=null?f:I.y)!=null?S:0);I.left=Math.round(X+Y),I.top=Math.round(b+xe),I.x=I.left,I.y=I.top;const{w:G,h:A}=(function(){var re,fe,Oe,Ge,Ye;const L=Number(I.width||0),de=Number(I.height||0);if(L>0&&de>0)return{w:L,h:de};if(I.type==="text"){const Re=Number((re=I.fontSize)!=null?re:16),tt=String((fe=I.text)!=null?fe:"").trim(),qe=Math.max(50,Math.round((tt.length||2)*Re*.6)),dt=Math.max(20,Math.round(Re*1.5));return{w:L||qe,h:de||dt}}if(I.type==="image")return{w:L||100,h:de||100};if(I.type==="chart")return{w:L||240,h:de||160};if(I.type==="line"){const Re=Number((Ge=(Oe=I.style)==null?void 0:Oe.lineThickness)!=null?Ge:2);return(((Ye=I.style)==null?void 0:Ye.lineOrientation)||"horizontal")==="vertical"?{w:L||Re,h:de||100}:{w:L||100,h:de||Re}}return{w:L||50,h:de||20}})();if(I.width=G,I.height=A,I.type==="image"&&!(I.src||"").startsWith("data:")&&I.iconId)try{zt(I.iconId).then(L=>{L&&(I.src=L)}).catch(()=>{})}catch{}I.zIndex=Math.max(1,p+1),ie(),U.value=U.value.concat(I),m.value=I.id,h=I.id}else{const N=`group-${Date.now()}-${Math.random().toString(36).slice(2,8)}`,v=[];for(const X of B){const b=JSON.parse(JSON.stringify(X));b.id=`${X.type}-${Date.now()}-${Math.random().toString(36).slice(2,8)}`;const G=Number((M=(C=b.left)!=null?C:b.x)!=null?M:0),A=Number((s=(y=b.top)!=null?y:b.y)!=null?s:0);b.left=Math.round(G-Z.minX),b.top=Math.round(A-Z.minY),b.x=b.left,b.y=b.top;const{w:L,h:de}=(function(){var Oe,Ge,Ye,Re,tt;const re=Number(b.width||0),fe=Number(b.height||0);if(re>0&&fe>0)return{w:re,h:fe};if(b.type==="text"){const qe=Number((Oe=b.fontSize)!=null?Oe:16),dt=String((Ge=b.text)!=null?Ge:"").trim(),pt=Math.max(50,Math.round((dt.length||2)*qe*.6)),Et=Math.max(20,Math.round(qe*1.5));return{w:re||pt,h:fe||Et}}if(b.type==="image")return{w:re||100,h:fe||100};if(b.type==="chart")return{w:re||240,h:fe||160};if(b.type==="line"){const qe=Number((Re=(Ye=b.style)==null?void 0:Ye.lineThickness)!=null?Re:2);return(((tt=b.style)==null?void 0:tt.lineOrientation)||"horizontal")==="vertical"?{w:re||qe,h:fe||100}:{w:re||100,h:fe||qe}}return{w:re||50,h:fe||20}})();if(b.width=L,b.height=de,b.type==="image"&&!(b.src||"").startsWith("data:")&&b.iconId)try{zt(b.iconId).then(re=>{re&&(b.src=re)}).catch(()=>{})}catch{}v.push(b)}const I={id:N,type:"group",left:Math.round(Z.minX+Y),top:Math.round(Z.minY+xe),width:Math.max(1,Math.round(Z.width)),height:Math.max(1,Math.round(Z.height)),zIndex:Math.max(1,p+1),className:l.name?`component-${l.name.replace(/[^A-Za-z0-9_-]/g,"-")}`:void 0,children:v,componentId:l.id,editable:!0,style:{backgroundColor:"transparent"}};ie(),U.value=U.value.concat(I),m.value=I.id,h=N}try{if(h){const N=await _e.getFontsByComponentId(l.id);if(Array.isArray(N)&&N.length>0){let v=document.getElementById(`component-fonts-${h}`);v||(v=document.createElement("style"),v.id=`component-fonts-${h}`,document.head.appendChild(v));const I=[];for(const X of N){const b=String(X.name||"").replace(/[^A-Za-z0-9_\-]/g,"_"),G=X.bufferBase64;G&&I.push(`@font-face { font-family: '${b}'; src: url('${G}'); font-weight: normal; font-style: normal; font-display: swap; }`)}v.textContent=I.join(`
`)}}}catch(N){console.warn("注入组件字体失败：",N)}try{if(h){const N=await _e.getDatabaseObjectsByComponentId(l.id);Array.isArray(N)&&N.length>0&&yr(h,N.map(v=>({name:v.name,content:v.content})))}}catch(N){console.warn("注入组件数据库对象失败：",N)}await _e.incrementUsageCount(l.id),jt.value=!1}catch($){console.warn("插入组件失败：",$)}}const lr=()=>k.value?`lowcode-builder-state-${k.value}`:"lowcode-builder-state-v1",Vt=()=>k.value?o.isComponent?`component-${k.value}`:`project-${k.value}`:"default";async function Lt(l,n){try{const a=JSON.parse(JSON.stringify(n));if(l.startsWith("component-")){const u=l.replace(/^component-/,"");await _e.saveBuilderStateForComponent(u,a)}else if(l.startsWith("project-")){const u=l.replace(/^project-/,"");await _e.saveBuilderStateForProject(u,a)}else await _e.saveBuilderStateForProject(l,a)}catch(a){console.warn("保存构建器状态失败：",a)}}async function or(l){try{if(l.startsWith("component-")){const n=l.replace(/^component-/,"");return await _e.getBuilderStateForComponent(n)}else if(l.startsWith("project-")){const n=l.replace(/^project-/,"");return await _e.getBuilderStateForProject(n)}return await _e.getBuilderStateForProject(l)}catch(n){return console.warn("恢复构建器状态失败：",n),null}}let Rt=null;function Tt(){Rt&&clearTimeout(Rt),Rt=setTimeout(()=>{const l={config:E,elements:U.value,exportName:ge.value};try{const n=async()=>{if(await Lt(Vt(),l),o.isComponent&&k.value)try{const a=String(k.value),u=await _e.getComponent(a),c={id:a,name:ge.value||(u==null?void 0:u.name)||"未命名组件",description:(u==null?void 0:u.description)||"",tags:(u==null?void 0:u.tags)||[],elements:U.value,config:E,usageCount:(u==null?void 0:u.usageCount)||0,createdAt:(u==null?void 0:u.createdAt)||Date.now(),updatedAt:Date.now()};await _e.saveComponent(JSON.parse(JSON.stringify(c))),ir()}catch(a){console.warn("同步保存组件记录失败：",a)}};typeof window.requestIdleCallback=="function"?window.requestIdleCallback(()=>{n()}):n()}catch(n){console.warn("保存失败：",n)}},400)}gt(E,Tt,{deep:!0}),gt(U,Tt,{deep:!0}),gt(ge,Tt),gt(U,()=>{Dt()},{deep:!0});async function Ur(){try{const l="lowcode-icons",n="icons",a=await new Promise((f,S)=>{const C=indexedDB.open(l);C.onsuccess=()=>{const M=C.result;if(M.objectStoreNames.contains(n))f(M);else{const y=M.version+1;M.close();const s=indexedDB.open(l,y);s.onupgradeneeded=()=>{const $=s.result;$.objectStoreNames.contains(n)||$.createObjectStore(n,{keyPath:"id"})},s.onsuccess=()=>f(s.result),s.onerror=()=>S(s.error)}},C.onerror=()=>S(C.error)}),u=await new Promise((f,S)=>{const C=a.transaction(n,"readonly").objectStore(n).getAll();C.onsuccess=()=>f(C.result),C.onerror=()=>S(C.error)}),c=k.value;Qt.value=(c?u.filter(f=>f.projectId===c):u.filter(f=>!f.projectId)).map(f=>{const S=new Blob([f.buffer],{type:f.mime}),C=URL.createObjectURL(S);return{id:f.id,url:C,name:f.name}})}catch(l){console.warn("图标库初始化失败：",l)}}async function zt(l){try{const n="lowcode-icons",a="icons",u=await new Promise((S,C)=>{const M=indexedDB.open(n);M.onsuccess=()=>{const y=M.result;if(y.objectStoreNames.contains(a))S(y);else{const s=y.version+1;y.close();const $=indexedDB.open(n,s);$.onupgradeneeded=()=>{const B=$.result;B.objectStoreNames.contains(a)||B.createObjectStore(a,{keyPath:"id"})},$.onsuccess=()=>S($.result),$.onerror=()=>C($.error)}},M.onerror=()=>C(M.error)}),c=await new Promise((S,C)=>{const M=u.transaction(a,"readonly").objectStore(a).get(l);M.onsuccess=()=>S(M.result),M.onerror=()=>C(M.error)});if(!c||!c.buffer)return null;const f=new Blob([c.buffer],{type:c.mime||"application/octet-stream"});return await new Promise((S,C)=>{const M=new FileReader;M.onload=()=>S(String(M.result)),M.onerror=()=>C(M.error),M.readAsDataURL(f)})}catch(n){return console.warn("读取图标数据失败：",n),null}}async function sr(){const l=U.value.filter(n=>n.type==="image");for(const n of l){if((n.src||"").startsWith("data:")||!n.iconId)continue;const a=await zt(n.iconId);a&&(n.src=a)}}async function Vr(){try{const l="lowcode-fonts",n="fonts",a=await new Promise((c,f)=>{const S=indexedDB.open(l);S.onsuccess=()=>{const C=S.result;if(C.objectStoreNames.contains(n))c(C);else{const M=C.version+1;C.close();const y=indexedDB.open(l,M);y.onupgradeneeded=()=>{const s=y.result;s.objectStoreNames.contains(n)||s.createObjectStore(n,{keyPath:"id"})},y.onsuccess=()=>c(y.result),y.onerror=()=>f(y.error)}},S.onerror=()=>f(S.error)}),u=await new Promise((c,f)=>{const S=a.transaction(n,"readonly").objectStore(n).getAll();S.onsuccess=()=>c(S.result),S.onerror=()=>f(S.error)});if(u.length>0){let c=document.querySelector("style[data-font-lib]");c||(c=document.createElement("style"),c.setAttribute("data-font-lib",""),document.head.appendChild(c));const f=[],S=[],C=k.value,M=C?u.filter(s=>s.projectId===C):u.filter(s=>!s.projectId);for(const s of M){const $=new Blob([s.buffer],{type:s.mime}),B=URL.createObjectURL($),ne=s.name;S.push(ne),f.push(`@font-face { font-family: '${ne}'; src: url('${B}'); font-weight: normal; font-style: normal; }`)}c.textContent=f.join(`
`);const y=new Set([...V.value,...S]);V.value=Array.from(y)}}catch(l){console.warn("字体库初始化失败：",l)}}Jr(async()=>{await T(),await Vr(),await Ur();try{if(o.isComponent&&k.value){const l=String(k.value);if(!await _e.getComponent(l)){const n={id:l,name:ge.value||"未命名组件",description:"",tags:[],elements:[],config:E,usageCount:0,createdAt:Date.now(),updatedAt:Date.now()};await _e.saveComponent(JSON.parse(JSON.stringify(n)))}}}catch(l){console.warn("预创建组件记录失败：",l)}try{const l=await or(Vt());if(l){l.config&&Object.assign(E,l.config),Array.isArray(l.elements)&&(U.value=l.elements),typeof l.exportName=="string"&&l.exportName&&(ge.value=l.exportName),await sr();try{U.value=U.value.map(n=>{if(n.type==="chart"&&n.style&&typeof n.style.border=="string"&&n.style.border.includes("dashed")){const a={...n,style:{...n.style}};return delete a.style.border,a}return n})}catch{}}else{const n=localStorage.getItem(lr());if(n){const a=JSON.parse(n);a&&a.config&&Object.assign(E,a.config),Array.isArray(a==null?void 0:a.elements)&&(U.value=a.elements),typeof(a==null?void 0:a.exportName)=="string"&&a.exportName&&(ge.value=a.exportName),await sr();try{U.value=U.value.map(u=>{if(u.type==="chart"&&u.style&&typeof u.style.border=="string"&&u.style.border.includes("dashed")){const c={...u,style:{...u.style}};return delete c.style.border,c}return u})}catch{}await Lt(Vt(),{config:E,elements:U.value,exportName:ge.value});try{localStorage.removeItem(lr())}catch{}}}}catch(l){console.warn("恢复失败：",l)}Dt(),window.addEventListener("keydown",Pe),window.addEventListener("keyup",Ue)}),Xr(()=>{window.removeEventListener("keydown",Pe),window.removeEventListener("keyup",Ue),ir()});let ar=0;async function Lr(l,n){var a,u,c;try{const f=E.width||l.clientWidth||800,S=E.height||l.clientHeight||600,C=(a=n==null?void 0:n.maxWidth)!=null?a:420,M=(u=n==null?void 0:n.scale)!=null?u:Math.min(1,C/f),y=(c=n==null?void 0:n.quality)!=null?c:.85,s=l.cloneNode(!0);s.style.transform="none",s.style.transformOrigin="top left",s.style.width=`${f}px`,s.style.height=`${S}px`;const $=new XMLSerializer().serializeToString(s),B=`<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" width="${Math.round(f*M)}" height="${Math.round(S*M)}">
  <foreignObject width="100%" height="100%">
    <div xmlns="http://www.w3.org/1999/xhtml" style="transform: scale(${M}); transform-origin: top left;">${$}</div>
  </foreignObject>
</svg>`,ne="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(B),se=new Image;return await new Promise(Se=>{se.onload=()=>{try{const ve=document.createElement("canvas");ve.width=se.width,ve.height=se.height;const ke=ve.getContext("2d");if(!ke)return Se(null);ke.drawImage(se,0,0);const pe=ve.toDataURL("image/jpeg",y);Se(pe)}catch{Se(null)}},se.onerror=()=>Se(null),se.src=ne})}catch{return null}}async function ir(){try{const l=Date.now();if(l-ar<5e3||(ar=l,!o.isComponent||!k.value))return;const n=kt.value;if(!n)return;const a=n.firstElementChild;if(!a)return;const u=await Lr(a,{maxWidth:420,quality:.8});if(!u)return;const c=String(k.value),f=await _e.getComponent(c);if(!f)return;const S={...f,previewDataUrl:u,updatedAt:Date.now()};await _e.saveComponent(JSON.parse(JSON.stringify(S)))}catch(l){console.warn("生成缩略图失败：",l)}}return(l,n)=>{var a,u,c,f,S,C,M,y;return O(),D(At,null,[r("div",ci,[n[52]||(n[52]=Wr('<div class="absolute inset-0 opacity-10" data-v-b1b3dae8><div class="absolute top-10 left-10 w-32 h-32 border border-cyan-400 rotate-45 animate-pulse" data-v-b1b3dae8></div><div class="absolute top-32 right-20 w-24 h-24 border border-purple-400 rounded-full animate-spin" style="animation-duration:20s;" data-v-b1b3dae8></div><div class="absolute bottom-20 left-1/4 w-40 h-40 border border-blue-400 rotate-12 animate-bounce" style="animation-duration:3s;" data-v-b1b3dae8></div><div class="absolute bottom-32 right-1/3 w-28 h-28 border border-green-400 rounded-lg rotate-45 animate-pulse" style="animation-delay:1s;" data-v-b1b3dae8></div></div><div class="absolute inset-0 opacity-5" style="background-image:linear-gradient(cyan 1px, transparent 1px), linear-gradient(90deg, cyan 1px, transparent 1px);background-size:50px 50px;" data-v-b1b3dae8></div>',2)),r("div",pi,[r("div",fi,[n[49]||(n[49]=r("div",{class:"p-4 border-b border-cyan-500/30 bg-gradient-to-r from-cyan-600/20 to-blue-600/20 flex-shrink-0"},[r("h2",{class:"text-lg font-bold text-cyan-300 flex items-center gap-2"},[r("span",{class:"w-2 h-2 bg-cyan-400 rounded-full animate-pulse"}),ur(" 画布设置 ")])],-1)),r("div",gi,[r("div",yi,[n[35]||(n[35]=r("label",{class:"block text-sm font-medium text-cyan-300"},"组件名称",-1)),ue(r("input",{"onUpdate:modelValue":n[0]||(n[0]=s=>ge.value=s),class:"w-full px-3 py-2 bg-gray-800/50 border border-cyan-500/30 rounded-lg text-gray-100 placeholder-gray-400 focus:border-cyan-400 focus:ring-1 focus:ring-cyan-400 focus:outline-none transition-all duration-200",placeholder:"GeneratedComponent"},null,512),[[ye,ge.value]])]),r("div",mi,[n[36]||(n[36]=r("label",{class:"block text-sm font-medium text-cyan-300"},"画布尺寸",-1)),r("div",bi,[ue(r("input",{"onUpdate:modelValue":n[1]||(n[1]=s=>E.width=s),type:"number",class:"px-3 py-2 bg-gray-800/50 border border-cyan-500/30 rounded-lg text-gray-100 focus:border-cyan-400 focus:ring-1 focus:ring-cyan-400 focus:outline-none transition-all duration-200",placeholder:"宽度"},null,512),[[ye,E.width,void 0,{number:!0}]]),ue(r("input",{"onUpdate:modelValue":n[2]||(n[2]=s=>E.height=s),type:"number",class:"px-3 py-2 bg-gray-800/50 border border-cyan-500/30 rounded-lg text-gray-100 focus:border-cyan-400 focus:ring-1 focus:ring-cyan-400 focus:outline-none transition-all duration-200",placeholder:"高度"},null,512),[[ye,E.height,void 0,{number:!0}]])])]),r("div",xi,[n[37]||(n[37]=r("label",{class:"block text-sm font-medium text-cyan-300"},"背景图片",-1)),r("div",hi,[r("input",{type:"file",onChange:Er,accept:"image/*",class:"flex-1 text-xs text-gray-300 file:mr-2 file:py-1 file:px-2 file:rounded file:border-0 file:text-xs file:bg-cyan-600 file:text-white hover:file:bg-cyan-500 file:cursor-pointer"},null,32)])]),r("div",vi,[n[38]||(n[38]=r("label",{class:"block text-sm font-medium text-cyan-300"},"背景颜色",-1)),r("div",wi,[r("input",{value:Wt(E.backgroundColor),type:"color",onInput:n[3]||(n[3]=s=>{E.backgroundColor=s.target.value}),class:"w-16 h-8 bg-gray-800/50 border border-cyan-500/30 rounded cursor-pointer"},null,40,$i),ue(r("input",{"onUpdate:modelValue":n[4]||(n[4]=s=>E.backgroundColor=s),type:"text",class:"flex-1 px-3 py-2 bg-gray-800/50 border border-cyan-500/30 rounded-lg text-gray-100 placeholder-gray-400 focus:border-cyan-400 focus:ring-1 focus:ring-cyan-400 focus:outline-none transition-all duration-200",placeholder:"#000000 或 rgba(...)"},null,512),[[ye,E.backgroundColor]])])]),r("div",ki,[n[42]||(n[42]=r("h3",{class:"text-sm font-medium text-cyan-300 border-b border-cyan-500/30 pb-1"},"全局字体设置",-1)),r("div",Ei,[n[39]||(n[39]=r("label",{class:"block text-xs text-gray-400"},"字体族",-1)),ft(St,{options:V.value,modelValue:E.globalFontFamily,"onUpdate:modelValue":n[5]||(n[5]=s=>E.globalFontFamily=s),placeholder:"选择字体"},null,8,["options","modelValue"])]),r("div",Si,[n[40]||(n[40]=r("label",{class:"block text-xs text-gray-400"},"字号 (px)",-1)),ue(r("input",{"onUpdate:modelValue":n[6]||(n[6]=s=>E.globalFontSize=s),type:"number",class:"w-full px-2 py-1 bg-gray-800/50 border border-cyan-500/30 rounded text-gray-100 text-sm focus:border-cyan-400 focus:ring-1 focus:ring-cyan-400 focus:outline-none transition-all duration-200"},null,512),[[ye,E.globalFontSize,void 0,{number:!0}]])]),r("div",Mi,[n[41]||(n[41]=r("label",{class:"block text-xs text-gray-400"},"颜色",-1)),ue(r("input",{"onUpdate:modelValue":n[7]||(n[7]=s=>E.globalColor=s),type:"color",class:"w-full h-8 bg-gray-800/50 border border-cyan-500/30 rounded cursor-pointer"},null,512),[[ye,E.globalColor]])])]),r("div",Ci,[n[47]||(n[47]=r("h3",{class:"text-sm font-medium text-cyan-300 border-b border-cyan-500/30 pb-1"},"辅助间距",-1)),r("div",Ni,[n[44]||(n[44]=r("label",{class:"text-xs text-gray-400"},"显示间距标注",-1)),r("label",Ii,[ue(r("input",{type:"checkbox",class:"sr-only peer","onUpdate:modelValue":n[8]||(n[8]=s=>rt.value=s)},null,512),[[qr,rt.value]]),n[43]||(n[43]=r("div",{class:"relative w-12 h-6 rounded-full bg-gray-700/60 transition-all duration-200 shadow-inner peer-checked:bg-gradient-to-r peer-checked:from-cyan-600 peer-checked:to-blue-600"},[r("div",{class:"absolute left-0.5 top-0.5 w-5 h-5 bg-white rounded-full shadow transform transition-transform duration-200 peer-checked:translate-x-6"})],-1)),r("span",{class:Be(["ml-3 text-xs",rt.value?"text-cyan-300":"text-gray-300"])},Ke(rt.value?"已开启":"已关闭"),3)])]),r("div",Fi,[n[46]||(n[46]=r("label",{class:"text-xs text-gray-400"},"显示对齐参考线",-1)),r("label",ji,[ue(r("input",{type:"checkbox",class:"sr-only peer","onUpdate:modelValue":n[9]||(n[9]=s=>ot.value=s)},null,512),[[qr,ot.value]]),n[45]||(n[45]=r("div",{class:"relative w-12 h-6 rounded-full bg-gray-700/60 transition-all duration-200 shadow-inner peer-checked:bg-gradient-to-r peer-checked:from-cyan-600 peer-checked:to-blue-600"},[r("div",{class:"absolute left-0.5 top-0.5 w-5 h-5 bg-white rounded-full shadow transform transition-transform duration-200 peer-checked:translate-x-6"})],-1)),r("span",{class:Be(["ml-3 text-xs",ot.value?"text-cyan-300":"text-gray-300"])},Ke(ot.value?"已开启":"已关闭"),3)])])]),r("div",zi,[r("button",{onClick:he,class:"w-full px-4 py-2 bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-500 hover:to-blue-500 text-white rounded-lg font-medium transition-all duration-200 transform hover:scale-105 shadow-lg shadow-cyan-500/25"}," 预览（新窗口） "),r("div",Ai,[r("button",{onClick:Dr,class:"w-full px-4 py-2 bg-gradient-to-r from-emerald-600 to-cyan-600 hover:from-emerald-500 hover:to-cyan-500 text-white rounded-lg font-medium transition-all duration-200 transform hover:scale-105 shadow-lg shadow-emerald-500/25"}," 导出 "),it.value?(O(),D("div",Oi,[r("div",{class:"absolute inset-0 bg-black/60",onClick:n[10]||(n[10]=s=>it.value=!1)}),r("div",Di,[r("div",Gi,[n[48]||(n[48]=r("h3",{class:"text-sm font-medium text-emerald-300"},"选择导出格式",-1)),r("button",{class:"px-2 py-1 text-xs bg-gray-700/60 hover:bg-gray-600/60 rounded text-gray-200",onClick:n[11]||(n[11]=s=>it.value=!1)},"关闭")]),r("div",Bi,[r("button",{onClick:n[12]||(n[12]=s=>{Ft("vue2"),it.value=!1}),class:"px-3 py-2 text-xs bg-gradient-to-r from-emerald-600 to-cyan-600 hover:from-emerald-500 hover:to-cyan-500 text-white rounded"},"Vue2 组件"),r("button",{onClick:n[13]||(n[13]=s=>{Ft("vue3"),it.value=!1}),class:"px-3 py-2 text-xs bg-gradient-to-r from-teal-600 to-cyan-600 hover:from-teal-500 hover:to-cyan-500 text-white rounded"},"Vue3 组件"),r("button",{onClick:n[14]||(n[14]=s=>{Ft("react"),it.value=!1}),class:"px-3 py-2 text-xs bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-500 hover:to-purple-500 text-white rounded"},"React 组件"),r("button",{onClick:n[15]||(n[15]=s=>{Ft("html"),it.value=!1}),class:"px-3 py-2 text-xs bg-gradient-to-r from-slate-600 to-gray-700 hover:from-slate-500 hover:to-gray-600 text-white rounded"},"纯 HTML 页面"),r("button",{onClick:n[16]||(n[16]=s=>{Sr(),it.value=!1}),class:"px-3 py-2 text-xs bg-gradient-to-r from-emerald-600 to-teal-600 hover:from-emerald-500 hover:to-teal-500 text-white rounded col-span-2"},"一键导出（全部）")])])])):K("",!0)]),r("button",{onClick:Mr,class:"w-full px-4 py-2 bg-gradient-to-r from-red-600 to-pink-600 hover:from-red-500 hover:to-pink-500 text-white rounded-lg font-medium transition-all duration-200 transform hover:scale-105 shadow-lg shadow-red-500/25"}," 清空画布 ")])])]),r("div",Ui,[r("div",Vi,[r("div",Li,[r("div",Ri,[r("button",{onMouseenter:jr,onMouseleave:zr,onClick:n[17]||(n[17]=s=>lt.value=!0),class:"px-4 py-2 bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-500 hover:to-blue-500 text-white rounded-lg font-medium transition-all duration-200 transform hover:scale-105 shadow-lg shadow-cyan-500/25"}," 插入元素 ",32),ue(r("div",{onMouseenter:Ar,onMouseleave:Or,class:"absolute left-0 top-full w-72 p-3 bg-gray-900/95 backdrop-blur-md border border-cyan-500/40 rounded-xl shadow-2xl z-50"},[r("div",Ti,[r("button",{onClick:n[18]||(n[18]=s=>{Xe("text"),lt.value=!1}),class:"px-3 py-2 text-xs bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-500 hover:to-blue-500 text-white rounded"},"文本"),r("button",{onClick:n[19]||(n[19]=s=>{Xe("image"),lt.value=!1}),class:"px-3 py-2 text-xs bg-gradient-to-r from-emerald-600 to-green-600 hover:from-emerald-500 hover:to-green-500 text-white rounded"},"图片"),r("button",{onClick:n[20]||(n[20]=s=>{Xe("chart"),lt.value=!1}),class:"px-3 py-2 text-xs bg-gradient-to-r from-orange-600 to-red-600 hover:from-orange-500 hover:to-red-500 text-white rounded"},"图表"),r("button",{onClick:n[21]||(n[21]=s=>{Xe("line"),lt.value=!1}),class:"px-3 py-2 text-xs bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-500 hover:to-purple-500 text-white rounded"},"线条"),r("button",{onClick:n[22]||(n[22]=s=>{Xe("container"),lt.value=!1}),class:"px-3 py-2 text-xs bg-gradient-to-r from-slate-600 to-gray-700 hover:from-slate-500 hover:to-gray-600 text-white rounded col-span-2"},"容器")])],544),[[kl,lt.value]])]),r("button",{onClick:n[23]||(n[23]=s=>ut.value=!0),class:"px-4 py-2 bg-gradient-to-r from-gray-600 to-slate-700 hover:from-gray-500 hover:to-slate-600 text-white rounded-lg font-medium transition-all duration-200 transform hover:scale-105 shadow-lg shadow-gray-500/25"}," 隐藏元素 "),r("button",{onClick:Fr,class:"px-4 py-2 bg-gradient-to-r from-pink-600 to-fuchsia-600 hover:from-pink-500 hover:to-fuchsia-500 text-white rounded-lg font-medium transition-all duration-200 transform hover:scale-105 shadow-lg shadow-pink-500/25"}," 插入组件 ")]),r("div",Pi,[r("button",{onClick:Nr,class:"p-2 bg-gray-700/50 hover:bg-gray-600/50 rounded-lg transition-colors duration-200"},[...n[50]||(n[50]=[r("span",{class:"text-gray-300"},"-",-1)])]),r("span",_i,Ke(Math.round(at.value*100))+"%",1),r("button",{onClick:Cr,class:"p-2 bg-gray-700/50 hover:bg-gray-600/50 rounded-lg transition-colors duration-200"},[...n[51]||(n[51]=[r("span",{class:"text-gray-300"},"+",-1)])]),r("button",{onClick:Zt,class:"px-3 py-2 bg-gray-700/50 hover:bg-gray-600/50 rounded-lg text-xs text-gray-300 transition-colors duration-200"}," 适应 ")])]),r("div",{ref_key:"canvasScrollRef",ref:kt,class:"flex-1 overflow-auto bg-gray-800/30 p-4 min-h-0 custom-scrollbar"},[r("div",{class:"relative border border-gray-600/50 bg-gray-100 shadow-2xl mx-auto",onMousedown:il(Ct,["self"]),style:Qe({width:`${E.width}px`,height:`${E.height}px`,backgroundColor:E.backgroundColor||"transparent",backgroundImage:E.backgroundUrl?`url(${E.backgroundUrl})`:"none",backgroundSize:"cover",backgroundPosition:"center",transform:`scale(${at.value})`,transformOrigin:"top left"})},[Ae.value?(O(),D("div",Hi,[Ce.value.left?(O(),D("div",{key:0,class:"absolute top-0 bottom-0 border-l border-dashed border-orange-400/70",style:Qe([{"border-width":"0.5px"},{left:`${be.value.left}px`}])},null,4)):K("",!0),Ce.value.right?(O(),D("div",{key:1,class:"absolute top-0 bottom-0 border-l border-dashed border-orange-400/70",style:Qe([{"border-width":"0.5px"},{left:`${be.value.right}px`}])},null,4)):K("",!0),Ce.value.top?(O(),D("div",{key:2,class:"absolute left-0 right-0 border-t border-dashed border-orange-400/70",style:Qe([{"border-width":"0.5px"},{top:`${be.value.top}px`}])},null,4)):K("",!0),Ce.value.bottom?(O(),D("div",{key:3,class:"absolute left-0 right-0 border-t border-dashed border-orange-400/70",style:Qe([{"border-width":"0.5px"},{top:`${be.value.bottom}px`}])},null,4)):K("",!0),Ce.value.centerV?(O(),D("div",{key:4,class:"absolute top-0 bottom-0 border-l border-dashed border-blue-400/60",style:Qe([{"border-width":"0.5px"},{left:`${be.value.centerX}px`}])},null,4)):K("",!0),Ce.value.centerH?(O(),D("div",{key:5,class:"absolute left-0 right-0 border-t border-dashed border-blue-400/60",style:Qe([{"border-width":"0.5px"},{top:`${be.value.centerY}px`}])},null,4)):K("",!0)])):K("",!0),rt.value&&(le.value.left||le.value.right||le.value.up||le.value.down)?(O(),D("div",Wi,[le.value.left&&Ee.value!=="left"?(O(),D("div",{key:0,class:"absolute text-[10px] px-1.5 py-0.5 rounded bg-gray-900/80 border border-orange-400/60 text-orange-200 cursor-pointer pointer-events-auto",style:Qe({left:`${le.value.left.x-14}px`,top:`${le.value.left.y-14}px`}),onDblclick:n[24]||(n[24]=s=>ht("left"))},Ke(le.value.left.gap)+"px ",37)):K("",!0),le.value.right&&Ee.value!=="right"?(O(),D("div",{key:1,class:"absolute text-[10px] px-1.5 py-0.5 rounded bg-gray-900/80 border border-orange-400/60 text-orange-200 cursor-pointer pointer-events-auto",style:Qe({left:`${le.value.right.x-14}px`,top:`${le.value.right.y-14}px`}),onDblclick:n[25]||(n[25]=s=>ht("right"))},Ke(le.value.right.gap)+"px ",37)):K("",!0),le.value.up&&Ee.value!=="up"?(O(),D("div",{key:2,class:"absolute text-[10px] px-1.5 py-0.5 rounded bg-gray-900/80 border border-orange-400/60 text-orange-200 cursor-pointer pointer-events-auto",style:Qe({left:`${le.value.up.x-14}px`,top:`${le.value.up.y-18}px`}),onDblclick:n[26]||(n[26]=s=>ht("up"))},Ke(le.value.up.gap)+"px ",37)):K("",!0),le.value.down&&Ee.value!=="down"?(O(),D("div",{key:3,class:"absolute text-[10px] px-1.5 py-0.5 rounded bg-gray-900/80 border border-orange-400/60 text-orange-200 cursor-pointer pointer-events-auto",style:Qe({left:`${le.value.down.x-14}px`,top:`${le.value.down.y-18}px`}),onDblclick:n[27]||(n[27]=s=>ht("down"))},Ke(le.value.down.gap)+"px ",37)):K("",!0),Ee.value==="left"?ue((O(),D("input",{key:4,type:"number",class:"absolute w-14 h-6 px-1 text-[10px] rounded bg-gray-900/90 border border-orange-400/80 text-orange-100 focus:outline-none pointer-events-auto",style:Qe({left:`${(((a=le.value.left)==null?void 0:a.x)||0)-28}px`,top:`${(((u=le.value.left)==null?void 0:u.y)||0)-14}px`}),"onUpdate:modelValue":n[28]||(n[28]=s=>me.value=s),onKeydown:Tr(vt,["enter"])},null,36)),[[ye,me.value,void 0,{number:!0}]]):K("",!0),Ee.value==="right"?ue((O(),D("input",{key:5,type:"number",class:"absolute w-14 h-6 px-1 text-[10px] rounded bg-gray-900/90 border border-orange-400/80 text-orange-100 focus:outline-none pointer-events-auto",style:Qe({left:`${(((c=le.value.right)==null?void 0:c.x)||0)-28}px`,top:`${(((f=le.value.right)==null?void 0:f.y)||0)-14}px`}),"onUpdate:modelValue":n[29]||(n[29]=s=>me.value=s),onKeydown:Tr(vt,["enter"])},null,36)),[[ye,me.value,void 0,{number:!0}]]):K("",!0),Ee.value==="up"?ue((O(),D("input",{key:6,type:"number",class:"absolute w-14 h-6 px-1 text-[10px] rounded bg-gray-900/90 border border-orange-400/80 text-orange-100 focus:outline-none pointer-events-auto",style:Qe({left:`${(((S=le.value.up)==null?void 0:S.x)||0)-28}px`,top:`${(((C=le.value.up)==null?void 0:C.y)||0)-18}px`}),"onUpdate:modelValue":n[30]||(n[30]=s=>me.value=s),onKeydown:Tr(vt,["enter"])},null,36)),[[ye,me.value,void 0,{number:!0}]]):K("",!0),Ee.value==="down"?ue((O(),D("input",{key:7,type:"number",class:"absolute w-14 h-6 px-1 text-[10px] rounded bg-gray-900/90 border border-orange-400/80 text-orange-100 focus:outline-none pointer-events-auto",style:Qe({left:`${(((M=le.value.down)==null?void 0:M.x)||0)-28}px`,top:`${(((y=le.value.down)==null?void 0:y.y)||0)-18}px`}),"onUpdate:modelValue":n[31]||(n[31]=s=>me.value=s),onKeydown:Tr(vt,["enter"])},null,36)),[[ye,me.value,void 0,{number:!0}]]):K("",!0)])):K("",!0),(O(!0),D(At,null,Pt(U.value,s=>(O(),al(Ml,{key:s.id,element:s,selected:s.id===m.value,"selected-id":m.value,config:E,zoom:at.value,dbMap:_t.value,"metrics-map":H.value,onSelect:Mt,"onUpdate:position":mt,"onUpdate:size":bt,onShowGuidelines:xt,onHideGuidelines:Le,onReportMetrics:He},null,8,["element","selected","selected-id","config","zoom","dbMap","metrics-map"]))),128))],36)],512)]),ft(ui,{selectedEl:st.value,config:E,fontLibrary:V.value,fontSizeLibrary:P.value,fontWeightOptions:te.value,fontStyleOptions:we.value,databaseObjects:_.value,dbMap:_t.value,iconLibrary:Qt.value,defaultChartOption:We,safeHex:Wt,initCustomClassSkeleton:xr,refreshAllCustomClassCss:Dt,removeCustomClassCssForElement:qt,getIconDataUrlById:zt,onDuplicateSelected:Ir,onRemoveSelected:br,onSaveSelectedAsComponent:$r},null,8,["selectedEl","config","fontLibrary","fontSizeLibrary","fontWeightOptions","fontStyleOptions","databaseObjects","dbMap","iconLibrary"])])]),jt.value?(O(),D("div",Ji,[r("div",{class:"absolute inset-0 bg-black/60",onClick:nr}),r("div",qi,[r("div",{class:"flex items-center justify-between p-4 border-b border-fuchsia-500/30 bg-gradient-to-r from-fuchsia-600/20 to-pink-600/20"},[n[53]||(n[53]=r("h3",{class:"text-lg font-bold text-pink-300"},"插入组件",-1)),r("button",{onClick:nr,class:"px-3 py-1 bg-gray-700/60 hover:bg-gray-600/60 rounded text-sm text-gray-200"},"关闭")]),r("div",Xi,[r("div",Yi,[ue(r("input",{"onUpdate:modelValue":n[32]||(n[32]=s=>Bt.value=s),type:"text",placeholder:"搜索名称、描述或标签",class:"flex-1 px-3 py-2 bg-gray-800/60 border border-fuchsia-500/30 rounded-lg text-gray-100 placeholder-gray-400 focus:border-fuchsia-400 focus:ring-1 focus:ring-fuchsia-400 focus:outline-none transition-all duration-200"},null,512),[[ye,Bt.value]]),r("button",{onClick:rr,class:"px-3 py-2 bg-pink-600/70 hover:bg-pink-600 text-white rounded"},"刷新")]),Ut.value?(O(),D("div",Ki,"正在加载组件...")):(O(),D("div",Zi,[tr.value.length===0?(O(),D("div",Qi,"暂无匹配的组件")):(O(),D("div",ed,[(O(!0),D(At,null,Pt(tr.value,s=>(O(),D("div",{key:s.id,class:"bg-gray-800/60 border border-pink-500/20 rounded-lg overflow-hidden"},[r("div",td,[s.previewDataUrl?(O(),D("img",{key:0,src:s.previewDataUrl,alt:"预览",class:"max-w-full max-h-full object-contain"},null,8,rd)):(O(),D("div",nd,"无预览"))]),r("div",ld,[r("div",od,[r("div",{class:"text-sm text-gray-100 font-medium truncate",title:s.name},Ke(s.name),9,sd),r("div",ad,Ke(s.usageCount||0)+" 次",1)]),r("div",id,[(O(!0),D(At,null,Pt(s.tags||[],$=>(O(),D("span",{key:$,class:"px-1.5 py-0.5 text-[10px] rounded bg-pink-600/30 text-pink-200"},Ke($),1))),128))]),r("div",dd,[r("button",{onClick:$=>Br(s),class:"w-full px-3 py-1.5 bg-gradient-to-r from-pink-600 to-fuchsia-600 hover:from-pink-500 hover:to-fuchsia-500 text-white rounded text-sm transition"}," 插入到画布 ",8,ud)])])]))),128))]))]))])])])):K("",!0),ut.value?(O(),D("div",cd,[r("div",{class:"absolute inset-0 bg-black/60",onClick:n[33]||(n[33]=s=>ut.value=!1)}),r("div",pd,[r("div",fd,[n[54]||(n[54]=r("h3",{class:"text-lg font-bold text-cyan-300"},"隐藏元素列表",-1)),r("button",{onClick:n[34]||(n[34]=s=>ut.value=!1),class:"px-3 py-1 bg-gray-700/60 hover:bg-gray-600/60 rounded text-sm text-gray-200"},"关闭")]),r("div",gd,[Ve.value.length===0?(O(),D("div",yd,"暂无隐藏元素")):(O(),D("div",md,[(O(!0),D(At,null,Pt(Ve.value,s=>(O(),D("div",{key:s.id,class:"flex items-center justify-between bg-gray-800/60 border border-cyan-500/20 rounded-lg px-3 py-2"},[r("div",{class:"text-sm text-gray-100 truncate",title:s.hiddenLabel||s.className||s.id},Ke(s.hiddenLabel||s.className||s.id),9,bd),r("button",{onClick:$=>Je(s.id),class:"px-3 py-1 bg-cyan-600/70 hover:bg-cyan-600 text-white rounded text-sm"},"取消隐藏并定位",8,xd)]))),128))]))])])])):K("",!0)],64)}}}),wd=Yr(vd,[["__scopeId","data-v-b1b3dae8"]]),$d=cr({__name:"index",props:{projectId:{},currentProject:{},isComponent:{type:Boolean}},setup(x){const o=x;return(e,g)=>(O(),al(wd,{"project-id":o.projectId,"current-project":o.currentProject,"is-component":o.isComponent},null,8,["project-id","current-project","is-component"]))}}),Fd=$d;export{Fd as default};
