import{i as jo}from"./rolldown-runtime-CKFmjIRy.js";import{C as yr,E as C,H as Fo,I as fe,L as wo,O as Kt,P as Qt,R as pe,S as ur,_ as dl,b as il,c as st,ct as Bt,d as Y,f as N,g as Ct,h as Vl,i as To,l,lt as it,m as dr,n as Lo,o as Wt,r as Uo,st as Ne,t as Vo,u as Pl,w as fr}from"./codemirror-B25QCqWr.js";import{d as $o,f as Me,h as br,m as ar,n as Ro,o as Po,p as Wo,r as Ho,s as Jo,u as Rl}from"./vendor-vue-C93_ecI2.js";import{t as xr}from"./index-BuLERHzw.js";import{t as St}from"./componentStorage-k4mRdpgu.js";import"./echarts-xBohgwka.js";import{t as _o}from"./DraggableBox-BZSNzN8a.js";function Sl(f){return f.replace(/[&<>"']/g,a=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"})[a]||a)}function qo(f,a=!1){var D,P;const e=f.style||{},d=[],S=f.position||(a?"static":"absolute");if(S==="absolute"?(d.push("position:absolute"),d.push(`left:${Math.round(f.left||0)}px`),d.push(`top:${Math.round(f.top||0)}px`)):S==="relative"&&(d.push("position:relative"),f.left!==void 0&&d.push(`left:${Math.round(f.left||0)}px`),f.top!==void 0&&d.push(`top:${Math.round(f.top||0)}px`)),f.autoSize||(f.width&&d.push(`width:${Math.round(f.width)}px`),f.height&&d.push(`height:${Math.round(f.height)}px`)),e.opacity!==void 0&&d.push(`opacity:${e.opacity}`),e.border&&!(f.type==="container"&&e.border==="1px dashed rgba(148,163,184,0.6)")&&d.push(`border:${e.border}`),e.borderRadius&&d.push(`border-radius:${e.borderRadius}`),e.backgroundColor&&d.push(`background-color:${e.backgroundColor}`),e.boxShadow&&d.push(`box-shadow:${e.boxShadow}`),e.display&&d.push(`display:${e.display}`),e.flexDirection&&d.push(`flex-direction:${e.flexDirection}`),e.justifyContent&&d.push(`justify-content:${e.justifyContent}`),e.alignItems&&d.push(`align-items:${e.alignItems}`),e.gap!==void 0&&d.push(`gap:${Math.round(Number(e.gap))}px`),e.backgroundGradient&&((D=e.backgroundGradient.colors)!=null&&D.length)){const le=e.backgroundGradient.angle||0,be=e.backgroundGradient.colors[0]||"#000000",$=e.backgroundGradient.colors[1]||"#000000";d.push(`background-image:linear-gradient(${le}deg, ${be}, ${$})`),d.push("background-size:cover"),d.push("background-repeat:no-repeat")}if(f.type==="text"){e.fontFamily&&d.push(`font-family:${e.fontFamily}`),e.fontSize!==void 0&&d.push(`font-size:${e.fontSize}px`),e.color&&d.push(`color:${e.color}`),e.fontWeight&&d.push(`font-weight:${e.fontWeight}`),e.letterSpacing!==void 0&&e.letterSpacing!==null&&d.push(`letter-spacing:${e.letterSpacing}px`),e.lineHeight!==void 0&&d.push(`line-height:${e.lineHeight}`),e.fontStyle&&d.push(`font-style:${e.fontStyle}`),e.textAlign&&d.push(`text-align:${e.textAlign}`),e.textDecoration&&d.push(`text-decoration:${e.textDecoration}`),e.textIndent&&d.push(`text-indent:${e.textIndent}`);const le=e.textOrientation;if(le==="vertical"?(d.push("writing-mode:vertical-rl"),d.push("text-orientation:upright")):le==="horizontal"&&d.push("writing-mode:horizontal-tb"),e.textGradient&&((P=e.textGradient.colors)!=null&&P.length)){const be=e.textGradient.angle||0,$=e.textGradient.colors[0]||"#000000",ue=e.textGradient.colors[1]||"#000000";d.push(`background-image:linear-gradient(${be}deg, ${$}, ${ue})`),d.push("-webkit-background-clip:text"),d.push("background-clip:text"),d.push("color:transparent")}}return f.type==="image"&&e.objectFit&&d.push(`object-fit:${e.objectFit}`),d.join(";")}function Yo(f,a=!1){var D;const e=f.style||{},d=[],S=f.position||(a?"static":"absolute");if(S==="absolute"?(d.push("position:absolute"),d.push(`left:${Math.round(f.left||0)}px`),d.push(`top:${Math.round(f.top||0)}px`)):S==="relative"&&(d.push("position:relative"),f.left!==void 0&&d.push(`left:${Math.round(f.left||0)}px`),f.top!==void 0&&d.push(`top:${Math.round(f.top||0)}px`)),f.autoSize||(f.width&&d.push(`width:${Math.round(f.width)}px`),f.height&&d.push(`height:${Math.round(f.height)}px`)),f.type!=="text"&&(e.opacity!==void 0&&d.push(`opacity:${e.opacity}`),e.border&&!(f.type==="container"&&e.border==="1px dashed rgba(148,163,184,0.6)")&&d.push(`border:${e.border}`),e.borderRadius&&d.push(`border-radius:${e.borderRadius}`),e.backgroundColor&&d.push(`background-color:${e.backgroundColor}`),e.boxShadow&&d.push(`box-shadow:${e.boxShadow}`),e.display&&d.push(`display:${e.display}`),e.flexDirection&&d.push(`flex-direction:${e.flexDirection}`),e.justifyContent&&d.push(`justify-content:${e.justifyContent}`),e.alignItems&&d.push(`align-items:${e.alignItems}`),e.gap!==void 0&&d.push(`gap:${Math.round(Number(e.gap))}px`),e.backgroundGradient&&((D=e.backgroundGradient.colors)!=null&&D.length))){const P=e.backgroundGradient.angle||0,le=e.backgroundGradient.colors[0]||"#000000",be=e.backgroundGradient.colors[1]||"#000000";d.push(`background-image:linear-gradient(${P}deg, ${le}, ${be})`),d.push("background-size:cover"),d.push("background-repeat:no-repeat")}return d.join(";")}function Ko(f){const a=f.style||{},e=[];return a.fontFamily&&e.push(`font-family:${a.fontFamily}`),a.fontSize!==void 0&&e.push(`font-size:${a.fontSize}px`),a.fontWeight&&e.push(`font-weight:${a.fontWeight}`),a.fontStyle&&e.push(`font-style:${a.fontStyle}`),a.letterSpacing!==void 0&&a.letterSpacing!==null&&e.push(`letter-spacing:${a.letterSpacing}px`),a.color&&e.push(`fill:${a.color}`),e.join(";")}function Xo(f){var g,m,U,V;const a=Math.max(1,Math.round(f.width||1)),e=Math.max(1,Math.round(f.height||1)),d=a/2,S=e/2,D=((g=f.style)==null?void 0:g.arcText)||{},P=Math.max(1,Number((m=D.radius)!=null?m:Math.min(a,e)/2-4)),le=Number((U=D.startAngle)!=null?U:0),be=Math.max(0,Number((V=D.sweepAngle)!=null?V:180)),$=D.clockwise!==!1,ue=le*Math.PI/180,ze=(le+be)*Math.PI/180,Ge=d+P*Math.cos(ue),je=S+P*Math.sin(ue),se=d+P*Math.cos(ze),M=S+P*Math.sin(ze);return`M ${Ge} ${je} A ${P} ${P} 0 ${be>180?1:0} ${$?1:0} ${se} ${M}`}function Zo(f){var e;const a=((e=f.style)==null?void 0:e.textAlign)||"center";return a==="left"?"0%":a==="right"?"100%":"50%"}function Qo(f){var e;const a=((e=f.style)==null?void 0:e.textAlign)||"center";return a==="left"?"start":a==="right"?"end":"middle"}function Ao(f){return String(f).split(";").map(a=>a.trim()).filter(Boolean).map(a=>a.includes("!important")?a:`${a} !important`).join("; ")}function es(f){return String(f).replace(/\{([^}]*)\}/g,(a,e)=>`{ ${Ao(e)} }`)}function ts(f){const a=[],e=d=>{d.forEach(S=>{if((S.type==="group"||S.type==="container")&&Array.isArray(S.children))e(S.children);else{const D=(S.className||"").trim(),P=S.customClassCss?String(S.customClassCss).trim():"";if(!D||!P)return;/\{[^}]*\}/.test(P)?a.push(es(P)):a.push(`.${D} { ${Ao(P)} }`)}})};return e(f),a.join(`
`)}function ls(f){return f.replace(/[A-Z]/g,a=>`-${a.toLowerCase()}`)}function Pt(f){return`\`
${Object.entries(f).map(([a,e])=>`      ${ls(a)}: ${e};`).join(`
`)}
    \``}function Eo(f,a,e,d,S){const D=f.replace(/[^A-Za-z0-9_]/g,"_");let P=0;const le=`lc-${D}-root`,be=`lc-${D}-bg`,$=`lc-${D}-flex-left`,ue=`lc-${D}-flex-center`,ze=`lc-${D}-flex-right`,Ge=[],je=[],se=[],M=new Map,g=new Map,m=[],U=new Set;function V(o){if(!U.has(o))return U.add(o),o;let Z=2;for(;U.has(`${o}_${Z}`);)Z++;const Q=`${o}_${Z}`;return U.add(Q),Q}function L(o){var Ee;const Z=o.style||{},Q=[],nt=Z.color,Pe=Z.textGradient;if(Pe&&((Ee=Pe.colors)!=null&&Ee.length)){const Lt=Pe.angle||0,Ut=Pe.colors[0]||"#000000",Ht=Pe.colors[1]||"#000000";Q.push(`background-image:linear-gradient(${Lt}deg, ${Ut}, ${Ht})`),Q.push("-webkit-background-clip:text"),Q.push("background-clip:text"),Q.push("color:transparent")}else nt&&Q.push(`color:${nt}`);const We=Z.fontWeight;We&&Q.push(`font-weight:${We}`);const gt=Z.fontStyle;gt&&Q.push(`font-style:${gt}`);const Ft=Z.textOrientation;Ft==="vertical"?(Q.push("writing-mode:vertical-rl"),Q.push("text-orientation:upright")):Ft==="horizontal"&&Q.push("writing-mode:horizontal-tb");const ut=Q.join(";"),Qe=Q.join(";");return{key:ut,css:Qe}}function q(){const o=[],Z=nt=>{nt.forEach(Pe=>{if((Pe.type==="group"||Pe.type==="container")&&Array.isArray(Pe.children))Z(Pe.children);else if(Pe.type==="text"){const We=((Pe.style||{}).fontFamily||"").trim();We&&!M.has(We)&&(o.push(We),M.set(We,`lc-${D}-f${o.length}`));const{key:gt,css:Ft}=L(Pe);if(gt){const ut=g.get(gt);ut?ut.count++:g.set(gt,{count:1,css:Ft})}}})};Z(e);let Q=1;Array.from(g.entries()).forEach(([nt,Pe])=>{Pe.count>=3&&(Pe.className=`lc-${D}-s${Q++}`)})}q();const Oe=a.backgroundUrl||"",K=a.backgroundColor||"transparent",G=a.globalFontFamily||"",ne=a.globalFontSize||14,rt=a.globalColor||"#000000",pt=e.some(o=>o.type==="chart"),ae=d!=null&&d.backgroundFileName&&d.backgroundFileName.trim()?`require('./imgs/${d.backgroundFileName.replace(/'/g,"\\'")}')`:Oe?`'${Oe.replace(/'/g,"\\'")}'`:"''";function dt(o){const Z=String(o||"").trim();if(!Z)return"";let Q=Z.replace(/[^A-Za-z0-9_]/g,"_");return/[A-Za-z_]/.test(Q[0]||"")||(Q="_"+Q),Q}function Re(o){if(!o.hidden)return"";const Z=dt(o.hiddenLabel);return Z?` ${d&&d.hideDirective==="show"?"v-show":"v-if"}="${Z}"`:""}function Je(o,Z,Q=!1){var Ee,Lt,Ut,Ht,el,ul,gl,yt,bt,Vt,sl,Xt,tl,mt,cl,fl,yl,ll,rl;const nt=o,Pe=nt.type==="text"?Yo(nt,Q):qo(nt,Q),We=o.zIndex||1,gt=o.className&&o.className.trim()?` class="${o.className.trim()}"`:"",Ft=o.eventBinding,ut=Ft&&Ft.enabled&&Ft.handlerName?` @click="${String(Ft.handlerName)}($event)"`:"";if(o.type==="group"&&Array.isArray(o.children)){const _e=o.children,vt=((Ee=o.style)==null?void 0:Ee.display)==="flex",ie=_e.map((Fe,qe)=>Je(Fe,qe,vt)).join(`
        `),Ie=o.elementId&&o.elementId.trim()?o.elementId.trim():o.className&&o.className.trim()?o.className.trim():`group_${Z}`,ht=V(Ie),ke={},ft=o.position||(Q?"static":"absolute");return ft==="absolute"?(ke.position="absolute",ke.left=`${Math.round(o.left||0)}px`,ke.top=`${Math.round(o.top||0)}px`):ft==="relative"&&(ke.position="relative",o.left!==void 0&&(ke.left=`${Math.round(o.left||0)}px`),o.top!==void 0&&(ke.top=`${Math.round(o.top||0)}px`)),ke.zIndex=We,o.autoSize||(o.width&&(ke.width=`${Math.round(o.width)}px`),o.height&&(ke.height=`${Math.round(o.height)}px`)),m.push(`'${ht.replace(/'/g,"\\'")}' : ${Pt(ke)}`),`<div${gt}${Re(o)} :style="pos['${ht.replace(/'/g,"\\'")}']" >
        ${ie}
      </div>`}if(o.type==="text"){const _e=o.autoSize!==!1,vt=_e?(()=>{var Ce;const Se=((Ce=o.style)==null?void 0:Ce.textAlign)||"left";return Se==="center"?ue:Se==="right"?ze:$})():"",ie=o.style||{},Ie=(ie.fontFamily||"").trim(),ht=Ie&&M.get(Ie)||"",ke=(()=>{const{key:Se}=L(o),Ce=Se?g.get(Se):void 0;return Ce&&Ce.className?Ce.className:""})(),ft=[(Lt=o.className)==null?void 0:Lt.trim(),vt,ht,ke].filter(Boolean).join(" "),Fe=ft?` class="${ft}"`:"",qe=o.elementId&&o.elementId.trim()?o.elementId.trim():o.className&&o.className.trim()?o.className.trim():`text_${Z}`,De=V(qe),Be={};if(ie.fontSize!==void 0&&(Be.fontSize=`${ie.fontSize}px`),ie.letterSpacing!==void 0&&ie.letterSpacing!==null&&(Be.letterSpacing=`${ie.letterSpacing}px`),ie.lineHeight!==void 0&&(Be.lineHeight=ie.lineHeight),ie.textIndent&&(Be.textIndent=String(ie.textIndent)),Be.whiteSpace="pre-wrap",Be.wordBreak="break-word",_e||(Be.display="block",Be.overflow="hidden",ie.textAlign&&(Be.textAlign=ie.textAlign)),ie.textGradient&&((Ut=ie.textGradient.colors)!=null&&Ut.length)){const Se=ie.textGradient.angle||0,Ce=ie.textGradient.colors[0]||"#000000",et=ie.textGradient.colors[1]||"#000000";Be.backgroundImage=`linear-gradient(${Se}deg, ${Ce}, ${et})`,Be["-webkit-background-clip"]="text",Be.backgroundClip="text",Be.color="transparent"}else ie.color&&(Be.color=ie.color);ie.fontWeight&&(Be.fontWeight=ie.fontWeight),ie.fontStyle&&(Be.fontStyle=ie.fontStyle);const wt=ie.textOrientation;wt==="vertical"?(Be.writingMode="vertical-rl",Be.textOrientation="upright"):wt==="horizontal"&&(Be.writingMode="horizontal-tb");const It=o.elementId&&o.elementId.trim()?o.elementId.trim():`text_${Z}`,lt=!!(ie.textWave&&ie.textWave.enabled),Ue=!!ie.skewFlowEnabled;if(lt||Ue){const Se=o.dynamic&&o.dynamic.enabled&&o.dynamic.objectName&&o.dynamic.propertyPath?{type:"dynamic",obj:o.dynamic.objectName,path:o.dynamic.propertyPath}:{type:"static",text:o.text||""};Ge.push(`'${It.replace(/'/g,"\\'")}' : ${JSON.stringify(Se)}`);const Ce={textWaveEnabled:lt,amplitude:(el=(Ht=ie.textWave)==null?void 0:Ht.amplitude)!=null?el:0,frequency:(gl=(ul=ie.textWave)==null?void 0:ul.frequency)!=null?gl:0,phase:(bt=(yt=ie.textWave)==null?void 0:yt.phase)!=null?bt:0,skewFlowEnabled:Ue,skewAngle:(Vt=ie.skewAngle)!=null?Vt:0,textOrientation:ie.textOrientation||"horizontal",fontSize:(sl=ie.fontSize)!=null?sl:ne,letterSpacing:(Xt=ie.letterSpacing)!=null?Xt:0};if(je.push(`'${It.replace(/'/g,"\\'")}' : ${JSON.stringify(Ce)}`),o.dynamic&&o.dynamic.enabled&&o.dynamic.objectName&&o.dynamic.propertyPath){const Te=String(o.dynamic.propertyPath),Jt=`${o.dynamic.objectName}.${Te}`,Rt=V(Jt),Nt={},Zt=o.position||(Q?"static":"absolute");return Zt==="absolute"?(Nt.position="absolute",Nt.left=`${Math.round(o.left||0)}px`,Nt.top=`${Math.round(o.top||0)}px`):Zt==="relative"&&(Nt.position="relative",o.left!==void 0&&(Nt.left=`${Math.round(o.left||0)}px`),o.top!==void 0&&(Nt.top=`${Math.round(o.top||0)}px`)),Nt.zIndex=We,o.autoSize||(o.width&&(Nt.width=`${Math.round(o.width)}px`),o.height&&(Nt.height=`${Math.round(o.height)}px`)),Object.assign(Nt,Be),m.push(`'${Rt.replace(/'/g,"\\'")}' : ${Pt(Nt)}`),`<div${Fe}${Re(o)}${ut} :style="pos['${Rt.replace(/'/g,"\\'")}']" >
        <span v-for="(p,pi) in getTextPieces('${It.replace(/'/g,"\\'")}')" :key="pi" :style="p.style">{{ p.char }}</span>
      </div>`}const et={},$t=o.position||(Q?"static":"absolute");return $t==="absolute"?(et.position="absolute",et.left=`${Math.round(o.left||0)}px`,et.top=`${Math.round(o.top||0)}px`):$t==="relative"&&(et.position="relative",o.left!==void 0&&(et.left=`${Math.round(o.left||0)}px`),o.top!==void 0&&(et.top=`${Math.round(o.top||0)}px`)),et.zIndex=We,o.autoSize||(o.width&&(et.width=`${Math.round(o.width)}px`),o.height&&(et.height=`${Math.round(o.height)}px`)),Object.assign(et,Be),m.push(`'${De.replace(/'/g,"\\'")}' : ${Pt(et)}`),`<div${Fe}${Re(o)}${ut} :style="pos['${De.replace(/'/g,"\\'")}']" >
        <span v-for="(p,pi) in getTextPieces('${It.replace(/'/g,"\\'")}')" :key="pi" :style="p.style">{{ p.char }}</span>
      </div>`}if(o.segments&&o.segments.length>0){const Se=o.segments.map(Te=>{let Jt="";Te.dynamic&&Te.dynamicObj&&Te.dynamicPath?Jt=`{{ ${Te.dynamicObj}.${Te.dynamicPath} }}`:Jt=Sl(Te.text||"");const Rt={};return Te.style&&(Te.style.color&&(Rt.color=Te.style.color),Te.style.fontSize&&(Rt.fontSize=Te.style.fontSize+"px"),Te.style.fontWeight&&(Rt.fontWeight=Te.style.fontWeight),Te.style.fontFamily&&(Rt.fontFamily=Te.style.fontFamily),Te.style.textDecoration&&(Rt.textDecoration=Te.style.textDecoration)),`<span style="${Object.entries(Rt).map(([Nt,Zt])=>`${Nt.replace(/[A-Z]/g,_t=>"-"+_t.toLowerCase())}:${Zt}`).join(";")}">${Jt}</span>`}).join(""),Ce={},et=o.position||(Q?"static":"absolute");et==="absolute"?(Ce.position="absolute",Ce.left=`${Math.round(o.left||0)}px`,Ce.top=`${Math.round(o.top||0)}px`):et==="relative"&&(Ce.position="relative",o.left!==void 0&&(Ce.left=`${Math.round(o.left||0)}px`),o.top!==void 0&&(Ce.top=`${Math.round(o.top||0)}px`)),Ce.zIndex=We,o.autoSize||(o.width&&(Ce.width=`${Math.round(o.width)}px`),o.height&&(Ce.height=`${Math.round(o.height)}px`)),Ce.boxSizing="border-box",Object.assign(Ce,Be);const $t=`seg_${o.id.replace(/-/g,"_")}`;return m.push(`'${$t}' : ${Pt(Ce)}`),`<div${Fe}${Re(o)}${ut} :style="pos['${$t}']">${Se}</div>`}if(o.dynamic&&o.dynamic.enabled&&o.dynamic.objectName&&o.dynamic.propertyPath){const Se=`${o.dynamic.objectName}.${o.dynamic.propertyPath}`,Ce=String(o.dynamic.propertyPath),et=`${o.dynamic.objectName}.${Ce}`,$t=V(et),Te={},Jt=o.position||(Q?"static":"absolute");return Jt==="absolute"?(Te.position="absolute",Te.left=`${Math.round(o.left||0)}px`,Te.top=`${Math.round(o.top||0)}px`):Jt==="relative"&&(Te.position="relative",o.left!==void 0&&(Te.left=`${Math.round(o.left||0)}px`),o.top!==void 0&&(Te.top=`${Math.round(o.top||0)}px`)),Te.zIndex=We,o.autoSize||(o.width&&(Te.width=`${Math.round(o.width)}px`),o.height&&(Te.height=`${Math.round(o.height)}px`)),Object.assign(Te,Be),m.push(`'${$t.replace(/'/g,"\\'")}' : ${Pt(Te)}`),`<div${Fe}${Re(o)}${ut} :style="pos['${$t.replace(/'/g,"\\'")}']" >{{ ${Se} }}</div>`}else{const Se=Sl((o.text||"").replace(/\\n/g,`
`)),Ce={},et=o.position||(Q?"static":"absolute");return et==="absolute"?(Ce.position="absolute",Ce.left=`${Math.round(o.left||0)}px`,Ce.top=`${Math.round(o.top||0)}px`):et==="relative"&&(Ce.position="relative",o.left!==void 0&&(Ce.left=`${Math.round(o.left||0)}px`),o.top!==void 0&&(Ce.top=`${Math.round(o.top||0)}px`)),Ce.zIndex=We,o.autoSize||(o.width&&(Ce.width=`${Math.round(o.width)}px`),o.height&&(Ce.height=`${Math.round(o.height)}px`)),Object.assign(Ce,Be),m.push(`'${De.replace(/'/g,"\\'")}' : ${Pt(Ce)}`),`<div${Fe}${Re(o)}${ut} :style="pos['${De.replace(/'/g,"\\'")}']" >${Se}</div>`}}if(o.type==="image"){if(d!=null&&d.imageFileMap&&d.imageFileMap[o.id]){const De=d.imageFileMap[o.id],Be=o.elementId&&o.elementId.trim()?o.elementId.trim():o.className&&o.className.trim()?o.className.trim():`img_${Z}`,wt=V(Be),It=o.elementId&&o.elementId.trim()?` id="${wt}"`:"",lt=o.style||{},Ue={},Se=o.position||(Q?"static":"absolute");return Se==="absolute"?(Ue.position="absolute",Ue.left=`${Math.round(o.left||0)}px`,Ue.top=`${Math.round(o.top||0)}px`):Se==="relative"&&(Ue.position="relative",o.left!==void 0&&(Ue.left=`${Math.round(o.left||0)}px`),o.top!==void 0&&(Ue.top=`${Math.round(o.top||0)}px`)),Ue.zIndex=We,o.autoSize?(Ue.maxWidth="none",Ue.maxHeight="none",Ue.flexShrink="0"):(o.width&&(Ue.width=`${Math.round(o.width)}px`),o.height&&(Ue.height=`${Math.round(o.height)}px`)),lt.objectFit&&(Ue.objectFit=String(lt.objectFit)),m.push(`'${wt.replace(/'/g,"\\'")}' : ${Pt(Ue)}`),`<img${gt}${It}${Re(o)}${ut} src="./imgs/${De}" :style="pos['${wt.replace(/'/g,"\\'")}']" alt="" />`}if(d!=null&&d.imageFileNames&&d.imageFileNames[P]){const De=d.imageFileNames[P++],Be=o.elementId&&o.elementId.trim()?` id="${o.elementId.trim()}"`:"",wt=o.elementId&&o.elementId.trim()?o.elementId.trim():o.className&&o.className.trim()?o.className.trim():`img_${Z}`,It=o.style||{},lt={},Ue=o.position||(Q?"static":"absolute");return Ue==="absolute"?(lt.position="absolute",lt.left=`${Math.round(o.left||0)}px`,lt.top=`${Math.round(o.top||0)}px`):Ue==="relative"&&(lt.position="relative",o.left!==void 0&&(lt.left=`${Math.round(o.left||0)}px`),o.top!==void 0&&(lt.top=`${Math.round(o.top||0)}px`)),lt.zIndex=We,o.autoSize||(o.width&&(lt.width=`${Math.round(o.width)}px`),o.height&&(lt.height=`${Math.round(o.height)}px`)),It.objectFit&&(lt.objectFit=String(It.objectFit)),m.push(`'${wt.replace(/'/g,"\\'")}' : ${Pt(lt)}`),`<img${gt}${Be}${Re(o)}${ut} src="./imgs/${De}" :style="pos['${wt.replace(/'/g,"\\'")}']" alt="" />`}const _e=o.elementId&&o.elementId.trim()?o.elementId.trim():`img_${Z}`,vt=o.elementId&&o.elementId.trim()?` id="${o.elementId.trim()}"`:"",ie=o.style||{},Ie={},ht=o.position||(Q?"static":"absolute");ht==="absolute"?(Ie.position="absolute",Ie.left=`${Math.round(o.left||0)}px`,Ie.top=`${Math.round(o.top||0)}px`):ht==="relative"&&(Ie.position="relative",o.left!==void 0&&(Ie.left=`${Math.round(o.left||0)}px`),o.top!==void 0&&(Ie.top=`${Math.round(o.top||0)}px`)),Ie.zIndex=We,o.autoSize?(Ie.maxWidth="none",Ie.maxHeight="none",Ie.flexShrink="0"):(o.width&&(Ie.width=`${Math.round(o.width)}px`),o.height&&(Ie.height=`${Math.round(o.height)}px`)),ie.objectFit&&(Ie.objectFit=String(ie.objectFit)),m.push(`'${_e.replace(/'/g,"\\'")}' : ${Pt(Ie)}`);const ke=!!o.highlightEnabled,ft=String(o.highlightSrc||""),Fe=String(o.src||""),qe=ke&&ft?ft:Fe;return`<img${gt}${vt}${Re(o)}${ut} src="${qe.replace(/"/g,"&quot;")}" :style="pos['${_e.replace(/'/g,"\\'")}']" alt="" />`}if(o.type==="chart"){const _e=Sl(o.text||"chart"),vt=o.elementId&&o.elementId.trim()?o.elementId.trim():`chart_${Z}`,ie=V(vt),Ie={},ht=o.position||(Q?"static":"absolute");return ht==="absolute"?(Ie.position="absolute",Ie.left=`${Math.round(o.left||0)}px`,Ie.top=`${Math.round(o.top||0)}px`):ht==="relative"&&(Ie.position="relative",o.left!==void 0&&(Ie.left=`${Math.round(o.left||0)}px`),o.top!==void 0&&(Ie.top=`${Math.round(o.top||0)}px`)),Ie.zIndex=We,o.autoSize||(o.width&&(Ie.width=`${Math.round(o.width)}px`),o.height&&(Ie.height=`${Math.round(o.height)}px`)),m.push(`'${ie.replace(/'/g,"\\'")}' : ${Pt(Ie)}`),`<div${gt}${Re(o)}${ut} id="${ie}" :style="pos['${ie.replace(/'/g,"\\'")}']">${_e}</div>`}if(o.type==="container"){const _e=o.comment?`<!-- ${o.comment.replace(/-->/g,"")} -->
      `:"";if(Array.isArray(o.children)){const qe=o.children,De=o.style||{},Be=De.display==="flex",wt=qe.map((et,$t)=>Je(et,$t,Be)).join(`
        `),It=o.elementId&&o.elementId.trim()?o.elementId.trim():o.className&&o.className.trim()?o.className.trim():`container_${Z}`,lt=V(It),Ue=o.elementId&&o.elementId.trim()?` id="${lt}"`:"",Se={},Ce=o.position||(Q?"static":"absolute");if(Ce==="absolute"?(Se.position="absolute",Se.left=`${Math.round(o.left||0)}px`,Se.top=`${Math.round(o.top||0)}px`):Ce==="relative"&&(Se.position="relative",o.left!==void 0&&(Se.left=`${Math.round(o.left||0)}px`),o.top!==void 0&&(Se.top=`${Math.round(o.top||0)}px`)),Se.zIndex=We,o.autoSize||(o.width&&(Se.width=`${Math.round(o.width)}px`),o.height&&(Se.height=`${Math.round(o.height)}px`)),De.borderRadius&&(Se.borderRadius=De.borderRadius),De.backgroundColor&&(Se.backgroundColor=De.backgroundColor),De.backgroundGradient&&((tl=De.backgroundGradient.colors)!=null&&tl.length)){const et=De.backgroundGradient.angle||0,$t=De.backgroundGradient.colors[0]||"#000000",Te=De.backgroundGradient.colors[1]||"#000000";Se.backgroundImage=`linear-gradient(${et}deg, ${$t}, ${Te})`,Se.backgroundSize="cover",Se.backgroundRepeat="no-repeat"}return De.display&&(Se.display=String(De.display)),De.flexDirection&&(Se.flexDirection=String(De.flexDirection)),De.justifyContent&&(Se.justifyContent=String(De.justifyContent)),De.alignItems&&(Se.alignItems=String(De.alignItems)),De.gap!==void 0&&(Se.gap=`${Math.round(Number(De.gap))}px`),m.push(`'${lt.replace(/'/g,"\\'")}' : ${Pt(Se)}`),`${_e}<div${gt}${Re(o)}${ut}${Ue} :style="pos['${lt.replace(/'/g,"\\'")}']" >
        ${wt}
      </div>`}const vt=Sl(o.text||""),ie=o.elementId&&o.elementId.trim()?o.elementId.trim():o.className&&o.className.trim()?o.className.trim():`container_${Z}`,Ie=V(ie),ht=o.elementId&&o.elementId.trim()?` id="${Ie}"`:"",ke={},ft=o.position||(Q?"static":"absolute");ft==="absolute"?(ke.position="absolute",ke.left=`${Math.round(o.left||0)}px`,ke.top=`${Math.round(o.top||0)}px`):ft==="relative"&&(ke.position="relative",o.left!==void 0&&(ke.left=`${Math.round(o.left||0)}px`),o.top!==void 0&&(ke.top=`${Math.round(o.top||0)}px`)),ke.zIndex=We,o.autoSize||(o.width&&(ke.width=`${Math.round(o.width)}px`),o.height&&(ke.height=`${Math.round(o.height)}px`));const Fe=o.style||{};if(Fe.borderRadius&&(ke.borderRadius=Fe.borderRadius),Fe.backgroundColor&&(ke.backgroundColor=Fe.backgroundColor),Fe.backgroundGradient&&((mt=Fe.backgroundGradient.colors)!=null&&mt.length)){const qe=Fe.backgroundGradient.angle||0,De=Fe.backgroundGradient.colors[0]||"#000000",Be=Fe.backgroundGradient.colors[1]||"#000000";ke.backgroundImage=`linear-gradient(${qe}deg, ${De}, ${Be})`,ke.backgroundSize="cover",ke.backgroundRepeat="no-repeat"}return Fe.display&&(ke.display=String(Fe.display)),Fe.flexDirection&&(ke.flexDirection=String(Fe.flexDirection)),Fe.justifyContent&&(ke.justifyContent=String(Fe.justifyContent)),Fe.alignItems&&(ke.alignItems=String(Fe.alignItems)),Fe.gap!==void 0&&(ke.gap=`${Math.round(Number(Fe.gap))}px`),m.push(`'${Ie.replace(/'/g,"\\'")}' : ${Pt(ke)}`),`${_e}<div${gt}${Re(o)}${ut}${ht} :style="pos['${Ie.replace(/'/g,"\\'")}']" >${vt}</div>`}if(o.type==="line"){const _e=o.style||{},vt=_e.lineColor||"#ffffff",ie=(cl=_e.lineThickness)!=null?cl:2,Ie=_e.lineOrientation||"horizontal",ht=_e.lineStyle==="dashed",ke=(fl=_e.lineDashLength)!=null?fl:6,ft=(yl=_e.lineDashGap)!=null?yl:4,Fe=Math.max(1,Math.round((ll=o.width)!=null?ll:Ie==="horizontal"?200:2)),qe=Math.max(1,Math.round((rl=o.height)!=null?rl:Ie==="horizontal"?2:200)),De=Math.round(qe/2),Be=Math.round(Fe/2),wt=ht?` stroke-dasharray="${ke} ${ft}"`:"",It=o.elementId&&o.elementId.trim()?o.elementId.trim():o.className&&o.className.trim()?o.className.trim():`line_${Z}`,lt=V(It),Ue={},Se=o.position||(Q?"static":"absolute");return Se==="absolute"?(Ue.position="absolute",Ue.left=`${Math.round(o.left||0)}px`,Ue.top=`${Math.round(o.top||0)}px`):Se==="relative"&&(Ue.position="relative",o.left!==void 0&&(Ue.left=`${Math.round(o.left||0)}px`),o.top!==void 0&&(Ue.top=`${Math.round(o.top||0)}px`)),Ue.width=`${Fe}px`,Ue.height=`${qe}px`,Ue.zIndex=We,m.push(`'${lt.replace(/'/g,"\\'")}' : ${Pt(Ue)}`),Ie==="horizontal"?`<svg${gt}${Re(o)}${ut} viewBox="0 0 ${Fe} ${qe}" preserveAspectRatio="none" :style="pos['${lt.replace(/'/g,"\\'")}']"><line x1="0" y1="${De}" x2="${Fe}" y2="${De}" stroke="${vt}" stroke-width="${ie}"${wt} fill="none" /></svg>`:`<svg${gt}${Re(o)}${ut} viewBox="0 0 ${Fe} ${qe}" preserveAspectRatio="none" :style="pos['${lt.replace(/'/g,"\\'")}']"><line x1="${Be}" y1="0" x2="${Be}" y2="${qe}" stroke="${vt}" stroke-width="${ie}"${wt} fill="none" /></svg>`}if(o.type==="arc-text"){const _e=Math.max(1,Math.round(o.width||1)),vt=Math.max(1,Math.round(o.height||1)),ie=`arc_${o.id.replace(/"/g,"").replace(/'/g,"\\'")}`,Ie=Ko(o),ht=Zo(o),ke=Qo(o),ft=o.elementId&&o.elementId.trim()?o.elementId.trim():o.className&&o.className.trim()?o.className.trim():`arc_${Z}`,Fe=V(ft),qe={},De=o.position||"absolute";De==="absolute"?(qe.position="absolute",qe.left=`${Math.round(o.left||0)}px`,qe.top=`${Math.round(o.top||0)}px`):De==="relative"&&(qe.position="relative",o.left!==void 0&&(qe.left=`${Math.round(o.left||0)}px`),o.top!==void 0&&(qe.top=`${Math.round(o.top||0)}px`)),qe.width=`${_e}px`,qe.height=`${vt}px`,qe.zIndex=We,m.push(`'${Fe.replace(/'/g,"\\'")}' : ${Pt(qe)}`);const Be=o.dynamic&&o.dynamic.enabled&&o.dynamic.objectName&&o.dynamic.propertyPath?`{{ ${`${o.dynamic.objectName}.${o.dynamic.propertyPath}`} }}`:Sl(o.text||"");return`<svg${gt}${Re(o)}${ut} viewBox="0 0 ${_e} ${vt}" preserveAspectRatio="none" :style="pos['${Fe.replace(/'/g,"\\'")}']">
        <defs>
          <path id="${ie}" d="${Xo(o)}" fill="none" />
        </defs>
        <text style="${Ie}">
          <textPath :href="'#${ie}'" startOffset="${ht}" text-anchor="${ke}">${Be}</textPath>
        </text>
      </svg>`}const Qe=Sl((o.text||"element").replace(/\\n/g,`
`));return`<div${gt}${Re(o)}${ut} style="${Pe};z-index:${We}">${Qe}</div>`}const ge=e.map((o,Z)=>Je(o,Z)).join(`
      `),tt=ts(e);function ct(o,Z){o.forEach(Q=>{(Q.type==="group"||Q.type==="container")&&Array.isArray(Q.children)?(Z(Q),ct(Q.children,Z)):Z(Q)})}const at=new Set;ct(e,o=>{(o.type==="text"||o.type==="arc-text")&&o.dynamic&&o.dynamic.enabled&&o.dynamic.objectName&&at.add(String(o.dynamic.objectName))});const xt=Array.from(at),k=!S||xt.length===0?"":xt.map(o=>{try{const Z=S[o],Q=JSON.stringify(Z!=null?Z:{},null,2).split(`
`).map((nt,Pe)=>Pe===0?nt:`    ${nt}`).join(`
`);return`    ${o}: ${Q},`}catch{return`    ${o}: {},`}}).join(`
`),t=(()=>{const o=[];let Z=0;return ct(e,Q=>{if(Q.type==="chart"){const nt=Q.elementId&&Q.elementId.trim()?Q.elementId.trim():`chart_${Z}`;Z++;const Pe=Q.chartOption||{};try{o.push(`'${nt.replace(/'/g,"\\'")}' : ${JSON.stringify(Pe,null,2)}`)}catch{o.push(`'${nt.replace(/'/g,"\\'")}' : {}`)}}}),`{ ${o.join(", ")} }`})(),oe=(()=>{const o=new Set;return ct(e,Z=>{const Q=String(Z.hiddenLabel||"").trim(),nt=dt(Q),Pe=!!Z.hidden;nt&&Pe&&o.add(nt)}),Array.from(o).map(Z=>`      ${Z}: false,`).join(`
`)})(),$e=(()=>{const o=new Map;function Z(nt){nt.forEach(Pe=>{const We=Pe.eventBinding;We&&We.enabled&&We.handlerName&&o.set(String(We.handlerName),String(We.code||"")),Array.isArray(Pe.children)&&Z(Pe.children)})}Z(e);const Q=Array.from(o.entries());return Q.length?Q.map(([nt,Pe])=>`${nt}(e) {
${Pe}
}`).join(`,
`):""})(),Gt=`export default {
    ${m.join(`,
    `)}
  };`,Mt=`
  ${pt?`const chartOptions = ${t};`:"const chartOptions = {};"}

  export const ${D}_data = {
    chartOptions,
    ${k?`${k}`:""}
    textSources: { ${Ge.join(", ")} },
    textEffects: { ${je.join(", ")} },
    elemStyles: { ${se.join(", ")} },
    ${oe?oe.replace(/\n\s*/g,""):""}
  };
  `;return{indexVue:`<template>
  <div class="${le}" :style="containerStyle">
    ${ge}
    <div v-for="(opt, id) in chartOptions" :key="id" :id="id" :style="pos[id]"></div>
  </div>
</template>

<script>
import posEntries from './style/pos.js';
import { ${D}_data } from './data/index.js';
${pt?"import * as echarts from 'echarts';":""}

function parseCss(css) {
  const style = {};
  if (!css) return style;
  css.split(';').forEach(line => {
    const part = line.trim();
    if (!part) return;
    const splitIdx = part.indexOf(':');
    if (splitIdx > 0) {
      const key = part.slice(0, splitIdx).trim();
      const val = part.slice(splitIdx + 1).trim();
      style[key] = val;
    }
  });
  return style;
}

const pos = {};
for (const key in posEntries) {
  pos[key] = parseCss(posEntries[key]);
}

export default {
  name: '${D}',
  data() {
    return {
      config: {
        width: ${a.width},
        height: ${a.height},
        backgroundColor: '${K}',
        backgroundUrl: '${((d==null?void 0:d.backgroundFileName)||Oe).replace(/'/g,"\\'")}',
        globalFontFamily: '${G.replace(/'/g,"\\'")}',
        globalFontSize: ${Math.round(ne)},
        globalColor: '${rt}',
      },
      ${d!=null&&d.imageFileNames?`// 使用本地资源路径，动态映射不再需要
      images: {},`:`// 图片 src 动态映射，初始写入 base64（若存在），blob 留空待替换
      images: {},`}
      // 引入分离的样式与数据
      pos,
      ...${D}_data
    };
  },
  computed: {
    containerStyle() {
      const base = {
        position: 'relative',
        width: this.config.width + 'px',
        height: this.config.height + 'px',
        fontFamily: this.config.globalFontFamily,
        fontSize: this.config.globalFontSize + 'px',
        color: this.config.globalColor,
        backgroundColor: this.config.backgroundColor || 'transparent',
        lineHeight: '1.5',
      };
      if (this.config.backgroundUrl) {
        base.backgroundImage = 'url(' + this.bgSrc + ')';
        base.backgroundSize = 'cover';
        base.backgroundPosition = 'center';
        base.backgroundRepeat = 'no-repeat';
      }
      return base;
    },
    bgSrc() {
       return ${ae};
    }
  },
  methods: {
    ${$e?$e+",":""}
    ${je.length?`
    getByPath(obj, path) {
      try {
        const segs = String(path).split('.');
        return segs.reduce((acc, k) => (acc ? acc[k] : undefined), obj);
      } catch(e) {
        return undefined;
      }
    },
    getTextValue(id) {
      const srcMap = this.textSources || {};
      const src = srcMap[id];
      if (!src) return '';
      if (src.type === 'static') return String(src.text || '');
      const root = this[src.obj] || {};
      const v = this.getByPath(root, src.path);
      return v != null ? String(v) : '';
    },
    getTextPieces(id) {
      const text = this.getTextValue(id);
      const effMap = this.textEffects || {};
      const eff = effMap[id] || {};
      const orientation = eff.textOrientation || 'horizontal';
      const fontSize = Number(eff.fontSize || (this.config && this.config.globalFontSize) || 14);
      const letterSpacing = Number(eff.letterSpacing || 0);
      const step = fontSize * 0.6 + letterSpacing;

      const amp = eff.textWaveEnabled ? Number(eff.amplitude || 0) : 0;
      const freq = eff.textWaveEnabled ? Number(eff.frequency || 0) : 0;
      const phase = eff.textWaveEnabled ? Number(eff.phase || 0) : 0;
      const skew = eff.skewFlowEnabled ? Number(eff.skewAngle || 0) : 0;
      
      return String(text).split('').map((char, i) => {
        const offset = i * step;
        const waveY = amp * Math.sin((offset * freq) + phase);
        // 简单模拟布局倾斜：每个字符垂直位移随水平位置线性变化
        // skewAngle 正切值 * offset
        const skewY = skew ? offset * Math.tan(skew * Math.PI / 180) : 0;
        
        const style = {
          display: 'inline-block',
          transform: \`translateY(\${waveY + skewY}px)\`,
          fontSize: fontSize + 'px',
          letterSpacing: letterSpacing + 'px'
        };
        if (orientation === 'vertical') {
          style.writingMode = 'vertical-rl';
          style.textOrientation = 'upright';
        }
        return { char, style: { ...style, whiteSpace: 'pre-wrap' } };
      });
    },
    `:""}
    ${pt?`
    initCharts() {
      this.$nextTick(() => {
        const opts = this.chartOptions || {};
        Object.keys(opts).forEach((id) => {
          const dom = document.getElementById(id);
          if (dom) {
            const chart = echarts.init(dom);
            chart.setOption(opts[id]);
          }
        });
      });
    },
    `:""}
  },
  mounted() {
    ${pt?"this.initCharts();":""}
  }
};
<\/script>

<style scoped>
.${le} { overflow: hidden; }
.${le} * { box-sizing: border-box; }
.${be} { position:absolute; left:0; top:0; width:100%; height:100%; object-fit:cover; z-index:0; pointer-events:none; }
.${$} { display:flex; align-items:center; justify-content:flex-start; }
.${ue} { display:flex; align-items:center; justify-content:center; }
.${ze} { display:flex; align-items:center; justify-content:flex-end; }
${Array.from(M.entries()).map(([o,Z])=>`.${Z}{ font-family:'${o.replace(/'/g,"\\'")}'; }`).join(`
`)}
${Array.from(g.values()).filter(o=>o.className&&o.css).map(o=>`.${o.className} { ${o.css} }`).join(`
`)}
${tt}
</style>
`,files:{"style/pos.js":Gt,"data/index.js":Mt}}}function cr(f){return f.replace(/[&<>"']/g,a=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"})[a]||a)}function rs(f){var D,P;const a=f.style||{},e=[],d=f.position||"absolute";if(d==="absolute"?(e.push("position:absolute"),e.push(`left:${Math.round(f.left||0)}px`),e.push(`top:${Math.round(f.top||0)}px`)):d==="relative"&&(e.push("position:relative"),f.left!==void 0&&e.push(`left:${Math.round(f.left||0)}px`),f.top!==void 0&&e.push(`top:${Math.round(f.top||0)}px`)),f.autoSize?(e.push("max-width:none"),e.push("max-height:none"),e.push("flex-shrink:0")):(f.width&&e.push(`width:${Math.round(f.width)}px`),f.height&&e.push(`height:${Math.round(f.height)}px`)),a.opacity!==void 0&&e.push(`opacity:${a.opacity}`),a.border&&!(f.type==="container"&&a.border==="1px dashed rgba(148,163,184,0.6)")&&e.push(`border:${a.border}`),a.borderRadius&&e.push(`border-radius:${a.borderRadius}`),a.backgroundColor&&e.push(`background-color:${a.backgroundColor}`),a.boxShadow&&e.push(`box-shadow:${a.boxShadow}`),a.display&&e.push(`display:${a.display}`),a.flexDirection&&e.push(`flex-direction:${a.flexDirection}`),a.justifyContent&&e.push(`justify-content:${a.justifyContent}`),a.alignItems&&e.push(`align-items:${a.alignItems}`),a.gap!==void 0&&e.push(`gap:${Math.round(Number(a.gap))}px`),a.backgroundGradient&&((D=a.backgroundGradient.colors)!=null&&D.length)){const le=a.backgroundGradient.angle||0,be=a.backgroundGradient.colors[0]||"#000000",$=a.backgroundGradient.colors[1]||"#000000";e.push(`background-image:linear-gradient(${le}deg, ${be}, ${$})`),e.push("background-size:cover"),e.push("background-repeat:no-repeat")}if(f.type==="text"&&(a.fontFamily&&e.push(`font-family:${a.fontFamily}`),a.fontSize!==void 0&&e.push(`font-size:${a.fontSize}px`),a.color&&e.push(`color:${a.color}`),a.fontWeight&&e.push(`font-weight:${a.fontWeight}`),a.letterSpacing!==void 0&&a.letterSpacing!==null&&e.push(`letter-spacing:${a.letterSpacing}px`),a.lineHeight!==void 0&&e.push(`line-height:${a.lineHeight}`),a.fontStyle&&e.push(`font-style:${a.fontStyle}`),a.textAlign&&e.push(`text-align:${a.textAlign}`),a.textDecoration&&e.push(`text-decoration:${a.textDecoration}`),a.textOrientation==="vertical"&&(e.push("writing-mode:vertical-rl"),e.push("text-orientation:upright")),a.textGradient&&((P=a.textGradient.colors)!=null&&P.length))){const le=a.textGradient.angle||0,be=a.textGradient.colors[0]||"#000000",$=a.textGradient.colors[1]||"#000000";e.push(`background-image:linear-gradient(${le}deg, ${be}, ${$})`),e.push("-webkit-background-clip:text"),e.push("background-clip:text"),e.push("color:transparent")}f.type==="image"&&a.objectFit&&e.push(`object-fit:${a.objectFit}`);const S=f.eventBinding;return S&&S.enabled&&S.cursor&&e.push(`cursor:${S.cursor}`),e.join(";")}function zo(f){return String(f).split(";").map(a=>a.trim()).filter(Boolean).map(a=>a.includes("!important")?a:`${a} !important`).join("; ")}function ns(f){return String(f).replace(/\{([^}]*)\}/g,(a,e)=>`{ ${zo(e)} }`)}function os(f){const a=[],e=d=>{d.forEach(S=>{if((S.type==="group"||S.type==="container")&&Array.isArray(S.children))e(S.children);else{const D=(S.className||"").trim(),P=S.customClassCss?String(S.customClassCss).trim():"";if(!D||!P)return;/\{[^}]*\}/.test(P)?a.push(ns(P)):a.push(`.${D} { ${zo(P)} }`)}})};return e(f),a.join(`
`)}function Oo(f){const a=String(f||"").trim();if(!a)return"";let e=a.replace(/[^A-Za-z0-9_]/g,"_");return/[A-Za-z_]/.test(e[0]||"")||(e="_"+e),e}function ss(f,a){if(!f.hidden)return"";const e=Oo(f.hiddenLabel);return e?` ${a!=null&&a.useShow?"v-show":"v-if"}="${e}"`:""}function ko(f,a,e,d){const S=`lc-${f.replace(/[^A-Za-z0-9_]/g,"_")}-root`;let D=0;const P=e.some(m=>m.type==="chart");function le(m,U){var rt,pt,ae,dt,Re;const V=rs(m),L=m.zIndex||1,q=m.className&&m.className.trim()?` class="${m.className.trim()}"`:"",Oe=ss(m,{useShow:(d==null?void 0:d.hideDirective)==="show"}),K=m.eventBinding,G=K&&K.enabled&&K.handlerName?` @click="${String(K.handlerName)}($event)"`:"",ne=m.elementId&&m.elementId.trim()?` id="${m.elementId.trim()}"`:"";if((m.type==="group"||m.type==="container")&&Array.isArray(m.children)){const Je=m.children.map((ge,tt)=>le(ge,tt)).join(`
        `);return`<div${q}${Oe}${G}${ne} style="${V};z-index:${L}">
        ${Je}
      </div>`}if(m.type==="text"){const Je=cr(m.text||"");return`<div${q}${Oe}${G} style="${V};z-index:${L}">${Je}</div>`}if(m.type==="image"){const Je=!!m.highlightEnabled,ge=String(m.highlightSrc||""),tt=String(m.src||""),ct=Je&&ge?ge:tt;if(d!=null&&d.imageFileMap&&d.imageFileMap[m.id]){const at=d.imageFileMap[m.id],xt=m.elementId&&m.elementId.trim()?` id="${m.elementId.trim()}"`:"";return`<img${q}${xt}${Oe}${G} :src="assetUrl('./imgs/${at}')" style="${V};z-index:${L}" alt="" />`}if(d!=null&&d.imageFileNames&&d.imageFileNames[D]){const at=d.imageFileNames[D++],xt=m.elementId&&m.elementId.trim()?` id="${m.elementId.trim()}"`:"";return`<img${q}${xt}${Oe}${G} :src="assetUrl('./imgs/${at}')" style="${V};z-index:${L}" alt="" />`}return ct?`<img${q}${ne}${Oe}${G} src="${ct.replace(/"/g,"&quot;")}" style="${V};z-index:${L}" alt="" />`:`<div${q}${Oe}${G} style="${V};z-index:${L}"></div>`}if(m.type==="line"){const Je=m.style||{},ge=Je.lineColor||"#ffffff",tt=(rt=Je.lineThickness)!=null?rt:2,ct=Je.lineOrientation||"horizontal",at=Je.lineStyle==="dashed",xt=(pt=Je.lineDashLength)!=null?pt:6,k=(ae=Je.lineDashGap)!=null?ae:4,t=Math.max(1,Math.round((dt=m.width)!=null?dt:ct==="horizontal"?200:2)),oe=Math.max(1,Math.round((Re=m.height)!=null?Re:ct==="horizontal"?2:200)),$e=Math.round(oe/2),Gt=Math.round(t/2),Mt=at?` stroke-dasharray="${xt} ${k}"`:"";return ct==="horizontal"?`<svg${q}${Oe}${G} viewBox="0 0 ${t} ${oe}" preserveAspectRatio="none" style="${V};z-index:${L}"><line x1="0" y1="${$e}" x2="${t}" y2="${$e}" stroke="${ge}" stroke-width="${tt}"${Mt} fill="none" /></svg>`:`<svg${q}${Oe}${G} viewBox="0 0 ${t} ${oe}" preserveAspectRatio="none" style="${V};z-index:${L}"><line x1="${Gt}" y1="0" x2="${Gt}" y2="${oe}" stroke="${ge}" stroke-width="${tt}"${Mt} fill="none" /></svg>`}if(m.type==="chart"){const Je=m.elementId&&m.elementId.trim()?m.elementId.trim():`chart_${U}`,ge=cr(m.text||"chart");return`<div${q}${Oe}${G} id="${Je}" style="${V};z-index:${L}">${ge}</div>`}return`<div${q}${Oe}${G} style="${V};z-index:${L}">${cr((m.text||"").replace(/\\n/g,`
`))}</div>`}const be=e.map((m,U)=>le(m,U)).join(`
      `),$=os(e),ue=a.backgroundUrl||"",ze=a.backgroundColor||"transparent",Ge=a.globalFontFamily||"",je=a.globalFontSize||14,se=a.globalColor||"#000000",M=(()=>{const m=[];let U=0;return e.forEach(V=>{if(V.type==="chart"){const L=V.elementId&&V.elementId.trim()?V.elementId.trim():`chart_${U}`;U++;const q=V.chartOption||{};try{m.push(`'${L.replace(/'/g,"\\'")}' : ${JSON.stringify(q)}`)}catch{m.push(`'${L.replace(/'/g,"\\'")}' : {}`)}}}),`{ ${m.join(", ")} }`})(),g=(()=>{const m=new Set;return e.forEach(U=>{const V=String(U.hiddenLabel||"").trim(),L=Oo(V),q=!!U.hidden;L&&q&&m.add(L)}),Array.from(m).map(U=>`const ${U} = ref(false)`).join(`
`)})();return`
<template>
  <div class="${S}" :style="containerStyle">
    ${be}
  </div>
</template>

<script setup lang="ts">
import { onMounted, ref, computed } from 'vue'
${P?`import * as echarts from 'echarts'
`:""}
function assetUrl(p: string): string { try { return new URL(p, import.meta.url).href } catch { return p } }
const config = {
  width: ${Math.round(a.width)},
  height: ${Math.round(a.height)},
  backgroundColor: '${ze.replace(/'/g,"\\'")}',
  globalFontFamily: '${Ge.replace(/'/g,"\\'")}',
  globalFontSize: ${Math.round(je)},
  globalColor: '${se}',
}
const backgroundUrl: string = ${d!=null&&d.backgroundFileName?`assetUrl('./imgs/${String(d.backgroundFileName).replace(/'/g,"\\'")}')`:`'${ue.replace(/'/g,"\\'")}'`}
const images: Record<string, string> = {}
${P?`const chartOptions: Record<string, any> = ${M}`:""}
${g?`${g}
`:""}
const containerStyle = computed(() => {
  const base: Record<string, string> = {
    position: 'relative',
    width: config.width + 'px',
    height: config.height + 'px',
    fontFamily: config.globalFontFamily,
    fontSize: config.globalFontSize + 'px',
    color: config.globalColor,
    backgroundColor: (config.backgroundColor || 'transparent') as string,
  }
  if (backgroundUrl) {
    return Object.assign({}, base, {
      backgroundImage: 'url(' + backgroundUrl + ')',
      backgroundSize: 'cover',
      backgroundRepeat: 'no-repeat',
    }) as Record<string, string>
  }
  return base
})
// 事件处理函数
${(()=>{const m=new Map,U=V=>{V.forEach(L=>{const q=L.eventBinding;q&&q.enabled&&q.handlerName&&m.set(String(q.handlerName),String(q.code||"")),Array.isArray(L.children)&&U(L.children)})};return U(e),Array.from(m.entries()).map(([V,L])=>`function ${V}(e: MouseEvent){
${L}
}`).join(`
`)})()}
${P?`onMounted(() => {
  Object.keys(chartOptions || {}).forEach((id) => {
    const el = document.getElementById(id)
    if (el && (echarts as any)) { const inst = (echarts as any).init(el); inst.setOption((chartOptions as any)[id], true) }
  })
})`:""}
<\/script>

<style scoped>
.container { box-sizing: border-box; }
.text-flex-left { display:flex; align-items:center; justify-content:flex-start; }
.text-flex-center { display:flex; align-items:center; justify-content:center; }
.text-flex-right { display:flex; align-items:center; justify-content:flex-end; }
${$}
</style>
`}function Ul(f){return String(f).replace(/[&<>"']/g,a=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"})[a]||a)}function as(f){const a=f.style||{},e=[];if(e.push("position:absolute"),e.push(`left:${Math.round(f.left||f.x||0)}px`),e.push(`top:${Math.round(f.top||f.y||0)}px`),f.autoSize||(f.width&&e.push(`width:${Math.round(f.width)}px`),f.height&&e.push(`height:${Math.round(f.height)}px`)),a.opacity!==void 0&&e.push(`opacity:${a.opacity}`),a.border&&!(f.type==="container"&&a.border==="1px dashed rgba(148,163,184,0.6)")&&e.push(`border:${a.border}`),a.borderRadius&&e.push(`border-radius:${a.borderRadius}`),a.backgroundColor&&e.push(`background-color:${a.backgroundColor}`),a.boxShadow&&e.push(`box-shadow:${a.boxShadow}`),a.backgroundGradient&&a.backgroundGradient.colors&&a.backgroundGradient.colors.length){const S=a.backgroundGradient.angle||0,D=a.backgroundGradient.colors[0]||"#000000",P=a.backgroundGradient.colors[1]||"#000000";e.push(`background-image:linear-gradient(${S}deg, ${D}, ${P})`),e.push("background-size:cover"),e.push("background-repeat:no-repeat")}if(f.type==="text"&&(a.fontFamily&&e.push(`font-family:${a.fontFamily}`),a.fontSize!==void 0&&e.push(`font-size:${a.fontSize}px`),a.color&&e.push(`color:${a.color}`),a.fontWeight&&e.push(`font-weight:${a.fontWeight}`),a.letterSpacing!==void 0&&a.letterSpacing!==null&&e.push(`letter-spacing:${a.letterSpacing}px`),a.lineHeight!==void 0&&e.push(`line-height:${a.lineHeight}`),a.fontStyle&&e.push(`font-style:${a.fontStyle}`),a.textAlign&&e.push(`text-align:${a.textAlign}`),a.textDecoration&&e.push(`text-decoration:${a.textDecoration}`),e.push("white-space:pre-wrap"),a.textOrientation==="vertical"&&(e.push("writing-mode:vertical-rl"),e.push("text-orientation:upright")),a.textGradient&&a.textGradient.colors&&a.textGradient.colors.length)){const S=a.textGradient.angle||0,D=a.textGradient.colors[0]||"#000000",P=a.textGradient.colors[1]||"#000000";e.push(`background-image:linear-gradient(${S}deg, ${D}, ${P})`),e.push("-webkit-background-clip:text"),e.push("background-clip:text"),e.push("color:transparent")}f.type==="image"&&a.objectFit&&e.push(`object-fit:${a.objectFit}`);const d=f.eventBinding;return d&&d.enabled&&d.cursor&&e.push(`cursor:${d.cursor}`),f.hidden&&e.push("display:none"),e.join(";")}function Do(f){return String(f).split(";").map(a=>a.trim()).filter(Boolean).map(a=>a.includes("!important")?a:`${a} !important`).join("; ")}function is(f){return String(f).replace(/\{([^}]*)\}/g,(a,e)=>`{ ${Do(e)} }`)}function ds(f){const a=[],e=d=>{d.forEach(S=>{if((S.type==="group"||S.type==="container")&&Array.isArray(S.children))e(S.children);else{const D=(S.className||"").trim(),P=S.customClassCss?String(S.customClassCss).trim():"";if(!D||!P)return;/\{[^}]*\}/.test(P)?a.push(is(P)):a.push(`.${D} { ${Do(P)} }`)}})};return e(f),a.join(`
`)}function So(f,a,e,d){function S(g){for(const m of g)if((m.type==="group"||m.type==="container")&&Array.isArray(m.children)){if(S(m.children))return!0}else if(m.type==="chart")return!0;return!1}const D=S(e),P=a.backgroundUrl||"",le=d!=null&&d.backgroundFileName?`background-image:url('./imgs/${d.backgroundFileName}');background-size:cover;background-repeat:no-repeat;`:P?`background-image:url('${P}');background-size:cover;background-repeat:no-repeat;`:"";let be=0;const $={};(function(m){let U=0;const V=L=>{L.forEach(q=>{if((q.type==="group"||q.type==="container")&&Array.isArray(q.children))V(q.children);else if(q.type==="chart"){const Oe=q.elementId&&String(q.elementId).trim()?String(q.elementId).trim():`chart_${U++}`;$[q.id]=Oe}})};V(m)})(e);function ue(g){var K,G,ne,rt,pt;const m=as(g),U=g.zIndex||1,V=g.className&&g.className.trim()?` class="${g.className.trim()}"`:"",L=g.eventBinding,q=L&&L.enabled&&L.handlerName?` onclick="${String(L.handlerName)}(event)"`:"",Oe=g.elementId&&g.elementId.trim()?` id="${g.elementId.trim()}"`:"";if((g.type==="group"||g.type==="container")&&Array.isArray(g.children)&&g.children.length>0){const ae=g.children.map(dt=>ue(dt)).join(`
        `);return`<div${V}${q}${Oe} style="${m};z-index:${U}">
        ${ae}
      </div>`}if(g.type==="text"){const ae=(g.style||{}).textAlign||"left",dt=ae==="center"?"text-flex-center":ae==="right"?"text-flex-right":"text-flex-left",Re=[(g.className||"").trim(),dt].filter(Boolean).join(" ");return`<div${Re?` class="${Re}"`:""}${q} style="${m};z-index:${U}">${Ul(g.text||"")}</div>`}if(g.type==="image"){if(d!=null&&d.imageFileMap&&d.imageFileMap[g.id]){const ae=d.imageFileMap[g.id];return`<img${V}${q} src="./imgs/${ae}" style="${m};z-index:${U}" alt="" />`}if(d!=null&&d.imageFileNames&&d.imageFileNames[be]){const ae=d.imageFileNames[be++];return`<img${V}${q} src="./imgs/${ae}" style="${m};z-index:${U}" alt="" />`}return`<div${V}${q} style="${m};z-index:${U}"></div>`}if(g.type==="line"){const ae=g.style||{},dt=ae.lineColor||"#ffffff",Re=(K=ae.lineThickness)!=null?K:2,Je=ae.lineOrientation||"horizontal",ge=ae.lineStyle==="dashed",tt=(G=ae.lineDashLength)!=null?G:6,ct=(ne=ae.lineDashGap)!=null?ne:4,at=Math.max(1,Math.round((rt=g.width)!=null?rt:Je==="horizontal"?200:2)),xt=Math.max(1,Math.round((pt=g.height)!=null?pt:Je==="horizontal"?2:200)),k=Math.round(xt/2),t=Math.round(at/2),oe=ge?` stroke-dasharray="${tt} ${ct}"`:"";return Je==="horizontal"?`<svg${V}${q} viewBox="0 0 ${at} ${xt}" preserveAspectRatio="none" style="${m};z-index:${U}"><line x1="0" y1="${k}" x2="${at}" y2="${k}" stroke="${dt}" stroke-width="${Re}"${oe} fill="none" /></svg>`:`<svg${V}${q} viewBox="0 0 ${at} ${xt}" preserveAspectRatio="none" style="${m};z-index:${U}"><line x1="${t}" y1="0" x2="${t}" y2="${xt}" stroke="${dt}" stroke-width="${Re}"${oe} fill="none" /></svg>`}if(g.type==="chart"){const ae=$[g.id]||String(g.elementId||"");return`<div${V}${q} id="${ae}" style="${m};z-index:${U}">${Ul(g.text||"chart")}</div>`}return g.type==="container"?`<div${V}${q} style="${m};z-index:${U}">${Ul(g.text||"")}</div>`:`<div${V}${q} style="${m};z-index:${U}">${Ul(g.text||"")}</div>`}const ze=e.map(g=>ue(g)).join(`
      `),Ge=ds(e),je=d!=null&&d.fontFaces&&d.fontFaces.length>0?d.fontFaces.map(g=>`@font-face { font-family: '${String(g.family).replace(/'/g,"\\'")}'; src: url('./fonts/${String(g.file)}'); font-weight: normal; font-style: normal; }`).join(`
`):"";function se(g,m){g.forEach(U=>{if((U.type==="group"||U.type==="container")&&Array.isArray(U.children))se(U.children,m);else if(U.type==="chart"){const V=$[U.id]||String(U.elementId||"");try{m.push(`chartOptions['${V.replace(/'/g,"\\'")}'] = ${JSON.stringify(U.chartOption||{})};`)}catch{m.push(`chartOptions['${V.replace(/'/g,"\\'")}'] = {};`)}}})}const M=D?`
    (function(){
      var chartOptions = {};
      ${(()=>{const g=[];return se(e,g),g.join(`
      `)})()}
      Object.keys(chartOptions).forEach(function(id){
        var el = document.getElementById(id);
        if (el && window.echarts) { var inst = window.echarts.init(el); inst.setOption(chartOptions[id], true); }
      });
    })();
  `:"";return`<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<title>${Ul(f)}</title>
<style>
.container { position:relative; width:${Math.round(a.width)}px; height:${Math.round(a.height)}px; font-family:${String(a.globalFontFamily||"").replace(/'/g,"\\'")}; font-size:${Math.round(a.globalFontSize)}px; color:${String(a.globalColor)}; background-color:${String(a.backgroundColor||"transparent")}; ${le} }
.text-flex-left { display:flex; align-items:center; justify-content:flex-start; }
.text-flex-center { display:flex; align-items:center; justify-content:center; }
.text-flex-right { display:flex; align-items:center; justify-content:flex-end; }
${je}
${Ge}
</style>
${D?'<script src="https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"><\/script>':""}
</head>
<body>
<div class="container">
  ${ze}
</div>
<script>
${(()=>{const g=new Map,m=U=>{U.forEach(V=>{const L=V.eventBinding;L&&L.enabled&&L.handlerName&&g.set(String(L.handlerName),String(L.code||"")),Array.isArray(V.children)&&m(V.children)})};return m(e),Array.from(g.entries()).map(([U,V])=>`function ${U}(event){
${V}
}`).join(`
`)})()}
${M}
<\/script>
</body>
</html>`}function ir(f){return f.replace(/[&<>"']/g,a=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"})[a]||a)}function Co(f){var d,S;const a=f.style||{},e=[];if(e.push("position:absolute"),e.push(`left:${Math.round(f.left||0)}px`),e.push(`top:${Math.round(f.top||0)}px`),f.autoSize||(f.width&&e.push(`width:${Math.round(f.width)}px`),f.height&&e.push(`height:${Math.round(f.height)}px`)),a.opacity!==void 0&&e.push(`opacity:${a.opacity}`),a.border&&!(f.type==="container"&&a.border==="1px dashed rgba(148,163,184,0.6)")&&e.push(`border:${a.border}`),a.borderRadius&&e.push(`border-radius:${a.borderRadius}`),a.backgroundColor&&e.push(`background-color:${a.backgroundColor}`),a.boxShadow&&e.push(`box-shadow:${a.boxShadow}`),a.backgroundGradient&&((d=a.backgroundGradient.colors)!=null&&d.length)){const D=a.backgroundGradient.angle||0,P=a.backgroundGradient.colors[0]||"#000000",le=a.backgroundGradient.colors[1]||"#000000";e.push(`background-image:linear-gradient(${D}deg, ${P}, ${le})`),e.push("background-size:cover"),e.push("background-repeat:no-repeat")}if(f.type==="text"&&(a.fontFamily&&e.push(`font-family:${a.fontFamily}`),a.fontSize!==void 0&&e.push(`font-size:${a.fontSize}px`),a.color&&e.push(`color:${a.color}`),a.fontWeight&&e.push(`font-weight:${a.fontWeight}`),a.letterSpacing!==void 0&&a.letterSpacing!==null&&e.push(`letter-spacing:${a.letterSpacing}px`),a.lineHeight!==void 0&&e.push(`line-height:${a.lineHeight}`),a.fontStyle&&e.push(`font-style:${a.fontStyle}`),a.textAlign&&e.push(`text-align:${a.textAlign}`),a.textDecoration&&e.push(`text-decoration:${a.textDecoration}`),e.push("white-space:pre-wrap"),a.textOrientation==="vertical"&&(e.push("writing-mode:vertical-rl"),e.push("text-orientation:upright")),a.textGradient&&((S=a.textGradient.colors)!=null&&S.length))){const D=a.textGradient.angle||0,P=a.textGradient.colors[0]||"#000000",le=a.textGradient.colors[1]||"#000000";e.push(`background-image:linear-gradient(${D}deg, ${P}, ${le})`),e.push("-webkit-background-clip:text"),e.push("background-clip:text"),e.push("color:transparent")}return f.type==="image"&&a.objectFit&&e.push(`object-fit:${a.objectFit}`),f.hidden&&e.push("display:none"),e.join(";")}function Bo(f){return String(f).split(";").map(a=>a.trim()).filter(Boolean).map(a=>a.includes("!important")?a:`${a} !important`).join("; ")}function us(f){return String(f).replace(/\{([^}]*)\}/g,(a,e)=>`{ ${Bo(e)} }`)}function cs(f){const a=[],e=d=>{d.forEach(S=>{if((S.type==="group"||S.type==="container")&&Array.isArray(S.children))e(S.children);else{const D=(S.className||"").trim(),P=S.customClassCss?String(S.customClassCss).trim():"";if(!D||!P)return;/\{[^}]*\}/.test(P)?a.push(us(P)):a.push(`.${D} { ${Bo(P)} }`)}})};return e(f),a.join(`
`)}function Mo(f,a,e,d){const S=f.replace(/[^A-Za-z0-9_]/g,"_"),D=`lc-${S}-root`,P=`lc-${S}-flex-left`,le=`lc-${S}-flex-center`,be=`lc-${S}-flex-right`,$=e.some(g=>g.type==="chart");let ue=0;const ze=e.map((g,m)=>{var q,Oe,K,G,ne;const U=Co(g),V=g.zIndex||1,L=g.className&&g.className.trim()?` class="${g.className.trim()}"`:"";if((g.type==="group"||g.type==="container")&&Array.isArray(g.children)){const rt=g.children.map(ae=>{const dt=Co(ae),Re=ae.zIndex||1,Je=ae.className&&ae.className.trim()?` class="${ae.className.trim()}"`:"",ge=ae.elementId&&ae.elementId.trim()?` id="${ae.elementId.trim()}"`:"";if(ae.type==="image"){if(d!=null&&d.imageFileMap&&d.imageFileMap[ae.id]){const tt=d.imageFileMap[ae.id];return`<img${Je}${ge} src="/imgs/${tt}" style="${dt};z-index:${Re}" alt="" />`}if(d!=null&&d.imageFileNames&&d.imageFileNames[ue]){const tt=d.imageFileNames[ue++];return`<img${Je}${ge} src="/imgs/${tt}" style="${dt};z-index:${Re}" alt="" />`}}return`<div${Je}${ge} style="${dt};z-index:${Re}">${ir(ae.text||"")}</div>`}).join(`
        `),pt=g.elementId&&g.elementId.trim()?` id="${g.elementId.trim()}"`:"";return`<div${L}${pt} style="${U};z-index:${V}">${rt}</div>`}if(g.type==="text")return`<div${L} style="${U};z-index:${V}">${ir((g.text||"").replace(/\\n/g,`
`))}</div>`;if(g.type==="image"){if(d!=null&&d.imageFileMap&&d.imageFileMap[g.id]){const rt=d.imageFileMap[g.id];return`<img${L} src="/imgs/${rt}" style="${U};z-index:${V}" alt="" />`}if(d!=null&&d.imageFileNames&&d.imageFileNames[ue]){const rt=d.imageFileNames[ue++];return`<img${L} src="/imgs/${rt}" style="${U};z-index:${V}" alt="" />`}return`<div${L} style="${U};z-index:${V}"></div>`}if(g.type==="line"){const rt=g.style||{},pt=rt.lineColor||"#ffffff",ae=(q=rt.lineThickness)!=null?q:2,dt=rt.lineOrientation||"horizontal",Re=rt.lineStyle==="dashed",Je=(Oe=rt.lineDashLength)!=null?Oe:6,ge=(K=rt.lineDashGap)!=null?K:4,tt=Math.max(1,Math.round((G=g.width)!=null?G:dt==="horizontal"?200:2)),ct=Math.max(1,Math.round((ne=g.height)!=null?ne:dt==="horizontal"?2:200)),at=Math.round(ct/2),xt=Math.round(tt/2),k=Re?` stroke-dasharray="${Je} ${ge}"`:"";return dt==="horizontal"?`<svg${L} viewBox="0 0 ${tt} ${ct}" preserveAspectRatio="none" style="${U};z-index:${V}"><line x1="0" y1="${at}" x2="${tt}" y2="${at}" stroke="${pt}" stroke-width="${ae}"${k} fill="none" /></svg>`:`<svg${L} viewBox="0 0 ${tt} ${ct}" preserveAspectRatio="none" style="${U};z-index:${V}"><line x1="${xt}" y1="0" x2="${xt}" y2="${ct}" stroke="${pt}" stroke-width="${ae}"${k} fill="none" /></svg>`}if(g.type==="chart"){const rt=g.elementId&&g.elementId.trim()?g.elementId.trim():`chart_${m}`;return`<div${L} id="${rt}" style="${U};z-index:${V}">${ir(g.text||"chart")}</div>`}return`<div${L} style="${U};z-index:${V}">${ir(g.text||"")}</div>`}).join(`
      `),Ge=cs(e),je=d!=null&&d.fontFaces&&d.fontFaces.length>0?d.fontFaces.map(g=>`@font-face { font-family: '${g.family.replace(/'/g,"\\'")}'; src: url('/fonts/${g.file}'); font-weight: normal; font-style: normal; }`).join(`
`):"",se=(()=>{const g=[];return e.forEach((m,U)=>{if(m.type==="chart"){const V=m.elementId&&m.elementId.trim()?m.elementId.trim():`chart_${U}`,L=m.chartOption||{};try{g.push(`'${V.replace(/'/g,"\\'")}' : ${JSON.stringify(L)}`)}catch{g.push(`'${V.replace(/'/g,"\\'")}' : {}`)}}}),`{ ${g.join(", ")} }`})(),M=d!=null&&d.backgroundFileName?`'/imgs/${String(d.backgroundFileName).replace(/'/g,"\\'")}'`:`'${(a.backgroundUrl||"").replace(/'/g,"\\'")}'`;return`import React, { useEffect } from 'react';
${$?`import * as echarts from 'echarts';
`:""}
export default function ${f.replace(/[^A-Za-z0-9_]/g,"_")}() {
  const config = { width: ${Math.round(a.width)}, height: ${Math.round(a.height)}, backgroundColor: '${(a.backgroundColor||"transparent").replace(/'/g,"\\'")}', globalFontFamily: '${(a.globalFontFamily||"").replace(/'/g,"\\'")}', globalFontSize: ${Math.round(a.globalFontSize)}, globalColor: '${a.globalColor}' };
  const backgroundUrl = ${M};
  ${$?`const chartOptions = ${se};
  useEffect(() => {
    Object.keys(chartOptions || {}).forEach((id) => {
      const el = document.getElementById(id);
      if (el) { const inst = echarts.init(el); inst.setOption(chartOptions[id], true); }
    });
  }, []);
`:""}  const containerStyle = { position:'relative', width: config.width + 'px', height: config.height + 'px', fontFamily: config.globalFontFamily, fontSize: config.globalFontSize + 'px', color: config.globalColor, backgroundColor: config.backgroundColor, ...(backgroundUrl ? { backgroundImage: 'url(' + backgroundUrl + ')', backgroundSize: 'cover', backgroundRepeat: 'no-repeat' } : {}) };
  return (
    <div className="${D}" style={containerStyle}>
      <style>{\`.${P}{display:flex;align-items:center;justify-content:flex-start}.${le}{display:flex;align-items:center;justify-content:center}.${be}{display:flex;align-items:center;justify-content:flex-end${je?"\\n"+je:""}${Ge?"\\n"+Ge:""}\`}</style>
      <div dangerouslySetInnerHTML={{ __html: \`${ze.replace(/`/g,"\\`")}\` }} />
    </div>
  );
}
`}var Io=jo(Ro()),ps=["placeholder"],gs={key:0,class:"absolute z-10 bg-gray-900 border border-gray-700 rounded w-full mt-1 max-h-40 overflow-auto shadow custom-scrollbar"},fs=["onMousedown"],ys={key:0,class:"px-2 py-2 text-xs text-gray-400"},bs=dl({__name:"SearchableSelect",props:{modelValue:{},options:{},placeholder:{},numeric:{type:Boolean}},emits:["update:modelValue"],setup(f,{emit:a}){const e=f,d=a,S=pe(!1),D=pe(""),P=pe(null),le=pe("");let be=null;const $=pe(!1);Qt(()=>e.modelValue,L=>{L==null?D.value="":D.value=String(L)},{immediate:!0});const ue=st(()=>e.options.map(L=>String(L))),ze=st(()=>{const L=le.value.trim().toLowerCase();return L?ue.value.filter(q=>q.toLowerCase().includes(L)):ue.value});function Ge(L){D.value=L;const q=e.numeric?Number(L):L;d("update:modelValue",q),S.value=!1}function je(){const L=D.value.trim();if(!L){d("update:modelValue",(e.numeric,null)),S.value=!1;return}const q=e.numeric?Number(L):L;d("update:modelValue",q),S.value=!1}function se(){$.value=!1,S.value=!0,m(D.value)}function M(){}function g(L){L.key==="Enter"&&je()}function m(L){be&&window.clearTimeout(be),be=window.setTimeout(()=>{le.value=L},180)}function U(){$.value=!0,S.value=!0,m(D.value)}function V(L){P.value&&(P.value.contains(L.target)||(S.value=!1))}return fr(()=>{window.addEventListener("click",V),le.value=D.value}),yr(()=>{window.removeEventListener("click",V),be&&window.clearTimeout(be)}),(L,q)=>(C(),N("div",{class:"relative",ref_key:"root",ref:P},[fe(l("input",{class:"border border-gray-700 bg-gray-900 text-gray-100 rounded w-full px-2 py-1",placeholder:f.placeholder||"搜索选择或直接输入","onUpdate:modelValue":q[0]||(q[0]=Oe=>D.value=Oe),onInput:U,onFocus:se,onBlur:M,onKeydown:g},null,40,ps),[[Me,D.value]]),S.value?(C(),N("div",gs,[(C(!0),N(Wt,null,Kt(ze.value,Oe=>(C(),N("div",{key:Oe,class:"px-2 py-1 hover:bg-gray-700 cursor-pointer text-sm text-gray-100",onMousedown:br(K=>Ge(Oe),["prevent"])},it(Oe),41,fs))),128)),ze.value.length===0?(C(),N("div",ys,"无匹配项，回车使用当前输入")):Y("",!0)])):Y("",!0)],512))}}),Tt=bs,xs={class:"space-y-3"},ms={class:"flex items-center justify-between"},hs={class:"inline-flex items-center cursor-pointer"},vs={class:"flex items-center justify-between"},ws={class:"inline-flex items-center cursor-pointer"},$s=dl({__name:"CanvasSettingsPanel",props:{spacingEnabled:{type:Boolean},alignmentEnabled:{type:Boolean}},emits:["update:spacingEnabled","update:alignmentEnabled"],setup(f,{emit:a}){const e=f,d=a,S=st({get:()=>e.spacingEnabled,set:P=>d("update:spacingEnabled",P)}),D=st({get:()=>e.alignmentEnabled,set:P=>d("update:alignmentEnabled",P)});return(P,le)=>(C(),N("div",xs,[le[6]||(le[6]=l("h3",{class:"text-sm font-medium text-cyan-300 border-b border-cyan-500/30 pb-1"},"辅助间距",-1)),l("div",ms,[le[3]||(le[3]=l("label",{class:"text-xs text-gray-400"},"显示间距标注",-1)),l("label",hs,[fe(l("input",{type:"checkbox",class:"sr-only peer","onUpdate:modelValue":le[0]||(le[0]=be=>S.value=be)},null,512),[[Rl,S.value]]),le[2]||(le[2]=l("div",{class:"relative w-12 h-6 rounded-full bg-gray-700/60 transition-all duration-200 shadow-inner peer-checked:bg-gradient-to-r peer-checked:from-cyan-600 peer-checked:to-blue-600"},[l("div",{class:"absolute left-0.5 top-0.5 w-5 h-5 bg-white rounded-full shadow transform transition-transform duration-200 peer-checked:translate-x-6"})],-1)),l("span",{class:Ne(["ml-3 text-xs",S.value?"text-cyan-300":"text-gray-300"])},it(S.value?"已开启":"已关闭"),3)])]),l("div",vs,[le[5]||(le[5]=l("label",{class:"text-xs text-gray-400"},"显示对齐参考线",-1)),l("label",ws,[fe(l("input",{type:"checkbox",class:"sr-only peer","onUpdate:modelValue":le[1]||(le[1]=be=>D.value=be)},null,512),[[Rl,D.value]]),le[4]||(le[4]=l("div",{class:"relative w-12 h-6 rounded-full bg-gray-700/60 transition-all duration-200 shadow-inner peer-checked:bg-gradient-to-r peer-checked:from-cyan-600 peer-checked:to-blue-600"},[l("div",{class:"absolute left-0.5 top-0.5 w-5 h-5 bg-white rounded-full shadow transform transition-transform duration-200 peer-checked:translate-x-6"})],-1)),l("span",{class:Ne(["ml-3 text-xs",D.value?"text-cyan-300":"text-gray-300"])},it(D.value?"已开启":"已关闭"),3)])])]))}}),Es=$s,ks={class:"space-y-3"},Ss={key:0,class:"text-sm text-gray-400"},Cs={key:1,class:"space-y-2"},Ms=dl({__name:"LayersList",props:{elements:{},selectedId:{}},emits:["select","reorderTop"],setup(f,{emit:a}){const e=f,d=a,S=st(()=>e.elements),D=pe({});function P(se){D.value[se]=!D.value[se]}function le(se){const M=se.children;return Array.isArray(M)&&M.length>0}function be(se){const M=se.children;return Array.isArray(M)?M:[]}const $=pe(null),ue=pe(null);function ze(se){const M=(se.elementId||"").trim(),g=(se.className||"").trim(),m=(se.text||"").trim();return M||g||m||se.id}function Ge(se){const M=String(se.type||"").toLowerCase();return M==="text"?{label:"文本",cls:"bg-blue-600/30 text-blue-200"}:M==="arc-text"?{label:"环绕",cls:"bg-cyan-600/30 text-cyan-200"}:M==="image"?{label:"图片",cls:"bg-emerald-600/30 text-emerald-200"}:M==="chart"?{label:"图表",cls:"bg-orange-600/30 text-orange-200"}:M==="line"?{label:"线条",cls:"bg-slate-600/30 text-slate-200"}:M==="container"?{label:"容器",cls:"bg-cyan-600/30 text-cyan-200"}:M==="group"?{label:"分组",cls:"bg-purple-600/30 text-purple-200"}:{label:"元素",cls:"bg-gray-600/30 text-gray-200"}}const je=dl({name:"LayerNode",props:{node:{type:Object,required:!0},selectedId:{type:String,default:null},depth:{type:Number,default:0},index:{type:Number,default:-1}},emits:["select","reorderTop"],setup(se,{emit:M}){return()=>{const g=se.node,m=se.depth===0,U=g.id===se.selectedId,V=Ge(g),L=il("div",{class:"flex items-center gap-2"},[m&&se.index>=0?il("span",{class:"px-1.5 py-0.5 text-[10px] rounded bg-cyan-600/30 text-cyan-200"},String(se.index+1)):null,le(g)?il("button",{class:"px-2 py-1 text-xs bg-gray-700/60 hover:bg-gray-600/60 rounded text-gray-200",onClick:K=>{K.stopPropagation(),P(g.id)},title:D.value[g.id]?"收起":"展开"},D.value[g.id]?"▼":"▶"):null,il("span",{class:`px-1.5 py-0.5 text-[10px] rounded ${V.cls}`},V.label),il("span",{class:"text-left text-sm text-gray-100 truncate whitespace-nowrap max-w-[180px]",title:ze(g)},ze(g))]),q=il("div",{class:["bg-gray-800/60 border border-cyan-500/20 rounded-lg px-3 py-2 cursor-grab hover:bg-gray-700/60 transition-colors",U?"ring-2 ring-cyan-400/40 bg-gray-700/70":"",m&&ue.value===se.index?"border-purple-400":"",se.depth>0?"ml-3":""].filter(Boolean).join(" "),onClick:()=>M("select",g.id),draggable:m?!0:void 0,onDragstart:K=>{m&&($.value=se.index,K.target.classList.add("cursor-grabbing"))},onDragover:K=>{m&&(K.preventDefault(),ue.value=se.index)},onDragenter:()=>{m&&(ue.value=se.index)},onDrop:K=>{if(!m)return;K.preventDefault();const G=$.value,ne=se.index;$.value=null,ue.value=null,typeof G=="number"&&typeof ne=="number"&&G!==ne&&M("reorderTop",{from:G,to:ne})},onDragend:K=>{$.value=null,ue.value=null,K.target.classList.remove("cursor-grabbing")}},[L,null]),Oe=D.value[g.id]&&le(g)?il("div",{class:"mt-2 space-y-2 pl-3"},[...be(g)].map(K=>il(je,{node:K,selectedId:se.selectedId,depth:se.depth+1,index:-1,onSelect:G=>M("select",G)}))):null;return il("div",{},[q,Oe])}}});return(se,M)=>(C(),N("div",ks,[M[2]||(M[2]=l("div",{class:"text-xs text-gray-400"},"所有元素按层叠从上到下显示，支持展开分组/容器",-1)),S.value.length===0?(C(),N("div",Ss,"暂无元素")):(C(),N("div",Cs,[(C(!0),N(Wt,null,Kt(S.value,(g,m)=>(C(),Pl(Fo(je),{key:g.id,node:g,selectedId:f.selectedId,depth:0,index:m,onSelect:M[0]||(M[0]=U=>d("select",U)),onReorderTop:M[1]||(M[1]=U=>d("reorderTop",U))},null,8,["node","selectedId","index"]))),128))]))]))}}),Is=Ms,Ns={class:"w-80 min-w-[300px] bg-gray-900/80 backdrop-blur-sm border border-cyan-500/30 rounded-xl shadow-2xl shadow-cyan-500/20 flex flex-col"},js={class:"p-4 space-y-4 overflow-y-auto flex-1 custom-scrollbar"},Fs={class:"flex items-center gap-2"},As={key:0,class:"space-y-2"},zs={key:1,class:"space-y-2"},Os={class:"grid grid-cols-2 gap-2"},Ds={key:2,class:"space-y-2"},Bs={class:"flex gap-2"},Gs={key:3,class:"space-y-2"},Ts={class:"flex gap-2"},Ls=["value"],Us={key:4,class:"space-y-3"},Vs={class:"space-y-2"},Rs={class:"space-y-2"},Ps={class:"space-y-2"},Ws={key:6,class:"space-y-2 pt-4 border-t border-cyan-500/30"},Hs={class:"relative"},Js={key:0,class:"fixed inset-0 z-50 flex items-center justify-center"},_s={class:"relative w-[520px] max-w-[90vw] p-4 bg-gray-900/95 backdrop-blur-md border border-emerald-500/40 rounded-xl shadow-2xl"},qs={class:"flex items-center justify-between mb-3"},Ys={class:"grid grid-cols-2 gap-2"},Ks={key:7,class:"space-y-3"},Xs=dl({__name:"CanvasSidebar",props:{exportName:{},config:{},fontLibrary:{},spacingEnabled:{type:Boolean},alignmentEnabled:{type:Boolean},elements:{},selectedId:{}},emits:["update:exportName","update:configWidth","update:configHeight","update:backgroundColor","update:globalFontFamily","update:globalFontSize","update:globalColor","update:spacingEnabled","update:alignmentEnabled","backgroundFileChange","openPreview","downloadByFormat","downloadAllFormats","resetCanvas","selectElement","moveElementUp","moveElementDown","moveElementTop","moveElementBottom","reorderTopElements"],setup(f,{emit:a}){const e=f,d=a,S=st({get:()=>e.exportName,set:K=>d("update:exportName",K)}),D=st({get:()=>e.config.width,set:K=>d("update:configWidth",K)}),P=st({get:()=>e.config.height,set:K=>d("update:configHeight",K)}),le=st({get:()=>e.config.backgroundColor||"",set:K=>d("update:backgroundColor",K)}),be=st({get:()=>e.config.globalFontFamily||"",set:K=>d("update:globalFontFamily",K)}),$=st({get:()=>e.config.globalFontSize||14,set:K=>d("update:globalFontSize",K)}),ue=st({get:()=>e.config.globalColor||"#ffffff",set:K=>d("update:globalColor",K)}),ze=st({get:()=>e.spacingEnabled,set:K=>d("update:spacingEnabled",K)}),Ge=st({get:()=>e.alignmentEnabled,set:K=>d("update:alignmentEnabled",K)});function je(K){try{return String(K||"#000000")}catch{return"#000000"}}const se=st({get:()=>M.value,set:K=>M.value=K}),M=pe(!1),g=pe("settings");function m(K){d("backgroundFileChange",K)}function U(){d("openPreview")}function V(){M.value=!M.value}function L(K){d("downloadByFormat",K),M.value=!1}function q(){d("downloadAllFormats"),M.value=!1}function Oe(){d("resetCanvas")}return(K,G)=>(C(),N("div",Ns,[G[31]||(G[31]=l("div",{class:"p-4 border-b border-cyan-500/30 bg-gradient-to-r from-cyan-600/20 to-blue-600/20 flex-shrink-0"},[l("h2",{class:"text-lg font-bold text-cyan-300 flex items-center gap-2"},[l("span",{class:"w-2 h-2 bg-cyan-400 rounded-full animate-pulse"}),Vl(" 画布设置 ")])],-1)),l("div",js,[l("div",Fs,[l("button",{class:Ne(["px-3 py-1 text-xs rounded bg-gradient-to-r from-cyan-600 to-blue-600 text-white",g.value==="settings"?"":"opacity-50"]),onClick:G[0]||(G[0]=ne=>g.value="settings")},"设置",2),l("button",{class:Ne(["px-3 py-1 text-xs rounded bg-gradient-to-r from-purple-600 to-pink-600 text-white",g.value==="layers"?"":"opacity-50"]),onClick:G[1]||(G[1]=ne=>g.value="layers")},"容器层级",2)]),g.value==="settings"?(C(),N("div",As,[G[21]||(G[21]=l("label",{class:"block text-sm font-medium text-cyan-300"},"组件名称",-1)),fe(l("input",{"onUpdate:modelValue":G[2]||(G[2]=ne=>S.value=ne),class:"w-full px-3 py-2 bg-gray-800/50 border border-cyan-500/30 rounded-lg text-gray-100 placeholder-gray-400 focus:border-cyan-400 focus:ring-1 focus:ring-cyan-400 focus:outline-none transition-all duration-200",placeholder:"GeneratedComponent"},null,512),[[Me,S.value]])])):Y("",!0),g.value==="settings"?(C(),N("div",zs,[G[22]||(G[22]=l("label",{class:"block text-sm font-medium text-cyan-300"},"画布尺寸",-1)),l("div",Os,[fe(l("input",{"onUpdate:modelValue":G[3]||(G[3]=ne=>D.value=ne),type:"number",class:"px-3 py-2 bg-gray-800/50 border border-cyan-500/30 rounded-lg text-gray-100 focus:border-cyan-400 focus:ring-1 focus:ring-cyan-400 focus:outline-none transition-all duration-200",placeholder:"宽度"},null,512),[[Me,D.value,void 0,{number:!0}]]),fe(l("input",{"onUpdate:modelValue":G[4]||(G[4]=ne=>P.value=ne),type:"number",class:"px-3 py-2 bg-gray-800/50 border border-cyan-500/30 rounded-lg text-gray-100 focus:border-cyan-400 focus:ring-1 focus:ring-cyan-400 focus:outline-none transition-all duration-200",placeholder:"高度"},null,512),[[Me,P.value,void 0,{number:!0}]])])])):Y("",!0),g.value==="settings"?(C(),N("div",Ds,[G[23]||(G[23]=l("label",{class:"block text-sm font-medium text-cyan-300"},"背景图片",-1)),l("div",Bs,[l("input",{type:"file",onChange:m,accept:"image/*",class:"flex-1 text-xs text-gray-300 file:mr-2 file:py-1 file:px-2 file:rounded file:border-0 file:text-xs file:bg-cyan-600 file:text-white hover:file:bg-cyan-500 file:cursor-pointer"},null,32)])])):Y("",!0),g.value==="settings"?(C(),N("div",Gs,[G[24]||(G[24]=l("label",{class:"block text-sm font-medium text-cyan-300"},"背景颜色",-1)),l("div",Ts,[l("input",{value:je(le.value),type:"color",onInput:G[5]||(G[5]=ne=>d("update:backgroundColor",ne.target.value)),class:"w-16 h-8 bg-gray-800/50 border border-cyan-500/30 rounded cursor-pointer"},null,40,Ls),fe(l("input",{"onUpdate:modelValue":G[6]||(G[6]=ne=>le.value=ne),type:"text",class:"flex-1 px-3 py-2 bg-gray-800/50 border border-cyan-500/30 rounded-lg text-gray-100 placeholder-gray-400 focus:border-cyan-400 focus:ring-1 focus:ring-cyan-400 focus:outline-none transition-all duration-200",placeholder:"#000000 或 rgba(...)"},null,512),[[Me,le.value]])])])):Y("",!0),g.value==="settings"?(C(),N("div",Us,[G[28]||(G[28]=l("h3",{class:"text-sm font-medium text-cyan-300 border-b border-cyan-500/30 pb-1"},"全局字体设置",-1)),l("div",Vs,[G[25]||(G[25]=l("label",{class:"block text-xs text-gray-400"},"字体族",-1)),Ct(Tt,{options:f.fontLibrary,modelValue:be.value,"onUpdate:modelValue":G[7]||(G[7]=ne=>be.value=ne),placeholder:"选择字体"},null,8,["options","modelValue"])]),l("div",Rs,[G[26]||(G[26]=l("label",{class:"block text-xs text-gray-400"},"字号 (px)",-1)),fe(l("input",{"onUpdate:modelValue":G[8]||(G[8]=ne=>$.value=ne),type:"number",class:"w-full px-2 py-1 bg-gray-800/50 border border-cyan-500/30 rounded text-gray-100 text-sm focus:border-cyan-400 focus:ring-1 focus:ring-cyan-400 focus:outline-none transition-all duration-200"},null,512),[[Me,$.value,void 0,{number:!0}]])]),l("div",Ps,[G[27]||(G[27]=l("label",{class:"block text-xs text-gray-400"},"颜色",-1)),fe(l("input",{"onUpdate:modelValue":G[9]||(G[9]=ne=>ue.value=ne),type:"color",class:"w-full h-8 bg-gray-800/50 border border-cyan-500/30 rounded cursor-pointer"},null,512),[[Me,ue.value]])])])):Y("",!0),g.value==="settings"?(C(),Pl(Es,{key:5,spacingEnabled:ze.value,alignmentEnabled:Ge.value,"onUpdate:spacingEnabled":G[10]||(G[10]=ne=>ze.value=ne),"onUpdate:alignmentEnabled":G[11]||(G[11]=ne=>Ge.value=ne)},null,8,["spacingEnabled","alignmentEnabled"])):Y("",!0),g.value==="settings"?(C(),N("div",Ws,[l("button",{onClick:U,class:"w-full px-4 py-2 bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-500 hover:to-blue-500 text-white rounded-lg font-medium transition-all duration-200 transform hover:scale-105 shadow-lg shadow-cyan-500/25"},"预览（新窗口）"),l("div",Hs,[l("button",{onClick:V,class:"w-full px-4 py-2 bg-gradient-to-r from-emerald-600 to-cyan-600 hover:from-emerald-500 hover:to-cyan-500 text-white rounded-lg font-medium transition-all duration-200 transform hover:scale-105 shadow-lg shadow-emerald-500/25"},"导出"),se.value?(C(),N("div",Js,[l("div",{class:"absolute inset-0 bg-black/60",onClick:G[12]||(G[12]=ne=>se.value=!1)}),l("div",_s,[l("div",qs,[G[29]||(G[29]=l("h3",{class:"text-sm font-medium text-emerald-300"},"选择导出格式",-1)),l("button",{class:"px-2 py-1 text-xs bg-gray-700/60 hover:bg-gray-600/60 rounded text-gray-200",onClick:G[13]||(G[13]=ne=>se.value=!1)},"关闭")]),l("div",Ys,[l("button",{onClick:G[14]||(G[14]=ne=>L("vue2")),class:"px-3 py-2 text-xs bg-gradient-to-r from-emerald-600 to-cyan-600 hover:from-emerald-500 hover:to-cyan-500 text-white rounded"},"Vue2 组件"),l("button",{onClick:G[15]||(G[15]=ne=>L("vue3")),class:"px-3 py-2 text-xs bg-gradient-to-r from-teal-600 to-cyan-600 hover:from-teal-500 hover:to-cyan-500 text-white rounded"},"Vue3 组件"),l("button",{onClick:G[16]||(G[16]=ne=>L("react")),class:"px-3 py-2 text-xs bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-500 hover:to-purple-500 text-white rounded"},"React 组件"),l("button",{onClick:G[17]||(G[17]=ne=>L("html")),class:"px-3 py-2 text-xs bg-gradient-to-r from-slate-600 to-gray-700 hover:from-slate-500 hover:to-gray-600 text-white rounded"},"纯 HTML 页面"),l("button",{onClick:G[18]||(G[18]=ne=>q()),class:"px-3 py-2 text-xs bg-gradient-to-r from-emerald-600 to-teal-600 hover:from-emerald-500 hover:to-teal-500 text-white rounded col-span-2"},"一键导出（全部）")])])])):Y("",!0)]),l("button",{onClick:Oe,class:"w-full px-4 py-2 bg-gradient-to-r from-red-600 to-pink-600 hover:from-red-500 hover:to-pink-500 text-white rounded-lg font-medium transition-all duration-200 transform hover:scale-105 shadow-lg shadow-red-500/25"},"清空画布")])):Y("",!0),g.value==="layers"?(C(),N("div",Ks,[G[30]||(G[30]=l("h3",{class:"text-sm font-medium text-purple-300 border-b border-purple-500/30 pb-1"},"容器层级",-1)),Ct(Is,{elements:e.elements||[],selectedId:e.selectedId||null,onSelect:G[19]||(G[19]=ne=>d("selectElement",ne)),onReorderTop:G[20]||(G[20]=ne=>d("reorderTopElements",ne))},null,8,["elements","selectedId"])])):Y("",!0)])]))}}),Zs=Xs,No=jo(Ho()),Qs={class:"relative w-full"},ea=dl({__name:"CssEditor",props:{modelValue:{},height:{},debounceMs:{}},emits:["update:modelValue"],setup(f,{emit:a}){const e=f,d=a,S=pe(e.modelValue||"");let D=null;const P=typeof e.debounceMs=="number"?Math.max(0,e.debounceMs):250;Qt(()=>e.modelValue,ze=>{D&&(clearTimeout(D),D=null);const Ge=ze||"";Ge!==S.value&&(S.value=Ge)}),Qt(S,ze=>{D&&clearTimeout(D),D=window.setTimeout(()=>{d("update:modelValue",ze),D=null},P)}),yr(()=>{D&&(clearTimeout(D),D=null)});function le(){const ze=S.value||"";if(navigator.clipboard&&typeof navigator.clipboard.writeText=="function")navigator.clipboard.writeText(ze).catch(()=>{try{const Ge=document.createElement("textarea");Ge.value=ze,document.body.appendChild(Ge),Ge.select(),document.execCommand("copy"),document.body.removeChild(Ge)}catch{}});else try{const Ge=document.createElement("textarea");Ge.value=ze,document.body.appendChild(Ge),Ge.select(),document.execCommand("copy"),document.body.removeChild(Ge)}catch{}}function be(){D&&(clearTimeout(D),D=null),S.value="",d("update:modelValue","")}const $=[To,Lo(),Vo],ue=st(()=>{var ze;return(ze=e.height)!=null?ze:"180px"});return(ze,Ge)=>(C(),N("div",Qs,[l("div",{class:"absolute right-2 top-2 z-10 flex gap-2"},[l("button",{type:"button",class:"px-2 py-1 text-xs bg-gray-700/70 hover:bg-gray-700 text-gray-100 rounded",onClick:le},"复制"),l("button",{type:"button",class:"px-2 py-1 text-xs bg-red-600/70 hover:bg-red-600 text-white rounded",onClick:be},"清空")]),Ct(Fo(Uo),{modelValue:S.value,"onUpdate:modelValue":Ge[0]||(Ge[0]=je=>S.value=je),extensions:$,style:Bt({height:ue.value,width:"100%"}),class:"w-full rounded border border-purple-500/30 bg-gray-800/50"},null,8,["modelValue","style"])]))}}),ta=xr(ea,[["__scopeId","data-v-c1c6cbbe"]]);function la(f,a,e,d,S,D){f&&(f.style=f.style||{},f.style.boxShadow=`${a}px ${e}px ${d}px ${S}px ${D}`)}function ra(f){f.style=f.style||{},f.style.textGradient=f.style.textGradient||{colors:["#00A3FF","#ffffff"],angle:0}}function na(f){f.style=f.style||{},f.style.backgroundGradient=f.style.backgroundGradient||{colors:["#00A3FF","#ffffff"],angle:90}}function oa(f,a){var ue,ze,Ge;const e=(ue=a==null?void 0:a.maxDepth)!=null?ue:6,d=(ze=a==null?void 0:a.maxEntries)!=null?ze:400,S=(Ge=a==null?void 0:a.includeIntermediate)!=null?Ge:!1,D=[],P=new WeakSet;function le(je){return Object.prototype.toString.call(je)==="[object Object]"}function be(je){D.length<d&&D.push(je)}function $(je,se,M){if(!(M>e)&&je!=null){if(typeof je!="object"){be(se);return}if(!P.has(je)){if(P.add(je),Array.isArray(je)){be(se);const g=Math.min(je.length,20);for(let m=0;m<g;m++)$(je[m],`${se}[${m}]`,M+1);return}if(le(je)){S&&be(se);const g=Object.keys(je).slice(0,50);for(const m of g)$(je[m],se?`${se}.${m}`:m,M+1);return}be(se)}}}return $(f,"",0),D.filter(Boolean)}function Go(f,a){try{if(!f||!a)return"";const e=a.replace(/\[(\d+)\]/g,".$1").replace(/\['([^']+)'\]/g,".$1").replace(/\["([^\"]+)"\]/g,".$1").split(".").filter(Boolean);let d=f;for(const S of e){if(d==null)return"";d=d[S]}return typeof d=="object"?JSON.stringify(d):d!=null?d:""}catch{return""}}function sa(f,a){var S;if(!a||!((S=a.dynamic)!=null&&S.enabled)||!a.dynamic.objectName||!a.dynamic.propertyPath)return"";const e=a.dynamic,d=f[e.objectName];return String(Go(d,e.propertyPath))}var aa={class:"w-80 min-w-[300px] bg-gray-900/80 backdrop-blur-sm border border-purple-500/30 rounded-xl shadow-2xl shadow-purple-500/20 flex flex-col"},ia={key:0,class:"p-4 space-y-4 overflow-y-auto flex-1 custom-scrollbar"},da={class:"space-y-3"},ua={class:"grid grid-cols-2 gap-2"},ca={class:"col-span-2"},pa={key:0,class:"space-y-3"},ga={class:"text-[10px] text-gray-400 mb-1"},fa={class:"grid grid-cols-4 gap-2"},ya={key:1,class:"space-y-3"},ba={class:"text-[10px] text-gray-400 mb-1"},xa={class:"grid grid-cols-2 gap-2"},ma={class:"col-span-2"},ha={class:"flex gap-2"},va=["value"],wa={key:2,class:"space-y-3"},$a={class:"space-y-2 bg-gray-800/30 p-2 rounded"},Ea={class:"flex items-center justify-between"},ka=["checked"],Sa=["value"],Ca={class:"space-y-2 bg-gray-800/30 p-2 rounded"},Ma={class:"space-y-2"},Ia={class:"flex gap-1"},Na=["value"],ja={class:"flex gap-1"},Fa=["value"],Aa={class:"grid grid-cols-2 gap-2"},za={class:"flex gap-1"},Oa=["value"],Da={class:"flex gap-1"},Ba=["value"],Ga={class:"space-y-2 bg-gray-800/30 p-2 rounded"},Ta={class:"grid grid-cols-2 gap-2"},La={class:"flex items-center gap-1"},Ua=["value"],Va=["value"],Ra=["value"],Pa=["value"],Wa=["value"],Ha=["value"],Ja={class:"space-y-2"},_a={class:"flex items-center justify-between border-b border-gray-700 pb-1"},qa={class:"flex justify-between mb-1"},Ya={class:"text-[10px] text-gray-500"},Ka=["onClick"],Xa={class:"space-y-1"},Za={class:"flex gap-1"},Qa=["value","onInput"],ei=["onClick"],ti=["value","onInput"],li={class:"w-96 bg-gray-900 border border-purple-500/30 rounded-lg shadow-2xl p-4 flex flex-col max-h-[80vh]"},ri={class:"flex justify-between items-center mb-4 border-b border-gray-700 pb-2"},ni={key:0,class:"flex-1 overflow-y-auto custom-scrollbar p-1"},oi={class:"grid grid-cols-4 gap-2"},si=["onClick"],ai=["src","alt"],ii={key:1,class:"flex-1 flex items-center justify-center text-gray-500 text-xs"},di={key:4,class:"space-y-3"},ui={class:"space-y-2"},ci={class:"grid grid-cols-2 gap-2"},pi={class:"grid grid-cols-2 gap-2"},gi={class:"grid grid-cols-2 gap-2"},fi=["value"],yi=["value"],bi={class:"space-y-2"},xi={class:"flex gap-1"},mi=["value"],hi=["value"],vi={class:"space-y-2"},wi={class:"grid grid-cols-3 gap-1"},$i={class:"space-y-2"},Ei={class:"grid grid-cols-2 gap-2"},ki=["value"],Si=["value"],Ci=["value"],Mi=["value"],Ii={class:"grid grid-cols-4 gap-1"},Ni={class:"space-y-3"},ji={class:"flex items-center justify-between"},Fi={class:"inline-flex items-center cursor-pointer"},Ai={key:0,class:"grid grid-cols-2 gap-2"},zi={key:1},Oi={class:"space-y-3"},Di={class:"space-y-2"},Bi={class:"flex items-center justify-between"},Gi={key:0},Ti={class:"flex gap-2"},Li={key:1},Ui={key:2},Vi={key:3,class:"space-y-2 pt-2 border-t border-purple-500/20"},Ri={class:"flex items-center justify-between"},Pi={class:"inline-flex items-center cursor-pointer"},Wi=["checked"],Hi={key:0,class:"space-y-1"},Ji=["value"],_i={key:5,class:"space-y-3"},qi={class:"flex items-center gap-2"},Yi=["value"],Ki=["value"],Xi={class:"space-y-2"},Zi={class:"flex items-center justify-between"},Qi={class:"flex items-center gap-1 text-xs text-gray-300"},ed=["checked"],td={key:0,class:"grid grid-cols-3 gap-2 items-end"},ld={class:"flex items-center gap-2"},rd=["value"],nd=["value"],od={class:"flex items-center gap-2"},sd=["value"],ad=["value"],id={class:"space-y-1"},dd=["value"],ud=["value"],cd={class:"space-y-2"},pd={class:"flex items-center justify-between"},gd={class:"flex items-center gap-1 text-xs text-gray-300"},fd=["checked"],yd={key:0,class:"space-y-1"},bd={class:"flex items-center gap-2"},xd={key:0,class:"space-y-1"},md=["value"],hd=["value"],vd={key:1,class:"space-y-1"},wd=["value"],$d={class:"flex items-center gap-1"},Ed=["value"],kd={class:"space-y-2"},Sd={class:"flex items-center justify-between"},Cd={class:"flex items-center gap-1 text-xs text-gray-300"},Md=["checked"],Id={key:0,class:"space-y-2"},Nd=["value"],jd={class:"space-y-1"},Fd={class:"flex items-center gap-2"},Ad=["value"],zd=["value"],Od={class:"space-y-1"},Dd={class:"flex items-center gap-2"},Bd=["value"],Gd=["value"],Td={class:"space-y-1"},Ld={class:"flex items-center gap-2"},Ud=["value"],Vd=["value"],Rd={class:"space-y-1"},Pd={class:"flex items-center gap-2"},Wd=["value"],Hd=["value"],Jd={class:"space-y-1"},_d={key:0,class:"flex items-center gap-2"},qd=["value"],Yd=["value"],Kd={key:6,class:"space-y-3"},Xd={class:"flex items-center gap-2"},Zd={key:0,class:"space-y-2"},Qd=["value"],eu={class:"grid grid-cols-2 gap-2"},tu=["value"],lu=["value"],ru={key:0,class:"grid grid-cols-2 gap-2"},nu=["value"],ou=["value"],su={key:1,class:"grid grid-cols-2 gap-2"},au={key:2,class:"grid grid-cols-3 gap-2 items-end"},iu={key:1},du={class:"flex items-center justify-between mt-2"},uu={key:0,class:"text-xs text-red-400"},cu={key:7,class:"space-y-3"},pu={class:"space-y-2"},gu={class:"flex gap-1"},fu=["value"],yu=["value"],bu={class:"grid grid-cols-2 gap-2"},xu={class:"grid grid-cols-2 gap-1"},mu=["value"],hu={class:"grid grid-cols-2 gap-2"},vu=["value"],wu={key:0},$u=["value"],Eu={key:0,class:"grid grid-cols-2 gap-2"},ku=["value"],Su={key:8,class:"space-y-3"},Cu={class:"flex items-center justify-between mb-2"},Mu={class:"flex bg-gray-800/50 rounded p-0.5 border border-purple-500/30"},Iu={key:0,class:"space-y-2"},Nu={class:"space-y-2 mt-2"},ju={class:"flex items-center gap-2"},Fu=["checked"],Au={key:0,class:"space-y-2 p-2 bg-gray-800/30 rounded"},zu={class:"text-xs text-gray-400"},Ou={key:1,class:"space-y-2"},Du={class:"flex items-center justify-between mb-1"},Bu={class:"text-[10px] text-gray-500"},Gu=["onClick"],Tu={class:"mb-2"},Lu={class:"flex items-center gap-2 mb-1"},Uu={class:"inline-flex items-center cursor-pointer"},Vu=["onUpdate:modelValue"],Ru={key:0},Pu=["onUpdate:modelValue"],Wu={key:1,class:"space-y-1"},Hu=["onUpdate:modelValue"],Ju=["onUpdate:modelValue"],_u={class:"text-[10px] text-gray-500"},qu={class:"space-y-2 mt-2 border-t border-gray-700/50 pt-2"},Yu={class:"flex items-center gap-2"},Ku=["value","onInput"],Xu=["value","onInput"],Zu={class:"grid grid-cols-2 gap-2"},Qu=["value","onChange"],ec=["value"],tc=["value","onInput"],lc=["value","onChange"],rc={class:"space-y-2"},nc={class:"grid grid-cols-2 gap-1"},oc={class:"grid grid-cols-2 gap-2"},sc={class:"grid grid-cols-2 gap-2"},ac={class:"grid grid-cols-2 gap-2"},ic=["value"],dc=["value"],uc={class:"space-y-2"},cc=["value"],pc={class:"space-y-2"},gc={class:"flex gap-1"},fc=["value","disabled"],yc=["value","disabled"],bc={key:0,class:"text-xs text-yellow-400 mt-1"},xc={class:"space-y-2"},mc={class:"flex gap-1"},hc=["value"],vc=["value"],wc={class:"space-y-2"},$c={class:"grid grid-cols-4 gap-1"},Ec={class:"space-y-2"},kc={class:"grid grid-cols-2 gap-1"},Sc={class:"space-y-2"},Cc={class:"flex items-center gap-2"},Mc={class:"flex items-center gap-2 mt-1"},Ic={class:"space-y-2"},Nc={class:"flex items-center justify-between"},jc={class:"flex gap-1"},Fc={key:0,class:"grid grid-cols-3 gap-2 items-center"},Ac={class:"col-span-1"},zc={class:"col-span-1"},Oc={class:"col-span-1"},Dc={class:"space-y-2"},Bc={class:"grid grid-cols-3 gap-1"},Gc={class:"space-y-2"},Tc={class:"flex items-center justify-between"},Lc={class:"flex gap-1"},Uc={key:0,class:"space-y-2 p-2 bg-gray-800/30 rounded"},Vc={class:"grid grid-cols-2 gap-2"},Rc={class:"flex gap-1"},Pc={class:"flex gap-1"},Wc={class:"block text-xs text-gray-400 mb-1"},Hc={class:"space-y-2"},Jc={class:"flex items-center justify-between"},_c={class:"flex gap-1"},qc={key:0,class:"space-y-2 p-2 bg-gray-800/30 rounded"},Yc={class:"grid grid-cols-2 gap-2"},Kc={class:"flex gap-1"},Xc={class:"flex gap-1"},Zc={class:"block text-xs text-gray-400 mb-1"},Qc={key:9,class:"space-y-3"},e0={class:"space-y-2"},t0={class:"space-y-2"},l0={class:"max-h-32 overflow-y-auto custom-scrollbar bg-gray-800/30 rounded p-2"},r0={class:"grid grid-cols-4 gap-2"},n0=["onClick"],o0=["src","alt"],s0={class:"space-y-2"},a0={class:"grid grid-cols-2 gap-2"},i0={key:0,class:"space-y-2"},d0={class:"max-h-32 overflow-y-auto custom-scrollbar bg-gray-800/30 rounded p-2"},u0={class:"grid grid-cols-4 gap-2"},c0=["onClick"],p0=["src","alt"],g0={key:0,class:"text-xs text-gray-500 text-center py-2"},f0={class:"space-y-2"},y0={class:"grid grid-cols-2 gap-2"},b0={class:"grid grid-cols-3 gap-2"},x0={class:"space-y-2"},m0={class:"pt-4 border-t border-purple-500/30 space-y-2"},h0={key:1,class:"p-4 text-center text-gray-400 flex-1 flex flex-col justify-center"},v0={},w0=dl({...v0,__name:"ElementSettingsPanel",props:{selectedEl:{},config:{},fontLibrary:{},fontSizeLibrary:{},fontWeightOptions:{},fontStyleOptions:{},databaseObjects:{},dbMap:{},iconLibrary:{},defaultChartOption:{type:Function},safeHex:{type:Function},initCustomClassSkeleton:{type:Function},refreshAllCustomClassCss:{type:Function},removeCustomClassCssForElement:{type:Function},getIconDataUrlById:{type:Function},selectedParentIsFlex:{type:Boolean}},emits:["duplicateSelected","removeSelected","saveSelectedAsComponent","positionChanged"],setup(f,{emit:a}){const e=f,d=a,S=pe(!1),D=pe(null);function P(k){D.value=k,S.value=!0}function le(k){if(!e.selectedEl||!D.value)return;const t=D.value;if(t.type==="carousel-highlight")e.selectedEl.carouselConfig&&(e.selectedEl.carouselConfig.frameHighlight=k.url);else if(t.type==="carousel-normal")e.selectedEl.carouselConfig&&(e.selectedEl.carouselConfig.frameNormal=k.url);else if(t.type==="carousel-left")e.selectedEl.carouselConfig&&(e.selectedEl.carouselConfig.arrowLeft=k.url);else if(t.type==="carousel-right")e.selectedEl.carouselConfig&&(e.selectedEl.carouselConfig.arrowRight=k.url);else if(t.type==="carousel-slide"&&t.slideIndex!==void 0&&e.selectedEl.slides&&e.selectedEl.slides[t.slideIndex]){const oe=e.selectedEl.slides[t.slideIndex];oe&&(oe.src=k.url)}S.value=!1,D.value=null}const be=pe("visual"),$=pe(""),ue=pe("");Qt(()=>{var k;return(k=e.selectedEl)==null?void 0:k.id},()=>{var t;const k=e.selectedEl;k&&k.type==="chart"&&(be.value="visual",ue.value="",$.value=JSON.stringify((t=k.chartOption)!=null?t:e.defaultChartOption(k.chartType||"line"),null,2))});const ze=st(()=>{var oe,$e;const k=($e=(oe=e.selectedEl)==null?void 0:oe.dynamic)==null?void 0:$e.objectName;if(!k)return[];const t=e.dbMap[k];try{return oa(t,{maxDepth:6,maxEntries:400})}catch{return[]}});function Ge(k){return sa(e.dbMap,k)}function je(k){const t=e.selectedEl;t&&(k===void 0?delete t.position:t.position=k,d("positionChanged"))}function se(k){return typeof k=="string"&&k.trim().endsWith("%")?"%":"px"}function M(k){if(k==null)return 0;if(typeof k=="number")return k;const t=String(k).trim();if(t.endsWith("%")){const $e=Number(t.replace("%",""));return Number.isFinite($e)?$e:0}const oe=Number(t.replace("px",""));return Number.isFinite(oe)?oe:0}function g(k,t){const oe=e.selectedEl;oe&&(oe.style=oe.style||{},oe.style.borderRadius=`${k}${t}`)}function m(k){const t={x:0,y:8,blur:24,spread:0,color:"#000000"};if(!k||!k.trim())return t;const oe=k.split(/\s+/).filter(Boolean);if(oe.length<3)return t;const $e=oe.slice(0,4).map(nt=>Number(String(nt).replace("px",""))),Gt=oe.slice(4).join(" ")||t.color,[Mt=NaN,o=NaN,Z=NaN,Q=NaN]=$e;return{x:Number.isFinite(Mt)?Mt:t.x,y:Number.isFinite(o)?o:t.y,blur:Number.isFinite(Z)?Z:t.blur,spread:Number.isFinite(Q)?Q:t.spread,color:Gt}}function U(k,t,oe,$e,Gt){la(e.selectedEl,k,t,oe,$e,Gt)}function V(k){ra(k)}function L(k){na(k)}function q(){ue.value="";try{const k=JSON.parse($.value);e.selectedEl&&e.selectedEl.type==="chart"&&(e.selectedEl.chartOption=k)}catch(k){ue.value=`JSON 解析失败：${(k==null?void 0:k.message)||String(k)}`}}function Oe(k,t){if(!e.selectedEl||e.selectedEl.type!=="chart"||!e.selectedEl.chartOption)return;const oe=e.selectedEl.chartOption,$e=oe.series||[],Gt={type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:k},{offset:1,color:t}],global:!1};$e.forEach(Mt=>{Mt.type==="bar"&&(Mt.itemStyle=Mt.itemStyle||{},Mt.itemStyle.color=Gt)}),$.value=JSON.stringify(oe,null,2)}function K(){const k=e.selectedEl;return!k||k.type!=="chart"?null:(k.chartOption||(k.chartOption=e.defaultChartOption(k.chartType||"line")),k.chartOption)}function G(k){const t=K();t&&(t.title=t.title||{},t.title.text=k,$.value=JSON.stringify(t,null,2))}function ne(k){const t=K();t&&(t.color=k.split(",").map(oe=>oe.trim()).filter(Boolean),$.value=JSON.stringify(t,null,2))}function rt(k){const t=K();t&&(t.legend=t.legend||{},t.legend.show=k==="1",$.value=JSON.stringify(t,null,2))}function pt(k){var oe;const t=(oe=k.target.files)==null?void 0:oe[0];if(t&&e.selectedEl){const $e=new FileReader;$e.onload=()=>{e.selectedEl&&(e.selectedEl.src=String($e.result),e.selectedEl.iconId=void 0,d("positionChanged"))},$e.readAsDataURL(t)}}async function ae(k){const t=e.selectedEl;if(!t||t.type!=="image")return;const oe=await e.getIconDataUrlById(k.id);if(!oe)return;t.src=oe,t.iconId=k.id;const $e=new Image;$e.onload=()=>{e.selectedEl&&e.selectedEl.id===t.id&&(e.selectedEl.width=$e.naturalWidth,e.selectedEl.height=$e.naturalHeight,d("positionChanged"))},$e.src=oe}function dt(){const k=e.selectedEl;if(!k||k.type!=="image"||!k.src)return;k.autoSize=!0;const t=new Image;t.onload=()=>{e.selectedEl&&e.selectedEl.id===k.id&&(e.selectedEl.width=t.naturalWidth,e.selectedEl.height=t.naturalHeight,d("positionChanged"))},t.src=k.src}function Re(){e.selectedEl&&(e.selectedEl.autoSize=!1,d("positionChanged"))}function Je(k){const t=e.selectedEl;!t||t.type!=="image"||(t.highlightSrc=k.url,t.highlightIconId=k.id,t.highlightEnabled=!0,d("positionChanged"))}const ge=st({get(){const k=e.selectedEl;return!!(k&&k.eventBinding&&k.eventBinding.enabled)},set(k){const t=e.selectedEl;t&&(t.eventBinding=t.eventBinding||{enabled:!1,cursor:"pointer",handlerName:"handleClick",code:""},t.eventBinding.enabled=k,(t.eventBinding.handlerName==null||String(t.eventBinding.handlerName).trim()==="")&&(t.eventBinding.handlerName="handleClick"),(t.eventBinding.cursor==null||String(t.eventBinding.cursor).trim()==="")&&(t.eventBinding.cursor="pointer"),t.eventBinding.code==null&&(t.eventBinding.code=""))}}),tt=st({get(){var k,t;return(t=(k=e.selectedEl)==null?void 0:k.eventBinding)==null?void 0:t.cursor},set(k){const t=e.selectedEl;t&&(t.eventBinding=t.eventBinding||{enabled:!0,cursor:"pointer",handlerName:"handleClick",code:""},t.eventBinding.cursor=k)}}),ct=st({get(){var k,t;return(t=(k=e.selectedEl)==null?void 0:k.eventBinding)==null?void 0:t.handlerName},set(k){const t=e.selectedEl;t&&(t.eventBinding=t.eventBinding||{enabled:!0,cursor:"pointer",handlerName:"handleClick",code:""},t.eventBinding.handlerName=k)}}),at=st({get(){var k,t;return(t=(k=e.selectedEl)==null?void 0:k.eventBinding)==null?void 0:t.code},set(k){const t=e.selectedEl;t&&(t.eventBinding=t.eventBinding||{enabled:!0,cursor:"pointer",handlerName:"handleClick",code:""},t.eventBinding.code=k)}});function xt(k){if(!k.dynamic||!k.dynamicObj||!k.dynamicPath)return k.text||"";if(!e.dbMap)return"(No DB)";const t=e.dbMap[k.dynamicObj];if(!t)return"(对象不存在)";const oe=Go(t,k.dynamicPath);return oe==null||oe===""?"(空)":String(oe)}return(k,t)=>{var oe,$e,Gt,Mt,o,Z,Q,nt,Pe,We,gt,Ft,ut,Qe,Ee,Lt,Ut,Ht,el,ul,gl,yt,bt,Vt,sl,Xt,tl,mt,cl,fl,yl,ll,rl,_e,vt,ie,Ie,ht,ke,ft,Fe,qe,De,Be,wt,It,lt,Ue,Se,Ce,et,$t,Te,Jt,Rt,Nt,Zt,_t,Cl,al,Ml,Wl,Hl,Jl,Et,pl,_l,ql,Il,Nl,jl,Yl,bl,xl,ml,hl,Fl,Al,Kl,zl,nl,Ot,Xl,Zl,Ql,er,tr,lr,Ol,vl,wl,Dl,$l,El,rr,qt,Bl,nr,Gl,Tl,or,Ll,n,r,i,u,y,x,F,j,A,z,c,p,T,H,de,ve,Ae,ce,we,ee,te,R,re,Ve,b,h,W,O,B,X,I,J,v,_,xe,me,Le,He,ot,At,jt,Dt,kt,Yt,zt,ol,kl,sr,mr,hr,vr,wr,$r,Er,kr,Sr,Cr,Mr,Ir,Nr,jr,Fr,Ar,zr,Or,Dr,Br,Gr,Tr,Lr,Ur,Vr,Rr,Pr,Wr,Hr,Jr,_r,qr,Yr,Kr,Xr,Zr,Qr,en,tn,ln,rn,nn,on,sn,an,dn,un,cn,pn,gn,fn,yn,bn,xn,mn,hn,vn,wn,$n,En,kn,Sn,Cn,Mn,In,Nn,jn,Fn,An,zn,On,Dn,Bn,Gn,Tn,Ln,Un,Vn,Rn,Pn,Wn,Hn,Jn,_n,qn,Yn,Kn,Xn,Zn,Qn,eo,to,lo,ro,no,oo,so,ao,io,uo,co,po,go,fo,yo,bo,xo,mo,ho,vo;return C(),N("div",aa,[t[353]||(t[353]=l("div",{class:"p-4 border-b border-purple-500/30 bg-gradient-to-r from-purple-600/20 to-pink-600/20 flex-shrink-0"},[l("h2",{class:"text-lg font-bold text-purple-300 flex items-center gap-2"},[l("span",{class:"w-2 h-2 bg-purple-400 rounded-full animate-pulse"}),Vl(" 元素设置 ")])],-1)),e.selectedEl?(C(),N("div",ia,[l("div",da,[t[193]||(t[193]=l("h3",{class:"text-sm font-medium text-purple-300 border-b border-purple-500/30 pb-1"},"位置和尺寸",-1)),l("div",ua,[l("div",null,[t[188]||(t[188]=l("label",{class:"block text-xs text-gray-400 mb-1"},"X",-1)),fe(l("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>e.selectedEl.left=s),onChange:t[1]||(t[1]=s=>k.$emit("positionChanged")),type:"number",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,544),[[Me,e.selectedEl.left,void 0,{number:!0}]])]),l("div",null,[t[189]||(t[189]=l("label",{class:"block text-xs text-gray-400 mb-1"},"Y",-1)),fe(l("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>e.selectedEl.top=s),onChange:t[3]||(t[3]=s=>k.$emit("positionChanged")),type:"number",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,544),[[Me,e.selectedEl.top,void 0,{number:!0}]])]),l("div",null,[t[190]||(t[190]=l("label",{class:"block text-xs text-gray-400 mb-1"},"宽度",-1)),fe(l("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>e.selectedEl.width=s),onChange:t[5]||(t[5]=s=>k.$emit("positionChanged")),type:"number",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,544),[[Me,e.selectedEl.width,void 0,{number:!0}]])]),l("div",null,[t[191]||(t[191]=l("label",{class:"block text-xs text-gray-400 mb-1"},"高度",-1)),fe(l("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>e.selectedEl.height=s),onChange:t[7]||(t[7]=s=>k.$emit("positionChanged")),type:"number",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,544),[[Me,e.selectedEl.height,void 0,{number:!0}]])]),l("div",ca,[t[192]||(t[192]=l("label",{class:"block text-xs text-gray-400 mb-1"},"层级（z-index）",-1)),fe(l("input",{"onUpdate:modelValue":t[8]||(t[8]=s=>e.selectedEl.zIndex=s),onChange:t[9]||(t[9]=s=>k.$emit("positionChanged")),type:"number",min:"0",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,544),[[Me,e.selectedEl.zIndex,void 0,{number:!0}]])])])]),e.selectedEl?(C(),N("div",pa,[t[194]||(t[194]=l("h3",{class:"text-sm font-medium text-purple-300 border-b border-purple-500/30 pb-1"},"定位模式",-1)),l("div",ga," 父容器布局："+it(e.selectedParentIsFlex?"Flex":"非 Flex"),1),l("div",fa,[l("button",{onClick:t[10]||(t[10]=()=>je(void 0)),class:Ne(["px-2 py-1 text-xs rounded transition-colors duration-200",e.selectedEl.position?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-purple-600 text-white"])},"自动",2),l("button",{onClick:t[11]||(t[11]=()=>je("absolute")),class:Ne(["px-2 py-1 text-xs rounded transition-colors duration-200",e.selectedEl.position==="absolute"?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"])},"绝对",2),l("button",{onClick:t[12]||(t[12]=()=>je("relative")),class:Ne(["px-2 py-1 text-xs rounded transition-colors duration-200",e.selectedEl.position==="relative"?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"])},"相对",2),l("button",{onClick:t[13]||(t[13]=()=>je("static")),class:Ne(["px-2 py-1 text-xs rounded transition-colors duration-200",e.selectedEl.position==="static"?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"])},"静态",2)]),t[195]||(t[195]=l("div",{class:"text-[10px] text-gray-400"}," 规则：自动模式下，父容器为Flex时默认“静态”，否则默认“绝对”；选择“静态”可参与流式排版。 ",-1))])):Y("",!0),e.selectedEl&&e.selectedEl.type==="container"?(C(),N("div",ya,[t[201]||(t[201]=l("h3",{class:"text-sm font-medium text-purple-300 border-b border-purple-500/30 pb-1"},"容器布局",-1)),l("div",ba," 当前容器布局："+it((((oe=e.selectedEl.style)==null?void 0:oe.display)||"无")==="flex"?"Flex":"Block/无"),1),l("div",xa,[l("div",ma,[t[196]||(t[196]=l("label",{class:"block text-xs text-gray-400 mb-1"},"布局模式",-1)),l("div",ha,[l("button",{onClick:t[14]||(t[14]=()=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.display="block")}),class:Ne(["px-2 py-1 text-xs rounded transition-colors duration-200",((($e=e.selectedEl.style)==null?void 0:$e.display)||"block")==="block"?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"])},"Block",2),l("button",{onClick:t[15]||(t[15]=()=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.display="flex")}),class:Ne(["px-2 py-1 text-xs rounded transition-colors duration-200",(((Gt=e.selectedEl.style)==null?void 0:Gt.display)||"block")==="flex"?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"])},"Flex",2)])]),l("div",null,[t[197]||(t[197]=l("label",{class:"block text-xs text-gray-400 mb-1"},"方向",-1)),Ct(Tt,{options:["row","column"],modelValue:((Mt=e.selectedEl.style)==null?void 0:Mt.flexDirection)||"row","onUpdate:modelValue":t[16]||(t[16]=s=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.flexDirection=s)})},null,8,["modelValue"])]),l("div",null,[t[198]||(t[198]=l("label",{class:"block text-xs text-gray-400 mb-1"},"纵向对齐（alignItems）",-1)),Ct(Tt,{options:["stretch","flex-start","center","flex-end","baseline"],modelValue:((o=e.selectedEl.style)==null?void 0:o.alignItems)||"center","onUpdate:modelValue":t[17]||(t[17]=s=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.alignItems=s)})},null,8,["modelValue"])]),l("div",null,[t[199]||(t[199]=l("label",{class:"block text-xs text-gray-400 mb-1"},"横向分布（justifyContent）",-1)),Ct(Tt,{options:["flex-start","center","flex-end","space-between","space-around"],modelValue:((Z=e.selectedEl.style)==null?void 0:Z.justifyContent)||"flex-start","onUpdate:modelValue":t[18]||(t[18]=s=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.justifyContent=s)})},null,8,["modelValue"])]),l("div",null,[t[200]||(t[200]=l("label",{class:"block text-xs text-gray-400 mb-1"},"间距（gap，px）",-1)),l("input",{value:(nt=(Q=e.selectedEl.style)==null?void 0:Q.gap)!=null?nt:0,onInput:t[19]||(t[19]=s=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.gap=Number(s.target.value))}),type:"number",min:"0",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,40,va)])])])):Y("",!0),e.selectedEl&&e.selectedEl.type==="carousel"?(C(),N("div",wa,[t[218]||(t[218]=l("h3",{class:"text-sm font-medium text-purple-300 border-b border-purple-500/30 pb-1"},"轮播图设置",-1)),l("div",$a,[t[204]||(t[204]=l("label",{class:"block text-xs text-gray-400 font-bold mb-1"},"全局配置",-1)),l("div",Ea,[t[202]||(t[202]=l("span",{class:"text-xs text-gray-400"},"自动播放",-1)),l("input",{type:"checkbox",checked:(Pe=e.selectedEl.carouselConfig)==null?void 0:Pe.autoplay,onChange:t[20]||(t[20]=s=>{e.selectedEl&&e.selectedEl.carouselConfig&&(e.selectedEl.carouselConfig.autoplay=s.target.checked)}),class:"rounded accent-purple-600"},null,40,ka)]),l("div",null,[t[203]||(t[203]=l("label",{class:"block text-xs text-gray-400 mb-1"},"切换间隔 (ms)",-1)),l("input",{type:"number",value:((We=e.selectedEl.carouselConfig)==null?void 0:We.interval)||3e3,onInput:t[21]||(t[21]=s=>{e.selectedEl&&e.selectedEl.carouselConfig&&(e.selectedEl.carouselConfig.interval=Number(s.target.value))}),class:"w-full px-2 py-1 bg-gray-900/50 border border-gray-600 rounded text-xs"},null,40,Sa)])]),l("div",Ca,[t[209]||(t[209]=l("label",{class:"block text-xs text-gray-400 font-bold mb-1"},"样式图片",-1)),l("div",Ma,[l("div",null,[t[205]||(t[205]=l("label",{class:"block text-[10px] text-gray-500 mb-1"},"高亮边框 (Frame Highlight)",-1)),l("div",Ia,[l("input",{type:"text",value:((gt=e.selectedEl.carouselConfig)==null?void 0:gt.frameHighlight)||"",onInput:t[22]||(t[22]=s=>{e.selectedEl&&e.selectedEl.carouselConfig&&(e.selectedEl.carouselConfig.frameHighlight=s.target.value)}),placeholder:"图片URL",class:"flex-1 px-2 py-1 bg-gray-900/50 border border-gray-600 rounded text-xs"},null,40,Na),l("button",{onClick:t[23]||(t[23]=s=>P({type:"carousel-highlight"})),class:"px-2 py-1 bg-gray-700 hover:bg-gray-600 text-gray-300 rounded text-xs"},"选择")])]),l("div",null,[t[206]||(t[206]=l("label",{class:"block text-[10px] text-gray-500 mb-1"},"背景边框 (Frame Normal)",-1)),l("div",ja,[l("input",{type:"text",value:((Ft=e.selectedEl.carouselConfig)==null?void 0:Ft.frameNormal)||"",onInput:t[24]||(t[24]=s=>{e.selectedEl&&e.selectedEl.carouselConfig&&(e.selectedEl.carouselConfig.frameNormal=s.target.value)}),placeholder:"图片URL",class:"flex-1 px-2 py-1 bg-gray-900/50 border border-gray-600 rounded text-xs"},null,40,Fa),l("button",{onClick:t[25]||(t[25]=s=>P({type:"carousel-normal"})),class:"px-2 py-1 bg-gray-700 hover:bg-gray-600 text-gray-300 rounded text-xs"},"选择")])]),l("div",Aa,[l("div",null,[t[207]||(t[207]=l("label",{class:"block text-[10px] text-gray-500 mb-1"},"左箭头",-1)),l("div",za,[l("input",{type:"text",value:((ut=e.selectedEl.carouselConfig)==null?void 0:ut.arrowLeft)||"",onInput:t[26]||(t[26]=s=>{e.selectedEl&&e.selectedEl.carouselConfig&&(e.selectedEl.carouselConfig.arrowLeft=s.target.value)}),placeholder:"URL",class:"flex-1 px-2 py-1 bg-gray-900/50 border border-gray-600 rounded text-xs"},null,40,Oa),l("button",{onClick:t[27]||(t[27]=s=>P({type:"carousel-left"})),class:"px-2 py-1 bg-gray-700 hover:bg-gray-600 text-gray-300 rounded text-xs"},"选")])]),l("div",null,[t[208]||(t[208]=l("label",{class:"block text-[10px] text-gray-500 mb-1"},"右箭头",-1)),l("div",Da,[l("input",{type:"text",value:((Qe=e.selectedEl.carouselConfig)==null?void 0:Qe.arrowRight)||"",onInput:t[28]||(t[28]=s=>{e.selectedEl&&e.selectedEl.carouselConfig&&(e.selectedEl.carouselConfig.arrowRight=s.target.value)}),placeholder:"URL",class:"flex-1 px-2 py-1 bg-gray-900/50 border border-gray-600 rounded text-xs"},null,40,Ba),l("button",{onClick:t[29]||(t[29]=s=>P({type:"carousel-right"})),class:"px-2 py-1 bg-gray-700 hover:bg-gray-600 text-gray-300 rounded text-xs"},"选")])])])])]),l("div",Ga,[t[216]||(t[216]=l("label",{class:"block text-xs text-gray-400 font-bold mb-1"},"文字样式",-1)),l("div",Ta,[l("div",null,[t[210]||(t[210]=l("label",{class:"block text-[10px] text-gray-500 mb-1"},"颜色",-1)),l("div",La,[l("input",{type:"color",value:((Lt=(Ee=e.selectedEl.carouselConfig)==null?void 0:Ee.textStyle)==null?void 0:Lt.color)||"#ffffff",onInput:t[30]||(t[30]=s=>{var E,w;(w=(E=e.selectedEl)==null?void 0:E.carouselConfig)!=null&&w.textStyle&&(e.selectedEl.carouselConfig.textStyle.color=s.target.value)}),class:"w-5 h-5 p-0 border-0 rounded cursor-pointer"},null,40,Ua),l("input",{type:"text",value:(Ht=(Ut=e.selectedEl.carouselConfig)==null?void 0:Ut.textStyle)==null?void 0:Ht.color,onInput:t[31]||(t[31]=s=>{var E,w;(w=(E=e.selectedEl)==null?void 0:E.carouselConfig)!=null&&w.textStyle&&(e.selectedEl.carouselConfig.textStyle.color=s.target.value)}),class:"w-full px-1 py-0.5 bg-gray-900/50 border border-gray-600 rounded text-[10px] font-mono"},null,40,Va)])]),l("div",null,[t[211]||(t[211]=l("label",{class:"block text-[10px] text-gray-500 mb-1"},"字号",-1)),l("input",{type:"number",value:((ul=(el=e.selectedEl.carouselConfig)==null?void 0:el.textStyle)==null?void 0:ul.fontSize)||14,onInput:t[32]||(t[32]=s=>{var E,w;(w=(E=e.selectedEl)==null?void 0:E.carouselConfig)!=null&&w.textStyle&&(e.selectedEl.carouselConfig.textStyle.fontSize=Number(s.target.value))}),class:"w-full px-2 py-1 bg-gray-900/50 border border-gray-600 rounded text-xs"},null,40,Ra)]),l("div",null,[t[213]||(t[213]=l("label",{class:"block text-[10px] text-gray-500 mb-1"},"字体",-1)),l("select",{value:((yt=(gl=e.selectedEl.carouselConfig)==null?void 0:gl.textStyle)==null?void 0:yt.fontFamily)||"",onChange:t[33]||(t[33]=s=>{var E,w;(w=(E=e.selectedEl)==null?void 0:E.carouselConfig)!=null&&w.textStyle&&(e.selectedEl.carouselConfig.textStyle.fontFamily=s.target.value)}),class:"w-full px-1 py-1 bg-gray-900/50 border border-gray-600 rounded text-xs"},[t[212]||(t[212]=l("option",{value:""},"默认",-1)),(C(!0),N(Wt,null,Kt(e.fontLibrary,s=>(C(),N("option",{key:s,value:s},it(s),9,Wa))),128))],40,Pa)]),l("div",null,[t[215]||(t[215]=l("label",{class:"block text-[10px] text-gray-500 mb-1"},"粗细",-1)),l("select",{value:((Vt=(bt=e.selectedEl.carouselConfig)==null?void 0:bt.textStyle)==null?void 0:Vt.fontWeight)||"",onChange:t[34]||(t[34]=s=>{var E,w;(w=(E=e.selectedEl)==null?void 0:E.carouselConfig)!=null&&w.textStyle&&(e.selectedEl.carouselConfig.textStyle.fontWeight=s.target.value)}),class:"w-full px-1 py-1 bg-gray-900/50 border border-gray-600 rounded text-xs"},[...t[214]||(t[214]=[l("option",{value:"normal"},"常规",-1),l("option",{value:"bold"},"加粗",-1)])],40,Ha)])])]),l("div",Ja,[l("div",_a,[t[217]||(t[217]=l("span",{class:"text-xs text-gray-400 font-bold"},"内容列表",-1)),l("button",{onClick:t[35]||(t[35]=s=>{var E;return(E=e.selectedEl.slides)==null?void 0:E.push({id:Date.now().toString(),src:"",text:"新图片"})}),class:"text-xs text-purple-400 hover:text-purple-300"},"+ 添加")]),(C(!0),N(Wt,null,Kt(e.selectedEl.slides,(s,E)=>(C(),N("div",{key:s.id,class:"bg-gray-800/50 p-2 rounded border border-gray-700"},[l("div",qa,[l("span",Ya,"Slide "+it(E+1),1),l("button",{onClick:w=>{var ye;return(ye=e.selectedEl.slides)==null?void 0:ye.splice(E,1)},class:"text-[10px] text-red-400 hover:text-red-300"},"删除",8,Ka)]),l("div",Xa,[l("div",Za,[l("input",{value:s.src,onInput:w=>s.src=w.target.value,placeholder:"图片 URL",class:"flex-1 px-2 py-1 bg-gray-900/50 border border-gray-600 rounded text-xs"},null,40,Qa),l("button",{onClick:w=>P({type:"carousel-slide",slideIndex:E}),class:"px-2 py-1 bg-gray-700 hover:bg-gray-600 text-gray-300 rounded text-xs"},"选",8,ei)]),l("input",{value:s.text,onInput:w=>s.text=w.target.value,placeholder:"描述文字",class:"w-full px-2 py-1 bg-gray-900/50 border border-gray-600 rounded text-xs"},null,40,ti)])]))),128))])])):Y("",!0),S.value?(C(),N("div",{key:3,class:"fixed inset-0 z-[9999] flex items-center justify-center bg-black/50 backdrop-blur-sm",onClick:t[37]||(t[37]=br(s=>S.value=!1,["self"]))},[l("div",li,[l("div",ri,[t[219]||(t[219]=l("h3",{class:"text-sm font-bold text-white"},"选择图片/图标",-1)),l("button",{onClick:t[36]||(t[36]=s=>S.value=!1),class:"text-gray-400 hover:text-white"},"✕")]),e.iconLibrary.length>0?(C(),N("div",ni,[l("div",oi,[(C(!0),N(Wt,null,Kt(e.iconLibrary,s=>(C(),N("div",{key:s.id,onClick:E=>le(s),class:"aspect-square bg-gray-800 rounded cursor-pointer hover:bg-gray-700 hover:border-purple-500 border border-transparent flex items-center justify-center p-2 transition-all"},[l("img",{src:s.url,alt:s.name,class:"max-w-full max-h-full object-contain"},null,8,ai)],8,si))),128))])])):(C(),N("div",ii," 暂无可用图标，请在图标库上传 ")),t[220]||(t[220]=l("div",{class:"mt-4 pt-2 border-t border-gray-700"},[l("p",{class:"text-[10px] text-gray-400"},"提示：可在左侧“图标库”中上传更多图片素材。")],-1))])])):Y("",!0),e.selectedEl&&e.selectedEl.type==="arc-text"?(C(),N("div",di,[t[236]||(t[236]=l("h3",{class:"text-sm font-medium text-purple-300 border-b border-purple-500/30 pb-1"},"环绕文字设置",-1)),l("div",ui,[t[221]||(t[221]=l("label",{class:"block text-xs text-gray-400 mb-1"},"内容",-1)),fe(l("textarea",{"onUpdate:modelValue":t[38]||(t[38]=s=>e.selectedEl.text=s),class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200 resize-none",rows:"2"},null,512),[[Me,e.selectedEl.text]])]),l("div",ci,[l("div",null,[t[222]||(t[222]=l("label",{class:"block text-xs text-gray-400 mb-1"},"字号",-1)),Ct(Tt,{options:e.fontSizeLibrary,modelValue:((sl=e.selectedEl.style)==null?void 0:sl.fontSize)||e.config.globalFontSize,"onUpdate:modelValue":t[39]||(t[39]=s=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.fontSize=s)}),numeric:!0},null,8,["options","modelValue"])]),l("div",null,[t[223]||(t[223]=l("label",{class:"block text-xs text-gray-400 mb-1"},"字体",-1)),Ct(Tt,{options:e.fontLibrary,modelValue:((Xt=e.selectedEl.style)==null?void 0:Xt.fontFamily)||e.config.globalFontFamily,"onUpdate:modelValue":t[40]||(t[40]=s=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.fontFamily=s)})},null,8,["options","modelValue"])])]),l("div",pi,[l("div",null,[t[224]||(t[224]=l("label",{class:"block text-xs text-gray-400 mb-1"},"粗细",-1)),Ct(Tt,{options:e.fontWeightOptions,modelValue:((tl=e.selectedEl.style)==null?void 0:tl.fontWeight)||"400","onUpdate:modelValue":t[41]||(t[41]=s=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.fontWeight=s)})},null,8,["options","modelValue"])]),l("div",null,[t[225]||(t[225]=l("label",{class:"block text-xs text-gray-400 mb-1"},"样式",-1)),Ct(Tt,{options:e.fontStyleOptions,modelValue:((mt=e.selectedEl.style)==null?void 0:mt.fontStyle)||"normal","onUpdate:modelValue":t[42]||(t[42]=s=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.fontStyle=s)})},null,8,["options","modelValue"])])]),l("div",gi,[l("div",null,[t[226]||(t[226]=l("label",{class:"block text-xs text-gray-400 mb-1"},"字间距",-1)),l("input",{value:(fl=(cl=e.selectedEl.style)==null?void 0:cl.letterSpacing)!=null?fl:0,onInput:t[43]||(t[43]=s=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.letterSpacing=Number(s.target.value))}),type:"number",step:"0.1",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,40,fi)]),l("div",null,[t[227]||(t[227]=l("label",{class:"block text-xs text-gray-400 mb-1"},"行高",-1)),l("input",{value:(ll=(yl=e.selectedEl.style)==null?void 0:yl.lineHeight)!=null?ll:1.5,onInput:t[44]||(t[44]=s=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.lineHeight=Number(s.target.value))}),type:"number",step:"0.1",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,40,yi)])]),l("div",bi,[t[228]||(t[228]=l("label",{class:"block text-xs text-gray-400 mb-1"},"颜色",-1)),l("div",xi,[l("input",{value:((_e=(rl=e.selectedEl)==null?void 0:rl.style)==null?void 0:_e.color)||e.config.globalColor,onInput:t[45]||(t[45]=s=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.color=s.target.value)}),type:"color",class:"w-8 h-6 bg-gray-800/50 border border-purple-500/30 rounded cursor-pointer"},null,40,mi),l("input",{value:(Ie=(ie=(vt=e.selectedEl)==null?void 0:vt.style)==null?void 0:ie.color)!=null?Ie:e.config.globalColor,onInput:t[46]||(t[46]=s=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.color=s.target.value)}),type:"text",class:"flex-1 px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-xs focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200",placeholder:"#FFFFFF"},null,40,hi)])]),l("div",vi,[t[229]||(t[229]=l("label",{class:"block text-xs text-gray-400 mb-1"},"对齐方式",-1)),l("div",wi,[l("button",{onClick:t[47]||(t[47]=()=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.textAlign="left")}),class:Ne(["px-2 py-1 text-xs rounded transition-colors duration-200",(((ht=e.selectedEl.style)==null?void 0:ht.textAlign)||"center")==="left"?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"])},"左",2),l("button",{onClick:t[48]||(t[48]=()=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.textAlign="center")}),class:Ne(["px-2 py-1 text-xs rounded transition-colors duration-200",(((ke=e.selectedEl.style)==null?void 0:ke.textAlign)||"center")==="center"?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"])},"中",2),l("button",{onClick:t[49]||(t[49]=()=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.textAlign="right")}),class:Ne(["px-2 py-1 text-xs rounded transition-colors duration-200",(((ft=e.selectedEl.style)==null?void 0:ft.textAlign)||"center")==="right"?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"])},"右",2)])]),l("div",$i,[t[235]||(t[235]=l("label",{class:"block text-xs text-gray-400 mb-1"},"圆弧参数",-1)),l("div",Ei,[l("div",null,[t[230]||(t[230]=l("label",{class:"block text-xs text-gray-400 mb-1"},"半径(px)",-1)),l("input",{value:(Be=(De=(qe=(Fe=e.selectedEl)==null?void 0:Fe.style)==null?void 0:qe.arcText)==null?void 0:De.radius)!=null?Be:Math.min(e.selectedEl.width||0,e.selectedEl.height||0)/2,onInput:t[50]||(t[50]=s=>{if(e.selectedEl){const E=Number(s.target.value)||0;e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.arcText=e.selectedEl.style.arcText||{},e.selectedEl.style.arcText.radius=E}}),type:"number",min:"1",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,40,ki)]),l("div",null,[t[231]||(t[231]=l("label",{class:"block text-xs text-gray-400 mb-1"},"起始角(°)",-1)),l("input",{value:(Ue=(lt=(It=(wt=e.selectedEl)==null?void 0:wt.style)==null?void 0:It.arcText)==null?void 0:lt.startAngle)!=null?Ue:0,onInput:t[51]||(t[51]=s=>{if(e.selectedEl){const E=Number(s.target.value)||0;e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.arcText=e.selectedEl.style.arcText||{},e.selectedEl.style.arcText.startAngle=E}}),type:"number",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,40,Si)]),l("div",null,[t[232]||(t[232]=l("label",{class:"block text-xs text-gray-400 mb-1"},"扫过角(°)",-1)),l("input",{value:($t=(et=(Ce=(Se=e.selectedEl)==null?void 0:Se.style)==null?void 0:Ce.arcText)==null?void 0:et.sweepAngle)!=null?$t:180,onInput:t[52]||(t[52]=s=>{if(e.selectedEl){const E=Number(s.target.value)||0;e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.arcText=e.selectedEl.style.arcText||{},e.selectedEl.style.arcText.sweepAngle=E}}),type:"number",min:"0",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,40,Ci)]),l("div",null,[t[234]||(t[234]=l("label",{class:"block text-xs text-gray-400 mb-1"},"顺时针",-1)),l("select",{value:(Nt=(Rt=(Jt=(Te=e.selectedEl)==null?void 0:Te.style)==null?void 0:Jt.arcText)==null?void 0:Rt.clockwise)==null||Nt?"1":"0",onChange:t[53]||(t[53]=s=>{if(e.selectedEl){const E=s.target.value==="1";e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.arcText=e.selectedEl.style.arcText||{},e.selectedEl.style.arcText.clockwise=E}}),class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm"},[...t[233]||(t[233]=[l("option",{value:"1"},"是",-1),l("option",{value:"0"},"否",-1)])],40,Mi)])]),l("div",Ii,[l("button",{onClick:t[54]||(t[54]=()=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.arcText=e.selectedEl.style.arcText||{},e.selectedEl.style.arcText.startAngle=180,e.selectedEl.style.arcText.sweepAngle=180,e.selectedEl.style.arcText.clockwise=!0)}),class:Ne(["px-2 py-1 text-xs rounded transition-colors duration-200","bg-gray-700 text-gray-300 hover:bg-gray-600"])},"上"),l("button",{onClick:t[55]||(t[55]=()=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.arcText=e.selectedEl.style.arcText||{},e.selectedEl.style.arcText.startAngle=0,e.selectedEl.style.arcText.sweepAngle=180,e.selectedEl.style.arcText.clockwise=!0)}),class:Ne(["px-2 py-1 text-xs rounded transition-colors duration-200","bg-gray-700 text-gray-300 hover:bg-gray-600"])},"下"),l("button",{onClick:t[56]||(t[56]=()=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.arcText=e.selectedEl.style.arcText||{},e.selectedEl.style.arcText.startAngle=90,e.selectedEl.style.arcText.sweepAngle=180,e.selectedEl.style.arcText.clockwise=!0)}),class:Ne(["px-2 py-1 text-xs rounded transition-colors duration-200","bg-gray-700 text-gray-300 hover:bg-gray-600"])},"左"),l("button",{onClick:t[57]||(t[57]=()=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.arcText=e.selectedEl.style.arcText||{},e.selectedEl.style.arcText.startAngle=270,e.selectedEl.style.arcText.sweepAngle=180,e.selectedEl.style.arcText.clockwise=!0)}),class:Ne(["px-2 py-1 text-xs rounded transition-colors duration-200","bg-gray-700 text-gray-300 hover:bg-gray-600"])},"右")])])])):Y("",!0),l("div",Ni,[t[243]||(t[243]=l("h3",{class:"text-sm font-medium text-purple-300 border-b border-purple-500/30 pb-1"},"事件绑定",-1)),l("div",ji,[t[238]||(t[238]=l("label",{class:"text-xs text-gray-400"},"开启事件绑定",-1)),l("label",Fi,[fe(l("input",{type:"checkbox",class:"sr-only peer","onUpdate:modelValue":t[58]||(t[58]=s=>ge.value=s)},null,512),[[Rl,ge.value]]),t[237]||(t[237]=l("div",{class:"relative w-12 h-6 rounded-full bg-gray-700/60 transition-all duration-200 shadow-inner peer-checked:bg-gradient-to-r peer-checked:from-cyan-600 peer-checked:to-blue-600"},[l("div",{class:"absolute left-0.5 top-0.5 w-5 h-5 bg-white rounded-full shadow transform transition-transform duration-200 peer-checked:translate-x-6"})],-1)),l("span",{class:Ne(["ml-3 text-xs",ge.value?"text-cyan-300":"text-gray-300"])},it(ge.value?"已开启":"已关闭"),3)])]),ge.value?(C(),N("div",Ai,[l("div",null,[t[240]||(t[240]=l("label",{class:"block text-xs text-gray-400 mb-1"},"Cursor",-1)),fe(l("select",{"onUpdate:modelValue":t[59]||(t[59]=s=>tt.value=s),class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm"},[...t[239]||(t[239]=[dr('<option value="pointer" data-v-a4c2740f>pointer</option><option value="default" data-v-a4c2740f>default</option><option value="move" data-v-a4c2740f>move</option><option value="crosshair" data-v-a4c2740f>crosshair</option><option value="grab" data-v-a4c2740f>grab</option>',5)])],512),[[$o,tt.value]])]),l("div",null,[t[241]||(t[241]=l("label",{class:"block text-xs text-gray-400 mb-1"},"函数名",-1)),fe(l("input",{"onUpdate:modelValue":t[60]||(t[60]=s=>ct.value=s),type:"text",placeholder:"handleClick",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm"},null,512),[[Me,ct.value]])])])):Y("",!0),ge.value?(C(),N("div",zi,[t[242]||(t[242]=l("label",{class:"block text-xs text-gray-400 mb-1"},"事件代码",-1)),fe(l("textarea",{"onUpdate:modelValue":t[61]||(t[61]=s=>at.value=s),rows:"6",placeholder:"function body...",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm"},null,512),[[Me,at.value]])])):Y("",!0)]),l("div",Oi,[t[253]||(t[253]=l("h3",{class:"text-sm font-medium text-purple-300 border-b border-purple-500/30 pb-1"},"元素属性",-1)),l("div",Di,[l("div",Bi,[t[244]||(t[244]=l("label",{class:"text-xs text-gray-400"},"启用 Class 样式",-1)),fe(l("input",{type:"checkbox","onUpdate:modelValue":t[62]||(t[62]=s=>e.selectedEl.enableClassStyle=s),onChange:t[63]||(t[63]=s=>{e.selectedEl&&s.target.checked?(e.initCustomClassSkeleton(e.selectedEl),e.refreshAllCustomClassCss()):e.selectedEl&&!s.target.checked&&e.removeCustomClassCssForElement(e.selectedEl.id)}),class:"rounded border-purple-500/30 text-purple-400 focus:ring-purple-400"},null,544),[[Rl,e.selectedEl.enableClassStyle]])]),(Zt=e.selectedEl)!=null&&Zt.enableClassStyle?(C(),N("div",Gi,[t[245]||(t[245]=l("label",{class:"block text-xs text-gray-400 mb-1"},"CSS Class",-1)),l("div",Ti,[fe(l("input",{"onUpdate:modelValue":t[64]||(t[64]=s=>e.selectedEl.className=s),type:"text",placeholder:"自动生成唯一类名，可修改",class:"flex-1 px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,512),[[Me,e.selectedEl.className]]),l("button",{type:"button",onClick:t[65]||(t[65]=()=>{e.selectedEl&&(e.selectedEl.className=`cls-${String(e.selectedEl.id).slice(0,8)}`,e.initCustomClassSkeleton(e.selectedEl),e.refreshAllCustomClassCss())}),class:"px-2 py-1 text-xs bg-purple-600/60 hover:bg-purple-600 rounded text-white"},"生成默认")])])):Y("",!0),(_t=e.selectedEl)!=null&&_t.enableClassStyle?(C(),N("div",Li,[t[246]||(t[246]=l("label",{class:"block text-xs text-gray-400 mb-1"},"自定义样式（CSS 声明）",-1)),Ct(ta,{modelValue:String((Cl=e.selectedEl.customClassCss)!=null?Cl:""),"onUpdate:modelValue":t[66]||(t[66]=s=>{e.selectedEl.customClassCss=s,e.refreshAllCustomClassCss()}),height:"180px"},null,8,["modelValue"]),t[247]||(t[247]=l("p",{class:"text-[11px] text-gray-500 mt-1"},"提示：已为当前类名生成 .className { } 模板；也可直接填写声明，系统会自动包裹并追加 !important。",-1))])):Y("",!0),e.selectedEl&&(e.selectedEl.type==="chart"||e.selectedEl.type==="container")?(C(),N("div",Ui,[t[248]||(t[248]=l("label",{class:"block text-xs text-gray-400 mb-1"},"元素ID",-1)),fe(l("input",{"onUpdate:modelValue":t[67]||(t[67]=s=>e.selectedEl.elementId=s),type:"text",placeholder:"输入元素ID",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,512),[[Me,e.selectedEl.elementId]])])):Y("",!0),e.selectedEl?(C(),N("div",Vi,[t[252]||(t[252]=l("h3",{class:"text-sm font-medium text-purple-300"},"显示与隐藏",-1)),l("div",Ri,[t[250]||(t[250]=l("label",{class:"text-xs text-gray-400"},"隐藏该元素",-1)),l("label",Pi,[l("input",{type:"checkbox",class:"sr-only peer",checked:!!e.selectedEl.hidden,onChange:t[68]||(t[68]=s=>{const E=s.target.checked;e.selectedEl&&(e.selectedEl.hidden=E,E&&!e.selectedEl.hiddenLabel&&(e.selectedEl.hiddenLabel=`hidden-${String(e.selectedEl.id).slice(0,8)}`))})},null,40,Wi),t[249]||(t[249]=l("div",{class:"relative w-12 h-6 rounded-full bg-gray-700/60 transition-all duration-200 shadow-inner peer-checked:bg-gradient-to-r peer-checked:from-purple-600 peer-checked:to-pink-600"},[l("div",{class:"absolute left-0.5 top-0.5 w-5 h-5 bg-white rounded-full shadow transform transition-transform duration-200 peer-checked:translate-x-6"})],-1)),l("span",{class:Ne(["ml-3 text-xs",e.selectedEl.hidden?"text-purple-300":"text-gray-300"])},it(e.selectedEl.hidden?"已隐藏":"显示中"),3)])]),e.selectedEl.hidden?(C(),N("div",Hi,[t[251]||(t[251]=l("label",{class:"block text-xs text-gray-400"},"隐藏标识",-1)),l("input",{type:"text",value:e.selectedEl.hiddenLabel||"",onInput:t[69]||(t[69]=s=>{e.selectedEl&&(e.selectedEl.hiddenLabel=s.target.value)}),class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1",placeholder:"hidden-xxxx"},null,40,Ji)])):Y("",!0)])):Y("",!0)])]),e.selectedEl&&e.selectedEl.type==="container"?(C(),N("div",_i,[t[275]||(t[275]=l("h3",{class:"text-sm font-medium text-purple-300 border-b border-purple-500/30 pb-1"},"容器样式",-1)),l("div",null,[t[254]||(t[254]=l("label",{class:"block text-xs text-gray-400 mb-1"},"背景色（HEX）",-1)),l("div",qi,[l("input",{type:"color",value:((Ml=(al=e.selectedEl)==null?void 0:al.style)==null?void 0:Ml.backgroundColor)||"#000000",onInput:t[70]||(t[70]=s=>{const E=s.target.value;e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.backgroundColor=E)}),class:"w-10 h-8 bg-gray-800/50 border border-purple-500/30 rounded"},null,40,Yi),l("input",{type:"text",value:((Hl=(Wl=e.selectedEl)==null?void 0:Wl.style)==null?void 0:Hl.backgroundColor)||"",placeholder:"#1e293b 或 transparent",onInput:t[71]||(t[71]=s=>{const E=s.target.value.trim();e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.backgroundColor=E)}),class:"flex-1 px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,40,Ki)]),t[255]||(t[255]=l("p",{class:"text-[11px] text-gray-500 mt-1"},"支持 #RGB/#RRGGBB 或 CSS 颜色名；启用渐变时该颜色被覆盖。",-1))]),l("div",null,[t[256]||(t[256]=l("label",{class:"block text-xs text-gray-400 mb-1"},"容器注释（导出可见）",-1)),fe(l("textarea",{"onUpdate:modelValue":t[72]||(t[72]=s=>e.selectedEl.comment=s),rows:"2",placeholder:"输入注释，方便代码维护...",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,512),[[Me,e.selectedEl.comment]])]),l("div",Xi,[l("div",Zi,[t[258]||(t[258]=l("label",{class:"block text-xs text-gray-400 mb-1"},"渐变背景",-1)),l("label",Qi,[l("input",{type:"checkbox",checked:!!((Et=(Jl=e.selectedEl)==null?void 0:Jl.style)!=null&&Et.backgroundGradient),onChange:t[73]||(t[73]=s=>{const E=s.target.checked;e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},E?e.selectedEl.style.backgroundGradient||(e.selectedEl.style.backgroundGradient={colors:["#42b883","#0ea5e9"],angle:90}):delete e.selectedEl.style.backgroundGradient)})},null,40,ed),t[257]||(t[257]=Vl(" 启用 ",-1))])]),(_l=(pl=e.selectedEl)==null?void 0:pl.style)!=null&&_l.backgroundGradient?(C(),N("div",td,[l("div",null,[t[259]||(t[259]=l("label",{class:"block text-[11px] text-gray-400 mb-1"},"起始色（HEX）",-1)),l("div",ld,[l("input",{type:"color",value:((jl=(Nl=(Il=(ql=e.selectedEl)==null?void 0:ql.style)==null?void 0:Il.backgroundGradient)==null?void 0:Nl.colors)==null?void 0:jl[0])||"#42b883",onInput:t[74]||(t[74]=s=>{var ye;const E=s.target.value;if(!e.selectedEl)return;e.selectedEl.style=e.selectedEl.style||{};const w=e.selectedEl.style.backgroundGradient||{colors:["","#"],angle:90};w.colors=(ye=w.colors)!=null&&ye.length?w.colors:["","#"],w.colors[0]=E,e.selectedEl.style.backgroundGradient=w}),class:"w-10 h-8 bg-gray-800/50 border border-purple-500/30 rounded"},null,40,rd),l("input",{type:"text",value:((ml=(xl=(bl=(Yl=e.selectedEl)==null?void 0:Yl.style)==null?void 0:bl.backgroundGradient)==null?void 0:xl.colors)==null?void 0:ml[0])||"",placeholder:"#42b883",onInput:t[75]||(t[75]=s=>{var ye;const E=s.target.value.trim();if(!e.selectedEl)return;e.selectedEl.style=e.selectedEl.style||{};const w=e.selectedEl.style.backgroundGradient||{colors:["","#"],angle:90};w.colors=(ye=w.colors)!=null&&ye.length?w.colors:["","#"],w.colors[0]=E,e.selectedEl.style.backgroundGradient=w}),class:"flex-1 px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-xs"},null,40,nd)])]),l("div",null,[t[260]||(t[260]=l("label",{class:"block text-[11px] text-gray-400 mb-1"},"结束色（HEX）",-1)),l("div",od,[l("input",{type:"color",value:((Kl=(Al=(Fl=(hl=e.selectedEl)==null?void 0:hl.style)==null?void 0:Fl.backgroundGradient)==null?void 0:Al.colors)==null?void 0:Kl[1])||"#0ea5e9",onInput:t[76]||(t[76]=s=>{var ye;const E=s.target.value;if(!e.selectedEl)return;e.selectedEl.style=e.selectedEl.style||{};const w=e.selectedEl.style.backgroundGradient||{colors:["","#"],angle:90};w.colors=(ye=w.colors)!=null&&ye.length?w.colors:["","#"],w.colors[1]=E,e.selectedEl.style.backgroundGradient=w}),class:"w-10 h-8 bg-gray-800/50 border border-purple-500/30 rounded"},null,40,sd),l("input",{type:"text",value:((Xl=(Ot=(nl=(zl=e.selectedEl)==null?void 0:zl.style)==null?void 0:nl.backgroundGradient)==null?void 0:Ot.colors)==null?void 0:Xl[1])||"",placeholder:"#0ea5e9",onInput:t[77]||(t[77]=s=>{var ye;const E=s.target.value.trim();if(!e.selectedEl)return;e.selectedEl.style=e.selectedEl.style||{};const w=e.selectedEl.style.backgroundGradient||{colors:["","#"],angle:90};w.colors=(ye=w.colors)!=null&&ye.length?w.colors:["","#"],w.colors[1]=E,e.selectedEl.style.backgroundGradient=w}),class:"flex-1 px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-xs"},null,40,ad)])]),l("div",id,[t[261]||(t[261]=l("label",{class:"block text-[11px] text-gray-400"},"角度（0-360）",-1)),l("input",{type:"range",min:"0",max:"360",step:"1",value:(tr=(er=(Ql=(Zl=e.selectedEl)==null?void 0:Zl.style)==null?void 0:Ql.backgroundGradient)==null?void 0:er.angle)!=null?tr:90,onInput:t[78]||(t[78]=s=>{const E=Number(s.target.value)||0;if(!e.selectedEl)return;e.selectedEl.style=e.selectedEl.style||{};const w=e.selectedEl.style.backgroundGradient||{colors:["","#"],angle:90};w.angle=E,e.selectedEl.style.backgroundGradient=w}),class:"w-full"},null,40,dd),l("input",{type:"number",value:(wl=(vl=(Ol=(lr=e.selectedEl)==null?void 0:lr.style)==null?void 0:Ol.backgroundGradient)==null?void 0:vl.angle)!=null?wl:90,onInput:t[79]||(t[79]=s=>{const E=Number(s.target.value)||0;if(!e.selectedEl)return;e.selectedEl.style=e.selectedEl.style||{};const w=e.selectedEl.style.backgroundGradient||{colors:["","#"],angle:90};w.angle=E,e.selectedEl.style.backgroundGradient=w}),class:"w-24 px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-xs"},null,40,ud)])])):Y("",!0),t[262]||(t[262]=l("p",{class:"text-[11px] text-gray-500"},"提示：仅在启用后显示渐变设置；未启用时使用背景色。",-1))]),l("div",cd,[l("div",pd,[t[264]||(t[264]=l("label",{class:"block text-xs text-gray-400"},"圆角",-1)),l("label",gd,[l("input",{type:"checkbox",checked:!!(($l=(Dl=e.selectedEl)==null?void 0:Dl.style)!=null&&$l.borderRadius)&&M((rr=(El=e.selectedEl)==null?void 0:El.style)==null?void 0:rr.borderRadius)>0,onChange:t[80]||(t[80]=s=>{const E=s.target.checked;e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},E?e.selectedEl.style.borderRadius||(e.selectedEl.style.borderRadius="8px"):e.selectedEl.style.borderRadius="0")})},null,40,fd),t[263]||(t[263]=Vl(" 启用 ",-1))])]),(Bl=(qt=e.selectedEl)==null?void 0:qt.style)!=null&&Bl.borderRadius&&M((Gl=(nr=e.selectedEl)==null?void 0:nr.style)==null?void 0:Gl.borderRadius)>=0?(C(),N("div",yd,[l("div",bd,[t[265]||(t[265]=l("span",{class:"text-[11px] text-gray-400"},"单位",-1)),l("button",{type:"button",class:Ne(["px-2 py-0.5 rounded text-[11px]",se((or=(Tl=e.selectedEl)==null?void 0:Tl.style)==null?void 0:or.borderRadius)==="px"?"bg-purple-600/60":"bg-gray-700"]),onClick:t[81]||(t[81]=()=>{var E,w;const s=M((w=(E=e.selectedEl)==null?void 0:E.style)==null?void 0:w.borderRadius);g(s,"px")})},"px",2),l("button",{type:"button",class:Ne(["px-2 py-0.5 rounded text-[11px]",se((n=(Ll=e.selectedEl)==null?void 0:Ll.style)==null?void 0:n.borderRadius)==="%"?"bg-purple-600/60":"bg-gray-700"]),onClick:t[82]||(t[82]=()=>{var E,w;const s=M((w=(E=e.selectedEl)==null?void 0:E.style)==null?void 0:w.borderRadius);g(s,"%")})},"%",2)]),se((i=(r=e.selectedEl)==null?void 0:r.style)==null?void 0:i.borderRadius)==="px"?(C(),N("div",xd,[l("input",{type:"range",min:"0",max:"64",step:"1",value:M((y=(u=e.selectedEl)==null?void 0:u.style)==null?void 0:y.borderRadius),onInput:t[83]||(t[83]=s=>{const E=Number(s.target.value)||0;g(E,"px")}),class:"w-full"},null,40,md),l("input",{type:"number",value:M((F=(x=e.selectedEl)==null?void 0:x.style)==null?void 0:F.borderRadius),onInput:t[84]||(t[84]=s=>{const E=Number(s.target.value)||0;g(E,"px")}),class:"w-24 px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm"},null,40,hd)])):(C(),N("div",vd,[l("input",{type:"range",min:"0",max:"100",step:"1",value:M((A=(j=e.selectedEl)==null?void 0:j.style)==null?void 0:A.borderRadius),onInput:t[85]||(t[85]=s=>{const E=Number(s.target.value)||0;g(E,"%")}),class:"w-full"},null,40,wd),l("div",$d,[l("input",{type:"number",value:M((c=(z=e.selectedEl)==null?void 0:z.style)==null?void 0:c.borderRadius),onInput:t[86]||(t[86]=s=>{const E=Number(s.target.value)||0;g(E,"%")}),class:"w-20 px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm"},null,40,Ed),t[266]||(t[266]=l("span",{class:"text-xs text-gray-400"},"%",-1))])]))])):Y("",!0)]),l("div",kd,[l("div",Sd,[t[268]||(t[268]=l("label",{class:"block text-xs text-gray-400"},"阴影（box-shadow）",-1)),l("label",Cd,[l("input",{type:"checkbox",checked:!!((T=(p=e.selectedEl)==null?void 0:p.style)!=null&&T.boxShadow),onChange:t[87]||(t[87]=s=>{const E=s.target.checked;e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},E?e.selectedEl.style.boxShadow||(e.selectedEl.style.boxShadow="0 8px 24px rgba(0,0,0,0.25)"):delete e.selectedEl.style.boxShadow)})},null,40,Md),t[267]||(t[267]=Vl(" 启用 ",-1))])]),(de=(H=e.selectedEl)==null?void 0:H.style)!=null&&de.boxShadow?(C(),N("div",Id,[l("input",{type:"text",value:((Ae=(ve=e.selectedEl)==null?void 0:ve.style)==null?void 0:Ae.boxShadow)||"",placeholder:"例如: 0 8px 24px rgba(0,0,0,0.25)",onInput:t[88]||(t[88]=s=>{const E=s.target.value;e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.boxShadow=E)}),class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm"},null,40,Nd),l("div",jd,[t[269]||(t[269]=l("label",{class:"block text-[11px] text-gray-400"},"X 偏移",-1)),l("div",Fd,[l("input",{type:"range",min:"-64",max:"64",step:"1",value:m((we=(ce=e.selectedEl)==null?void 0:ce.style)==null?void 0:we.boxShadow).x,onInput:t[89]||(t[89]=s=>{var ye,Ye,Ke,Xe,he,Ze;const E=Number(s.target.value)||0,w=m((Ye=(ye=e.selectedEl)==null?void 0:ye.style)==null?void 0:Ye.boxShadow);U(E!=null?E:0,(Ke=w.y)!=null?Ke:0,(Xe=w.blur)!=null?Xe:0,(he=w.spread)!=null?he:0,(Ze=w.color)!=null?Ze:"#000000")}),class:"flex-1"},null,40,Ad),l("input",{type:"number",value:m((te=(ee=e.selectedEl)==null?void 0:ee.style)==null?void 0:te.boxShadow).x,onInput:t[90]||(t[90]=s=>{var ye,Ye,Ke,Xe,he,Ze;const E=Number(s.target.value)||0,w=m((Ye=(ye=e.selectedEl)==null?void 0:ye.style)==null?void 0:Ye.boxShadow);U(E!=null?E:0,(Ke=w.y)!=null?Ke:0,(Xe=w.blur)!=null?Xe:0,(he=w.spread)!=null?he:0,(Ze=w.color)!=null?Ze:"#000000")}),class:"w-20 px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-xs"},null,40,zd)])]),l("div",Od,[t[270]||(t[270]=l("label",{class:"block text-[11px] text-gray-400"},"Y 偏移",-1)),l("div",Dd,[l("input",{type:"range",min:"-64",max:"64",step:"1",value:m((re=(R=e.selectedEl)==null?void 0:R.style)==null?void 0:re.boxShadow).y,onInput:t[91]||(t[91]=s=>{var ye,Ye,Ke,Xe,he,Ze;const E=Number(s.target.value)||0,w=m((Ye=(ye=e.selectedEl)==null?void 0:ye.style)==null?void 0:Ye.boxShadow);U((Ke=w.x)!=null?Ke:0,E!=null?E:0,(Xe=w.blur)!=null?Xe:0,(he=w.spread)!=null?he:0,(Ze=w.color)!=null?Ze:"#000000")}),class:"flex-1"},null,40,Bd),l("input",{type:"number",value:m((b=(Ve=e.selectedEl)==null?void 0:Ve.style)==null?void 0:b.boxShadow).y,onInput:t[92]||(t[92]=s=>{var ye,Ye,Ke,Xe,he,Ze;const E=Number(s.target.value)||0,w=m((Ye=(ye=e.selectedEl)==null?void 0:ye.style)==null?void 0:Ye.boxShadow);U((Ke=w.x)!=null?Ke:0,E!=null?E:0,(Xe=w.blur)!=null?Xe:0,(he=w.spread)!=null?he:0,(Ze=w.color)!=null?Ze:"#000000")}),class:"w-20 px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-xs"},null,40,Gd)])]),l("div",Td,[t[271]||(t[271]=l("label",{class:"block text-[11px] text-gray-400"},"模糊",-1)),l("div",Ld,[l("input",{type:"range",min:"0",max:"128",step:"1",value:m((W=(h=e.selectedEl)==null?void 0:h.style)==null?void 0:W.boxShadow).blur,onInput:t[93]||(t[93]=s=>{var ye,Ye,Ke,Xe,he,Ze;const E=Number(s.target.value)||0,w=m((Ye=(ye=e.selectedEl)==null?void 0:ye.style)==null?void 0:Ye.boxShadow);U((Ke=w.x)!=null?Ke:0,(Xe=w.y)!=null?Xe:0,E!=null?E:0,(he=w.spread)!=null?he:0,(Ze=w.color)!=null?Ze:"#000000")}),class:"flex-1"},null,40,Ud),l("input",{type:"number",value:m((B=(O=e.selectedEl)==null?void 0:O.style)==null?void 0:B.boxShadow).blur,onInput:t[94]||(t[94]=s=>{var ye,Ye,Ke,Xe,he,Ze;const E=Number(s.target.value)||0,w=m((Ye=(ye=e.selectedEl)==null?void 0:ye.style)==null?void 0:Ye.boxShadow);U((Ke=w.x)!=null?Ke:0,(Xe=w.y)!=null?Xe:0,E!=null?E:0,(he=w.spread)!=null?he:0,(Ze=w.color)!=null?Ze:"#000000")}),class:"w-20 px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-xs"},null,40,Vd)])]),l("div",Rd,[t[272]||(t[272]=l("label",{class:"block text-[11px] text-gray-400"},"扩散",-1)),l("div",Pd,[l("input",{type:"range",min:"-64",max:"64",step:"1",value:m((I=(X=e.selectedEl)==null?void 0:X.style)==null?void 0:I.boxShadow).spread,onInput:t[95]||(t[95]=s=>{var ye,Ye,Ke,Xe,he,Ze;const E=Number(s.target.value)||0,w=m((Ye=(ye=e.selectedEl)==null?void 0:ye.style)==null?void 0:Ye.boxShadow);U((Ke=w.x)!=null?Ke:0,(Xe=w.y)!=null?Xe:0,(he=w.blur)!=null?he:0,E!=null?E:0,(Ze=w.color)!=null?Ze:"#000000")}),class:"flex-1"},null,40,Wd),l("input",{type:"number",value:m((v=(J=e.selectedEl)==null?void 0:J.style)==null?void 0:v.boxShadow).spread,onInput:t[96]||(t[96]=s=>{var ye,Ye,Ke,Xe,he,Ze;const E=Number(s.target.value)||0,w=m((Ye=(ye=e.selectedEl)==null?void 0:ye.style)==null?void 0:Ye.boxShadow);U((Ke=w.x)!=null?Ke:0,(Xe=w.y)!=null?Xe:0,(he=w.blur)!=null?he:0,E!=null?E:0,(Ze=w.color)!=null?Ze:"#000000")}),class:"w-20 px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-xs"},null,40,Hd)])])])):Y("",!0),l("div",Jd,[t[273]||(t[273]=l("label",{class:"block text-[11px] text-gray-400"},"阴影颜色",-1)),(xe=(_=e.selectedEl)==null?void 0:_.style)!=null&&xe.boxShadow?(C(),N("div",_d,[l("input",{type:"color",value:m((Le=(me=e.selectedEl)==null?void 0:me.style)==null?void 0:Le.boxShadow).color||"#000000",onInput:t[97]||(t[97]=s=>{var ye,Ye,Ke,Xe,he,Ze;const E=s.target.value,w=m((Ye=(ye=e.selectedEl)==null?void 0:ye.style)==null?void 0:Ye.boxShadow);U((Ke=w.x)!=null?Ke:0,(Xe=w.y)!=null?Xe:0,(he=w.blur)!=null?he:0,(Ze=w.spread)!=null?Ze:0,E||"#000000")}),class:"w-10 h-8 bg-gray-800/50 border border-purple-500/30 rounded"},null,40,qd),l("input",{type:"text",value:m((ot=(He=e.selectedEl)==null?void 0:He.style)==null?void 0:ot.boxShadow).color||"",placeholder:"#000000 或 rgba(...)",onInput:t[98]||(t[98]=s=>{var ye,Ye,Ke,Xe,he,Ze;const E=s.target.value.trim(),w=m((Ye=(ye=e.selectedEl)==null?void 0:ye.style)==null?void 0:Ye.boxShadow);U((Ke=w.x)!=null?Ke:0,(Xe=w.y)!=null?Xe:0,(he=w.blur)!=null?he:0,(Ze=w.spread)!=null?Ze:0,E||"#000000")}),class:"flex-1 px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm"},null,40,Yd)])):Y("",!0)]),t[274]||(t[274]=l("p",{class:"text-[11px] text-gray-500"},"支持滑动或数字输入；颜色可选色块与 HEX 文本。",-1))])])):Y("",!0),e.selectedEl&&e.selectedEl.type==="chart"?(C(),N("div",Kd,[t[290]||(t[290]=l("h3",{class:"text-sm font-medium text-purple-300 border-b border-purple-500/30 pb-1"},"图表配置",-1)),l("div",Xd,[l("button",{onClick:t[99]||(t[99]=s=>be.value="visual"),class:Ne(["px-3 py-1 rounded text-sm",be.value==="visual"?"bg-purple-600/60":"bg-gray-700"])},"可视化",2),l("button",{onClick:t[100]||(t[100]=s=>be.value="json"),class:Ne(["px-3 py-1 rounded text-sm",be.value==="json"?"bg-purple-600/60":"bg-gray-700"])},"JSON",2)]),be.value==="visual"?(C(),N("div",Zd,[l("div",null,[t[276]||(t[276]=l("label",{class:"block text-xs text-gray-400 mb-1"},"图表类型",-1)),Ct(Tt,{options:["line","bar","pie","mix"],modelValue:e.selectedEl.chartType||"line","onUpdate:modelValue":t[101]||(t[101]=s=>{e.selectedEl&&(e.selectedEl.chartType=s,e.selectedEl.chartOption=e.defaultChartOption(s),$.value=JSON.stringify(e.selectedEl.chartOption,null,2))})},null,8,["modelValue"])]),l("div",null,[t[277]||(t[277]=l("label",{class:"block text-xs text-gray-400 mb-1"},"标题",-1)),l("input",{value:((Dt=(jt=(At=e.selectedEl)==null?void 0:At.chartOption)==null?void 0:jt.title)==null?void 0:Dt.text)||"",onInput:t[102]||(t[102]=s=>G(s.target.value)),type:"text",placeholder:"输入图表标题",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm"},null,40,Qd)]),l("div",eu,[l("div",null,[t[278]||(t[278]=l("label",{class:"block text-xs text-gray-400 mb-1"},"颜色列表（逗号分隔）",-1)),l("input",{value:((zt=(Yt=(kt=e.selectedEl)==null?void 0:kt.chartOption)==null?void 0:Yt.color)==null?void 0:zt.join(","))||"",onInput:t[103]||(t[103]=s=>ne(s.target.value)),type:"text",placeholder:"#42b883,#ff9800",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm"},null,40,tu)]),l("div",null,[t[280]||(t[280]=l("label",{class:"block text-xs text-gray-400 mb-1"},"显示图例",-1)),l("select",{value:(mr=(sr=(kl=(ol=e.selectedEl)==null?void 0:ol.chartOption)==null?void 0:kl.legend)==null?void 0:sr.show)==null||mr?"1":"0",onChange:t[104]||(t[104]=s=>rt(s.target.value)),class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm"},[...t[279]||(t[279]=[l("option",{value:"1"},"显示",-1),l("option",{value:"0"},"隐藏",-1)])],40,lu)])]),e.selectedEl&&e.selectedEl.chartType!=="pie"?(C(),N("div",ru,[l("div",null,[t[281]||(t[281]=l("label",{class:"block text-xs text-gray-400 mb-1"},"Y轴最小值",-1)),l("input",{value:Array.isArray((vr=(hr=e.selectedEl)==null?void 0:hr.chartOption)==null?void 0:vr.yAxis)?(Sr=(kr=(Er=($r=(wr=e.selectedEl)==null?void 0:wr.chartOption)==null?void 0:$r.yAxis)==null?void 0:Er[0])==null?void 0:kr.min)!=null?Sr:"":(Nr=(Ir=(Mr=(Cr=e.selectedEl)==null?void 0:Cr.chartOption)==null?void 0:Mr.yAxis)==null?void 0:Ir.min)!=null?Nr:"",onInput:t[105]||(t[105]=s=>{const E=s.target.value;if(!e.selectedEl)return;e.selectedEl.chartOption||(e.selectedEl.chartOption=e.defaultChartOption(e.selectedEl.chartType||"line"));const w=e.selectedEl.chartOption.yAxis,ye=E===""?null:Number(E);Array.isArray(w)?(w[0]=w[0]||{},w[0].min=ye):(e.selectedEl.chartOption.yAxis=w||{},e.selectedEl.chartOption.yAxis.min=ye),$.value=JSON.stringify(e.selectedEl.chartOption,null,2)}),type:"number",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm"},null,40,nu)]),l("div",null,[t[282]||(t[282]=l("label",{class:"block text-xs text-gray-400 mb-1"},"Y轴最大值",-1)),l("input",{value:Array.isArray((Fr=(jr=e.selectedEl)==null?void 0:jr.chartOption)==null?void 0:Fr.yAxis)?(Br=(Dr=(Or=(zr=(Ar=e.selectedEl)==null?void 0:Ar.chartOption)==null?void 0:zr.yAxis)==null?void 0:Or[0])==null?void 0:Dr.max)!=null?Br:"":(Ur=(Lr=(Tr=(Gr=e.selectedEl)==null?void 0:Gr.chartOption)==null?void 0:Tr.yAxis)==null?void 0:Lr.max)!=null?Ur:"",onInput:t[106]||(t[106]=s=>{const E=s.target.value;if(!e.selectedEl)return;e.selectedEl.chartOption||(e.selectedEl.chartOption=e.defaultChartOption(e.selectedEl.chartType||"line"));const w=e.selectedEl.chartOption.yAxis,ye=E===""?null:Number(E);Array.isArray(w)?(w[0]=w[0]||{},w[0].max=ye):(e.selectedEl.chartOption.yAxis=w||{},e.selectedEl.chartOption.yAxis.max=ye),$.value=JSON.stringify(e.selectedEl.chartOption,null,2)}),type:"number",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm"},null,40,ou)])])):Y("",!0),e.selectedEl&&(e.selectedEl.chartType==="line"||e.selectedEl.chartType==="mix")?(C(),N("div",su,[l("div",null,[t[284]||(t[284]=l("label",{class:"block text-xs text-gray-400 mb-1"},"折线平滑",-1)),l("select",{value:"1",onChange:t[107]||(t[107]=s=>{const E=s.target.value==="1";e.selectedEl&&e.selectedEl.chartOption&&((e.selectedEl.chartOption.series||[]).forEach(w=>{w.type==="line"&&(w.smooth=E)}),$.value=JSON.stringify(e.selectedEl.chartOption,null,2))}),class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm"},[...t[283]||(t[283]=[l("option",{value:"1"},"平滑",-1),l("option",{value:"0"},"不平滑",-1)])],32)]),l("div",null,[t[285]||(t[285]=l("label",{class:"block text-xs text-gray-400 mb-1"},"线宽",-1)),l("input",{value:2,onInput:t[108]||(t[108]=s=>{const E=Number(s.target.value)||2;e.selectedEl&&e.selectedEl.chartOption&&((e.selectedEl.chartOption.series||[]).forEach(w=>{w.type==="line"&&(w.lineStyle=w.lineStyle||{},w.lineStyle.width=E)}),$.value=JSON.stringify(e.selectedEl.chartOption,null,2))}),type:"number",min:"1",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm"},null,32)])])):Y("",!0),e.selectedEl&&(e.selectedEl.chartType==="bar"||e.selectedEl.chartType==="mix")?(C(),N("div",au,[l("div",null,[t[286]||(t[286]=l("label",{class:"block text-xs text-gray-400 mb-1"},"柱状渐变起始色",-1)),l("input",{type:"color",value:"#42b883",onInput:t[109]||(t[109]=s=>{const E=s.target.value;Oe(E,"#0ea5e9")}),class:"w-full h-8 bg-gray-800/50 border border-purple-500/30 rounded"},null,32)]),l("div",null,[t[287]||(t[287]=l("label",{class:"block text-xs text-gray-400 mb-1"},"柱状渐变结束色",-1)),l("input",{type:"color",value:"#0ea5e9",onInput:t[110]||(t[110]=s=>{const E=s.target.value;Oe("#42b883",E)}),class:"w-full h-8 bg-gray-800/50 border border-purple-500/30 rounded"},null,32)]),l("div",null,[t[288]||(t[288]=l("label",{class:"block text-xs text-gray-400 mb-1"},"圆角",-1)),l("input",{value:4,onInput:t[111]||(t[111]=s=>{const E=Number(s.target.value)||0;e.selectedEl&&e.selectedEl.chartOption&&((e.selectedEl.chartOption.series||[]).forEach(w=>{w.type==="bar"&&(w.itemStyle=w.itemStyle||{},w.itemStyle.borderRadius=[E,E,0,0])}),$.value=JSON.stringify(e.selectedEl.chartOption,null,2))}),type:"number",min:"0",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm"},null,32)])])):Y("",!0)])):(C(),N("div",iu,[t[289]||(t[289]=l("label",{class:"block text-xs text-gray-400 mb-1"},"ECharts Option JSON",-1)),fe(l("textarea",{"onUpdate:modelValue":t[112]||(t[112]=s=>$.value=s),rows:"10",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-xs font-mono"},null,512),[[Me,$.value]]),l("div",du,[l("button",{onClick:t[113]||(t[113]=s=>q()),class:"px-3 py-1 bg-emerald-600 rounded text-sm"},"应用配置"),ue.value?(C(),N("div",uu,it(ue.value),1)):Y("",!0)])]))])):Y("",!0),e.selectedEl&&e.selectedEl.type==="line"?(C(),N("div",cu,[t[298]||(t[298]=l("h3",{class:"text-sm font-medium text-purple-300 border-b border-purple-500/30 pb-1"},"线条设置",-1)),l("div",pu,[t[291]||(t[291]=l("label",{class:"block text-xs text-gray-400 mb-1"},"颜色",-1)),l("div",gu,[l("input",{value:e.safeHex(((Rr=(Vr=e.selectedEl)==null?void 0:Vr.style)==null?void 0:Rr.lineColor)||""),onInput:t[114]||(t[114]=s=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.lineColor=s.target.value)}),type:"color",class:"w-8 h-6 bg-gray-800/50 border border-purple-500/30 rounded cursor-pointer"},null,40,fu),l("input",{value:(Hr=(Wr=(Pr=e.selectedEl)==null?void 0:Pr.style)==null?void 0:Wr.lineColor)!=null?Hr:"#ffffff",onInput:t[115]||(t[115]=s=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.lineColor=s.target.value)}),type:"text",class:"flex-1 px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-xs focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200",placeholder:"#ffffff"},null,40,yu)])]),l("div",bu,[l("div",null,[t[292]||(t[292]=l("label",{class:"block text-xs text-gray-400 mb-1"},"方向",-1)),l("div",xu,[l("button",{onClick:t[116]||(t[116]=()=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.lineOrientation="horizontal")}),class:Ne(["px-2 py-1 text-xs rounded transition-colors duration-200",(((_r=(Jr=e.selectedEl)==null?void 0:Jr.style)==null?void 0:_r.lineOrientation)||"horizontal")==="horizontal"?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"])},"横向",2),l("button",{onClick:t[117]||(t[117]=()=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.lineOrientation="vertical")}),class:Ne(["px-2 py-1 text-xs rounded transition-colors duration-200",(((Yr=(qr=e.selectedEl)==null?void 0:qr.style)==null?void 0:Yr.lineOrientation)||"horizontal")==="vertical"?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"])},"纵向",2)])]),l("div",null,[t[293]||(t[293]=l("label",{class:"block text-xs text-gray-400 mb-1"},"粗细(px)",-1)),l("input",{value:(Zr=(Xr=(Kr=e.selectedEl)==null?void 0:Kr.style)==null?void 0:Xr.lineThickness)!=null?Zr:2,onInput:t[118]||(t[118]=s=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.lineThickness=Number(s.target.value))}),type:"number",min:"1",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,40,mu)])]),l("div",hu,[l("div",null,[t[295]||(t[295]=l("label",{class:"block text-xs text-gray-400 mb-1"},"样式",-1)),l("select",{value:((en=(Qr=e.selectedEl)==null?void 0:Qr.style)==null?void 0:en.lineStyle)||"solid",onChange:t[119]||(t[119]=s=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.lineStyle=s.target.value)}),class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},[...t[294]||(t[294]=[l("option",{value:"solid"},"实线",-1),l("option",{value:"dashed"},"虚线",-1)])],40,vu)]),((ln=(tn=e.selectedEl)==null?void 0:tn.style)==null?void 0:ln.lineStyle)==="dashed"?(C(),N("div",wu,[t[296]||(t[296]=l("label",{class:"block text-xs text-gray-400 mb-1"},"虚线长度(px)",-1)),l("input",{value:(on=(nn=(rn=e.selectedEl)==null?void 0:rn.style)==null?void 0:nn.lineDashLength)!=null?on:6,onInput:t[120]||(t[120]=s=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.lineDashLength=Number(s.target.value))}),type:"number",min:"1",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,40,$u)])):Y("",!0)]),((an=(sn=e.selectedEl)==null?void 0:sn.style)==null?void 0:an.lineStyle)==="dashed"?(C(),N("div",Eu,[l("div",null,[t[297]||(t[297]=l("label",{class:"block text-xs text-gray-400 mb-1"},"虚线间距(px)",-1)),l("input",{value:(cn=(un=(dn=e.selectedEl)==null?void 0:dn.style)==null?void 0:un.lineDashGap)!=null?cn:4,onInput:t[121]||(t[121]=s=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.lineDashGap=Number(s.target.value))}),type:"number",min:"0",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,40,ku)])])):Y("",!0)])):Y("",!0),e.selectedEl&&e.selectedEl.type==="text"?(C(),N("div",Su,[t[340]||(t[340]=l("h3",{class:"text-sm font-medium text-purple-300 border-b border-purple-500/30 pb-1"},"文本内容",-1)),l("div",Cu,[t[299]||(t[299]=l("span",{class:"text-xs text-gray-400"},"模式",-1)),l("div",Mu,[l("button",{onClick:t[122]||(t[122]=()=>{e.selectedEl&&e.selectedEl.segments&&delete e.selectedEl.segments}),class:Ne(["px-2 py-0.5 text-[10px] rounded transition-colors",e.selectedEl.segments?"text-gray-400 hover:text-gray-200":"bg-purple-600 text-white"])},"普通",2),l("button",{onClick:t[123]||(t[123]=()=>{e.selectedEl&&(e.selectedEl.segments=e.selectedEl.segments||[{id:Date.now().toString(),text:e.selectedEl.text||"文本",style:{}}])}),class:Ne(["px-2 py-0.5 text-[10px] rounded transition-colors",e.selectedEl.segments?"bg-purple-600 text-white":"text-gray-400 hover:text-gray-200"])},"多段",2)])]),e.selectedEl.segments?(C(),N("div",Ou,[(C(!0),N(Wt,null,Kt(e.selectedEl.segments,(s,E)=>{var w,ye,Ye,Ke,Xe;return C(),N("div",{key:s.id,class:"bg-gray-800/30 p-2 rounded border border-gray-700"},[l("div",Du,[l("span",Bu,"片段 "+it(Number(E)+1),1),l("button",{onClick:he=>{var Ze;return(Ze=e.selectedEl.segments)==null?void 0:Ze.splice(E,1)},class:"text-red-400 hover:text-red-300 text-[10px]"},"删除",8,Gu)]),l("div",Tu,[l("div",Lu,[l("label",Uu,[fe(l("input",{type:"checkbox","onUpdate:modelValue":he=>s.dynamic=he,class:"sr-only peer"},null,8,Vu),[[Rl,s.dynamic]]),t[304]||(t[304]=l("div",{class:"w-7 h-4 bg-gray-700 rounded-full peer-checked:bg-purple-600 relative"},[l("div",{class:"absolute left-0.5 top-0.5 w-3 h-3 bg-white rounded-full transition-transform peer-checked:translate-x-3"})],-1)),t[305]||(t[305]=l("span",{class:"ml-1 text-[10px] text-gray-400"},"动态",-1))])]),s.dynamic?(C(),N("div",Wu,[fe(l("input",{"onUpdate:modelValue":he=>s.dynamicObj=he,class:"w-full px-2 py-1 bg-gray-900/50 border border-gray-600 rounded text-gray-100 text-xs",placeholder:"对象名 (如 data)"},null,8,Hu),[[Me,s.dynamicObj]]),fe(l("input",{"onUpdate:modelValue":he=>s.dynamicPath=he,class:"w-full px-2 py-1 bg-gray-900/50 border border-gray-600 rounded text-gray-100 text-xs",placeholder:"属性路径 (如 user.name)"},null,8,Ju),[[Me,s.dynamicPath]]),l("div",_u,"预览值: "+it(xt(s)),1)])):(C(),N("div",Ru,[fe(l("input",{"onUpdate:modelValue":he=>s.text=he,class:"w-full px-2 py-1 bg-gray-900/50 border border-gray-600 rounded text-gray-100 text-xs",placeholder:"文本内容"},null,8,Pu),[[Me,s.text]])]))]),l("div",qu,[l("div",null,[t[306]||(t[306]=l("label",{class:"block text-[10px] text-gray-400 mb-1"},"颜色 (Hex)",-1)),l("div",Yu,[l("input",{type:"color",value:((w=s.style)==null?void 0:w.color)||"#ffffff",onInput:he=>{s.style=s.style||{},s.style.color=he.target.value},class:"w-6 h-6 p-0 border-0 rounded cursor-pointer shrink-0"},null,40,Ku),l("input",{type:"text",value:(ye=s.style)==null?void 0:ye.color,onInput:he=>{s.style=s.style||{},s.style.color=he.target.value},class:"w-full px-2 py-1 bg-gray-900/50 border border-gray-600 rounded text-xs font-mono uppercase",placeholder:"#FFFFFF"},null,40,Xu)])]),l("div",Zu,[l("div",null,[t[308]||(t[308]=l("label",{class:"block text-[10px] text-gray-400 mb-1"},"字体",-1)),l("select",{value:((Ye=s.style)==null?void 0:Ye.fontFamily)||"",onChange:he=>{s.style=s.style||{},s.style.fontFamily=he.target.value},class:"w-full px-1 py-1 bg-gray-900/50 border border-gray-600 rounded text-xs"},[t[307]||(t[307]=l("option",{value:""},"默认",-1)),(C(!0),N(Wt,null,Kt(e.fontLibrary,he=>(C(),N("option",{key:he,value:he},it(he),9,ec))),128))],40,Qu)]),l("div",null,[t[309]||(t[309]=l("label",{class:"block text-[10px] text-gray-400 mb-1"},"字号",-1)),l("input",{type:"number",value:(Ke=s.style)==null?void 0:Ke.fontSize,onInput:he=>{s.style=s.style||{},s.style.fontSize=Number(he.target.value)},class:"w-full px-2 py-1 bg-gray-900/50 border border-gray-600 rounded text-xs",placeholder:"默认"},null,40,tc)]),l("div",null,[t[311]||(t[311]=l("label",{class:"block text-[10px] text-gray-400 mb-1"},"粗细",-1)),l("select",{value:((Xe=s.style)==null?void 0:Xe.fontWeight)||"",onChange:he=>{s.style=s.style||{},s.style.fontWeight=he.target.value},class:"w-full px-1 py-1 bg-gray-900/50 border border-gray-600 rounded text-xs"},[...t[310]||(t[310]=[l("option",{value:""},"默认",-1),l("option",{value:"400"},"常规",-1),l("option",{value:"700"},"加粗",-1)])],40,lc)])])])])}),128)),l("button",{onClick:t[129]||(t[129]=s=>{var E;return(E=e.selectedEl.segments)==null?void 0:E.push({id:Date.now().toString(),text:"新片段",style:{}})}),class:"w-full py-1 text-xs border border-dashed border-gray-600 text-gray-400 rounded hover:border-purple-500 hover:text-purple-400 transition-colors"},"+ 添加片段")])):(C(),N("div",Iu,[fe(l("textarea",{"onUpdate:modelValue":t[124]||(t[124]=s=>e.selectedEl.text=s),onChange:t[125]||(t[125]=s=>k.$emit("positionChanged")),class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200 resize-none",rows:"3"},null,544),[[Me,e.selectedEl.text]]),l("div",Nu,[t[303]||(t[303]=l("label",{class:"block text-xs text-gray-400 mb-1"},"动态值",-1)),l("div",ju,[l("input",{type:"checkbox",checked:!!((gn=(pn=e.selectedEl)==null?void 0:pn.dynamic)!=null&&gn.enabled),onChange:t[126]||(t[126]=s=>{e.selectedEl&&(e.selectedEl.dynamic=e.selectedEl.dynamic||{enabled:!1,objectName:"",propertyPath:""},e.selectedEl.dynamic.enabled=s.target.checked)}),class:"rounded accent-purple-600"},null,40,Fu),t[300]||(t[300]=l("span",{class:"text-xs text-gray-400"},"启用后从数据库对象绑定",-1))]),(yn=(fn=e.selectedEl)==null?void 0:fn.dynamic)!=null&&yn.enabled?(C(),N("div",Au,[l("div",null,[t[301]||(t[301]=l("label",{class:"block text-xs text-gray-400 mb-1"},"选择对象",-1)),Ct(Tt,{options:e.databaseObjects.map(s=>s.name),modelValue:((xn=(bn=e.selectedEl)==null?void 0:bn.dynamic)==null?void 0:xn.objectName)||"","onUpdate:modelValue":t[127]||(t[127]=s=>{e.selectedEl&&(e.selectedEl.dynamic=e.selectedEl.dynamic||{enabled:!0,objectName:"",propertyPath:""},e.selectedEl.dynamic.objectName=String(s||""))})},null,8,["options","modelValue"])]),l("div",null,[t[302]||(t[302]=l("label",{class:"block text-xs text-gray-400 mb-1"},"属性路径",-1)),Ct(Tt,{options:ze.value,modelValue:((hn=(mn=e.selectedEl)==null?void 0:mn.dynamic)==null?void 0:hn.propertyPath)||"","onUpdate:modelValue":t[128]||(t[128]=s=>{e.selectedEl&&(e.selectedEl.dynamic=e.selectedEl.dynamic||{enabled:!0,objectName:"",propertyPath:""},e.selectedEl.dynamic.propertyPath=String(s||""))})},null,8,["options","modelValue"])]),l("div",zu,"预览值: "+it(Ge(e.selectedEl)),1)])):Y("",!0)])])),l("div",rc,[t[312]||(t[312]=l("label",{class:"block text-xs text-gray-400 mb-1"},"尺寸模式",-1)),l("div",nc,[l("button",{onClick:t[130]||(t[130]=()=>{const s=e.selectedEl;!s||s.type!=="text"||(s.autoSize=!0)}),class:Ne(["px-2 py-1 text-xs rounded transition-colors duration-200",e.selectedEl.autoSize!==!1?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"])},"自适应",2),l("button",{onClick:t[131]||(t[131]=()=>{const s=e.selectedEl;!s||s.type!=="text"||(s.autoSize=!1)}),class:Ne(["px-2 py-1 text-xs rounded transition-colors duration-200",e.selectedEl.autoSize===!1?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"])},"固定尺寸",2)])]),l("div",oc,[l("div",null,[t[313]||(t[313]=l("label",{class:"block text-xs text-gray-400 mb-1"},"字号",-1)),Ct(Tt,{options:e.fontSizeLibrary,modelValue:((vn=e.selectedEl.style)==null?void 0:vn.fontSize)||14,"onUpdate:modelValue":t[132]||(t[132]=s=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.fontSize=s,d("positionChanged"))}),numeric:!0},null,8,["options","modelValue"])]),l("div",null,[t[314]||(t[314]=l("label",{class:"block text-xs text-gray-400 mb-1"},"字体",-1)),Ct(Tt,{options:e.fontLibrary,modelValue:((wn=e.selectedEl.style)==null?void 0:wn.fontFamily)||e.config.globalFontFamily,"onUpdate:modelValue":t[133]||(t[133]=s=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.fontFamily=s,d("positionChanged"))})},null,8,["options","modelValue"])])]),l("div",sc,[l("div",null,[t[315]||(t[315]=l("label",{class:"block text-xs text-gray-400 mb-1"},"粗细",-1)),Ct(Tt,{options:e.fontWeightOptions,modelValue:(($n=e.selectedEl.style)==null?void 0:$n.fontWeight)||"400","onUpdate:modelValue":t[134]||(t[134]=s=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.fontWeight=s,d("positionChanged"))})},null,8,["options","modelValue"])]),l("div",null,[t[316]||(t[316]=l("label",{class:"block text-xs text-gray-400 mb-1"},"样式",-1)),Ct(Tt,{options:e.fontStyleOptions,modelValue:((En=e.selectedEl.style)==null?void 0:En.fontStyle)||"normal","onUpdate:modelValue":t[135]||(t[135]=s=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.fontStyle=s,d("positionChanged"))})},null,8,["options","modelValue"])])]),l("div",ac,[l("div",null,[t[317]||(t[317]=l("label",{class:"block text-xs text-gray-400 mb-1"},"字间距",-1)),l("input",{value:((kn=e.selectedEl.style)==null?void 0:kn.letterSpacing)||0,onInput:t[136]||(t[136]=s=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.letterSpacing=Number(s.target.value))}),type:"number",step:"0.1",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,40,ic)]),l("div",null,[t[318]||(t[318]=l("label",{class:"block text-xs text-gray-400 mb-1"},"行高",-1)),l("input",{value:((Sn=e.selectedEl.style)==null?void 0:Sn.lineHeight)||1.5,onInput:t[137]||(t[137]=s=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.lineHeight=Number(s.target.value))}),type:"number",step:"0.1",min:"0.5",max:"3",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,40,dc)])]),l("div",uc,[t[319]||(t[319]=l("label",{class:"block text-xs text-gray-400 mb-1"},"缩进",-1)),l("input",{value:((Cn=e.selectedEl.style)==null?void 0:Cn.textIndent)||"",onInput:t[138]||(t[138]=s=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.textIndent=s.target.value)}),type:"text",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200",placeholder:"例如: 2em 或 24px"},null,40,cc)]),l("div",pc,[t[320]||(t[320]=l("label",{class:"block text-xs text-gray-400 mb-1"},"颜色",-1)),l("div",gc,[l("input",{value:(In=(Mn=e.selectedEl)==null?void 0:Mn.style)!=null&&In.textGradient?"#000000":((jn=(Nn=e.selectedEl)==null?void 0:Nn.style)==null?void 0:jn.color)||e.config.globalColor,onInput:t[139]||(t[139]=s=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.color=s.target.value)}),onChange:t[140]||(t[140]=s=>d("positionChanged")),type:"color",disabled:!!((An=(Fn=e.selectedEl)==null?void 0:Fn.style)!=null&&An.textGradient),class:"w-8 h-6 bg-gray-800/50 border border-purple-500/30 rounded cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed"},null,40,fc),l("input",{value:(On=(zn=e.selectedEl)==null?void 0:zn.style)!=null&&On.textGradient?"transparent":(Gn=(Bn=(Dn=e.selectedEl)==null?void 0:Dn.style)==null?void 0:Bn.color)!=null?Gn:e.config.globalColor,onInput:t[141]||(t[141]=s=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.color=s.target.value)}),onChange:t[142]||(t[142]=s=>d("positionChanged")),type:"text",disabled:!!((Ln=(Tn=e.selectedEl)==null?void 0:Tn.style)!=null&&Ln.textGradient),class:"flex-1 px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-xs focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",placeholder:"#000000"},null,40,yc)]),(Vn=(Un=e.selectedEl)==null?void 0:Un.style)!=null&&Vn.textGradient?(C(),N("div",bc,"文字渐变启用时，文字颜色自动设为透明")):Y("",!0)]),l("div",xc,[t[321]||(t[321]=l("label",{class:"block text-xs text-gray-400 mb-1"},"背景色",-1)),l("div",mc,[l("input",{value:e.safeHex(((Pn=(Rn=e.selectedEl)==null?void 0:Rn.style)==null?void 0:Pn.backgroundColor)||""),onInput:t[143]||(t[143]=s=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.backgroundColor=s.target.value)}),onChange:t[144]||(t[144]=s=>d("positionChanged")),type:"color",class:"w-8 h-6 bg-gray-800/50 border border-purple-500/30 rounded cursor-pointer"},null,40,hc),l("input",{value:(Jn=(Hn=(Wn=e.selectedEl)==null?void 0:Wn.style)==null?void 0:Hn.backgroundColor)!=null?Jn:"transparent",onInput:t[145]||(t[145]=s=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.backgroundColor=s.target.value)}),onChange:t[146]||(t[146]=s=>d("positionChanged")),type:"text",class:"flex-1 px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-xs focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200",placeholder:"transparent"},null,40,vc)])]),l("div",wc,[t[322]||(t[322]=l("label",{class:"block text-xs text-gray-400 mb-1"},"文本对齐",-1)),l("div",$c,[l("button",{onClick:t[147]||(t[147]=()=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.textAlign="left",d("positionChanged"))}),class:Ne(["px-2 py-1 text-xs rounded transition-colors duration-200",(((_n=e.selectedEl.style)==null?void 0:_n.textAlign)||"left")==="left"?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"])},"左对齐",2),l("button",{onClick:t[148]||(t[148]=()=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.textAlign="center",d("positionChanged"))}),class:Ne(["px-2 py-1 text-xs rounded transition-colors duration-200",(((qn=e.selectedEl.style)==null?void 0:qn.textAlign)||"left")==="center"?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"])},"居中",2),l("button",{onClick:t[149]||(t[149]=()=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.textAlign="right",d("positionChanged"))}),class:Ne(["px-2 py-1 text-xs rounded transition-colors duration-200",(((Yn=e.selectedEl.style)==null?void 0:Yn.textAlign)||"left")==="right"?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"])},"右对齐",2),l("button",{onClick:t[150]||(t[150]=()=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.textAlign="justify",d("positionChanged"))}),class:Ne(["px-2 py-1 text-xs rounded transition-colors duration-200",(((Kn=e.selectedEl.style)==null?void 0:Kn.textAlign)||"left")==="justify"?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"])},"两端",2)])]),l("div",Ec,[t[323]||(t[323]=l("label",{class:"block text-xs text-gray-400 mb-1"},"文本方向",-1)),l("div",kc,[l("button",{onClick:t[151]||(t[151]=()=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.textOrientation="horizontal")}),class:Ne(["px-2 py-1 text-xs rounded transition-colors duration-200",(((Zn=(Xn=e.selectedEl)==null?void 0:Xn.style)==null?void 0:Zn.textOrientation)||"horizontal")==="horizontal"?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"])},"横向",2),l("button",{onClick:t[152]||(t[152]=()=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.textOrientation="vertical")}),class:Ne(["px-2 py-1 text-xs rounded transition-colors duration-200",(((eo=(Qn=e.selectedEl)==null?void 0:Qn.style)==null?void 0:eo.textOrientation)||"horizontal")==="vertical"?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"])},"纵向",2)]),t[324]||(t[324]=l("p",{class:"text-[11px] text-gray-400"},"纵向使用 CSS writing-mode 展示，适合竖排文本。",-1))]),l("div",Sc,[t[326]||(t[326]=l("label",{class:"block text-xs text-gray-400 mb-1"},"布局倾斜",-1)),l("div",Cc,[fe(l("input",{"onUpdate:modelValue":t[153]||(t[153]=s=>e.selectedEl.style.skewAngle=s),type:"range",min:"-45",max:"45",class:"flex-1"},null,512),[[Me,e.selectedEl.style.skewAngle,void 0,{number:!0}]]),fe(l("input",{"onUpdate:modelValue":t[154]||(t[154]=s=>e.selectedEl.style.skewAngle=s),type:"number",min:"-45",max:"45",class:"w-16 px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-xs focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,512),[[Me,e.selectedEl.style.skewAngle,void 0,{number:!0}]])]),l("div",Mc,[t[325]||(t[325]=l("label",{class:"text-xs text-gray-400"},"布局倾斜跟随",-1)),l("button",{onClick:t[155]||(t[155]=()=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.skewFlowEnabled=!0)}),class:Ne(["px-2 py-1 text-xs rounded transition-colors duration-200",(lo=(to=e.selectedEl)==null?void 0:to.style)!=null&&lo.skewFlowEnabled?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"])},"开",2),l("button",{onClick:t[156]||(t[156]=()=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.skewFlowEnabled=!1)}),class:Ne(["px-2 py-1 text-xs rounded transition-colors duration-200",(no=(ro=e.selectedEl)==null?void 0:ro.style)!=null&&no.skewFlowEnabled?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-purple-600 text-white"])},"关",2)]),t[327]||(t[327]=l("p",{class:"text-[11px] text-gray-400"},"调整整体容器的 X 轴倾斜角度（-45° ~ 45°）。启用“跟随”后，文本布局按父视图倾斜线性排布，字符保持正立，可与波形叠加。",-1))]),l("div",Ic,[l("div",Nc,[t[328]||(t[328]=l("label",{class:"text-xs text-gray-400"},"文本波形",-1)),l("div",jc,[(ao=(so=(oo=e.selectedEl)==null?void 0:oo.style)==null?void 0:so.textWave)!=null&&ao.enabled?(C(),N("button",{key:1,onClick:t[158]||(t[158]=()=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.textWave={enabled:!1})}),class:"px-2 py-1 bg-red-600/30 hover:bg-red-600/50 text-red-300 rounded text-xs transition-colors duration-200"},"关闭")):(C(),N("button",{key:0,onClick:t[157]||(t[157]=()=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.textWave={enabled:!0,amplitude:8,frequency:.5,phase:0})}),class:"px-2 py-1 bg-purple-600/30 hover:bg-purple-600/50 text-purple-300 rounded text-xs transition-colors duration-200"},"启用"))])]),(co=(uo=(io=e.selectedEl)==null?void 0:io.style)==null?void 0:uo.textWave)!=null&&co.enabled?(C(),N("div",Fc,[l("div",Ac,[t[329]||(t[329]=l("label",{class:"block text-xs text-gray-400 mb-1"},"幅度(px)",-1)),fe(l("input",{"onUpdate:modelValue":t[159]||(t[159]=s=>e.selectedEl.style.textWave.amplitude=s),type:"number",min:"0",max:"100",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-xs focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,512),[[Me,e.selectedEl.style.textWave.amplitude,void 0,{number:!0}]])]),l("div",zc,[t[330]||(t[330]=l("label",{class:"block text-xs text-gray-400 mb-1"},"频率(rad/字)",-1)),fe(l("input",{"onUpdate:modelValue":t[160]||(t[160]=s=>e.selectedEl.style.textWave.frequency=s),type:"number",step:"0.1",min:"0.1",max:"10",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-xs focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,512),[[Me,e.selectedEl.style.textWave.frequency,void 0,{number:!0}]])]),l("div",Oc,[t[331]||(t[331]=l("label",{class:"block text-xs text-gray-400 mb-1"},"相位(rad)",-1)),fe(l("input",{"onUpdate:modelValue":t[161]||(t[161]=s=>e.selectedEl.style.textWave.phase=s),type:"number",step:"0.1",min:"-100",max:"100",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-xs focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,512),[[Me,e.selectedEl.style.textWave.phase,void 0,{number:!0}]])])])):Y("",!0),t[332]||(t[332]=l("p",{class:"text-[11px] text-gray-400"},"每个字符沿 Y 轴按正弦位移，字符保持正立。",-1))]),l("div",Dc,[t[333]||(t[333]=l("label",{class:"block text-xs text-gray-400 mb-1"},"文本装饰",-1)),l("div",Bc,[l("button",{onClick:t[162]||(t[162]=()=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.textDecoration=e.selectedEl.style.textDecoration==="underline"?"none":"underline")}),class:Ne(["px-2 py-1 text-xs rounded transition-colors duration-200",(((po=e.selectedEl.style)==null?void 0:po.textDecoration)||"none")==="underline"?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"])},"下划线",2),l("button",{onClick:t[163]||(t[163]=()=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.textDecoration=e.selectedEl.style.textDecoration==="line-through"?"none":"line-through")}),class:Ne(["px-2 py-1 text-xs rounded transition-colors duration-200",(((go=e.selectedEl.style)==null?void 0:go.textDecoration)||"none")==="line-through"?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"])},"删除线",2),l("button",{onClick:t[164]||(t[164]=()=>{e.selectedEl&&(e.selectedEl.style=e.selectedEl.style||{},e.selectedEl.style.textDecoration="none")}),class:Ne(["px-2 py-1 text-xs rounded transition-colors duration-200",(((fo=e.selectedEl.style)==null?void 0:fo.textDecoration)||"none")==="none"?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"])},"无",2)])]),l("div",Gc,[l("div",Tc,[t[334]||(t[334]=l("label",{class:"text-xs text-gray-400"},"文本渐变",-1)),l("div",Lc,[(yo=e.selectedEl.style)!=null&&yo.textGradient?Y("",!0):(C(),N("button",{key:0,onClick:t[165]||(t[165]=s=>V(e.selectedEl)),class:"px-2 py-1 bg-purple-600/30 hover:bg-purple-600/50 text-purple-300 rounded text-xs transition-colors duration-200"},"启用")),(bo=e.selectedEl.style)!=null&&bo.textGradient?(C(),N("button",{key:1,onClick:t[166]||(t[166]=()=>{e.selectedEl&&e.selectedEl.style&&(e.selectedEl.style.textGradient=void 0)}),class:"px-2 py-1 bg-red-600/30 hover:bg-red-600/50 text-red-300 rounded text-xs transition-colors duration-200"},"关闭")):Y("",!0)])]),(xo=e.selectedEl.style)!=null&&xo.textGradient?(C(),N("div",Uc,[l("div",Vc,[l("div",null,[t[335]||(t[335]=l("label",{class:"block text-xs text-gray-400 mb-1"},"起始色",-1)),l("div",Rc,[fe(l("input",{"onUpdate:modelValue":t[167]||(t[167]=s=>e.selectedEl.style.textGradient.colors[0]=s),type:"color",class:"w-8 h-6 bg-gray-800/50 border border-purple-500/30 rounded cursor-pointer"},null,512),[[Me,e.selectedEl.style.textGradient.colors[0]]]),fe(l("input",{"onUpdate:modelValue":t[168]||(t[168]=s=>e.selectedEl.style.textGradient.colors[0]=s),type:"text",class:"flex-1 px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-xs focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200",placeholder:"#DFDD5A"},null,512),[[Me,e.selectedEl.style.textGradient.colors[0]]])])]),l("div",null,[t[336]||(t[336]=l("label",{class:"block text-xs text-gray-400 mb-1"},"结束色",-1)),l("div",Pc,[fe(l("input",{"onUpdate:modelValue":t[169]||(t[169]=s=>e.selectedEl.style.textGradient.colors[1]=s),type:"color",class:"w-8 h-6 bg-gray-800/50 border border-purple-500/30 rounded cursor-pointer"},null,512),[[Me,e.selectedEl.style.textGradient.colors[1]]]),fe(l("input",{"onUpdate:modelValue":t[170]||(t[170]=s=>e.selectedEl.style.textGradient.colors[1]=s),type:"text",class:"flex-1 px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-xs focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200",placeholder:"#FFFFFF"},null,512),[[Me,e.selectedEl.style.textGradient.colors[1]]])])])]),l("div",null,[l("label",Wc,"角度: "+it(e.selectedEl.style.textGradient.angle||0)+"°",1),fe(l("input",{"onUpdate:modelValue":t[171]||(t[171]=s=>e.selectedEl.style.textGradient.angle=s),type:"range",min:"0",max:"360",class:"w-full"},null,512),[[Me,e.selectedEl.style.textGradient.angle,void 0,{number:!0}]])])])):Y("",!0)]),l("div",Hc,[l("div",Jc,[t[337]||(t[337]=l("label",{class:"text-xs text-gray-400"},"背景渐变",-1)),l("div",_c,[(mo=e.selectedEl.style)!=null&&mo.backgroundGradient?Y("",!0):(C(),N("button",{key:0,onClick:t[172]||(t[172]=s=>L(e.selectedEl)),class:"px-2 py-1 bg-purple-600/30 hover:bg-purple-600/50 text-purple-300 rounded text-xs transition-colors duration-200"},"启用")),(ho=e.selectedEl.style)!=null&&ho.backgroundGradient?(C(),N("button",{key:1,onClick:t[173]||(t[173]=()=>{e.selectedEl&&e.selectedEl.style&&(e.selectedEl.style.backgroundGradient=void 0)}),class:"px-2 py-1 bg-red-600/30 hover:bg-red-600/50 text-red-300 rounded text-xs transition-colors duration-200"},"关闭")):Y("",!0)])]),(vo=e.selectedEl.style)!=null&&vo.backgroundGradient?(C(),N("div",qc,[l("div",Yc,[l("div",null,[t[338]||(t[338]=l("label",{class:"block text-xs text-gray-400 mb-1"},"起始色",-1)),l("div",Kc,[fe(l("input",{"onUpdate:modelValue":t[174]||(t[174]=s=>e.selectedEl.style.backgroundGradient.colors[0]=s),type:"color",class:"w-8 h-6 bg-gray-800/50 border border-purple-500/30 rounded cursor-pointer"},null,512),[[Me,e.selectedEl.style.backgroundGradient.colors[0]]]),fe(l("input",{"onUpdate:modelValue":t[175]||(t[175]=s=>e.selectedEl.style.backgroundGradient.colors[0]=s),type:"text",class:"flex-1 px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-xs focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200",placeholder:"#00A3FF"},null,512),[[Me,e.selectedEl.style.backgroundGradient.colors[0]]])])]),l("div",null,[t[339]||(t[339]=l("label",{class:"block text-xs text-gray-400 mb-1"},"结束色",-1)),l("div",Xc,[fe(l("input",{"onUpdate:modelValue":t[176]||(t[176]=s=>e.selectedEl.style.backgroundGradient.colors[1]=s),type:"color",class:"w-8 h-6 bg-gray-800/50 border border-purple-500/30 rounded cursor-pointer"},null,512),[[Me,e.selectedEl.style.backgroundGradient.colors[1]]]),fe(l("input",{"onUpdate:modelValue":t[177]||(t[177]=s=>e.selectedEl.style.backgroundGradient.colors[1]=s),type:"text",class:"flex-1 px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-xs focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200",placeholder:"#ffffff"},null,512),[[Me,e.selectedEl.style.backgroundGradient.colors[1]]])])])]),l("div",null,[l("label",Zc,"角度: "+it(e.selectedEl.style.backgroundGradient.angle||0)+"°",1),fe(l("input",{"onUpdate:modelValue":t[178]||(t[178]=s=>e.selectedEl.style.backgroundGradient.angle=s),type:"range",min:"0",max:"360",class:"w-full"},null,512),[[Me,e.selectedEl.style.backgroundGradient.angle,void 0,{number:!0}]])])])):Y("",!0)])])):Y("",!0),e.selectedEl&&e.selectedEl.type==="image"?(C(),N("div",Qc,[t[351]||(t[351]=dr('<h3 class="text-sm font-medium text-purple-300 border-b border-purple-500/30 pb-1" data-v-a4c2740f>图片设置</h3><div class="space-y-2" data-v-a4c2740f><label class="block text-xs text-gray-400 mb-1" data-v-a4c2740f>图片来源</label><div class="grid grid-cols-2 gap-2" data-v-a4c2740f><button class="px-3 py-2 bg-purple-600/30 hover:bg-purple-600/50 text-purple-300 rounded text-xs transition-colors duration-200" data-v-a4c2740f>上传文件</button><button class="px-3 py-2 bg-green-600/30 hover:bg-green-600/50 text-green-300 rounded text-xs transition-colors duration-200" data-v-a4c2740f>选择图标</button></div></div>',2)),l("div",e0,[t[341]||(t[341]=l("label",{class:"block text-xs text-gray-400 mb-1"},"图片文件",-1)),l("input",{type:"file",onChange:pt,accept:"image/*",class:"w-full text-xs text-gray-300 file:mr-2 file:py-1 file:px-2 file:rounded file:border-0 file:text-xs file:bg-purple-600 file:text-white hover:file:bg-purple-500 file:cursor-pointer"},null,32)]),l("div",t0,[t[342]||(t[342]=l("label",{class:"block text-xs text-gray-400 mb-1"},"选择高亮图标",-1)),l("div",l0,[l("div",r0,[(C(!0),N(Wt,null,Kt(e.iconLibrary,s=>(C(),N("div",{key:s.id,onClick:E=>Je(s),class:"aspect-square bg-gray-700/50 rounded cursor-pointer hover:bg-gray-600/50 transition-colors duration-200 flex items-center justify-center p-1 border border-transparent hover:border-pink-400/50"},[l("img",{src:s.url,alt:s.name,class:"max-w-full max-h-full object-contain",loading:"lazy"},null,8,o0)],8,n0))),128))])])]),l("div",s0,[t[343]||(t[343]=l("label",{class:"block text-xs text-gray-400 mb-1"},"是否使用高亮",-1)),l("div",a0,[l("button",{onClick:t[179]||(t[179]=()=>{e.selectedEl&&(e.selectedEl.highlightEnabled=!0)}),class:Ne(["px-3 py-2 rounded text-xs transition-colors duration-200",e.selectedEl.highlightEnabled?"bg-pink-600/60 text-white":"bg-gray-700/60 text-gray-200 hover:bg-gray-600/60"])},"开启高亮",2),l("button",{onClick:t[180]||(t[180]=()=>{e.selectedEl&&(e.selectedEl.highlightEnabled=!1)}),class:Ne(["px-3 py-2 rounded text-xs transition-colors duration-200",e.selectedEl.highlightEnabled?"bg-gray-700/60 text-gray-200 hover:bg-gray-600/60":"bg-pink-600/60 text-white"])},"关闭高亮",2)])]),e.iconLibrary.length>0?(C(),N("div",i0,[t[344]||(t[344]=l("label",{class:"block text-xs text-gray-400 mb-1"},"选择图标",-1)),l("div",d0,[l("div",u0,[(C(!0),N(Wt,null,Kt(e.iconLibrary,s=>(C(),N("div",{key:s.id,onClick:E=>ae(s),class:"aspect-square bg-gray-700/50 rounded cursor-pointer hover:bg-gray-600/50 transition-colors duration-200 flex items-center justify-center p-1 border border-transparent hover:border-green-400/50"},[l("img",{src:s.url,alt:s.name,class:"max-w-full max-h-full object-contain",loading:"lazy"},null,8,p0)],8,c0))),128))])]),e.iconLibrary.length===0?(C(),N("div",g0,"暂无图标，请先在图标库管理中上传图标")):Y("",!0)])):Y("",!0),l("div",f0,[t[345]||(t[345]=l("label",{class:"block text-xs text-gray-400 mb-1"},"尺寸模式",-1)),l("div",y0,[l("button",{onClick:dt,class:Ne(["px-3 py-2 rounded text-xs transition-colors duration-200",e.selectedEl.autoSize===!0?"bg-blue-600 text-white":"bg-blue-600/30 hover:bg-blue-600/50 text-blue-300"])},"自适应（原始尺寸）",2),l("button",{onClick:Re,class:Ne(["px-3 py-2 rounded text-xs transition-colors duration-200",e.selectedEl.autoSize!==!0?"bg-purple-600 text-white":"bg-purple-600/30 hover:bg-purple-600/50 text-purple-300"])},"固定大小",2)])]),l("div",b0,[l("div",null,[t[346]||(t[346]=l("label",{class:"block text-xs text-gray-400 mb-1"},"宽度(px)",-1)),fe(l("input",{"onUpdate:modelValue":t[181]||(t[181]=s=>e.selectedEl.width=s),type:"number",min:"1",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,512),[[Me,e.selectedEl.width,void 0,{number:!0}]])]),l("div",null,[t[347]||(t[347]=l("label",{class:"block text-xs text-gray-400 mb-1"},"高度(px)",-1)),fe(l("input",{"onUpdate:modelValue":t[182]||(t[182]=s=>e.selectedEl.height=s),type:"number",min:"1",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,512),[[Me,e.selectedEl.height,void 0,{number:!0}]])]),l("div",null,[t[349]||(t[349]=l("label",{class:"block text-xs text-gray-400 mb-1"},"对象适配",-1)),fe(l("select",{"onUpdate:modelValue":t[183]||(t[183]=s=>e.selectedEl.style.objectFit=s),class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},[...t[348]||(t[348]=[dr('<option value="contain" data-v-a4c2740f>contain（完整显示）</option><option value="cover" data-v-a4c2740f>cover（填充裁剪）</option><option value="fill" data-v-a4c2740f>fill（拉伸填充）</option><option value="scale-down" data-v-a4c2740f>scale-down（缩小适配）</option><option value="none" data-v-a4c2740f>none（不适配）</option>',5)])],512),[[$o,e.selectedEl.style.objectFit]])])]),l("div",x0,[t[350]||(t[350]=l("label",{class:"block text-xs text-gray-400 mb-1"},"圆角",-1)),fe(l("input",{"onUpdate:modelValue":t[184]||(t[184]=s=>e.selectedEl.style.borderRadius=s),type:"number",class:"w-full px-2 py-1 bg-gray-800/50 border border-purple-500/30 rounded text-gray-100 text-sm focus:border-purple-400 focus:ring-1 focus:ring-purple-400 focus:outline-none transition-all duration-200"},null,512),[[Me,e.selectedEl.style.borderRadius,void 0,{number:!0}]])])])):Y("",!0),l("div",m0,[l("button",{onClick:t[185]||(t[185]=s=>d("saveSelectedAsComponent")),class:"w-full px-3 py-2 bg-gradient-to-r from-purple-600 to-fuchsia-600 hover:from-purple-500 hover:to-fuchsia-500 text-white rounded-lg text-sm font-medium transition-all duration-200 transform hover:scale-105 shadow-lg shadow-purple-500/25"},"保存为组件"),l("button",{onClick:t[186]||(t[186]=s=>d("duplicateSelected")),class:"w-full px-3 py-2 bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-500 hover:to-cyan-500 text-white rounded-lg text-sm font-medium transition-all duration-200 transform hover:scale-105 shadow-lg shadow-blue-500/25"},"复制元素"),l("button",{onClick:t[187]||(t[187]=s=>d("removeSelected")),class:"w-full px-3 py-2 bg-gradient-to-r from-red-600 to-pink-600 hover:from-red-500 hover:to-pink-500 text-white rounded-lg text-sm font-medium transition-all duration-200 transform hover:scale-105 shadow-lg shadow-red-500/25"},"删除元素")])])):Y("",!0),e.selectedEl?Y("",!0):(C(),N("div",h0,[...t[352]||(t[352]=[l("div",{class:"w-16 h-16 mx-auto mb-4 border-2 border-dashed border-gray-600 rounded-lg flex items-center justify-center"},[l("span",{class:"text-2xl"},"📝")],-1),l("p",{class:"text-sm"},"选择一个元素来编辑其属性",-1)])]))])}}}),$0=xr(w0,[["__scopeId","data-v-a4c2740f"]]),E0={class:"h-full bg-gradient-to-br from-gray-900 via-blue-900 to-purple-900 text-white relative overflow-hidden min-w-[1200px]"},k0={class:"relative z-10 flex h-full min-h-[600px] gap-4 p-4"},S0={class:"flex-1 min-w-0 flex flex-col bg-gray-900/60 backdrop-blur-sm border border-purple-500/30 rounded-xl shadow-2xl shadow-purple-500/20"},C0={class:"flex items-center justify-between p-4 border-b border-purple-500/30 bg-gradient-to-r from-purple-600/20 to-pink-600/20 flex-shrink-0"},M0={class:"flex gap-2"},I0={class:"relative"},N0={class:"grid grid-cols-2 gap-2"},j0=["disabled"],F0=["disabled"],A0={class:"flex items-center gap-2"},z0={class:"text-sm text-gray-400 min-w-[60px] text-center"},O0={key:0,class:"absolute inset-0 pointer-events-none z-50"},D0={key:1,class:"absolute inset-0 z-[9999] select-none pointer-events-none"},B0={key:0,class:"fixed inset-0 z-50 flex items-center justify-center"},G0={class:"relative w-[800px] max-w-[90vw] bg-gray-900/90 backdrop-blur-md border border-fuchsia-500/40 rounded-xl shadow-2xl"},T0={class:"p-4 space-y-3"},L0={class:"flex items-center gap-2"},U0={key:0,class:"text-center text-sm text-gray-400 py-6"},V0={key:1},R0={key:0,class:"text-center text-sm text-gray-400 py-6"},P0={key:1,class:"grid grid-cols-3 gap-3"},W0={class:"aspect-video bg-gray-700/50 flex items-center justify-center"},H0=["src"],J0={key:1,class:"text-gray-400 text-xs"},_0={class:"p-3 space-y-1"},q0={class:"flex items-center justify-between"},Y0=["title"],K0={class:"text-xs text-gray-500"},X0={class:"flex flex-wrap gap-1 mt-1"},Z0={class:"pt-2"},Q0=["onClick"],ep={key:1,class:"fixed inset-0 z-50 flex items-center justify-center"},tp={class:"relative w-[600px] max-w-[90vw] bg-gray-900/90 backdrop-blur-md border border-cyan-500/40 rounded-xl shadow-2xl"},lp={class:"flex items-center justify-between p-4 border-b border-cyan-500/30 bg-gradient-to-r from-cyan-600/20 to-blue-600/20"},rp={class:"p-4 space-y-3 max-h-[50vh] overflow-y-auto"},np={key:0,class:"text-center text-sm text-gray-400 py-6"},op={key:1,class:"space-y-2"},sp=["title"],ap=["onClick"],pr=120,gr=1,ip=dl({__name:"LowCodeBuilder",props:{projectId:{},currentProject:{},isComponent:{type:Boolean}},setup(f){const a=f,e=Po(),d=Jo(),S=st(()=>{var n;return(n=a.projectId)!=null?n:e.params.id?String(e.params.id):void 0}),D=pe(null);async function P(){if(S.value)try{const n=(await be()).transaction(["projects"],"readonly").objectStore("projects").get(S.value);n.onsuccess=()=>{D.value=n.result}}catch(n){console.error("加载项目信息失败:",n)}}function le(){if(!S.value)return;const n=a.isComponent?{path:`/project/${S.value}/preview`,query:{type:"component"}}:{path:`/project/${S.value}/preview`},r=d.resolve(n).href;window.open(r,"_blank")}async function be(){return new Promise((n,r)=>{const i="lowcode-projects",u="projects",y=indexedDB.open(i);y.onerror=()=>r(y.error),y.onupgradeneeded=()=>{const x=y.result;x.objectStoreNames.contains(u)||x.createObjectStore(u,{keyPath:"id"})},y.onsuccess=()=>{const x=y.result;if(x.objectStoreNames.contains(u))n(x);else{const F=x.version+1;x.close();const j=indexedDB.open(i,F);j.onerror=()=>r(j.error),j.onupgradeneeded=()=>{const A=j.result;A.objectStoreNames.contains(u)||A.createObjectStore(u,{keyPath:"id"})},j.onsuccess=()=>n(j.result)}}})}const $=wo({width:1024,height:576,backgroundUrl:"",backgroundColor:"#000000",globalFontFamily:"Arial, Helvetica, sans-serif",globalFontSize:14,globalColor:"#FFFFFF"}),ue=pe("GeneratedComponent"),ze=pe(["Arial, Helvetica, sans-serif","PingFang SC","Microsoft YaHei","Roboto","Inter"]),Ge=pe([8,9,10,11,12,14,16,18,20,24,28,32,36,48,64]),je=pe(["100","200","300","400","500","600","700","800","900"]),se=pe(["normal","italic","oblique"]),M=pe([]),g=pe(null),m=pe([]),U=pe({}),V=pe(null),L=pe([]),q=pe([]),Oe=pe([]),K=pe(!1),G=pe(!1),ne=pe({id:null,steps:[],cursor:0,stage:0,active:!1}),rt=pe(!1);function pt(n){return`${n}-${Math.random().toString(36).slice(2,8)}`}function ae(){try{const n=q.value.length>0?JSON.parse(JSON.stringify(q.value)):JSON.parse(JSON.stringify(M.value));L.value.push(n),L.value.length>pr&&L.value.shift(),q.value=JSON.parse(JSON.stringify(M.value)),Oe.value=[]}catch(n){console.warn("pushHistory 序列化失败：",n)}}function dt(){if(L.value.length===0)return;try{const r=JSON.parse(JSON.stringify(M.value));Oe.value.push(r),Oe.value.length>pr&&Oe.value.shift()}catch{}const n=L.value.pop();M.value=n,q.value=JSON.parse(JSON.stringify(n)),g.value=null,oe.value=!1}function Re(){if(Oe.value.length===0)return;try{const r=JSON.parse(JSON.stringify(M.value));L.value.push(r),L.value.length>pr&&L.value.shift()}catch{}const n=Oe.value.pop();M.value=n,q.value=JSON.parse(JSON.stringify(n)),g.value=null,oe.value=!1}function Je(n){var x,F,j,A,z,c,p,T,H,de,ve,Ae,ce,we,ee;function r(te){var re;if(!te)return!1;const R=(re=te.tagName)==null?void 0:re.toLowerCase();return te.isContentEditable||!!te.closest('[contenteditable="true"]')||R==="input"||R==="textarea"||R==="select"}const i=document.activeElement;if(r(i)||r(n.target))return;const u=n.metaKey||n.ctrlKey,y=n.key.toLowerCase();if(y==="arrowleft"||y==="arrowright"||y==="arrowup"||y==="arrowdown"){if(!g.value)return;const{el:te}=mt(g.value);if(!te)return;G.value||(ae(),G.value=!0,ne.value={id:g.value,steps:[],cursor:0,stage:0,active:!0},rt.value=!0),ge.shift=n.shiftKey,y==="arrowleft"&&(ge.left=!0),y==="arrowright"&&(ge.right=!0),y==="arrowup"&&(ge.up=!0),y==="arrowdown"&&(ge.down=!0);const R=n.shiftKey?10:1;xt(y==="arrowleft"?-R:y==="arrowright"?R:0,y==="arrowup"?-R:y==="arrowdown"?R:0),at!=null&&(clearTimeout(at),at=null),at=window.setTimeout(()=>{k()},220),n.preventDefault();return}if(u&&y==="c"){if(_e.value){try{V.value=JSON.parse(JSON.stringify(_e.value))}catch{}n.preventDefault()}}else if(u&&y==="v"){if(V.value){const te=V.value,R=jl(te),{parentGroup:re}=mt(te.id);if(re){const Ve=Number((F=(x=re.left)!=null?x:re.x)!=null?F:0),b=Number((A=(j=re.top)!=null?j:re.y)!=null?A:0),h=Number((z=re.width)!=null?z:0),W=Number((c=re.height)!=null?c:0),O=Ve+h,B=b+W,X=Number((p=te.width)!=null?p:0),I=Number((T=te.height)!=null?T:0);let J=X,v=I;if(!J||!v)if(te.type==="text"){const At=Number((H=te.fontSize)!=null?H:16),jt=String((ve=(de=te.text)!=null?de:te.content)!=null?ve:"").trim();J=Math.max(X||50,Math.round((jt.length||2)*At*.6)),v=Math.max(I||20,Math.round(At*1.5))}else te.type==="image"?(J=X||200,v=I||150):te.type==="carousel"?(J=X||320,v=I||200):te.type==="chart"?(J=X||240,v=I||160):te.type==="line"?(J=X||200,v=I||2):(J=X||100,v=I||60);const _=10,xe=Ve+h/2,me=b+W/2;let Le=!1,He=O+_,ot=Math.round(me-v/2);if(!Le&&He+J<=$.width&&(R.left=Math.max(0,Math.min(He,Math.max(0,$.width-J))),R.top=Math.max(0,Math.min(ot,Math.max(0,$.height-v))),Le=!0),He=Ve-J-_,ot=Math.round(me-v/2),!Le&&He>=0&&(R.left=Math.max(0,Math.min(He,Math.max(0,$.width-J))),R.top=Math.max(0,Math.min(ot,Math.max(0,$.height-v))),Le=!0),He=Math.round(xe-J/2),ot=B+_,!Le&&ot+v<=$.height&&(R.left=Math.max(0,Math.min(He,Math.max(0,$.width-J))),R.top=Math.max(0,Math.min(ot,Math.max(0,$.height-v))),Le=!0),He=Math.round(xe-J/2),ot=b-v-_,!Le&&ot>=0&&(R.left=Math.max(0,Math.min(He,Math.max(0,$.width-J))),R.top=Math.max(0,Math.min(ot,Math.max(0,$.height-v))),Le=!0),!Le){const At=Number((ce=(Ae=te.left)!=null?Ae:te.x)!=null?ce:0),jt=Number((ee=(we=te.top)!=null?we:te.y)!=null?ee:0),Dt=Ve+At+_,kt=b+jt+_;R.left=Math.max(0,Math.min(Math.round(Dt),Math.max(0,$.width-J))),R.top=Math.max(0,Math.min(Math.round(kt),Math.max(0,$.height-v)))}R.x=R.left,R.y=R.top}M.value.push(R),g.value=R.id,ae(),n.preventDefault()}}else if(y==="delete"||y==="backspace"){if(g.value){const{el:te,parentGroup:R}=mt(g.value);te&&R&&Array.isArray(R.children)?R.children=R.children.filter(re=>re.id!==te.id):(M.value=M.value.filter(re=>re.id!==g.value),te&&te.type==="group"&&qe(te.id)),g.value=null,ae(),n.preventDefault()}}else u&&y==="z"&&!n.shiftKey?((()=>{var Ve,b;const R=ne.value,re=[20,15,10];if(rt.value&&R.id&&R.cursor>0){const{el:h}=mt(R.id);if(h){const W=Math.min(Math.max(R.stage,0),re.length-1),O=re[W],B=Math.min(O,R.cursor);let X=0,I=0;for(let J=R.cursor-B;J<R.cursor;J++){const v=R.steps[J];X+=v.dx,I+=v.dy}h.left=Math.round(((Ve=h.left)!=null?Ve:0)-X),h.top=Math.round(((b=h.top)!=null?b:0)-I),h.x=h.left,h.y=h.top,R.cursor-=B,R.stage=Math.min(R.stage+1,re.length-1),g.value=h.id,Ft(),q.value=JSON.parse(JSON.stringify(M.value));return}}dt(),rt.value=!1,ne.value.active=!1})(),n.preventDefault()):u&&y==="z"&&n.shiftKey&&(Re(),n.preventDefault())}const ge=wo({left:!1,right:!1,up:!1,down:!1,shift:!1});let tt=null,ct=0,at=null;function xt(n,r){var ce,we,ee,te,R,re,Ve,b;const i=g.value;if(!i)return;const{el:u,parentGroup:y}=mt(i);if(!u)return;G.value&&ne.value.active&&ne.value.id===i&&(ne.value.steps.push({dx:n,dy:r}),ne.value.cursor=ne.value.steps.length,rt.value=!0);const x=(ee=(we=u.width)!=null?we:(ce=U.value[i])==null?void 0:ce.width)!=null?ee:0,F=(re=(R=u.height)!=null?R:(te=U.value[i])==null?void 0:te.height)!=null?re:0;let j=$.width,A=$.height;y&&y.width&&y.height&&(j=Number(y.width)||j,A=Number(y.height)||A);let z=((Ve=u.left)!=null?Ve:0)+n,c=((b=u.top)!=null?b:0)+r;z=Math.round(z),c=Math.round(c),z=Math.max(0,Math.min(z,j-(x||0))),c=Math.max(0,Math.min(c,A-(F||0))),u.left=z,u.top=c,u.x=u.left,u.y=u.top;const p=u.left,T=u.top,H=p+(x||0),de=T+(F||0),ve=p+(x||0)/2,Ae=T+(F||0)/2;sl({left:p,top:T,right:H,bottom:de,centerX:ve,centerY:Ae})}function k(){if(tt!=null)return;ct=Date.now();const n=()=>{if(!ge.left&&!ge.right&&!ge.up&&!ge.down){tt!=null&&cancelAnimationFrame(tt),tt=null,tl();return}const r=Date.now()-ct,i=r>1500?8:r>800?4:r>300?2:1,u=(ge.shift?10:1)*i,y=(ge.left?-u:0)+(ge.right?u:0),x=(ge.up?-u:0)+(ge.down?u:0);xt(y,x),tt=requestAnimationFrame(n)};tt=requestAnimationFrame(n)}function t(n){const r=n.key.toLowerCase();r==="shift"&&(ge.shift=!1),r==="arrowleft"&&(ge.left=!1),r==="arrowright"&&(ge.right=!1),r==="arrowup"&&(ge.up=!1),r==="arrowdown"&&(ge.down=!1),at!=null&&(clearTimeout(at),at=null),!ge.left&&!ge.right&&!ge.up&&!ge.down&&tt==null&&(G.value&&(q.value=JSON.parse(JSON.stringify(M.value))),G.value=!1,ne.value.active=!1),!ge.left&&!ge.right&&!ge.up&&!ge.down&&tl()}const oe=pe(!1),$e=pe({left:0,top:0,right:0,bottom:0,centerX:0,centerY:0});function Gt(n){U.value[n.id]=n}function Mt(n){return n==="pie"?{backgroundColor:"transparent",tooltip:{trigger:"item"},legend:{top:"5%",left:"center",textStyle:{color:"#fff"},show:!0},series:[{name:"分类占比",type:"pie",radius:["40%","70%"],avoidLabelOverlap:!1,itemStyle:{borderRadius:8,borderColor:"#111",borderWidth:2},label:{show:!0,color:"#fff"},labelLine:{show:!0},data:[{value:1048,name:"A"},{value:735,name:"B"},{value:580,name:"C"},{value:484,name:"D"},{value:300,name:"E"}]}]}:n==="mix"?{backgroundColor:"transparent",color:["#00bcd4","#ff9800"],tooltip:{trigger:"axis"},legend:{textStyle:{color:"#fff"},show:!0},xAxis:{type:"category",data:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],axisLine:{lineStyle:{color:"#888"}},axisLabel:{color:"#ccc"}},yAxis:{type:"value",axisLine:{lineStyle:{color:"#888"}},axisLabel:{color:"#ccc"}},series:[{name:"销量",type:"bar",data:[120,200,150,80,70,110,130],itemStyle:{borderRadius:[4,4,0,0]}},{name:"均价",type:"line",smooth:!0,data:[30,40,45,50,49,60,70],lineStyle:{width:2}}]}:n==="bar"?{backgroundColor:"transparent",color:["#42b883"],tooltip:{trigger:"axis"},legend:{show:!0,textStyle:{color:"#fff"}},xAxis:{type:"category",data:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],axisLine:{lineStyle:{color:"#888"}},axisLabel:{color:"#ccc"}},yAxis:{type:"value",axisLine:{lineStyle:{color:"#888"}},axisLabel:{color:"#ccc"}},series:[{name:"数量",type:"bar",data:[120,200,150,80,70,110,130],itemStyle:{borderRadius:[4,4,0,0]}}]}:{backgroundColor:"transparent",color:["#42b883"],tooltip:{trigger:"axis"},legend:{show:!0,textStyle:{color:"#fff"}},xAxis:{type:"category",data:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],axisLine:{lineStyle:{color:"#888"}},axisLabel:{color:"#ccc"}},yAxis:{type:"value",axisLine:{lineStyle:{color:"#888"}},axisLabel:{color:"#ccc"}},series:[{name:"趋势",type:"line",smooth:!0,data:[150,230,224,218,135,147,260],lineStyle:{width:2}}]}}function o(n){var te,R;const r=pt(n),i=pl.value,u=Et.value||1,y=(te=i==null?void 0:i.clientWidth)!=null?te:0,x=(R=i==null?void 0:i.clientHeight)!=null?R:0,F=i?(i.scrollLeft+y/2)/u:20,j=i?(i.scrollTop+x/2)/u:20,A=n==="chart"?240:n==="image"?200:n==="carousel"?320:n==="line"?200:n==="container"?240:void 0,z=n==="chart"?160:n==="image"?150:n==="carousel"?200:n==="line"?2:n==="container"?160:void 0,c=Math.round(F-(A?A/2:10)),p=Math.round(j-(z?z/2:10)),T=Math.max(0,Math.min(c,Math.max(0,$.width-(A!=null?A:0)))),H=Math.max(0,Math.min(p,Math.max(0,$.height-(z!=null?z:0)))),de=(re,Ve,b,h)=>{const W=Math.max(0,Math.min(re,Math.max(0,$.width-(b!=null?b:0)))),O=Math.max(0,Math.min(Ve,Math.max(0,$.height-(h!=null?h:0))));return{cl:W,ct:O}},ve=M.value.map(re=>{var O,B,X,I,J,v;const Ve=(O=re.width)!=null?O:0,b=(B=re.height)!=null?B:0,h=Number((I=(X=re.left)!=null?X:re.x)!=null?I:0),W=Number((v=(J=re.top)!=null?J:re.y)!=null?v:0);return{l:h,t:W,r:h+Ve,b:W+b}}),Ae=(re,Ve,b,h)=>{const W=re+(b!=null?b:0),O=Ve+(h!=null?h:0);for(const B of ve)if(!(b===void 0||h===void 0)&&!(W<=B.l||O<=B.t||re>=B.r||Ve>=B.b))return!0;return!1},ce=24;let we={cl:T,ct:H};if(A&&z&&Ae(we.cl,we.ct,A,z)){let re=!1;for(let Ve=1;Ve<=20&&!re;Ve++)for(const b of[[Ve,0],[0,Ve],[-Ve,0],[0,-Ve]]){const[h,W]=b,O=c+h*ce,B=p+W*ce,X=de(O,B,A,z);if(!Ae(X.cl,X.ct,A,z)){we=X,re=!0;break}}}const ee={id:r,type:n,left:we.cl,top:we.ct,position:"absolute",autoSize:n==="text",width:A,height:z,text:n==="text"?"文字":n==="image"||n==="line"?"":"图表",className:"",zIndex:1,style:{}};if(n==="text"?Object.assign(ee,{content:"文字",fontSize:16,fontWeight:"400",fontFamily:"Arial, Helvetica, sans-serif",color:"#ffffff",letterSpacing:"0px",lineHeight:"1.5",fontStyle:"normal",useGradient:!1,gradientStart:"#00A3FF",gradientEnd:"#ffffff",gradientDirection:"to right",x:we.cl,y:we.ct}):n==="image"&&(Object.assign(ee,{src:"",borderRadius:0,x:we.cl,y:we.ct}),ee.style={...ee.style||{},objectFit:"contain"}),n==="chart"&&Object.assign(ee,{elementId:pt("chart"),chartType:"line",chartOption:Mt("line")}),n==="carousel"&&(ee.autoSize=!1,ee.slides=[{id:"1",src:"",text:"Slide 1"},{id:"2",src:"",text:"Slide 2"},{id:"3",src:"",text:"Slide 3"}],ee.carouselConfig={autoplay:!0,interval:3e3,textStyle:{color:"#ffffff",fontSize:16,fontWeight:"bold"}}),n==="line"&&(ee.autoSize=!1,ee.style={...ee.style||{},lineColor:"#ffffff",lineThickness:2,lineOrientation:"horizontal",lineStyle:"solid",lineDashLength:6,lineDashGap:4}),n==="arc-text"){ee.autoSize=!1,ee.text="环绕文字";const re=60;ee.width=ee.width||re*2+20,ee.height=ee.height||re*2+20,ee.style={...ee.style||{},fontFamily:$.globalFontFamily,fontSize:Math.max(12,$.globalFontSize),color:$.globalColor,textAlign:"center",arcText:{radius:re,startAngle:0,sweepAngle:180,clockwise:!0}}}n==="container"&&(ee.autoSize=!1,ee.text="",ee.elementId=pt("container"),ee.style={...ee.style||{},backgroundColor:"transparent",borderRadius:"6px",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start",gap:4}),ae(),M.value.push(ee),g.value=r,ae()}function Z(n){o(n),nl.value=!1}function Q(n){const{el:r}=mt(n.id);r&&(r.left===n.left&&r.top===n.top||(K.value||(ae(),K.value=!0),r.left=n.left,r.top=n.top,r.x=n.left,r.y=n.top))}function nt(n){const{el:r}=mt(n.id);if(!r)return;const i=n.left!==void 0&&r.left!==n.left,u=n.top!==void 0&&r.top!==n.top,y=r.width!==n.width||r.height!==n.height;!i&&!u&&!y||(K.value||(ae(),K.value=!0),r.width=n.width,r.height=n.height,n.left!==void 0&&(r.left=n.left,r.x=n.left),n.top!==void 0&&(r.top=n.top,r.y=n.top))}function Pe(n){g.value=n,Ft()}function We(n){g.value=n,Ft(),ur(()=>{const r=document.querySelector(`[data-el-id="${n}"]`);r&&r.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})})}function gt(n,r){if(n===r||n<0||r<0||n>=M.value.length||r>=M.value.length)return;const[i]=M.value.splice(n,1);i&&(M.value.splice(r,0,i),g.value=i.id,ae())}function Ft(){if(Xt(),!Ut.value)return;const n=g.value;if(!n)return;const r=Vt.value.find(x=>x.id===n);if(!r)return;const i=Vt.value.filter(x=>x.id!==n),u={left:r.left,top:r.top,right:r.right,bottom:r.bottom,centerX:r.centerX,centerY:r.centerY};$e.value={left:u.left,top:u.top,right:u.right,bottom:u.bottom,centerX:u.centerX,centerY:u.centerY},Qe.value={centerV:!1,centerH:!1,left:!1,right:!1,top:!1,bottom:!1};const y=4;for(const x of i)Math.abs(u.centerX-x.centerX)<=y&&x.w>0&&(Qe.value.centerV=!0,$e.value.centerX=x.centerX),Math.abs(u.centerY-x.centerY)<=y&&x.h>0&&(Qe.value.centerH=!0,$e.value.centerY=x.centerY),Math.abs(u.left-x.left)<=y&&(Qe.value.left=!0,$e.value.left=x.left),Math.abs(u.right-x.right)<=y&&x.w>0&&(Qe.value.right=!0,$e.value.right=x.right),Math.abs(u.top-x.top)<=y&&(Qe.value.top=!0,$e.value.top=x.top),Math.abs(u.bottom-x.bottom)<=y&&x.h>0&&(Qe.value.bottom=!0,$e.value.bottom=x.bottom);oe.value=Object.values(Qe.value).some(Boolean)}function ut(){g.value=null,tl()}const Qe=pe({centerV:!1,centerH:!1,left:!1,right:!1,top:!1,bottom:!1}),Ee=pe({left:null,right:null,up:null,down:null}),Lt=pe(!0),Ut=pe(!0),Ht=pe(!1),el=pe(!0),ul=st(()=>M.value.filter(n=>n.hidden));function gl(n){const r=M.value.find(i=>i.id===n);r&&(r.hidden=!1,g.value=n,ur(()=>{const i=document.querySelector(`[data-el-id="${n}"]`);i&&i.scrollIntoView({behavior:"smooth",block:"center"}),Ht.value=!1}))}const yt=pe(null),bt=pe(null),Vt=st(()=>{const n=[];function r(i,u,y,x){var F,j,A,z;for(const c of i){const p=U.value[c.id],T=p?p.left:(F=c.left)!=null?F:0,H=p?p.top:(j=c.top)!=null?j:0,de=p?p.width:(A=c.width)!=null?A:0,ve=p?p.height:(z=c.height)!=null?z:0,Ae=u+T,ce=y+H;n.push({id:c.id,left:Ae,top:ce,right:Ae+de,bottom:ce+ve,centerX:Ae+de/2,centerY:ce+ve/2,w:de,h:ve,type:c.type,parentId:x}),(c.type==="group"||c.type==="container")&&Array.isArray(c.children)&&r(c.children,Ae,ce,c.id)}}return r(M.value,0,0,null),n});function sl(n){K.value||(ae(),K.value=!0),$e.value={left:n.left,top:n.top,right:n.right,bottom:n.bottom,centerX:n.centerX,centerY:n.centerY},Qe.value={centerV:!1,centerH:!1,left:!1,right:!1,top:!1,bottom:!1},Ee.value={left:null,right:null,up:null,down:null};const r=.5,i=g.value,u=Vt.value.find(p=>p.id===i),y=u?u.parentId:null,x=Vt.value.filter(p=>p.parentId===y);function F(p,T,H,de){const ve=Math.max(p,H);return Math.min(T,de)-ve}let j=null,A=null,z=null,c=null;for(const p of x)if(!(!i||p.id===i)){if(Math.abs(n.centerX-p.centerX)<=r&&p.w>0&&(Qe.value.centerV=!0,$e.value.centerX=p.centerX),Math.abs(n.centerY-p.centerY)<=r&&p.h>0&&(Qe.value.centerH=!0,$e.value.centerY=p.centerY),Math.abs(n.left-p.left)<=r&&(Qe.value.left=!0,$e.value.left=p.left),Math.abs(n.right-p.right)<=r&&p.w>0&&(Qe.value.right=!0,$e.value.right=p.right),Math.abs(n.top-p.top)<=r&&(Qe.value.top=!0,$e.value.top=p.top),Math.abs(n.bottom-p.bottom)<=r&&p.h>0&&(Qe.value.bottom=!0,$e.value.bottom=p.bottom),F(n.top,n.bottom,p.top,p.bottom)>0){const T=n.left-p.right;T>=0&&(!j||T<j.gap)&&(j={gap:T,m:p});const H=p.left-n.right;H>=0&&(!A||H<A.gap)&&(A={gap:H,m:p})}if(F(n.left,n.right,p.left,p.right)>0){const T=n.top-p.bottom;T>=0&&(!z||T<z.gap)&&(z={gap:T,m:p});const H=p.top-n.bottom;H>=0&&(!c||H<c.gap)&&(c={gap:H,m:p})}}if(oe.value=Object.values(Qe.value).some(Boolean),!Lt.value){Ee.value={left:null,right:null,up:null,down:null};return}if(j){const p=j.m,T=(Math.max(n.left,p.left)+Math.min(n.right,p.right))/2,H=(Math.max(n.top,p.top)+Math.min(n.bottom,p.bottom))/2;Ee.value.left={gap:Math.floor(j.gap),exact:j.gap,refId:p.id,x:Math.round(T),y:Math.round(H)}}if(A){const p=A.m,T=(Math.max(n.left,p.left)+Math.min(n.right,p.right))/2,H=(Math.max(n.top,p.top)+Math.min(n.bottom,p.bottom))/2;Ee.value.right={gap:Math.floor(A.gap),exact:A.gap,refId:p.id,x:Math.round(T),y:Math.round(H)}}if(z){const p=z.m,T=(Math.max(n.left,p.left)+Math.min(n.right,p.right))/2,H=(p.bottom+n.top)/2;Ee.value.up={gap:Math.floor(z.gap),exact:z.gap,refId:p.id,x:Math.round(T),y:Math.round(H)}}if(c){const p=c.m,T=(Math.max(n.left,p.left)+Math.min(n.right,p.right))/2,H=(n.bottom+p.top)/2;Ee.value.down={gap:Math.floor(c.gap),exact:c.gap,refId:p.id,x:Math.round(T),y:Math.round(H)}}Ut.value||(Qe.value={centerV:!1,centerH:!1,left:!1,right:!1,top:!1,bottom:!1},oe.value=!1)}function Xt(){if(!Lt.value){Ee.value={left:null,right:null,up:null,down:null};return}const n=g.value;if(!n){Ee.value={left:null,right:null,up:null,down:null};return}const r=Vt.value.find(p=>p.id===n);if(!r){Ee.value={left:null,right:null,up:null,down:null};return}const i={left:r.left,top:r.top,right:r.right,bottom:r.bottom,centerX:r.centerX,centerY:r.centerY},u=r.parentId,y=Vt.value.filter(p=>p.id!==n&&p.parentId===u);function x(p,T,H,de){const ve=Math.max(p,H);return Math.min(T,de)-ve}let F=null,j=null,A=null,z=null;for(const p of y){if(x(i.top,i.bottom,p.top,p.bottom)>0){const T=i.left-p.right;T>=0&&(!F||T<F.gap)&&(F={gap:T,m:p});const H=p.left-i.right;H>=0&&(!j||H<j.gap)&&(j={gap:H,m:p})}if(x(i.left,i.right,p.left,p.right)>0){const T=i.top-p.bottom;T>=0&&(!A||T<A.gap)&&(A={gap:T,m:p});const H=p.top-i.bottom;H>=0&&(!z||H<z.gap)&&(z={gap:H,m:p})}}const c={left:null,right:null,up:null,down:null};if(F){const p=F.m,T=(Math.max(i.left,p.left)+Math.min(i.right,p.right))/2,H=(Math.max(i.top,p.top)+Math.min(i.bottom,p.bottom))/2;c.left={gap:Math.floor(F.gap),exact:F.gap,refId:p.id,x:Math.round(T),y:Math.round(H)}}if(j){const p=j.m,T=(Math.max(i.left,p.left)+Math.min(i.right,p.right))/2,H=(Math.max(i.top,p.top)+Math.min(i.bottom,p.bottom))/2;c.right={gap:Math.floor(j.gap),exact:j.gap,refId:p.id,x:Math.round(T),y:Math.round(H)}}if(A){const p=A.m,T=(Math.max(i.left,p.left)+Math.min(i.right,p.right))/2,H=(p.bottom+i.top)/2;c.up={gap:Math.floor(A.gap),exact:A.gap,refId:p.id,x:Math.round(T),y:Math.round(H)}}if(z){const p=z.m,T=(Math.max(i.left,p.left)+Math.min(i.right,p.right))/2,H=(i.bottom+p.top)/2;c.down={gap:Math.floor(z.gap),exact:z.gap,refId:p.id,x:Math.round(T),y:Math.round(H)}}Ee.value=c}function tl(){if(K.value&&(q.value=JSON.parse(JSON.stringify(M.value))),K.value=!1,g.value&&Ut.value){const n=g.value,r=Vt.value.find(i=>i.id===n);r?(K.value=!0,sl({left:r.left,top:r.top,right:r.right,bottom:r.bottom,centerX:r.centerX,centerY:r.centerY}),K.value=!1):oe.value=!1}else oe.value=!1;Xt()}function mt(n){if(!n)return{el:null,parentGroup:null};const r=(i,u)=>{for(const y of i){if(y.id===n)return{el:y,parentGroup:u};if((y.type==="group"||y.type==="container")&&Array.isArray(y.children)){const x=r(y.children,y);if(x)return x}}return null};return r(M.value,null)||{el:null,parentGroup:null}}const cl=pe(null);function fl(n,r){if(!n.children||!Array.isArray(n.children))return!1;const i=[...n.children];for(;i.length;){const u=i.pop();if((u==null?void 0:u.id)===r.id)return!0;u!=null&&u.children&&Array.isArray(u.children)&&i.push(...u.children)}return!1}function yl(n){var H,de,ve,Ae;const{id:r,globalLeft:i,globalTop:u}=n;if(!r)return;const y=(H=cl.value)==null?void 0:H.getBoundingClientRect();if(!y)return;const{el:x,parentGroup:F}=mt(r);if(!x)return;const j=(((de=U.value[r])==null?void 0:de.width)||Number(x.width)||0)*Et.value,A=(((ve=U.value[r])==null?void 0:ve.height)||Number(x.height)||0)*Et.value,z={left:i,top:u,right:i+j,bottom:u+A};function c(){const ce=z.left+1,we=z.top+1,ee=z.right-1,te=z.bottom-1;return[{x:(z.left+z.right)/2,y:(z.top+z.bottom)/2},{x:ce,y:we},{x:ee,y:we},{x:ce,y:te},{x:ee,y:te}]}let p=null;for(const ce of c()){const we=document.elementsFromPoint(ce.x,ce.y);for(const ee of we){const te=(Ae=ee.closest("[data-box-id]"))==null?void 0:Ae.getAttribute("data-box-id");if(!te||te===r)continue;const{el:R}=mt(te);if(R&&!(R.type!=="container"&&R.type!=="group")&&R.id!==x.id&&!fl(x,R)){p=te;break}}if(p)break}const T=F?F.id:null;if(p!==T){if(F?Array.isArray(F.children)&&(F.children=F.children.filter(ce=>ce.id!==r)):M.value=M.value.filter(ce=>ce.id!==r),p){const{el:ce}=mt(p);if(ce){const we=document.querySelector(`[data-box-id="${p}"]`);if(we){const ee=we.getBoundingClientRect(),te=(i-ee.left)/Et.value,R=(u-ee.top)/Et.value;x.left=Math.floor(te),x.top=Math.floor(R),x.x=x.left,x.y=x.top,ce.children||(ce.children=[]),ce.children.push(x)}}}else{const ce=(i-y.left)/Et.value,we=(u-y.top)/Et.value;x.left=Math.floor(ce),x.top=Math.floor(we),x.x=x.left,x.y=x.top,M.value.push(x)}ur(()=>{g.value=r}),ae()}}function ll(n){const r=Ee.value[n];r&&(yt.value=n,bt.value=r.gap)}function rl(){var j,A,z,c,p;if(!yt.value||bt.value==null){yt.value=null,bt.value=null;return}const n=yt.value,r=Ee.value[n];if(!r){yt.value=null,bt.value=null;return}const i=Vt.value.find(T=>T.id===r.refId),u=bt.value,y=_e.value;if(!i||!y){yt.value=null,bt.value=null;return}const x=(j=r.exact)!=null?j:r.gap,F=u-x;n==="left"?y.left=Math.round(((A=y.left)!=null?A:0)+F):n==="right"?y.left=Math.round(((z=y.left)!=null?z:0)-F):n==="up"?y.top=Math.round(((c=y.top)!=null?c:0)+F):n==="down"&&(y.top=Math.round(((p=y.top)!=null?p:0)-F)),ae(),yt.value=null,bt.value=null,Xt()}Qt(g,()=>{K.value||Xt()}),Qt(U,()=>{K.value||Xt()},{deep:!0}),Qt(Lt,n=>{n?Xt():(yt.value=null,bt.value=null,Ee.value={left:null,right:null,up:null,down:null})}),Qt(Ut,n=>{n?Ft():(Qe.value={centerV:!1,centerH:!1,left:!1,right:!1,top:!1,bottom:!1},oe.value=!1)});const _e=st(()=>g.value?mt(g.value).el:null),vt=st(()=>{var i;if(!g.value)return!1;const{parentGroup:n}=mt(g.value);if(!n)return!1;const r=((i=n.style)==null?void 0:i.display)||"";return String(r).toLowerCase()==="flex"});async function ie(){return new Promise((n,r)=>{const i="lowcode-db",u="objects",y=indexedDB.open(i);y.onerror=()=>r(y.error),y.onupgradeneeded=()=>{const x=y.result;if(!x.objectStoreNames.contains(u)){const F=x.createObjectStore(u,{keyPath:"id"});try{F.createIndex("projectId","projectId",{unique:!1}),F.createIndex("name","name",{unique:!1})}catch{}}},y.onsuccess=()=>{const x=y.result;if(x.objectStoreNames.contains(u))n(x);else{const F=x.version+1;x.close();const j=indexedDB.open(i,F);j.onerror=()=>r(j.error),j.onupgradeneeded=()=>{const A=j.result;if(!A.objectStoreNames.contains(u)){const z=A.createObjectStore(u,{keyPath:"id"});try{z.createIndex("projectId","projectId",{unique:!1}),z.createIndex("name","name",{unique:!1})}catch{}}},j.onsuccess=()=>n(j.result)}}})}async function Ie(){try{const n=(await ie()).transaction(["objects"],"readonly").objectStore("objects").getAll();n.onsuccess=()=>{m.value=(n.result||[]).filter(r=>!r.projectId||r.projectId===(a.projectId||void 0))},n.onerror=()=>{console.warn("loadDatabaseObjects error",n.error)}}catch(n){console.warn("openDatabaseDB error",n)}}const ht=st(()=>{const n={};for(const r of m.value)r&&r.name&&(n[r.name]=r.content);return n}),ke=pe({}),ft=st(()=>{const n={...ht.value};for(const r in ke.value)Object.assign(n,ke.value[r]);return n});function Fe(n,r){const i={};for(const u of r)u&&u.name&&(i[u.name]=u.content);ke.value[n]=i}function qe(n){ke.value[n]&&delete ke.value[n];const r=`component-fonts-${n}`,i=document.getElementById(r);i&&i.parentNode&&i.parentNode.removeChild(i)}function De(n,r="#000000"){try{const i=String(n||"").trim();return/^#([0-9a-fA-F]{6})$/.test(i)?i:r}catch{return r}}function Be(){if(!g.value)return;const{el:n,parentGroup:r}=mt(g.value);n&&r&&Array.isArray(r.children)?r.children=r.children.filter(i=>i.id!==n.id):(M.value=M.value.filter(i=>i.id!==g.value),n&&n.type==="group"&&qe(n.id)),g.value=null,ae()}function wt(n){(!n.className||!n.className.trim())&&(n.className=`cls-${String(n.id).slice(0,8)}`)}function It(n){try{wt(n);const r=String(n.className||"").trim();String(n.customClassCss||"").trim()||(n.customClassCss=`.${r} {
  
}`)}catch{}}function lt(n){const r=String(n||"").trim();return r?r.split(";").map(i=>{const u=i.trim();return u?/!important\s*$/.test(u)?u+";":u+" !important;":""}).filter(Boolean).join(`
`):""}function Ue(n){return String(n||"").replace(/\{([^}]*)\}/g,(r,i)=>`{
`+String(i||"").split(";").map(u=>{const y=u.trim();return y?y.startsWith("@")||!/:/.test(y)||/!important\s*$/.test(y)?y+";":y+" !important;":""}).filter(Boolean).join(`
`)+`
}`)}function Se(n){try{if(!n.enableClassStyle)return;wt(n);const r=String(n.customClassCss||"").trim();if(!r)return;const i=`custom-class-${n.id}`;let u=document.getElementById(i);if(u||(u=document.createElement("style"),u.id=i,document.head.appendChild(u)),/{[^}]*}/.test(r)){u.textContent=Ue(r);return}const y=lt(r);u.textContent=`.${String(n.className).trim()} {
${y}
}`}catch(r){console.warn("注入自定义类样式失败：",r)}}function Ce(n){try{const r=`custom-class-${n}`,i=document.getElementById(r);i&&i.remove()}catch{}}function et(n,r){for(const i of n)r(i),(i.type==="group"||i.type==="container")&&Array.isArray(i.children)&&et(i.children,r)}let $t=null;function Te(){$t&&clearTimeout($t),$t=setTimeout(()=>{try{et(M.value,n=>{n.enableClassStyle&&n.customClassCss&&n.className?Se(n):Ce(n.id)})}catch(n){console.warn("刷新自定义类样式失败：",n)}},50)}async function Jt(){var n,r,i,u,y,x,F,j,A,z;try{const c=_e.value;if(!c){alert("请先选中要保存的元素或分组");return}const p=ue.value||(c.type==="group"?"分组组件":"元素组件"),T=prompt("请输入组件名称",p);if(T===null)return;const H=(T||p).trim()||"未命名组件";let de=[];if(c.type==="group"&&Array.isArray(c.children)){const b=Number((r=(n=c.left)!=null?n:c.x)!=null?r:0),h=Number((u=(i=c.top)!=null?i:c.y)!=null?u:0);de=c.children.map(W=>{var _,xe,me,Le,He,ot;const O=JSON.parse(JSON.stringify(W)),B=Number((xe=(_=O.left)!=null?_:O.x)!=null?xe:0),X=Number((Le=(me=O.top)!=null?me:O.y)!=null?Le:0);O.left=b+B,O.top=h+X,O.x=O.left,O.y=O.top;const I=U.value[W.id],J=Number(O.width||0),v=Number(O.height||0);if(!(J>0)){const At=(()=>{var jt,Dt,kt,Yt,zt;if(O.type==="text"){const ol=Number((jt=O.fontSize)!=null?jt:16),kl=String((Dt=O.text)!=null?Dt:"").trim();return Math.max(50,Math.round((kl.length||2)*ol*.6))}if(O.type==="image")return 100;if(O.type==="carousel")return 320;if(O.type==="chart")return 240;if(O.type==="line"){const ol=Number((Yt=(kt=O.style)==null?void 0:kt.lineThickness)!=null?Yt:2);return(((zt=O.style)==null?void 0:zt.lineOrientation)||"horizontal")==="vertical"?ol:100}return 50})();O.width=Math.max(1,Math.round((He=I==null?void 0:I.width)!=null?He:At))}if(!(v>0)){const At=(()=>{var jt,Dt,kt,Yt;if(O.type==="text"){const zt=Number((jt=O.fontSize)!=null?jt:16);return Math.max(20,Math.round(zt*1.5))}if(O.type==="image")return 100;if(O.type==="carousel")return 200;if(O.type==="chart")return 160;if(O.type==="line"){const zt=Number((kt=(Dt=O.style)==null?void 0:Dt.lineThickness)!=null?kt:2);return(((Yt=O.style)==null?void 0:Yt.lineOrientation)||"horizontal")==="vertical"?100:zt}return 20})();O.height=Math.max(1,Math.round((ot=I==null?void 0:I.height)!=null?ot:At))}return O.id=`${O.type}-${Date.now()}-${Math.random().toString(36).slice(2,8)}`,O})}else{const b=JSON.parse(JSON.stringify(c)),h=Number((x=(y=b.left)!=null?y:b.x)!=null?x:0),W=Number((j=(F=b.top)!=null?F:b.y)!=null?j:0);b.left=h,b.top=W,b.x=b.left,b.y=b.top;const O=U.value[c.id],B=Number(b.width||0),X=Number(b.height||0);if(!(B>0)){const I=(()=>{var J,v,_,xe,me;if(b.type==="text"){const Le=Number((J=b.fontSize)!=null?J:16),He=String((v=b.text)!=null?v:"").trim();return Math.max(50,Math.round((He.length||2)*Le*.6))}if(b.type==="image")return 100;if(b.type==="chart")return 240;if(b.type==="line"){const Le=Number((xe=(_=b.style)==null?void 0:_.lineThickness)!=null?xe:2);return(((me=b.style)==null?void 0:me.lineOrientation)||"horizontal")==="vertical"?Le:100}return 50})();b.width=Math.max(1,Math.round((A=O==null?void 0:O.width)!=null?A:I))}if(!(X>0)){const I=(()=>{var J,v,_,xe;if(b.type==="text"){const me=Number((J=b.fontSize)!=null?J:16);return Math.max(20,Math.round(me*1.5))}if(b.type==="image")return 100;if(b.type==="chart")return 160;if(b.type==="line"){const me=Number((_=(v=b.style)==null?void 0:v.lineThickness)!=null?_:2);return(((xe=b.style)==null?void 0:xe.lineOrientation)||"horizontal")==="vertical"?100:me}return 20})();b.height=Math.max(1,Math.round((z=O==null?void 0:O.height)!=null?z:I))}b.id=`${b.type}-${Date.now()}-${Math.random().toString(36).slice(2,8)}`,de=[b]}const ve=Math.min(...de.map(b=>{var h,W;return Number((W=(h=b.left)!=null?h:b.x)!=null?W:0)})),Ae=Math.min(...de.map(b=>{var h,W;return Number((W=(h=b.top)!=null?h:b.y)!=null?W:0)})),ce=Math.max(...de.map(b=>{var h,W,O;return Number((W=(h=b.left)!=null?h:b.x)!=null?W:0)+Number((O=b.width)!=null?O:0)})),we=Math.max(...de.map(b=>{var h,W,O;return Number((W=(h=b.top)!=null?h:b.y)!=null?W:0)+Number((O=b.height)!=null?O:0)})),ee=Math.max(1,Math.round(ce-ve)),te=Math.max(1,Math.round(we-Ae));de=de.map(b=>{var B,X,I,J;const h=JSON.parse(JSON.stringify(b)),W=Number((X=(B=h.left)!=null?B:h.x)!=null?X:0)-ve,O=Number((J=(I=h.top)!=null?I:h.y)!=null?J:0)-Ae;return h.left=Math.max(0,Math.round(W)),h.top=Math.max(0,Math.round(O)),h.x=h.left,h.y=h.top,h});const R={width:ee,height:te,backgroundUrl:"",backgroundColor:"transparent",globalFontFamily:$.globalFontFamily,globalFontSize:$.globalFontSize,globalColor:$.globalColor},re=`${Date.now()}${Math.random().toString(36).slice(2,9)}`,Ve={id:re,name:H,description:"",tags:[],elements:de,config:R,usageCount:0,createdAt:Date.now(),updatedAt:Date.now()};await St.init(),await St.saveComponent(JSON.parse(JSON.stringify(Ve))),await wl(`component-${re}`,{config:R,elements:de,exportName:H}),alert("组件已保存到组件库")}catch(c){console.warn("保存组件失败：",c),alert("保存组件失败，请稍后重试")}}const Rt=pe(null);function Nt(n){var u;const r=(u=n.target.files)==null?void 0:u[0];if(!r)return;const i=new FileReader;i.onload=()=>{const y=String(i.result);$.backgroundUrl=y;const x=new Image;x.onload=()=>{Rt.value={width:x.naturalWidth,height:x.naturalHeight},$.width=x.naturalWidth,$.height=x.naturalHeight},x.src=y},i.readAsDataURL(r)}function Zt(n){var r;return n&&((r=n.split(",")[0])!=null?r:"").trim().replace(/^['"]|['"]$/g,"")||null}function _t(n){return{"image/png":"png","image/jpeg":"jpg","image/jpg":"jpg","image/webp":"webp","image/gif":"gif","image/svg+xml":"svg","image/avif":"avif","image/apng":"apng","image/x-icon":"ico","image/vnd.microsoft.icon":"ico","font/ttf":"ttf","font/otf":"otf","font/woff":"woff","font/woff2":"woff2","application/font-ttf":"ttf","application/font-otf":"otf","application/font-woff":"woff","application/font-woff2":"woff2","application/x-font-ttf":"ttf","application/x-font-otf":"otf","application/x-font-woff":"woff","application/x-font-woff2":"woff2","application/vnd.ms-fontobject":"eot","application/octet-stream":"bin"}[n]||"bin"}function Cl(n){var u;const r=/\.([A-Za-z0-9]+)$/.exec(n||"");if(!r)return null;const i=((u=r[1])!=null?u:"").toLowerCase();return i?["png","jpg","jpeg","gif","svg","webp","avif","apng","ico"].includes(i)?i==="jpeg"?"jpg":i:["ttf","otf","woff","woff2","eot"].includes(i)?i:null:null}async function al(n){try{const r="lowcode-icons",i="icons",u=await new Promise((y,x)=>{const F=indexedDB.open(r);F.onsuccess=()=>{const j=F.result;if(j.objectStoreNames.contains(i))y(j);else{const A=j.version+1;j.close();const z=indexedDB.open(r,A);z.onupgradeneeded=()=>{const c=z.result;c.objectStoreNames.contains(i)||c.createObjectStore(i,{keyPath:"id"})},z.onsuccess=()=>y(z.result),z.onerror=()=>x(z.error)}},F.onerror=()=>x(F.error)});return await new Promise((y,x)=>{const F=u.transaction(i,"readonly").objectStore(i).get(n);F.onsuccess=()=>y(F.result||null),F.onerror=()=>x(F.error)})}catch{return null}}function Ml(n){var r,i,u,y,x,F,j,A;try{const z=new Uint8Array(n),c=String.fromCharCode((r=z[0])!=null?r:0,(i=z[1])!=null?i:0,(u=z[2])!=null?u:0,(y=z[3])!=null?y:0);return c==="wOFF"?"woff":c==="wOF2"?"woff2":c==="OTTO"?"otf":(((x=z[0])!=null?x:0)===0&&((F=z[1])!=null?F:0)===1&&((j=z[2])!=null?j:0)===0&&((A=z[3])!=null?A:0)===0||c==="true"||c==="typ1","ttf")}catch{return"ttf"}}async function Wl(n){const r=prompt("请输入导出名称",ue.value||"GeneratedComponent");if(r===null)return;const i=r.trim()||"GeneratedComponent";ue.value=i;function u(b){const h=new Set,W={};function O(X){let I=Date.now(),J=`${X}-${I}`;for(;h.has(J);)I+=1,J=`${X}-${I}`;return J}function B(X){const I=JSON.parse(JSON.stringify(X)),J=String(I.id);let v=J;return h.has(v)&&(v=O(String(I.type||"el"))),h.add(v),W[J]=v,I.id=v,(I.type==="group"||I.type==="container")&&Array.isArray(I.children)&&(I.children=I.children.map(_=>B(_))),I}return{normalized:b.map(X=>B(X)),remap:W}}const{normalized:y}=u(M.value),x=[],F=b=>{for(const h of b)if((h.type==="group"||h.type==="container")&&Array.isArray(h.children))F(h.children);else if(h.type==="image"){const W=!!h.src||!!h.iconId,O=!!h.highlightEnabled&&(!!h.highlightSrc||!!h.highlightIconId);(W||O)&&x.push(h)}};F(y);const j={},A=new Map;let z=0;for(const b of x)try{let h;const W=!!b.highlightEnabled&&!!b.highlightIconId,O=!!b.highlightEnabled&&!!b.highlightSrc;if(W){const v=b.highlightIconId,_=await al(v);if(!_)throw new Error("icon record missing: "+v);h=new Blob([_.buffer],{type:String(_.mime||"image/png")})}else{const v=String(O?b.highlightSrc:b.src||"");if(v)h=await(await fetch(v)).blob();else if(b.iconId){const _=b.iconId,xe=await al(_);if(!xe)throw new Error("icon record missing: "+_);h=new Blob([xe.buffer],{type:String(xe.mime||"image/png")})}else continue}let B=_t(h.type);if(B==="bin"){const v=W?b.highlightIconId:b.iconId;if(v){const _=await al(v);if(_){const xe=_t(String(_.mime||"")),me=Cl(String(_.originalName||""));B=xe!=="bin"?xe:me||B}}B==="bin"&&(B="png")}const X=await h.arrayBuffer(),I=await crypto.subtle.digest("SHA-256",X),J=Array.from(new Uint8Array(I)).map(v=>v.toString(16).padStart(2,"0")).join("");if(A.has(J)){const{fileName:v}=A.get(J);j[b.id]=v}else{const v=`${i}_img_${z}.${B}`;A.set(J,{fileName:v,blob:h}),z++,j[b.id]=v}}catch(h){console.warn("导出图片失败：",h)}const c=Array.from(A.values());let p=null,T=null;if($.backgroundUrl)try{const b=await(await fetch(String($.backgroundUrl))).blob(),h=_t(b.type);p=`${i}_bg.${h}`,T=b}catch(b){console.warn("导出背景图片失败：",b)}const H=new Set,de=Zt($.globalFontFamily);de&&H.add(de);const ve=b=>{var h;for(const W of b)if((W.type==="group"||W.type==="container")&&Array.isArray(W.children))ve(W.children);else if(W.type==="text"){const O=Zt((h=W.style)==null?void 0:h.fontFamily);O&&H.add(O)}};ve(M.value);const Ae=[],ce=[];if(H.size>0)try{const b="lowcode-fonts",h="fonts",W=await new Promise((I,J)=>{const v=indexedDB.open(b);v.onsuccess=()=>{const _=v.result;if(_.objectStoreNames.contains(h))I(_);else{const xe=_.version+1;_.close();const me=indexedDB.open(b,xe);me.onupgradeneeded=()=>{const Le=me.result;Le.objectStoreNames.contains(h)||Le.createObjectStore(h,{keyPath:"id"})},me.onsuccess=()=>I(me.result),me.onerror=()=>J(me.error)}},v.onerror=()=>J(v.error)}),O=await new Promise((I,J)=>{const v=W.transaction(h,"readonly").objectStore(h).getAll();v.onsuccess=()=>I(v.result),v.onerror=()=>J(v.error)}),B=S.value,X=B?O.filter(I=>I.projectId===B):O.filter(I=>!I.projectId);for(const I of X)if(H.has(I.name)){const J=new Blob([I.buffer],{type:I.mime});let v=_t(I.mime);if(v==="bin")try{v=Ml(I.buffer)}catch{v="ttf"}const _=I.name.replace(/[^A-Za-z0-9_\-]/g,"_"),xe=`${i}_${_}.${v}`;Ae.push({family:I.name,file:xe}),ce.push({file:xe,blob:J})}}catch(b){console.warn("读取字体库失败：",b)}const we=new No.default,ee=we.folder(i),te=ee.folder("imgs");for(const b of c)te.file(b.fileName,b.blob);T&&p&&te.file(p,T);const R=ee.folder("fonts");for(const b of ce)R.file(b.file,b.blob);let re="";if(n==="vue2"){const b=Eo(i,$,y,{imageFileNames:c.map(h=>h.fileName),imageFileMap:j,backgroundFileName:T&&p?p:null,fontFaces:Ae,hideDirective:"if"},ft.value);re=b.indexVue,ee.file("index.vue",re),b.files&&Object.entries(b.files).forEach(([h,W])=>{ee.file(h,W)})}else n==="vue3"?(re=ko(i,$,y,{imageFileNames:c.map(b=>b.fileName),imageFileMap:j,backgroundFileName:T&&p?p:null,fontFaces:Ae,hideDirective:"if"}),ee.file("index.vue",re)):n==="react"?(re=Mo(i,$,y,{imageFileNames:c.map(b=>b.fileName),imageFileMap:j,backgroundFileName:T&&p?p:null,fontFaces:Ae}),ee.file("index.jsx",re),ee.file("README.md","# React 导出使用说明\n\n- 将本目录的 `imgs/` 与 `fonts/` 拷贝到 React 项目 `public/` 根目录：\n  - `public/imgs`\n  - `public/fonts`\n- 组件中图片路径为 `/imgs/...`，字体为 `/fonts/...`，确保开发与生产可访问。\n\n可选方案：若不使用 `public`，需自行改为通过打包管道解析资源（如 `new URL(path, import.meta.url).href` 或 import）。")):(re=So(i,$,y,{imageFileNames:c.map(b=>b.fileName),imageFileMap:j,backgroundFileName:T&&p?p:null,fontFaces:Ae}),ee.file("index.html",re));const Ve=await we.generateAsync({type:"blob"});(0,Io.saveAs)(Ve,`${i}.zip`)}async function Hl(){const n=prompt("请输入导出名称",ue.value||"GeneratedComponent");if(n===null)return;const r=n.trim()||"GeneratedComponent";ue.value=r;const i=[],u=b=>{for(const h of b)if((h.type==="group"||h.type==="container")&&Array.isArray(h.children))u(h.children);else if(h.type==="image"){const W=!!h.src||!!h.iconId,O=!!h.highlightEnabled&&(!!h.highlightSrc||!!h.highlightIconId);(W||O)&&i.push(h)}};u(M.value);const y={},x=new Map;let F=0;for(const b of i)try{let h;const W=!!b.highlightEnabled&&!!b.highlightIconId,O=!!b.highlightEnabled&&!!b.highlightSrc;if(W){const v=b.highlightIconId,_=await al(v);if(!_)throw new Error("icon record missing: "+v);h=new Blob([_.buffer],{type:String(_.mime||"image/png")})}else{const v=String(O?b.highlightSrc:b.src||"");if(v)h=await(await fetch(v)).blob();else if(b.iconId){const _=b.iconId,xe=await al(_);if(!xe)throw new Error("icon record missing: "+_);h=new Blob([xe.buffer],{type:String(xe.mime||"image/png")})}else continue}let B=_t(h.type);if(B==="bin"){const v=W?b.highlightIconId:b.iconId;if(v){const _=await al(v);if(_){const xe=_t(String(_.mime||"")),me=Cl(String(_.originalName||""));B=xe!=="bin"?xe:me||B}}B==="bin"&&(B="png")}const X=await h.arrayBuffer(),I=await crypto.subtle.digest("SHA-256",X),J=Array.from(new Uint8Array(I)).map(v=>v.toString(16).padStart(2,"0")).join("");if(x.has(J)){const{fileName:v}=x.get(J);y[b.id]=v}else{const v=`${r}_img_${F}.${B}`;x.set(J,{fileName:v,blob:h}),F++,y[b.id]=v}}catch(h){console.warn("导出图片失败：",h)}const j=Array.from(x.values());let A=null,z=null;if($.backgroundUrl)try{const b=await(await fetch(String($.backgroundUrl))).blob(),h=_t(b.type);A=`${r}_bg.${h}`,z=b}catch(b){console.warn("导出背景图片失败：",b)}const c=new Set,p=Zt($.globalFontFamily);p&&c.add(p);const T=b=>{var h;for(const W of b)if((W.type==="group"||W.type==="container")&&Array.isArray(W.children))T(W.children);else if(W.type==="text"){const O=Zt((h=W.style)==null?void 0:h.fontFamily);O&&c.add(O)}};T(M.value);const H=[],de=[];if(c.size>0)try{const b="lowcode-fonts",h="fonts",W=await new Promise((I,J)=>{const v=indexedDB.open(b);v.onsuccess=()=>{const _=v.result;if(_.objectStoreNames.contains(h))I(_);else{const xe=_.version+1;_.close();const me=indexedDB.open(b,xe);me.onupgradeneeded=()=>{const Le=me.result;Le.objectStoreNames.contains(h)||Le.createObjectStore(h,{keyPath:"id"})},me.onsuccess=()=>I(me.result),me.onerror=()=>J(me.error)}},v.onerror=()=>J(v.error)}),O=await new Promise((I,J)=>{const v=W.transaction(h,"readonly").objectStore(h).getAll();v.onsuccess=()=>I(v.result),v.onerror=()=>J(v.error)}),B=S.value,X=B?O.filter(I=>I.projectId===B):O.filter(I=>!I.projectId);for(const I of X)if(c.has(I.name)){const J=new Blob([I.buffer],{type:I.mime});let v=_t(I.mime);if(v==="bin")try{v=Ml(I.buffer)}catch{v="ttf"}const _=I.name.replace(/[^A-Za-z0-9_\-]/g,"_"),xe=`${r}_${_}.${v}`;H.push({family:I.name,file:xe}),de.push({file:xe,blob:J})}}catch(b){console.warn("读取字体库失败：",b)}const ve=new No.default,Ae=ve.folder(`${r}_all`),ce=[],we={imageFileNames:j.map(b=>b.fileName),imageFileMap:y,backgroundFileName:z&&A?A:null,fontFaces:H,hideDirective:"if"},ee=Eo(r,$,M.value,we,ft.value);ce.push({key:"vue2",file:"index.vue",content:ee.indexVue,files:ee.files});const te=ko(r,$,M.value,we);ce.push({key:"vue3",file:"index.vue",content:te});const R=Mo(r,$,M.value,we);ce.push({key:"react",file:"index.jsx",content:R});const re=So(r,$,M.value,we);ce.push({key:"html",file:"index.html",content:re});for(const b of ce){const h=Ae.folder(b.key);h.file(b.file,b.content),b.files&&Object.entries(b.files).forEach(([B,X])=>{h.file(B,X)}),b.key==="react"&&h.file("README.md","# React 导出使用说明\n\n- 将本目录的 `imgs/` 与 `fonts/` 拷贝到 React 项目 `public/` 根目录：\n  - `public/imgs`\n  - `public/fonts`\n- 组件中图片路径为 `/imgs/...`，字体为 `/fonts/...`，确保开发与生产可访问。\n\n可选方案：若不使用 `public`，需自行改为通过打包管道解析资源（如 `new URL(path, import.meta.url).href` 或 import）。");const W=h.folder("imgs");for(const B of j)W.file(B.fileName,B.blob);z&&A&&W.file(A,z);const O=h.folder("fonts");for(const B of de)O.file(B.file,B.blob)}const Ve=await ve.generateAsync({type:"blob"});(0,Io.saveAs)(Ve,`${r}-all.zip`)}function Jl(){confirm("确认清空当前画布与元素吗？")&&(M.value=[],g.value=null,ae())}const Et=pe(1),pl=pe(null);function _l(){Et.value=Math.min(2,+(Et.value+.1).toFixed(2))}function ql(){Et.value=Math.max(.2,+(Et.value-.1).toFixed(2))}function Il(){const n=pl.value;if(!n)return;const r=n.clientWidth-16,i=n.clientHeight-16,u=r/$.width,y=i/$.height;Et.value=+Math.max(.2,Math.min(2,Math.min(u,y))).toFixed(2)}fr(async()=>{Il(),await Ie()});const Nl=pe([]);function jl(n){const r=JSON.parse(JSON.stringify(n));function i(u){u.id=pt(String(u.type||"el")),u.elementId&&(u.elementId=pt(String(u.type||"el"))),(u.type==="group"||u.type==="container")&&Array.isArray(u.children)&&u.children.forEach(y=>i(y))}return i(r),r.left=(n.left||0)+10,r.top=(n.top||0)+10,r.x=r.left,r.y=r.top,r.zIndex=(n.zIndex||1)+1,r}function Yl(){var y,x,F,j,A,z,c,p,T,H,de,ve,Ae,ce,we;if(!_e.value)return;let n=_e.value;const r=mt(n.id);r.parentGroup&&(n=r.parentGroup);const i=jl(n),{parentGroup:u}=mt(n.id);if(u){const ee=Number((x=(y=u.left)!=null?y:u.x)!=null?x:0),te=Number((j=(F=u.top)!=null?F:u.y)!=null?j:0),R=Number((A=u.width)!=null?A:0),re=Number((z=u.height)!=null?z:0),Ve=ee+R,b=te+re,h=Number((c=n.width)!=null?c:0),W=Number((p=n.height)!=null?p:0);let O=h,B=W;if(!O||!B)if(n.type==="text"){const me=Number((T=n.fontSize)!=null?T:16),Le=String((de=(H=n.text)!=null?H:n.content)!=null?de:"").trim();O=Math.max(h||50,Math.round((Le.length||2)*me*.6)),B=Math.max(W||20,Math.round(me*1.5))}else n.type==="image"?(O=h||200,B=W||150):n.type==="chart"?(O=h||240,B=W||160):n.type==="line"?(O=h||200,B=W||2):(O=h||100,B=W||60);const X=10,I=ee+R/2,J=te+re/2;let v=!1,_=Ve+X,xe=Math.round(J-B/2);if(!v&&_+O<=$.width&&(i.left=Math.max(0,Math.min(_,Math.max(0,$.width-O))),i.top=Math.max(0,Math.min(xe,Math.max(0,$.height-B))),v=!0),_=ee-O-X,xe=Math.round(J-B/2),!v&&_>=0&&(i.left=Math.max(0,Math.min(_,Math.max(0,$.width-O))),i.top=Math.max(0,Math.min(xe,Math.max(0,$.height-B))),v=!0),_=Math.round(I-O/2),xe=b+X,!v&&xe+B<=$.height&&(i.left=Math.max(0,Math.min(_,Math.max(0,$.width-O))),i.top=Math.max(0,Math.min(xe,Math.max(0,$.height-B))),v=!0),_=Math.round(I-O/2),xe=te-B-X,!v&&xe>=0&&(i.left=Math.max(0,Math.min(_,Math.max(0,$.width-O))),i.top=Math.max(0,Math.min(xe,Math.max(0,$.height-B))),v=!0),!v){const me=Number((Ae=(ve=n.left)!=null?ve:n.x)!=null?Ae:0),Le=Number((we=(ce=n.top)!=null?ce:n.y)!=null?we:0),He=ee+me+X,ot=te+Le+X;i.left=Math.max(0,Math.min(Math.round(He),Math.max(0,$.width-O))),i.top=Math.max(0,Math.min(Math.round(ot),Math.max(0,$.height-B)))}i.x=i.left,i.y=i.top}M.value.push(i),g.value=i.id,ae()}const bl=pe(!1),xl=pe([]),ml=pe(""),hl=pe(!1),Fl=st(()=>{const n=ml.value.trim().toLowerCase();return n?xl.value.filter(r=>r.name.toLowerCase().includes(n)||(r.description||"").toLowerCase().includes(n)||Array.isArray(r.tags)&&r.tags.some(i=>i.toLowerCase().includes(n))):xl.value});async function Al(){try{hl.value=!0,await St.init(),xl.value=(await St.getAllComponents()||[]).sort((n,r)=>(r.updatedAt||0)-(n.updatedAt||0))}catch(n){console.warn("加载组件缓存失败：",n)}finally{hl.value=!1}}async function Kl(){await Al(),bl.value=!0}function zl(){bl.value=!1}const nl=pe(!1);let Ot=null;function Xl(){nl.value=!0,Ot&&(clearTimeout(Ot),Ot=null)}function Zl(){Ot&&clearTimeout(Ot),Ot=setTimeout(()=>{nl.value=!1,Ot=null},120)}function Ql(){nl.value=!0,Ot&&(clearTimeout(Ot),Ot=null)}function er(){nl.value=!1,Ot&&(clearTimeout(Ot),Ot=null)}function tr(n){const r=[],i=[],u=[],y=[];function x(c){var H,de,ve,Ae,ce;const p=Number(c.width||0),T=Number(c.height||0);if(p>0&&T>0)return{w:p,h:T};if(c.type==="text"){const we=Number((H=c.fontSize)!=null?H:16),ee=String((de=c.text)!=null?de:"").trim(),te=Math.max(50,Math.round((ee.length||2)*we*.6)),R=Math.max(20,Math.round(we*1.5));return{w:p||te,h:T||R}}if(c.type==="image")return{w:p||100,h:T||100};if(c.type==="chart")return{w:p||240,h:T||160};if(c.type==="line"){const we=Number((Ae=(ve=c.style)==null?void 0:ve.lineThickness)!=null?Ae:2);return(((ce=c.style)==null?void 0:ce.lineOrientation)||"horizontal")==="vertical"?{w:p||we,h:T||100}:{w:p||100,h:T||we}}return{w:p||50,h:T||20}}for(const c of n){const p=Number(c.left||c.x||0),T=Number(c.top||c.y||0),{w:H,h:de}=x(c);r.push(p),i.push(T),u.push(p+(H||0)),y.push(T+(de||0))}const F=r.length?Math.min(...r):0,j=i.length?Math.min(...i):0,A=u.length?Math.max(...u):F,z=y.length?Math.max(...y):j;return{minX:F,minY:j,maxX:A,maxY:z,width:Math.max(0,A-F),height:Math.max(0,z-j)}}async function lr(n){var r,i,u,y,x,F,j,A,z,c;try{const p=await Dl(`component-${n.id}`),T=JSON.parse(JSON.stringify((p==null?void 0:p.elements)||n.elements||[]));if(!T||T.length===0){console.warn("该组件没有可插入的元素");return}let H=Date.now();const de=B=>{B.id=`${B.type||"el"}-${H++}-${Math.random().toString(36).slice(2,8)}`,(B.type==="chart"||B.type==="container")&&B.elementId&&(B.elementId=String(B.elementId)+"_"+String(H%1e3)),(B.type==="group"||B.type==="container")&&Array.isArray(B.children)&&B.children.forEach(X=>de(X))},ve=pl.value,Ae=Et.value||1,ce=(r=ve==null?void 0:ve.clientWidth)!=null?r:0,we=(i=ve==null?void 0:ve.clientHeight)!=null?i:0,ee=ve?(ve.scrollLeft+ce/2)/Ae:20,te=ve?(ve.scrollTop+we/2)/Ae:20,R=tr(T),re=R.minX+R.width/2,Ve=R.minY+R.height/2,b=Math.round(ee-re),h=Math.round(te-Ve),W=M.value.reduce((B,X)=>Math.max(B,Number(X.zIndex||0)),0);let O=null;if(T.length===1){const B=T[0];if(!B){console.warn("单元素组件插入失败：源元素不存在");return}const I=JSON.parse(JSON.stringify(B));de(I);const J=Number((y=(u=I.left)!=null?u:I.x)!=null?y:0),v=Number((F=(x=I.top)!=null?x:I.y)!=null?F:0);I.left=Math.round(J+b),I.top=Math.round(v+h),I.x=I.left,I.y=I.top;const{w:_,h:xe}=(function(){var He,ot,At,jt,Dt;const me=Number(I.width||0),Le=Number(I.height||0);if(me>0&&Le>0)return{w:me,h:Le};if(I.type==="text"){const kt=Number((He=I.fontSize)!=null?He:16),Yt=String((ot=I.text)!=null?ot:"").trim(),zt=Math.max(50,Math.round((Yt.length||2)*kt*.6)),ol=Math.max(20,Math.round(kt*1.5));return{w:me||zt,h:Le||ol}}if(I.type==="image")return{w:me||100,h:Le||100};if(I.type==="chart")return{w:me||240,h:Le||160};if(I.type==="line"){const kt=Number((jt=(At=I.style)==null?void 0:At.lineThickness)!=null?jt:2);return(((Dt=I.style)==null?void 0:Dt.lineOrientation)||"horizontal")==="vertical"?{w:me||kt,h:Le||100}:{w:me||100,h:Le||kt}}return{w:me||50,h:Le||20}})();if(I.width=_,I.height=xe,I.type==="image"&&!(I.src||"").startsWith("data:")&&I.iconId)try{qt(I.iconId).then(me=>{me&&(I.src=me)}).catch(()=>{})}catch{}I.zIndex=Math.max(1,W+1),ae(),M.value=M.value.concat(I),g.value=I.id,O=I.id}else{const B=`group-${Date.now()}-${Math.random().toString(36).slice(2,8)}`,X=[];for(const J of T){const v=JSON.parse(JSON.stringify(J));de(v);const _=Number((A=(j=v.left)!=null?j:v.x)!=null?A:0),xe=Number((c=(z=v.top)!=null?z:v.y)!=null?c:0);v.left=Math.round(_-R.minX),v.top=Math.round(xe-R.minY),v.x=v.left,v.y=v.top;const{w:me,h:Le}=(function(){var At,jt,Dt,kt,Yt;const He=Number(v.width||0),ot=Number(v.height||0);if(He>0&&ot>0)return{w:He,h:ot};if(v.type==="text"){const zt=Number((At=v.fontSize)!=null?At:16),ol=String((jt=v.text)!=null?jt:"").trim(),kl=Math.max(50,Math.round((ol.length||2)*zt*.6)),sr=Math.max(20,Math.round(zt*1.5));return{w:He||kl,h:ot||sr}}if(v.type==="image")return{w:He||100,h:ot||100};if(v.type==="chart")return{w:He||240,h:ot||160};if(v.type==="line"){const zt=Number((kt=(Dt=v.style)==null?void 0:Dt.lineThickness)!=null?kt:2);return(((Yt=v.style)==null?void 0:Yt.lineOrientation)||"horizontal")==="vertical"?{w:He||zt,h:ot||100}:{w:He||100,h:ot||zt}}return{w:He||50,h:ot||20}})();if(v.width=me,v.height=Le,v.type==="image"&&!(v.src||"").startsWith("data:")&&v.iconId)try{qt(v.iconId).then(He=>{He&&(v.src=He)}).catch(()=>{})}catch{}X.push(v)}const I={id:B,type:"group",left:Math.round(R.minX+b),top:Math.round(R.minY+h),width:Math.max(1,Math.round(R.width)),height:Math.max(1,Math.round(R.height)),zIndex:Math.max(1,W+1),className:n.name?`component-${n.name.replace(/[^A-Za-z0-9_-]/g,"-")}`:void 0,children:X,componentId:n.id,editable:!0,style:{backgroundColor:"transparent"}};ae(),M.value=M.value.concat(I),g.value=I.id,O=B}try{if(O){const B=await St.getFontsByComponentId(n.id);if(Array.isArray(B)&&B.length>0){let X=document.getElementById(`component-fonts-${O}`);X||(X=document.createElement("style"),X.id=`component-fonts-${O}`,document.head.appendChild(X));const I=[];for(const J of B){const v=String(J.name||"").replace(/[^A-Za-z0-9_\-]/g,"_"),_=J.bufferBase64;_&&I.push(`@font-face { font-family: '${v}'; src: url('${_}'); font-weight: normal; font-style: normal; font-display: swap; }`)}X.textContent=I.join(`
`)}}}catch(B){console.warn("注入组件字体失败：",B)}try{if(O){const B=await St.getDatabaseObjectsByComponentId(n.id);Array.isArray(B)&&B.length>0&&Fe(O,B.map(X=>({name:X.name,content:X.content})))}}catch(B){console.warn("注入组件数据库对象失败：",B)}await St.incrementUsageCount(n.id),bl.value=!1}catch(p){console.warn("插入组件失败：",p)}}const Ol=()=>S.value?`lowcode-builder-state-${S.value}`:"lowcode-builder-state-v1",vl=()=>S.value?a.isComponent?`component-${S.value}`:`project-${S.value}`:"default";async function wl(n,r){try{const i=JSON.parse(JSON.stringify(r));if(n.startsWith("component-")){const u=n.replace(/^component-/,"");await St.saveBuilderStateForComponent(u,i)}else if(n.startsWith("project-")){const u=n.replace(/^project-/,"");await St.saveBuilderStateForProject(u,i)}else await St.saveBuilderStateForProject(n,i)}catch(i){console.warn("保存构建器状态失败：",i)}}async function Dl(n){try{if(n.startsWith("component-")){const r=n.replace(/^component-/,"");return await St.getBuilderStateForComponent(r)}else if(n.startsWith("project-")){const r=n.replace(/^project-/,"");return await St.getBuilderStateForProject(r)}return await St.getBuilderStateForProject(n)}catch(r){return console.warn("恢复构建器状态失败：",r),null}}let $l=null;function El(){$l&&clearTimeout($l),$l=setTimeout(()=>{M.value.some(r=>r.position==="static")&&console.log("DEBUG: Saving elements with static position:",M.value.filter(r=>r.position==="static").map(r=>({id:r.id,pos:r.position})));const n={config:$,elements:M.value,exportName:ue.value,version:gr};try{const r=async()=>{if(await wl(vl(),n),a.isComponent&&S.value)try{const i=String(S.value),u=await St.getComponent(i),y={id:i,name:ue.value||(u==null?void 0:u.name)||"未命名组件",description:(u==null?void 0:u.description)||"",tags:(u==null?void 0:u.tags)||[],elements:M.value,config:$,usageCount:(u==null?void 0:u.usageCount)||0,createdAt:(u==null?void 0:u.createdAt)||Date.now(),updatedAt:Date.now()};await St.saveComponent(JSON.parse(JSON.stringify(y))),Ll()}catch(i){console.warn("同步保存组件记录失败：",i)}};typeof window.requestIdleCallback=="function"?window.requestIdleCallback(()=>{r()}):r()}catch(r){console.warn("保存失败：",r)}},400)}Qt($,El,{deep:!0}),Qt(M,El,{deep:!0}),Qt(ue,El),Qt(M,()=>{Te()},{deep:!0});async function rr(){try{const n="lowcode-icons",r="icons",i=await new Promise((x,F)=>{const j=indexedDB.open(n);j.onsuccess=()=>{const A=j.result;if(A.objectStoreNames.contains(r))x(A);else{const z=A.version+1;A.close();const c=indexedDB.open(n,z);c.onupgradeneeded=()=>{const p=c.result;p.objectStoreNames.contains(r)||p.createObjectStore(r,{keyPath:"id"})},c.onsuccess=()=>x(c.result),c.onerror=()=>F(c.error)}},j.onerror=()=>F(j.error)}),u=await new Promise((x,F)=>{const j=i.transaction(r,"readonly").objectStore(r).getAll();j.onsuccess=()=>x(j.result),j.onerror=()=>F(j.error)}),y=S.value;Nl.value=(y?u.filter(x=>x.projectId===y):u.filter(x=>!x.projectId)).map(x=>{const F=new Blob([x.buffer],{type:x.mime}),j=URL.createObjectURL(F);return{id:x.id,url:j,name:x.name}})}catch(n){console.warn("图标库初始化失败：",n)}}async function qt(n){try{const r="lowcode-icons",i="icons",u=await new Promise((F,j)=>{const A=indexedDB.open(r);A.onsuccess=()=>{const z=A.result;if(z.objectStoreNames.contains(i))F(z);else{const c=z.version+1;z.close();const p=indexedDB.open(r,c);p.onupgradeneeded=()=>{const T=p.result;T.objectStoreNames.contains(i)||T.createObjectStore(i,{keyPath:"id"})},p.onsuccess=()=>F(p.result),p.onerror=()=>j(p.error)}},A.onerror=()=>j(A.error)}),y=await new Promise((F,j)=>{const A=u.transaction(i,"readonly").objectStore(i).get(n);A.onsuccess=()=>F(A.result),A.onerror=()=>j(A.error)});if(!y||!y.buffer)return null;const x=new Blob([y.buffer],{type:y.mime||"application/octet-stream"});return await new Promise((F,j)=>{const A=new FileReader;A.onload=()=>F(String(A.result)),A.onerror=()=>j(A.error),A.readAsDataURL(x)})}catch(r){return console.warn("读取图标数据失败：",r),null}}async function Bl(){const n=M.value;for(const r of n)if(r.type==="image"){if(r.iconId&&r.src&&!r.src.startsWith("data:")){const i=await qt(r.iconId);i&&(r.src=i)}if(r.highlightIconId)try{const i=await qt(r.highlightIconId);i&&(r.highlightSrc=i)}catch(i){console.warn("Failed to rehydrate highlight src",i)}}else if(r.type==="carousel"){const i=r.carouselConfig;if(i){if(i.frameHighlightId){const u=await qt(i.frameHighlightId);u&&(i.frameHighlight=u)}if(i.frameNormalId){const u=await qt(i.frameNormalId);u&&(i.frameNormal=u)}if(i.arrowLeftId){const u=await qt(i.arrowLeftId);u&&(i.arrowLeft=u)}if(i.arrowRightId){const u=await qt(i.arrowRightId);u&&(i.arrowRight=u)}}if(r.slides){for(const u of r.slides)if(u.iconId){const y=await qt(u.iconId);y&&(u.src=y)}}}}async function nr(){try{const n="lowcode-fonts",r="fonts",i=await new Promise((y,x)=>{const F=indexedDB.open(n);F.onsuccess=()=>{const j=F.result;if(j.objectStoreNames.contains(r))y(j);else{const A=j.version+1;j.close();const z=indexedDB.open(n,A);z.onupgradeneeded=()=>{const c=z.result;c.objectStoreNames.contains(r)||c.createObjectStore(r,{keyPath:"id"})},z.onsuccess=()=>y(z.result),z.onerror=()=>x(z.error)}},F.onerror=()=>x(F.error)}),u=await new Promise((y,x)=>{const F=i.transaction(r,"readonly").objectStore(r).getAll();F.onsuccess=()=>y(F.result),F.onerror=()=>x(F.error)});if(u.length>0){let y=document.querySelector("style[data-font-lib]");y||(y=document.createElement("style"),y.setAttribute("data-font-lib",""),document.head.appendChild(y));const x=[],F=[],j=S.value,A=j?u.filter(c=>c.projectId===j):u.filter(c=>!c.projectId);for(const c of A){const p=new Blob([c.buffer],{type:c.mime}),T=URL.createObjectURL(p),H=c.name;F.push(H),x.push(`@font-face { font-family: '${H}'; src: url('${T}'); font-weight: normal; font-style: normal; }`)}y.textContent=x.join(`
`);const z=new Set([...ze.value,...F]);ze.value=Array.from(z)}}catch(n){console.warn("字体库初始化失败：",n)}}function Gl(n){const r=new Set,i=new Set,u=y=>{y.forEach(x=>{if((!x.id||r.has(x.id))&&(x.id=`${x.type||"el"}-${Date.now()}-${Math.random().toString(36).slice(2,8)}`),r.add(x.id),x.elementId){const F=x.elementId.trim();if(i.has(F)){let j=2,A=`${F}_${j}`;for(;i.has(A);)j++,A=`${F}_${j}`;x.elementId=A}i.add(x.elementId)}(x.type==="group"||x.type==="container")&&Array.isArray(x.children)&&u(x.children)})};u(n)}fr(async()=>{await P(),await nr(),await rr();try{if(a.isComponent&&S.value){const n=String(S.value);if(!await St.getComponent(n)){const r={id:n,name:ue.value||"未命名组件",description:"",tags:[],elements:[],config:$,usageCount:0,createdAt:Date.now(),updatedAt:Date.now()};await St.saveComponent(JSON.parse(JSON.stringify(r)))}}}catch(n){console.warn("预创建组件记录失败：",n)}try{const n=await Dl(vl());if(n){n.config&&Object.assign($,n.config),Array.isArray(n.elements)&&(M.value=n.elements),typeof n.exportName=="string"&&n.exportName&&(ue.value=n.exportName),await Bl();try{M.value=M.value.map(r=>{if(r.type==="chart"&&r.style&&typeof r.style.border=="string"&&r.style.border.includes("dashed")){const i={...r,style:{...r.style}};return delete i.style.border,i}return r})}catch{}n.version!==gr&&Gl(M.value)}else{const r=localStorage.getItem(Ol());if(r){const i=JSON.parse(r);i&&i.config&&Object.assign($,i.config),Array.isArray(i==null?void 0:i.elements)&&(M.value=i.elements),typeof(i==null?void 0:i.exportName)=="string"&&i.exportName&&(ue.value=i.exportName),await Bl();try{M.value=M.value.map(u=>{if(u.type==="chart"&&u.style&&typeof u.style.border=="string"&&u.style.border.includes("dashed")){const y={...u,style:{...u.style}};return delete y.style.border,y}return u})}catch{}Gl(M.value),await wl(vl(),{config:$,elements:M.value,exportName:ue.value,version:gr});try{localStorage.removeItem(Ol())}catch{}}}}catch(n){console.warn("恢复失败：",n)}Te(),q.value=JSON.parse(JSON.stringify(M.value)),window.addEventListener("keydown",Je),window.addEventListener("keyup",t)}),yr(()=>{window.removeEventListener("keydown",Je),window.removeEventListener("keyup",t),Ll()});let Tl=0;async function or(n,r){var i,u,y;try{const x=$.width||n.clientWidth||800,F=$.height||n.clientHeight||600,j=(i=r==null?void 0:r.maxWidth)!=null?i:420,A=(u=r==null?void 0:r.scale)!=null?u:Math.min(1,j/x),z=(y=r==null?void 0:r.quality)!=null?y:.85,c=n.cloneNode(!0);c.style.transform="none",c.style.transformOrigin="top left",c.style.width=`${x}px`,c.style.height=`${F}px`;const p=new XMLSerializer().serializeToString(c),T=`<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" width="${Math.round(x*A)}" height="${Math.round(F*A)}">
  <foreignObject width="100%" height="100%">
    <div xmlns="http://www.w3.org/1999/xhtml" style="transform: scale(${A}); transform-origin: top left;">${p}</div>
  </foreignObject>
</svg>`,H="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(T),de=new Image;return await new Promise(ve=>{de.onload=()=>{try{const Ae=document.createElement("canvas");Ae.width=de.width,Ae.height=de.height;const ce=Ae.getContext("2d");if(!ce)return ve(null);ce.drawImage(de,0,0);const we=Ae.toDataURL("image/jpeg",z);ve(we)}catch{ve(null)}},de.onerror=()=>ve(null),de.src=H})}catch{return null}}async function Ll(){try{const n=Date.now();if(n-Tl<5e3||(Tl=n,!a.isComponent||!S.value))return;const r=pl.value;if(!r)return;const i=r.firstElementChild;if(!i)return;const u=await or(i,{maxWidth:420,quality:.8});if(!u)return;const y=String(S.value),x=await St.getComponent(y);if(!x)return;const F={...x,previewDataUrl:u,updatedAt:Date.now()};await St.saveComponent(JSON.parse(JSON.stringify(F)))}catch(n){console.warn("生成缩略图失败：",n)}}return(n,r)=>{var i,u,y,x,F,j,A,z;return C(),N(Wt,null,[l("div",E0,[r[38]||(r[38]=dr('<div class="absolute inset-0 opacity-10" data-v-f63100a7><div class="absolute top-10 left-10 w-32 h-32 border border-cyan-400 rotate-45 animate-pulse" data-v-f63100a7></div><div class="absolute top-32 right-20 w-24 h-24 border border-purple-400 rounded-full animate-spin" style="animation-duration:20s;" data-v-f63100a7></div><div class="absolute bottom-20 left-1/4 w-40 h-40 border border-blue-400 rotate-12 animate-bounce" style="animation-duration:3s;" data-v-f63100a7></div><div class="absolute bottom-32 right-1/3 w-28 h-28 border border-green-400 rounded-lg rotate-45 animate-pulse" style="animation-delay:1s;" data-v-f63100a7></div></div><div class="absolute inset-0 opacity-5" style="background-image:linear-gradient(cyan 1px, transparent 1px), linear-gradient(90deg, cyan 1px, transparent 1px);background-size:50px 50px;" data-v-f63100a7></div>',2)),l("div",k0,[el.value?(C(),Pl(Zs,{key:0,exportName:ue.value,config:$,fontLibrary:ze.value,spacingEnabled:Lt.value,alignmentEnabled:Ut.value,"onUpdate:exportName":r[0]||(r[0]=c=>ue.value=c),"onUpdate:configWidth":r[1]||(r[1]=c=>$.width=c),"onUpdate:configHeight":r[2]||(r[2]=c=>$.height=c),"onUpdate:backgroundColor":r[3]||(r[3]=c=>$.backgroundColor=c),"onUpdate:globalFontFamily":r[4]||(r[4]=c=>$.globalFontFamily=c),"onUpdate:globalFontSize":r[5]||(r[5]=c=>$.globalFontSize=c),"onUpdate:globalColor":r[6]||(r[6]=c=>$.globalColor=c),"onUpdate:spacingEnabled":r[7]||(r[7]=c=>Lt.value=c),"onUpdate:alignmentEnabled":r[8]||(r[8]=c=>Ut.value=c),onBackgroundFileChange:Nt,onOpenPreview:le,onDownloadByFormat:r[9]||(r[9]=c=>Wl(c)),onDownloadAllFormats:Hl,onResetCanvas:Jl,elements:M.value,selectedId:g.value,onSelectElement:r[10]||(r[10]=c=>We(c)),onReorderTopElements:r[11]||(r[11]=c=>gt(c.from,c.to))},null,8,["exportName","config","fontLibrary","spacingEnabled","alignmentEnabled","elements","selectedId"])):Y("",!0),l("div",S0,[l("div",C0,[l("div",M0,[l("div",I0,[l("button",{onMouseenter:Xl,onMouseleave:Zl,onClick:r[12]||(r[12]=c=>nl.value=!0),class:"px-4 py-2 bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-500 hover:to-blue-500 text-white rounded-lg font-medium transition-all duration-200 transform hover:scale-105 shadow-lg shadow-cyan-500/25"}," 插入元素 ",32),fe(l("div",{onMouseenter:Ql,onMouseleave:er,class:"absolute left-0 top-full w-72 p-3 bg-gray-900/95 backdrop-blur-md border border-cyan-500/40 rounded-xl shadow-2xl z-50"},[l("div",N0,[l("button",{onClick:r[13]||(r[13]=c=>Z("text")),class:"px-3 py-2 text-xs bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-500 hover:to-blue-500 text-white rounded"},"文本"),l("button",{onClick:r[14]||(r[14]=c=>Z("arc-text")),class:"px-3 py-2 text-xs bg-gradient-to-r from-cyan-600 to-indigo-600 hover:from-cyan-500 hover:to-indigo-500 text-white rounded"},"环绕文字"),l("button",{onClick:r[15]||(r[15]=c=>Z("image")),class:"px-3 py-2 text-xs bg-gradient-to-r from-emerald-600 to-green-600 hover:from-emerald-500 hover:to-green-500 text-white rounded"},"图片"),l("button",{onClick:r[16]||(r[16]=c=>Z("chart")),class:"px-3 py-2 text-xs bg-gradient-to-r from-orange-600 to-red-600 hover:from-orange-500 hover:to-red-500 text-white rounded"},"图表"),l("button",{onClick:r[17]||(r[17]=c=>Z("carousel")),class:"px-3 py-2 text-xs bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500 text-white rounded"},"轮播图"),l("button",{onClick:r[18]||(r[18]=c=>Z("line")),class:"px-3 py-2 text-xs bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-500 hover:to-purple-500 text-white rounded"},"线条"),l("button",{onClick:r[19]||(r[19]=c=>Z("container")),class:"px-3 py-2 text-xs bg-gradient-to-r from-slate-600 to-gray-700 hover:from-slate-500 hover:to-gray-600 text-white rounded col-span-2"},"容器")])],544),[[Wo,nl.value]])]),l("button",{onClick:r[20]||(r[20]=c=>Ht.value=!0),class:"px-4 py-2 bg-gradient-to-r from-gray-600 to-slate-700 hover:from-gray-500 hover:to-slate-600 text-white rounded-lg font-medium transition-all duration-200 transform hover:scale-105 shadow-lg shadow-gray-500/25"}," 隐藏元素 "),l("button",{onClick:Kl,class:"px-4 py-2 bg-gradient-to-r from-pink-600 to-fuchsia-600 hover:from-pink-500 hover:to-fuchsia-500 text-white rounded-lg font-medium transition-all duration-200 transform hover:scale-105 shadow-lg shadow-pink-500/25"}," 插入组件 "),r[35]||(r[35]=l("div",{class:"w-px h-6 bg-purple-500/30 mx-1 self-center"},null,-1)),l("button",{onClick:dt,disabled:L.value.length===0,class:"px-3 py-2 bg-gray-700/50 hover:bg-gray-600/50 disabled:opacity-30 disabled:cursor-not-allowed rounded-lg text-gray-200 transition-all duration-200",title:"撤销 (Meta+Z)"},[...r[33]||(r[33]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[l("path",{d:"M3 7v6h6"}),l("path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13"})],-1)])],8,j0),l("button",{onClick:Re,disabled:Oe.value.length===0,class:"px-3 py-2 bg-gray-700/50 hover:bg-gray-600/50 disabled:opacity-30 disabled:cursor-not-allowed rounded-lg text-gray-200 transition-all duration-200",title:"重做 (Meta+Shift+Z)"},[...r[34]||(r[34]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[l("path",{d:"M21 7v6h-6"}),l("path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3L21 13"})],-1)])],8,F0)]),l("div",A0,[l("button",{onClick:ql,class:"p-2 bg-gray-700/50 hover:bg-gray-600/50 rounded-lg transition-colors duration-200"},[...r[36]||(r[36]=[l("span",{class:"text-gray-300"},"-",-1)])]),l("span",z0,it(Math.round(Et.value*100))+"%",1),l("button",{onClick:_l,class:"p-2 bg-gray-700/50 hover:bg-gray-600/50 rounded-lg transition-colors duration-200"},[...r[37]||(r[37]=[l("span",{class:"text-gray-300"},"+",-1)])]),l("button",{onClick:Il,class:"px-3 py-2 bg-gray-700/50 hover:bg-gray-600/50 rounded-lg text-xs text-gray-300 transition-colors duration-200"}," 适应 "),l("button",{onClick:r[21]||(r[21]=c=>el.value=!el.value),class:Ne(["px-3 py-2 bg-gray-700/50 hover:bg-gray-600/50 rounded-lg text-xs text-gray-300 transition-colors duration-200 flex items-center gap-1",{"text-purple-400 ring-1 ring-purple-500/50 bg-purple-500/10":el.value}])},[l("span",null,it(el.value?"隐藏设置":"画布设置"),1)],2)])]),l("div",{ref_key:"canvasScrollRef",ref:pl,class:"flex-1 overflow-auto bg-gray-800/30 p-4 min-h-0 custom-scrollbar"},[l("div",{ref_key:"canvasContentRef",ref:cl,class:"relative border border-gray-600/50 bg-gray-100 shadow-2xl mx-auto",onMousedown:br(ut,["self"]),style:Bt({width:`${$.width}px`,height:`${$.height}px`,backgroundColor:$.backgroundColor||"transparent",backgroundImage:$.backgroundUrl?`url(${$.backgroundUrl})`:"none",backgroundSize:"cover",backgroundPosition:"center",transform:`scale(${Et.value})`,transformOrigin:"top left"})},[oe.value?(C(),N("div",O0,[Qe.value.left?(C(),N("div",{key:0,class:"absolute top-0 bottom-0 border-l border-dashed border-orange-400/70",style:Bt([{"border-width":"0.5px"},{left:`${$e.value.left}px`}])},null,4)):Y("",!0),Qe.value.right?(C(),N("div",{key:1,class:"absolute top-0 bottom-0 border-l border-dashed border-orange-400/70",style:Bt([{"border-width":"0.5px"},{left:`${$e.value.right}px`}])},null,4)):Y("",!0),Qe.value.top?(C(),N("div",{key:2,class:"absolute left-0 right-0 border-t border-dashed border-orange-400/70",style:Bt([{"border-width":"0.5px"},{top:`${$e.value.top}px`}])},null,4)):Y("",!0),Qe.value.bottom?(C(),N("div",{key:3,class:"absolute left-0 right-0 border-t border-dashed border-orange-400/70",style:Bt([{"border-width":"0.5px"},{top:`${$e.value.bottom}px`}])},null,4)):Y("",!0),Qe.value.centerV?(C(),N("div",{key:4,class:"absolute top-0 bottom-0 border-l border-dashed border-blue-400/60",style:Bt([{"border-width":"0.5px"},{left:`${$e.value.centerX}px`}])},null,4)):Y("",!0),Qe.value.centerH?(C(),N("div",{key:5,class:"absolute left-0 right-0 border-t border-dashed border-blue-400/60",style:Bt([{"border-width":"0.5px"},{top:`${$e.value.centerY}px`}])},null,4)):Y("",!0)])):Y("",!0),Lt.value&&(Ee.value.left||Ee.value.right||Ee.value.up||Ee.value.down)?(C(),N("div",D0,[Ee.value.left&&yt.value!=="left"?(C(),N("div",{key:0,class:"absolute text-[10px] px-1.5 py-0.5 rounded bg-gray-900/80 border border-orange-400/60 text-orange-200 cursor-pointer pointer-events-auto",style:Bt({left:`${Ee.value.left.x-14}px`,top:`${Ee.value.left.y-14}px`}),onDblclick:r[22]||(r[22]=c=>ll("left"))},it(Ee.value.left.gap)+"px ",37)):Y("",!0),Ee.value.right&&yt.value!=="right"?(C(),N("div",{key:1,class:"absolute text-[10px] px-1.5 py-0.5 rounded bg-gray-900/80 border border-orange-400/60 text-orange-200 cursor-pointer pointer-events-auto",style:Bt({left:`${Ee.value.right.x-14}px`,top:`${Ee.value.right.y-14}px`}),onDblclick:r[23]||(r[23]=c=>ll("right"))},it(Ee.value.right.gap)+"px ",37)):Y("",!0),Ee.value.up&&yt.value!=="up"?(C(),N("div",{key:2,class:"absolute text-[10px] px-1.5 py-0.5 rounded bg-gray-900/80 border border-orange-400/60 text-orange-200 cursor-pointer pointer-events-auto",style:Bt({left:`${Ee.value.up.x-14}px`,top:`${Ee.value.up.y-18}px`}),onDblclick:r[24]||(r[24]=c=>ll("up"))},it(Ee.value.up.gap)+"px ",37)):Y("",!0),Ee.value.down&&yt.value!=="down"?(C(),N("div",{key:3,class:"absolute text-[10px] px-1.5 py-0.5 rounded bg-gray-900/80 border border-orange-400/60 text-orange-200 cursor-pointer pointer-events-auto",style:Bt({left:`${Ee.value.down.x-14}px`,top:`${Ee.value.down.y-18}px`}),onDblclick:r[25]||(r[25]=c=>ll("down"))},it(Ee.value.down.gap)+"px ",37)):Y("",!0),yt.value==="left"?fe((C(),N("input",{key:4,type:"number",class:"absolute w-14 h-6 px-1 text-[10px] rounded bg-gray-900/90 border border-orange-400/80 text-orange-100 focus:outline-none pointer-events-auto",style:Bt({left:`${(((i=Ee.value.left)==null?void 0:i.x)||0)-28}px`,top:`${(((u=Ee.value.left)==null?void 0:u.y)||0)-14}px`}),"onUpdate:modelValue":r[26]||(r[26]=c=>bt.value=c),onKeydown:ar(rl,["enter"])},null,36)),[[Me,bt.value,void 0,{number:!0}]]):Y("",!0),yt.value==="right"?fe((C(),N("input",{key:5,type:"number",class:"absolute w-14 h-6 px-1 text-[10px] rounded bg-gray-900/90 border border-orange-400/80 text-orange-100 focus:outline-none pointer-events-auto",style:Bt({left:`${(((y=Ee.value.right)==null?void 0:y.x)||0)-28}px`,top:`${(((x=Ee.value.right)==null?void 0:x.y)||0)-14}px`}),"onUpdate:modelValue":r[27]||(r[27]=c=>bt.value=c),onKeydown:ar(rl,["enter"])},null,36)),[[Me,bt.value,void 0,{number:!0}]]):Y("",!0),yt.value==="up"?fe((C(),N("input",{key:6,type:"number",class:"absolute w-14 h-6 px-1 text-[10px] rounded bg-gray-900/90 border border-orange-400/80 text-orange-100 focus:outline-none pointer-events-auto",style:Bt({left:`${(((F=Ee.value.up)==null?void 0:F.x)||0)-28}px`,top:`${(((j=Ee.value.up)==null?void 0:j.y)||0)-18}px`}),"onUpdate:modelValue":r[28]||(r[28]=c=>bt.value=c),onKeydown:ar(rl,["enter"])},null,36)),[[Me,bt.value,void 0,{number:!0}]]):Y("",!0),yt.value==="down"?fe((C(),N("input",{key:7,type:"number",class:"absolute w-14 h-6 px-1 text-[10px] rounded bg-gray-900/90 border border-orange-400/80 text-orange-100 focus:outline-none pointer-events-auto",style:Bt({left:`${(((A=Ee.value.down)==null?void 0:A.x)||0)-28}px`,top:`${(((z=Ee.value.down)==null?void 0:z.y)||0)-18}px`}),"onUpdate:modelValue":r[29]||(r[29]=c=>bt.value=c),onKeydown:ar(rl,["enter"])},null,36)),[[Me,bt.value,void 0,{number:!0}]]):Y("",!0)])):Y("",!0),(C(!0),N(Wt,null,Kt(M.value,c=>(C(),Pl(_o,{key:c.id,element:c,selected:c.id===g.value,"selected-id":g.value,config:$,zoom:Et.value,dbMap:ft.value,"metrics-map":U.value,onSelect:Pe,"onUpdate:position":Q,"onUpdate:size":nt,onShowGuidelines:sl,onHideGuidelines:tl,onReportMetrics:Gt,onDragEnd:yl},null,8,["element","selected","selected-id","config","zoom","dbMap","metrics-map"]))),128))],36)],512)]),Ct($0,{selectedEl:_e.value,selectedParentIsFlex:vt.value,config:$,fontLibrary:ze.value,fontSizeLibrary:Ge.value,fontWeightOptions:je.value,fontStyleOptions:se.value,databaseObjects:m.value,dbMap:ft.value,iconLibrary:Nl.value,defaultChartOption:Mt,safeHex:De,initCustomClassSkeleton:It,refreshAllCustomClassCss:Te,removeCustomClassCssForElement:Ce,getIconDataUrlById:qt,onDuplicateSelected:Yl,onRemoveSelected:Be,onSaveSelectedAsComponent:Jt,onPositionChanged:ae},null,8,["selectedEl","selectedParentIsFlex","config","fontLibrary","fontSizeLibrary","fontWeightOptions","fontStyleOptions","databaseObjects","dbMap","iconLibrary"])])]),bl.value?(C(),N("div",B0,[l("div",{class:"absolute inset-0 bg-black/60",onClick:zl}),l("div",G0,[l("div",{class:"flex items-center justify-between p-4 border-b border-fuchsia-500/30 bg-gradient-to-r from-fuchsia-600/20 to-pink-600/20"},[r[39]||(r[39]=l("h3",{class:"text-lg font-bold text-pink-300"},"插入组件",-1)),l("button",{onClick:zl,class:"px-3 py-1 bg-gray-700/60 hover:bg-gray-600/60 rounded text-sm text-gray-200"},"关闭")]),l("div",T0,[l("div",L0,[fe(l("input",{"onUpdate:modelValue":r[30]||(r[30]=c=>ml.value=c),type:"text",placeholder:"搜索名称、描述或标签",class:"flex-1 px-3 py-2 bg-gray-800/60 border border-fuchsia-500/30 rounded-lg text-gray-100 placeholder-gray-400 focus:border-fuchsia-400 focus:ring-1 focus:ring-fuchsia-400 focus:outline-none transition-all duration-200"},null,512),[[Me,ml.value]]),l("button",{onClick:Al,class:"px-3 py-2 bg-pink-600/70 hover:bg-pink-600 text-white rounded"},"刷新")]),hl.value?(C(),N("div",U0,"正在加载组件...")):(C(),N("div",V0,[Fl.value.length===0?(C(),N("div",R0,"暂无匹配的组件")):(C(),N("div",P0,[(C(!0),N(Wt,null,Kt(Fl.value,c=>(C(),N("div",{key:c.id,class:"bg-gray-800/60 border border-pink-500/20 rounded-lg overflow-hidden"},[l("div",W0,[c.previewDataUrl?(C(),N("img",{key:0,src:c.previewDataUrl,alt:"预览",class:"max-w-full max-h-full object-contain"},null,8,H0)):(C(),N("div",J0,"无预览"))]),l("div",_0,[l("div",q0,[l("div",{class:"text-sm text-gray-100 font-medium truncate",title:c.name},it(c.name),9,Y0),l("div",K0,it(c.usageCount||0)+" 次",1)]),l("div",X0,[(C(!0),N(Wt,null,Kt(c.tags||[],p=>(C(),N("span",{key:p,class:"px-1.5 py-0.5 text-[10px] rounded bg-pink-600/30 text-pink-200"},it(p),1))),128))]),l("div",Z0,[l("button",{onClick:p=>lr(c),class:"w-full px-3 py-1.5 bg-gradient-to-r from-pink-600 to-fuchsia-600 hover:from-pink-500 hover:to-fuchsia-500 text-white rounded text-sm transition"}," 插入到画布 ",8,Q0)])])]))),128))]))]))])])])):Y("",!0),Ht.value?(C(),N("div",ep,[l("div",{class:"absolute inset-0 bg-black/60",onClick:r[31]||(r[31]=c=>Ht.value=!1)}),l("div",tp,[l("div",lp,[r[40]||(r[40]=l("h3",{class:"text-lg font-bold text-cyan-300"},"隐藏元素列表",-1)),l("button",{onClick:r[32]||(r[32]=c=>Ht.value=!1),class:"px-3 py-1 bg-gray-700/60 hover:bg-gray-600/60 rounded text-sm text-gray-200"},"关闭")]),l("div",rp,[ul.value.length===0?(C(),N("div",np,"暂无隐藏元素")):(C(),N("div",op,[(C(!0),N(Wt,null,Kt(ul.value,c=>(C(),N("div",{key:c.id,class:"flex items-center justify-between bg-gray-800/60 border border-cyan-500/20 rounded-lg px-3 py-2"},[l("div",{class:"text-sm text-gray-100 truncate",title:c.hiddenLabel||c.className||c.id},it(c.hiddenLabel||c.className||c.id),9,sp),l("button",{onClick:p=>gl(c.id),class:"px-3 py-1 bg-cyan-600/70 hover:bg-cyan-600 text-white rounded text-sm"},"取消隐藏并定位",8,ap)]))),128))]))])])])):Y("",!0)],64)}}}),dp=xr(ip,[["__scopeId","data-v-f63100a7"]]),up=dl({__name:"index",props:{projectId:{},currentProject:{},isComponent:{type:Boolean}},setup(f){const a=f;return(e,d)=>(C(),Pl(dp,{"project-id":a.projectId,"current-project":a.currentProject,"is-component":a.isComponent},null,8,["project-id","current-project","is-component"]))}}),mp=up;export{mp as default};
