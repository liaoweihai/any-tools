import{C as Ae,E as c,I as lt,O as he,P as oe,R as C,S as ae,_ as it,c as O,ct as ee,d as T,f as m,h as ot,k as at,l as k,lt as se,o as K,st as te,u as Le,w as Be}from"./codemirror-B25QCqWr.js";import{h as re,p as st}from"./vendor-vue-C93_ecI2.js";import{t as rt}from"./index-BuLERHzw.js";import{t as ut}from"./echarts-xBohgwka.js";var ct=["data-el-id","data-box-id"],dt={key:0,class:"absolute -inset-1 bg-gradient-to-r from-cyan-400/20 to-blue-500/20 rounded-lg blur-sm -z-10 pointer-events-none"},ft={class:"relative z-10 w-full h-full"},mt={key:0,class:"relative w-full h-full"},ht={key:1,class:"relative w-full h-full"},yt={key:0},vt={key:3,class:"w-full h-full relative overflow-hidden group"},gt={key:0,class:"absolute inset-0 z-0 pointer-events-none"},bt=["src"],wt={key:1,class:"absolute inset-0 flex items-center justify-center z-10"},xt={class:"relative w-full h-full flex items-center justify-center"},pt=["src"],St={key:0,class:"absolute inset-0 pointer-events-none flex items-center justify-center"},Mt=["src"],kt=["src"],zt=["src"],Ct=["src"],Nt=["width","height"],Lt=["id","d"],Bt=["href","startOffset","text-anchor"],jt=["id"],$t=["id"],Ft={key:0,class:"w-full h-full flex items-center justify-center text-xs text-gray-400 pointer-events-none"},It=["width","height"],Ot=["x1","y1","x2","y2","stroke","stroke-width","stroke-dasharray"],At={key:1,class:"absolute inset-0 rounded-lg pointer-events-none",style:{background:"linear-gradient(45deg, transparent 30%, rgba(6, 182, 212, 0.1) 50%, transparent 70%)","background-size":"200% 200%",animation:"tech-border 2s linear infinite"}},Tt={key:2,class:"absolute -top-2 -right-2 w-4 h-4 bg-cyan-400 rounded-full cursor-move opacity-80 hover:opacity-100",style:{border:"0.5px solid #111827"}},Dt=it({name:"DraggableBox",__name:"DraggableBox",props:{element:{},selected:{type:Boolean},config:{},zoom:{},dbMap:{},metricsMap:{},preview:{type:Boolean},selectedId:{},parentOffset:{},parentSize:{},parentIsFlex:{type:Boolean}},emits:["update:position","update:size","select","show-guidelines","hide-guidelines","report-metrics","drag-end"],setup(l,{emit:Te}){const e=l,x=Te;function De(t){var u,g,d,b;if(e.element.type!=="group")return!1;const n=e.element.width||0,o=e.element.height||0,i=t.width||0,a=t.height||0,s=Number((g=(u=t.left)!=null?u:t.x)!=null?g:0),r=Number((b=(d=t.top)!=null?d:t.y)!=null?b:0);return t.type==="image"&&n>0&&o>0&&i===n&&a===o&&s===0&&r===0}const Y=C(null),pe=C(null);let L=null;const ne=C(!1),ye=C(!1),ue=C(0),ce=C(0),H=C(0),G=C(0),de=C({x:0,y:0}),B=C(null),j=C(null),U=C(null),le=C(0),ie=C(0),Q=C(null);let E=null;function je(t){var n;return!t||!t.colors||t.colors.length<2?null:`linear-gradient(${(n=t.angle)!=null?n:0}deg, ${t.colors.join(", ")})`}function Se(){var t,n,o;if(e.element.type==="text"&&e.element.autoSize!==!1&&Y.value){const i=Y.value.getBoundingClientRect(),a=(t=e.zoom)!=null?t:1;return{w:Math.max(1,i.width/a),h:Math.max(1,i.height/a)}}return{w:(n=e.element.width)!=null?n:1,h:(o=e.element.height)!=null?o:1}}function Xe(t){if(e.preview)return;t.preventDefault(),x("select",e.element.id);const n=e.element.position||(e.parentIsFlex?"static":"absolute");ne.value=!0,ye.value=!1,ue.value=t.clientX,ce.value=t.clientY,n==="static"&&Y.value?(H.value=Y.value.offsetLeft,G.value=Y.value.offsetTop):(H.value=e.element.left,G.value=e.element.top),de.value={x:0,y:0},window.addEventListener("mousemove",Me,{passive:!1}),window.addEventListener("mouseup",ve)}function Re(t){e.preview||(t.stopPropagation(),Xe(t))}function Ye(t){e.preview||t.stopPropagation()}function Me(t){var V,J;if(U.value||!ne.value)return;if(!ye.value){if(Math.abs(t.clientX-ue.value)<3&&Math.abs(t.clientY-ce.value)<3)return;ye.value=!0}t.preventDefault();const n=(t.clientX-ue.value)/((V=e.zoom)!=null?V:1),o=(t.clientY-ce.value)/((J=e.zoom)!=null?J:1);de.value={x:n,y:o};let i=H.value+n,a=G.value+o;const s=Se(),r=!!e.parentSize,u=5,g=e.config.width,d=e.config.height;if(!r){Math.abs(i)<u&&(i=0),Math.abs(a)<u&&(a=0),Math.abs(i+s.w-g)<u&&(i=g-s.w),Math.abs(a+s.h-d)<u&&(a=d-s.h);const y=g/2,w=d/2,D=i+s.w/2,X=a+s.h/2;Math.abs(D-y)<u&&(i=y-s.w/2),Math.abs(X-w)<u&&(a=w-s.h/2)}const b=e.metricsMap?Object.values(e.metricsMap).filter(y=>y.id!==e.element.id):[],p=1.5,S=4;if(B.value){const y=i+s.w/2;let w=0;B.value.type==="left"?w=Math.abs(i-B.value.base):B.value.type==="right"?w=Math.abs(i+s.w-B.value.base):w=Math.abs(y-B.value.base),w<=S?B.value.type==="left"?i=B.value.base:B.value.type==="right"?i=B.value.base-s.w:i=B.value.base-s.w/2:B.value=null}if(j.value){const y=a+s.h/2;let w=0;j.value.type==="top"?w=Math.abs(a-j.value.base):j.value.type==="bottom"?w=Math.abs(a+s.h-j.value.base):w=Math.abs(y-j.value.base),w<=S?j.value.type==="top"?a=j.value.base:j.value.type==="bottom"?a=j.value.base-s.h:a=j.value.base-s.h/2:j.value=null}let v=null;for(const y of b){const w=Math.abs(i-y.left),D=Math.abs(i+s.w-y.right),X=Math.abs(i+s.w/2-y.centerX),P=[{type:"left",base:y.left,dist:w},{type:"right",base:y.right,dist:D},{type:"centerX",base:y.centerX,dist:X}];for(const R of P)(!v||R.dist<v.dist)&&(v=R)}v&&v.dist<=p&&(v.type==="left"?i=v.base:v.type==="right"?i=v.base-s.w:i=v.base-s.w/2,B.value={type:v.type,base:v.base});let h=null;for(const y of b){const w=Math.abs(a-y.top),D=Math.abs(a+s.h-y.bottom),X=Math.abs(a+s.h/2-y.centerY),P=[{type:"top",base:y.top,dist:w},{type:"bottom",base:y.bottom,dist:D},{type:"centerY",base:y.centerY,dist:X}];for(const R of P)(!h||R.dist<h.dist)&&(h=R)}h&&h.dist<=p&&(h.type==="top"?a=h.base:h.type==="bottom"?a=h.base-s.h:a=h.base-s.h/2,j.value={type:h.type,base:h.base}),r||(i=Math.max(0,Math.min(i,e.config.width-s.w)),a=Math.max(0,Math.min(a,e.config.height-s.h)));const M=r&&e.parentOffset?e.parentOffset.left:0,N=r&&e.parentOffset?e.parentOffset.top:0,$=i+M,F=a+N,I=i+s.w+M,W=a+s.h+N,Z=i+s.w/2+M,_=a+s.h/2+N;x("show-guidelines",{left:$,top:F,right:I,bottom:W,centerX:Z,centerY:_}),E&&cancelAnimationFrame(E),Q.value={id:e.element.id,left:Math.round(i),top:Math.round(a)},E=requestAnimationFrame(()=>{Q.value&&(x("update:position",Q.value),Q.value=null)})}function ve(){var t;if(ne.value&&ye.value){Q.value&&(x("update:position",Q.value),Q.value=null);const n=(t=Y.value)==null?void 0:t.getBoundingClientRect();n&&x("drag-end",{id:e.element.id,globalLeft:n.left,globalTop:n.top})}ne.value=!1,U.value=null,de.value={x:0,y:0},B.value=null,j.value=null,x("hide-guidelines"),E&&(cancelAnimationFrame(E),E=null),window.removeEventListener("mousemove",Me),window.removeEventListener("mouseup",ve),window.removeEventListener("mousemove",ze)}Ae(()=>{E&&(cancelAnimationFrame(E),E=null),window.removeEventListener("mousemove",Me),window.removeEventListener("mouseup",ve),window.removeEventListener("mousemove",ze),L&&(L.dispose(),L=null)});const fe=O(()=>e.element.type==="text"?e.element.autoSize!==!1:e.element.type==="image"?e.element.autoSize===!0:!1);function We(t){switch(t){case"left":return"flex-start";case"center":return"center";case"right":return"flex-end";case"justify":return"flex-start";default:return"flex-start"}}const Ee=O(()=>{var o,i,a,s,r,u,g,d,b,p,S,v,h;const t={color:((o=e.element.style)==null?void 0:o.color)||e.config.globalColor,fontFamily:((i=e.element.style)==null?void 0:i.fontFamily)||e.config.globalFontFamily,fontSize:`${(s=(a=e.element.style)==null?void 0:a.fontSize)!=null?s:e.config.globalFontSize}px`};((r=e.element.style)==null?void 0:r.letterSpacing)!==void 0&&e.element.style.letterSpacing!==null&&(t.letterSpacing=`${e.element.style.letterSpacing}px`),((u=e.element.style)==null?void 0:u.lineHeight)!==void 0&&(t.lineHeight=String(e.element.style.lineHeight)),(g=e.element.style)!=null&&g.fontStyle&&(t.fontStyle=e.element.style.fontStyle),(d=e.element.style)!=null&&d.fontWeight&&(t.fontWeight=e.element.style.fontWeight),(b=e.element.style)!=null&&b.textAlign&&(t.textAlign=e.element.style.textAlign),(p=e.element.style)!=null&&p.textDecoration&&(t.textDecoration=e.element.style.textDecoration),((S=e.element.style)==null?void 0:S.textOrientation)==="vertical"&&(t.writingMode="vertical-rl",t.textOrientation="upright"),(v=e.element.style)!=null&&v.textIndent&&(t.textIndent=String(e.element.style.textIndent));const n=je((h=e.element.style)==null?void 0:h.textGradient);return n&&(t.background=n,t.color="transparent",t["-webkit-background-clip"]="text",t["background-clip"]="text",t["-webkit-text-fill-color"]="transparent"),t}),Pe=O(()=>{var n;const t=(n=e.element.style)==null?void 0:n.display;return t==="flex"||t==="inline-flex"}),He=O(()=>{var g,d,b,p,S,v,h,M,N,$,F,I;const t=e.element.position,n=ne.value?"absolute":t||(e.parentIsFlex?"static":"absolute"),o={position:n,cursor:e.preview?((g=e.element.eventBinding)==null?void 0:g.enabled)&&((d=e.element.eventBinding)==null?void 0:d.cursor)||"default":"move",outline:e.preview?"none":e.selected?"0.5px solid #42b883":"0.5px solid #999",zIndex:`${(b=e.element.zIndex)!=null?b:1}`,boxSizing:"border-box"};ne.value?(o.left=`${H.value+de.value.x}px`,o.top=`${G.value+de.value.y}px`):n==="absolute"?(o.left=`${e.element.left}px`,o.top=`${e.element.top}px`):n==="relative"&&(e.element.left&&(o.left=`${e.element.left}px`),e.element.top&&(o.top=`${e.element.top}px`));const i=je((p=e.element.style)==null?void 0:p.backgroundGradient);i?o.background=i:o.background=((S=e.element.style)==null?void 0:S.backgroundColor)||"transparent",fe.value?o.display="inline-block":(o.width=`${(v=e.element.width)!=null?v:1}px`,o.height=`${(h=e.element.height)!=null?h:1}px`,o.display="block"),((M=e.element.style)==null?void 0:M.opacity)!==void 0&&(o.opacity=String(e.element.style.opacity));const a="1px dashed rgba(148,163,184,0.6)",s=(N=e.element.style)==null?void 0:N.border;s&&s!==a?o.border=s:e.element.type==="container"&&!e.preview?o.border=a:e.preview&&(o.border="none"),($=e.element.style)!=null&&$.borderRadius&&(o.borderRadius=e.element.style.borderRadius),(F=e.element.style)!=null&&F.boxShadow&&(o.boxShadow=String(e.element.style.boxShadow));const r=(I=e.element.style)==null?void 0:I.skewAngle,u=typeof r=="number"?r:Number(r);return!Number.isNaN(u)&&u!==0&&(o.transform=`skewX(${u}deg)`),o}),Ge=O(()=>e.preview?["select-none","border-none","outline-none"]:["cursor-move select-none transition-shadow duration-100","border-transparent hover:border-cyan-400/50","hover:shadow-lg hover:shadow-cyan-400/20","group",{"border-cyan-400 shadow-lg shadow-cyan-400/30 ring-2 ring-cyan-400/20":e.selected}]),Ue=O(()=>{var n;const t={...Ee.value,pointerEvents:e.preview?"auto":"none"};return fe.value?(t.display="flex",t.alignItems="center",t.justifyContent=We((n=e.element.style)==null?void 0:n.textAlign),t.whiteSpace="pre-wrap"):(t.display="block",t.whiteSpace="pre-wrap",t.wordBreak="break-word",t.overflow="hidden"),t}),qe=O(()=>{var n,o,i,a,s,r;const t={};return(n=e.element.style)!=null&&n.fontFamily&&(t.fontFamily=String(e.element.style.fontFamily)),((o=e.element.style)==null?void 0:o.fontSize)!==void 0&&(t.fontSize=`${e.element.style.fontSize}px`),(i=e.element.style)!=null&&i.color&&(t.fill=String(e.element.style.color)),((a=e.element.style)==null?void 0:a.letterSpacing)!==void 0&&(t.letterSpacing=`${e.element.style.letterSpacing}px`),(s=e.element.style)!=null&&s.fontWeight&&(t.fontWeight=String(e.element.style.fontWeight)),(r=e.element.style)!=null&&r.fontStyle&&(t.fontStyle=String(e.element.style.fontStyle)),t}),Ve=O(()=>{var M,N,$,F,I,W;const t=Math.max(1,Number((M=e.element.width)!=null?M:1)),n=Math.max(1,Number((N=e.element.height)!=null?N:1)),o=t/2,i=n/2,a=(($=e.element.style)==null?void 0:$.arcText)||{},s=Math.max(1,Number((F=a.radius)!=null?F:Math.min(t,n)/2-4)),r=Number((I=a.startAngle)!=null?I:0),u=Math.max(0,Number((W=a.sweepAngle)!=null?W:180)),g=a.clockwise!==!1,d=r*Math.PI/180,b=(r+u)*Math.PI/180,p=o+s*Math.cos(d),S=i+s*Math.sin(d),v=o+s*Math.cos(b),h=i+s*Math.sin(b);return`M ${p} ${S} A ${s} ${s} 0 ${u>180?1:0} ${g?1:0} ${v} ${h}`}),Je=O(()=>{var n;const t=((n=e.element.style)==null?void 0:n.textAlign)||"center";return t==="left"?"0%":t==="right"?"100%":"50%"}),Ke=O(()=>{var n;const t=((n=e.element.style)==null?void 0:n.textAlign)||"center";return t==="left"?"start":t==="right"?"end":"middle"});function ke(){var b,p,S;const t=(b=e.zoom)!=null?b:1,n=Y.value?Y.value.getBoundingClientRect():null,o=n?Math.max(1,n.width/t):(p=e.element.width)!=null?p:1,i=n?Math.max(1,n.height/t):(S=e.element.height)!=null?S:1,a=e.element.left,s=e.element.top,r=a+o,u=s+i,g=a+o/2,d=s+i/2;x("report-metrics",{id:e.element.id,left:a,top:s,width:o,height:i,right:r,bottom:u,centerX:g,centerY:d})}Be(()=>{ae(()=>ke())}),oe(()=>[e.element.left,e.element.top,e.element.width,e.element.height],()=>{ae(()=>ke())});function $e(t,n){if(!t||!n)return;const o=n.replace(/\[(\d+)\]/g,".$1").split(".").filter(Boolean);let i=t;for(const a of o){if(i==null)return;i=i[Number.isInteger(Number(a))?Number(a):a]}return i}const ge=O(()=>{var u,g;const t=d=>d.replace(/\\n/g,`
`);if(e.element.type!=="text"){const d=e.element.text;return d==null?"":t(String(d))}const n=e.element.dynamic,o=(u=e.element.text)!=null?u:"";if(!n||!n.enabled)return t(String(o));const i=n.objectName||"",a=n.propertyPath||"";if(!i||!a)return t(String(o));const s=(g=e.dbMap)==null?void 0:g[i];if(!s)return t(String(o));const r=$e(s,a);if(r==null)return t(String(o));if(typeof r=="string")return t(r);if(typeof r=="number"||typeof r=="boolean")return String(r);try{return JSON.stringify(r)}catch{return t(String(o))}});function Qe(t){var o;const n=i=>i.replace(/\\n/g,`
`);if(t.dynamic&&t.dynamicObj&&t.dynamicPath){const i=$e((o=e.dbMap)==null?void 0:o[t.dynamicObj],t.dynamicPath);return i!=null?n(String(i)):n(t.text||"")}return n(t.text||"")}function Ze(t){const n={};return t.style&&(t.style.color&&(n.color=t.style.color),t.style.fontSize&&(n.fontSize=`${t.style.fontSize}px`),t.style.fontWeight&&(n.fontWeight=String(t.style.fontWeight)),t.style.fontFamily&&(n.fontFamily=t.style.fontFamily),t.style.textDecoration&&(n.textDecoration=t.style.textDecoration)),n}const Fe=O(()=>{var I,W,Z,_,V,J,y,w,D,X,P,R,f;const t=String(ge.value||""),n=(I=e.element.style)==null?void 0:I.textWave,o=!!((W=e.element.style)!=null&&W.skewFlowEnabled),i=(Z=e.element.style)==null?void 0:Z.skewAngle,a=typeof i=="number"?i:Number(i);if((!n||!n.enabled)&&(!o||Number.isNaN(a)||a===0))return null;const s=((_=e.element.style)==null?void 0:_.textOrientation)||"horizontal",r=Number((J=(V=e.element.style)==null?void 0:V.fontSize)!=null?J:e.config.globalFontSize),u=Number((w=(y=e.element.style)==null?void 0:y.letterSpacing)!=null?w:0),g=Number((X=(D=e.element.style)==null?void 0:D.lineHeight)!=null?X:Math.round(r*1.2)),d=Math.tan(a*Math.PI/180),b=Math.max(1,Math.round(r*.6+u)),p=Math.max(1,Math.round(g)),S=Number((P=n==null?void 0:n.amplitude)!=null?P:8),v=Number((R=n==null?void 0:n.frequency)!=null?R:.5),h=Number((f=n==null?void 0:n.phase)!=null?f:0),M=[];let N=0,$=0,F=0;for(const z of t){if(z===`
`){M.push({type:"br"}),$=0,F++;continue}let A=0,Ce=0;if(o&&!Number.isNaN(a)&&a!==0)if(s==="horizontal"){const Ne=$*b;Ce+=Math.round(d*Ne)}else{const Ne=F*p;A+=Math.round(d*Ne)}n&&n.enabled&&(Ce+=Math.round(S*Math.sin(N*v+h))),M.push({type:"char",ch:z,style:{display:"inline-block",transform:`translate(${A}px, ${Ce}px)`}}),N++,$++}return M});oe(ge,()=>{ae(()=>ke())});function be(t,n){var o,i;fe.value||(U.value=t,ue.value=n.clientX,ce.value=n.clientY,H.value=e.element.left,G.value=e.element.top,le.value=(o=e.element.width)!=null?o:Se().w,ie.value=(i=e.element.height)!=null?i:Se().h,window.addEventListener("mousemove",ze),window.addEventListener("mouseup",ve))}function ze(t){var h,M;if(!U.value)return;const n=(t.clientX-ue.value)/((h=e.zoom)!=null?h:1),o=(t.clientY-ce.value)/((M=e.zoom)!=null?M:1);let i=le.value,a=ie.value,s=H.value,r=G.value;const u=10;U.value==="se"?(i=Math.max(u,le.value+n),a=Math.max(u,ie.value+o)):U.value==="ne"?(i=Math.max(u,le.value+n),a=Math.max(u,ie.value-o),r=G.value+o):U.value==="sw"?(i=Math.max(u,le.value-n),a=Math.max(u,ie.value+o),s=H.value+n):U.value==="nw"&&(i=Math.max(u,le.value-n),a=Math.max(u,ie.value-o),s=H.value+n,r=G.value+o),i=Math.min(i,e.config.width-s),a=Math.min(a,e.config.height-r);const g=s,d=r,b=s+i,p=r+a,S=s+i/2,v=r+a/2;x("show-guidelines",{left:g,top:d,right:b,bottom:p,centerX:S,centerY:v}),x("update:size",{id:e.element.id,width:Math.round(i),height:Math.round(a),left:Math.round(s),top:Math.round(r)})}ae(()=>{var t;(t=Y.value)==null||t.getBoundingClientRect()});function Ie(){if(e.element.type!=="chart"||!pe.value)return;L||(L=ut(pe.value));const t=e.element.chartOption||_e(e.element.chartType||"line");L.setOption(t,!0)}function _e(t){return t==="pie"?{backgroundColor:"transparent",tooltip:{trigger:"item"},legend:{top:"5%",left:"center",textStyle:{color:"#fff"}},series:[{name:"分类占比",type:"pie",radius:["40%","70%"],avoidLabelOverlap:!1,itemStyle:{borderRadius:8,borderColor:"#111",borderWidth:2},label:{show:!0,color:"#fff"},labelLine:{show:!0},data:[{value:1048,name:"A"},{value:735,name:"B"},{value:580,name:"C"},{value:484,name:"D"},{value:300,name:"E"}]}]}:t==="mix"?{backgroundColor:"transparent",color:["#00bcd4","#ff9800"],tooltip:{trigger:"axis"},legend:{textStyle:{color:"#fff"}},xAxis:{type:"category",data:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],axisLine:{lineStyle:{color:"#888"}},axisLabel:{color:"#ccc"}},yAxis:{type:"value",axisLine:{lineStyle:{color:"#888"}},axisLabel:{color:"#ccc"}},series:[{name:"销量",type:"bar",data:[120,200,150,80,70,110,130],itemStyle:{borderRadius:[4,4,0,0]}},{name:"均价",type:"line",smooth:!0,data:[30,40,45,50,49,60,70],lineStyle:{width:2}}]}:t==="bar"?{backgroundColor:"transparent",color:["#42b883"],tooltip:{trigger:"axis"},xAxis:{type:"category",data:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],axisLine:{lineStyle:{color:"#888"}},axisLabel:{color:"#ccc"}},yAxis:{type:"value",axisLine:{lineStyle:{color:"#888"}},axisLabel:{color:"#ccc"}},series:[{type:"bar",data:[120,200,150,80,70,110,130],itemStyle:{borderRadius:[4,4,0,0]}}]}:{backgroundColor:"transparent",color:["#42b883"],tooltip:{trigger:"axis"},xAxis:{type:"category",data:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],axisLine:{lineStyle:{color:"#888"}},axisLabel:{color:"#ccc"}},yAxis:{type:"value",axisLine:{lineStyle:{color:"#888"}},axisLabel:{color:"#ccc"}},series:[{type:"line",smooth:!0,data:[150,230,224,218,135,147,260],lineStyle:{width:2}}]}}Be(()=>{Ie()}),oe(()=>e.element.type,()=>{e.element.type==="chart"?ae(Ie):L&&(L.dispose(),L=null)}),oe(()=>e.element.chartOption,t=>{L&&e.element.type==="chart"&&t&&L.setOption(t,!0)},{deep:!0}),oe(()=>[e.element.width,e.element.height,e.element.left,e.element.top],()=>{L&&ae(()=>L&&L.resize())});const q=C(0);let we=null;function xe(){var t,n;if(me(),e.element.type==="carousel"&&((t=e.element.carouselConfig)!=null&&t.autoplay)&&((n=e.element.slides)!=null&&n.length)){const o=Math.max(1e3,e.element.carouselConfig.interval||3e3);we=setInterval(()=>{e.element.slides&&(q.value=(q.value+1)%e.element.slides.length)},o)}}function me(){we&&(clearInterval(we),we=null)}function et(){var t,n;(t=e.element.slides)!=null&&t.length&&(me(),q.value=(q.value-1+e.element.slides.length)%e.element.slides.length,(n=e.element.carouselConfig)!=null&&n.autoplay&&xe())}function tt(){var t,n;(t=e.element.slides)!=null&&t.length&&(me(),q.value=(q.value+1)%e.element.slides.length,(n=e.element.carouselConfig)!=null&&n.autoplay&&xe())}const nt=O(()=>{var n;if(e.element.type!=="carousel"||!((n=e.element.carouselConfig)!=null&&n.textStyle))return{};const t=e.element.carouselConfig.textStyle;return{color:t.color,fontSize:(t.fontSize||14)+"px",fontWeight:t.fontWeight,fontFamily:t.fontFamily}});oe(()=>{var t,n;return[e.element.type,(t=e.element.carouselConfig)==null?void 0:t.autoplay,(n=e.element.carouselConfig)==null?void 0:n.interval,e.element.slides]},()=>{e.element.type==="carousel"?xe():me()},{deep:!0}),Be(()=>{e.element.type==="carousel"&&xe()}),Ae(()=>{me()});function Oe(t){const n=!!e.parentSize,o=n&&e.parentOffset?e.parentOffset.left:0,i=n&&e.parentOffset?e.parentOffset.top:0;x("show-guidelines",{left:t.left+o,top:t.top+i,right:t.right+o,bottom:t.bottom+i,centerX:t.centerX+o,centerY:t.centerY+i})}return(t,n)=>{var i,a,s,r,u,g,d,b,p,S,v,h,M,N,$,F,I,W,Z,_,V,J,y,w,D,X,P,R;const o=at("DraggableBox",!0);return lt((c(),m("div",{class:te(Ge.value),style:ee(He.value),onMousedown:Re,onClick:Ye,ref_key:"elRef",ref:Y,"data-el-id":e.element.id,"data-box-id":e.element.id},[l.selected?(c(),m("div",dt)):T("",!0),k("div",ft,[l.element.type==="group"&&l.preview?(c(),m("div",mt,[(c(!0),m(K,null,he(l.element.children||[],f=>(c(),Le(o,{key:f.id,element:f,selected:!1,config:l.config,zoom:l.zoom,dbMap:l.dbMap,preview:!0},null,8,["element","config","zoom","dbMap"]))),128))])):l.element.type==="group"&&l.element.editable?(c(),m("div",ht,[(c(!0),m(K,null,he(l.element.children||[],f=>(c(),Le(o,{key:f.id,element:f,selected:l.selectedId===f.id,"selected-id":l.selectedId,config:l.config,zoom:l.zoom,dbMap:l.dbMap,"metrics-map":void 0,preview:De(f),"parent-offset":{left:l.element.left,top:l.element.top},"parent-size":{width:l.element.width||1,height:l.element.height||1},"parent-is-flex":Pe.value,onSelect:n[0]||(n[0]=z=>x("select",z)),"onUpdate:position":n[1]||(n[1]=z=>x("update:position",z)),"onUpdate:size":n[2]||(n[2]=z=>x("update:size",z)),onShowGuidelines:Oe,onHideGuidelines:n[3]||(n[3]=()=>x("hide-guidelines")),onReportMetrics:n[4]||(n[4]=z=>x("report-metrics",z))},null,8,["element","selected","selected-id","config","zoom","dbMap","preview","parent-offset","parent-size","parent-is-flex"]))),128))])):T("",!0),l.element.type==="text"?(c(),m("div",{key:2,class:te(["w-full h-full",l.element.className].filter(Boolean).join(" ")),style:ee(Ue.value)},[Fe.value?(c(!0),m(K,{key:0},he(Fe.value,(f,z)=>(c(),m(K,{key:z},[f.type==="br"?(c(),m("br",yt)):(c(),m("span",{key:1,style:ee(f.style)},se(f.ch),5))],64))),128)):l.element.segments&&l.element.segments.length?(c(!0),m(K,{key:1},he(l.element.segments,(f,z)=>(c(),m("span",{key:f.id||z,style:ee(Ze(f))},se(Qe(f)),5))),128)):(c(),m(K,{key:2},[ot(se(ge.value),1)],64))],6)):l.element.type==="carousel"?(c(),m("div",vt,[(i=l.element.carouselConfig)!=null&&i.frameNormal?(c(),m("div",gt,[k("img",{src:l.element.carouselConfig.frameNormal,class:"w-full h-full object-fill",alt:""},null,8,bt)])):T("",!0),l.element.slides&&l.element.slides.length?(c(),m("div",wt,[k("div",xt,[k("img",{src:(a=l.element.slides[q.value])==null?void 0:a.src,class:"max-w-[80%] max-h-[80%] object-contain transition-opacity duration-500",alt:""},null,8,pt),(s=l.element.carouselConfig)!=null&&s.frameHighlight?(c(),m("div",St,[k("img",{src:l.element.carouselConfig.frameHighlight,class:"w-full h-full object-fill",alt:""},null,8,Mt)])):T("",!0)])])):T("",!0),(r=l.element.carouselConfig)!=null&&r.arrowLeft?(c(),m("div",{key:2,class:"absolute inset-y-0 left-0 flex items-center pl-2 z-20 cursor-pointer hover:scale-110 transition-transform",onClick:re(et,["stop"])},[k("img",{src:l.element.carouselConfig.arrowLeft,class:"w-8 h-8 object-contain"},null,8,kt)])):T("",!0),(u=l.element.carouselConfig)!=null&&u.arrowRight?(c(),m("div",{key:3,class:"absolute inset-y-0 right-0 flex items-center pr-2 z-20 cursor-pointer hover:scale-110 transition-transform",onClick:re(tt,["stop"])},[k("img",{src:l.element.carouselConfig.arrowRight,class:"w-8 h-8 object-contain"},null,8,zt)])):T("",!0),k("div",{class:"absolute bottom-4 w-full text-center z-20 pointer-events-none",style:ee(nt.value)},se(((d=(g=l.element.slides)==null?void 0:g[q.value])==null?void 0:d.text)||""),5)])):l.element.type==="image"?(c(),m("img",{key:4,src:l.element.highlightEnabled&&l.element.highlightSrc?l.element.highlightSrc:l.element.src,class:te([fe.value?"block max-w-none max-h-none":"w-full h-full",((b=l.element.style)==null?void 0:b.objectFit)==="contain"?"object-contain":((p=l.element.style)==null?void 0:p.objectFit)==="fill"?"object-fill":((S=l.element.style)==null?void 0:S.objectFit)==="scale-down"?"object-scale-down":((v=l.element.style)==null?void 0:v.objectFit)==="none"?"object-none":"object-cover",l.element.className].filter(Boolean).join(" ")),alt:"Image element"},null,10,Ct)):l.element.type==="arc-text"?(c(),m("svg",{key:5,class:te(["w-full h-full",l.element.className].filter(Boolean).join(" ")),style:{display:"block"},width:l.element.width||1,height:l.element.height||1,xmlns:"http://www.w3.org/2000/svg"},[k("defs",null,[k("path",{id:`arc-${l.element.id}`,d:Ve.value,fill:"none"},null,8,Lt)]),k("text",{style:ee(qe.value)},[k("textPath",{href:`#arc-${l.element.id}`,startOffset:Je.value,"text-anchor":Ke.value},se(ge.value),9,Bt)],4)],10,Nt)):l.element.type==="chart"?(c(),m("div",{key:6,class:te(["w-full h-full bg-gray-800/50 rounded",l.element.className].filter(Boolean).join(" ")),id:l.element.elementId||void 0},[k("div",{ref_key:"chartRef",ref:pe,class:"w-full h-full"},null,512)],10,jt)):l.element.type==="container"?(c(),m("div",{key:7,class:te(["w-full h-full relative",l.element.className].filter(Boolean).join(" ")),id:l.element.elementId||void 0,style:ee({display:((h=l.element.style)==null?void 0:h.display)||"block",flexDirection:(M=l.element.style)==null?void 0:M.flexDirection,justifyContent:(N=l.element.style)==null?void 0:N.justifyContent,alignItems:($=l.element.style)==null?void 0:$.alignItems,gap:(F=l.element.style)!=null&&F.gap?`${l.element.style.gap}px`:void 0})},[(c(!0),m(K,null,he(l.element.children||[],f=>{var z;return c(),Le(o,{key:f.id,element:f,selected:l.selectedId===f.id,"selected-id":l.selectedId,config:l.config,zoom:l.zoom,dbMap:l.dbMap,"metrics-map":void 0,preview:l.preview,"parent-offset":{left:l.element.left,top:l.element.top},"parent-size":{width:l.element.width||1,height:l.element.height||1},"parent-is-flex":(((z=l.element.style)==null?void 0:z.display)||"block")==="flex",onSelect:n[5]||(n[5]=A=>x("select",A)),"onUpdate:position":n[6]||(n[6]=A=>x("update:position",A)),"onUpdate:size":n[7]||(n[7]=A=>x("update:size",A)),onShowGuidelines:Oe,onHideGuidelines:n[8]||(n[8]=()=>x("hide-guidelines")),onReportMetrics:n[9]||(n[9]=A=>x("report-metrics",A)),onDragEnd:n[10]||(n[10]=A=>x("drag-end",A))},null,8,["element","selected","selected-id","config","zoom","dbMap","preview","parent-offset","parent-size","parent-is-flex"])}),128)),!l.preview&&(l.element.text||"").trim()&&(!l.element.children||l.element.children.length===0)?(c(),m("div",Ft,se(l.element.text),1)):T("",!0)],14,$t)):l.element.type==="line"?(c(),m("svg",{key:8,class:te(["w-full h-full",l.element.className].filter(Boolean).join(" ")),style:{display:"block"},width:l.element.width||1,height:l.element.height||1,xmlns:"http://www.w3.org/2000/svg"},[k("line",{x1:(((I=l.element.style)==null?void 0:I.lineOrientation)||"horizontal")==="vertical"?(l.element.width||1)/2:0,y1:(((W=l.element.style)==null?void 0:W.lineOrientation)||"horizontal")==="vertical"?0:(l.element.height||1)/2,x2:(((Z=l.element.style)==null?void 0:Z.lineOrientation)||"horizontal")==="vertical"?(l.element.width||1)/2:l.element.width||1,y2:(((_=l.element.style)==null?void 0:_.lineOrientation)||"horizontal")==="vertical"?l.element.height||1:(l.element.height||1)/2,stroke:((V=l.element.style)==null?void 0:V.lineColor)||"#42b883","stroke-width":(y=(J=l.element.style)==null?void 0:J.lineThickness)!=null?y:2,"stroke-dasharray":((w=l.element.style)==null?void 0:w.lineStyle)==="dashed"?`${(X=(D=l.element.style)==null?void 0:D.lineDashLength)!=null?X:6} ${(R=(P=l.element.style)==null?void 0:P.lineDashGap)!=null?R:4}`:void 0,"stroke-linecap":"round"},null,8,Ot)],10,It)):T("",!0)]),l.selected?(c(),m("div",At)):T("",!0),l.selected?(c(),m("div",Tt)):T("",!0),l.selected&&(!fe.value||l.element.type==="chart")?(c(),m(K,{key:3},[k("div",{class:"absolute w-2 h-2 bg-emerald-500 rounded -left-1 -top-1 cursor-nwse-resize z-20",onMousedown:n[11]||(n[11]=re(f=>be("nw",f),["stop"]))},null,32),k("div",{class:"absolute w-2 h-2 bg-emerald-500 rounded -right-1 -top-1 cursor-nesw-resize z-20",onMousedown:n[12]||(n[12]=re(f=>be("ne",f),["stop"]))},null,32),k("div",{class:"absolute w-2 h-2 bg-emerald-500 rounded -left-1 -bottom-1 cursor-nesw-resize z-20",onMousedown:n[13]||(n[13]=re(f=>be("sw",f),["stop"]))},null,32),k("div",{class:"absolute w-2 h-2 bg-emerald-500 rounded -right-1 -bottom-1 cursor-nwse-resize z-20",onMousedown:n[14]||(n[14]=re(f=>be("se",f),["stop"]))},null,32)],64)):T("",!0)],46,ct)),[[st,e.element.hidden!==!0]])}}}),Et=rt(Dt,[["__scopeId","data-v-eee8c320"]]);export{Et as t};
